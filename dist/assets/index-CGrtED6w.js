function Pd(s,r){for(var a=0;a<r.length;a++){const c=r[a];if(typeof c!="string"&&!Array.isArray(c)){for(const d in c)if(d!=="default"&&!(d in s)){const g=Object.getOwnPropertyDescriptor(c,d);g&&Object.defineProperty(s,d,g.get?g:{enumerable:!0,get:()=>c[d]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&c(x)}).observe(document,{childList:!0,subtree:!0});function a(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function c(d){if(d.ep)return;d.ep=!0;const g=a(d);fetch(d.href,g)}})();var du=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vu(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Fy(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var r=s.default;if(typeof r=="function"){var a=function c(){var d=!1;try{d=this instanceof c}catch{}return d?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};a.prototype=r.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(s).forEach(function(c){var d=Object.getOwnPropertyDescriptor(s,c);Object.defineProperty(a,c,d.get?d:{enumerable:!0,get:function(){return s[c]}})}),a}var Xh={exports:{}},To={};var lm;function zy(){if(lm)return To;lm=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(c,d,g){var x=null;if(g!==void 0&&(x=""+g),d.key!==void 0&&(x=""+d.key),"key"in d){g={};for(var b in d)b!=="key"&&(g[b]=d[b])}else g=d;return d=g.ref,{$$typeof:s,type:c,key:x,ref:d!==void 0?d:null,props:g}}return To.Fragment=r,To.jsx=a,To.jsxs=a,To}var om;function Hy(){return om||(om=1,Xh.exports=zy()),Xh.exports}var C=Hy(),Yh={exports:{}},No={},Wh={exports:{}},Kh={};var cm;function Vy(){return cm||(cm=1,(function(s){function r(ne,Q){var fe=ne.length;ne.push(Q);e:for(;0<fe;){var Ne=fe-1>>>1,Fe=ne[Ne];if(0<d(Fe,Q))ne[Ne]=Q,ne[fe]=Fe,fe=Ne;else break e}}function a(ne){return ne.length===0?null:ne[0]}function c(ne){if(ne.length===0)return null;var Q=ne[0],fe=ne.pop();if(fe!==Q){ne[0]=fe;e:for(var Ne=0,Fe=ne.length,X=Fe>>>1;Ne<X;){var pe=2*(Ne+1)-1,Ie=ne[pe],Pe=pe+1,et=ne[Pe];if(0>d(Ie,fe))Pe<Fe&&0>d(et,Ie)?(ne[Ne]=et,ne[Pe]=fe,Ne=Pe):(ne[Ne]=Ie,ne[pe]=fe,Ne=pe);else if(Pe<Fe&&0>d(et,fe))ne[Ne]=et,ne[Pe]=fe,Ne=Pe;else break e}}return Q}function d(ne,Q){var fe=ne.sortIndex-Q.sortIndex;return fe!==0?fe:ne.id-Q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;s.unstable_now=function(){return g.now()}}else{var x=Date,b=x.now();s.unstable_now=function(){return x.now()-b}}var _=[],w=[],T=1,S=null,M=3,B=!1,U=!1,z=!1,H=!1,$=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function oe(ne){for(var Q=a(w);Q!==null;){if(Q.callback===null)c(w);else if(Q.startTime<=ne)c(w),Q.sortIndex=Q.expirationTime,r(_,Q);else break;Q=a(w)}}function xe(ne){if(z=!1,oe(ne),!U)if(a(_)!==null)U=!0,se||(se=!0,ue());else{var Q=a(w);Q!==null&&K(xe,Q.startTime-ne)}}var se=!1,R=-1,W=5,L=-1;function he(){return H?!0:!(s.unstable_now()-L<W)}function re(){if(H=!1,se){var ne=s.unstable_now();L=ne;var Q=!0;try{e:{U=!1,z&&(z=!1,te(R),R=-1),B=!0;var fe=M;try{t:{for(oe(ne),S=a(_);S!==null&&!(S.expirationTime>ne&&he());){var Ne=S.callback;if(typeof Ne=="function"){S.callback=null,M=S.priorityLevel;var Fe=Ne(S.expirationTime<=ne);if(ne=s.unstable_now(),typeof Fe=="function"){S.callback=Fe,oe(ne),Q=!0;break t}S===a(_)&&c(_),oe(ne)}else c(_);S=a(_)}if(S!==null)Q=!0;else{var X=a(w);X!==null&&K(xe,X.startTime-ne),Q=!1}}break e}finally{S=null,M=fe,B=!1}Q=void 0}}finally{Q?ue():se=!1}}}var ue;if(typeof G=="function")ue=function(){G(re)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Oe=Ee.port2;Ee.port1.onmessage=re,ue=function(){Oe.postMessage(null)}}else ue=function(){$(re,0)};function K(ne,Q){R=$(function(){ne(s.unstable_now())},Q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ne){ne.callback=null},s.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ne?Math.floor(1e3/ne):5},s.unstable_getCurrentPriorityLevel=function(){return M},s.unstable_next=function(ne){switch(M){case 1:case 2:case 3:var Q=3;break;default:Q=M}var fe=M;M=Q;try{return ne()}finally{M=fe}},s.unstable_requestPaint=function(){H=!0},s.unstable_runWithPriority=function(ne,Q){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var fe=M;M=ne;try{return Q()}finally{M=fe}},s.unstable_scheduleCallback=function(ne,Q,fe){var Ne=s.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ne+fe:Ne):fe=Ne,ne){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=fe+Fe,ne={id:T++,callback:Q,priorityLevel:ne,startTime:fe,expirationTime:Fe,sortIndex:-1},fe>Ne?(ne.sortIndex=fe,r(w,ne),a(_)===null&&ne===a(w)&&(z?(te(R),R=-1):z=!0,K(xe,fe-Ne))):(ne.sortIndex=Fe,r(_,ne),U||B||(U=!0,se||(se=!0,ue()))),ne},s.unstable_shouldYield=he,s.unstable_wrapCallback=function(ne){var Q=M;return function(){var fe=M;M=Q;try{return ne.apply(this,arguments)}finally{M=fe}}}})(Kh)),Kh}var um;function Gy(){return um||(um=1,Wh.exports=Vy()),Wh.exports}var Zh={exports:{}},gt={};var fm;function qy(){if(fm)return gt;fm=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),M=Symbol.iterator;function B(X){return X===null||typeof X!="object"?null:(X=M&&X[M]||X["@@iterator"],typeof X=="function"?X:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,H={};function $(X,pe,Ie){this.props=X,this.context=pe,this.refs=H,this.updater=Ie||U}$.prototype.isReactComponent={},$.prototype.setState=function(X,pe){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,pe,"setState")},$.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function te(){}te.prototype=$.prototype;function G(X,pe,Ie){this.props=X,this.context=pe,this.refs=H,this.updater=Ie||U}var oe=G.prototype=new te;oe.constructor=G,z(oe,$.prototype),oe.isPureReactComponent=!0;var xe=Array.isArray;function se(){}var R={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function L(X,pe,Ie){var Pe=Ie.ref;return{$$typeof:s,type:X,key:pe,ref:Pe!==void 0?Pe:null,props:Ie}}function he(X,pe){return L(X.type,pe,X.props)}function re(X){return typeof X=="object"&&X!==null&&X.$$typeof===s}function ue(X){var pe={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ie){return pe[Ie]})}var Ee=/\/+/g;function Oe(X,pe){return typeof X=="object"&&X!==null&&X.key!=null?ue(""+X.key):pe.toString(36)}function K(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(se,se):(X.status="pending",X.then(function(pe){X.status==="pending"&&(X.status="fulfilled",X.value=pe)},function(pe){X.status==="pending"&&(X.status="rejected",X.reason=pe)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function ne(X,pe,Ie,Pe,et){var je=typeof X;(je==="undefined"||je==="boolean")&&(X=null);var Et=!1;if(X===null)Et=!0;else switch(je){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(X.$$typeof){case s:case r:Et=!0;break;case T:return Et=X._init,ne(Et(X._payload),pe,Ie,Pe,et)}}if(Et)return et=et(X),Et=Pe===""?"."+Oe(X,0):Pe,xe(et)?(Ie="",Et!=null&&(Ie=Et.replace(Ee,"$&/")+"/"),ne(et,pe,Ie,"",function(Nr){return Nr})):et!=null&&(re(et)&&(et=he(et,Ie+(et.key==null||X&&X.key===et.key?"":(""+et.key).replace(Ee,"$&/")+"/")+Et)),pe.push(et)),1;Et=0;var wt=Pe===""?".":Pe+":";if(xe(X))for(var Wt=0;Wt<X.length;Wt++)Pe=X[Wt],je=wt+Oe(Pe,Wt),Et+=ne(Pe,pe,Ie,je,et);else if(Wt=B(X),typeof Wt=="function")for(X=Wt.call(X),Wt=0;!(Pe=X.next()).done;)Pe=Pe.value,je=wt+Oe(Pe,Wt++),Et+=ne(Pe,pe,Ie,je,et);else if(je==="object"){if(typeof X.then=="function")return ne(K(X),pe,Ie,Pe,et);throw pe=String(X),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.")}return Et}function Q(X,pe,Ie){if(X==null)return X;var Pe=[],et=0;return ne(X,Pe,"","",function(je){return pe.call(Ie,je,et++)}),Pe}function fe(X){if(X._status===-1){var pe=X._result;pe=pe(),pe.then(function(Ie){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ie)},function(Ie){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ie)}),X._status===-1&&(X._status=0,X._result=pe)}if(X._status===1)return X._result.default;throw X._result}var Ne=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},Fe={map:Q,forEach:function(X,pe,Ie){Q(X,function(){pe.apply(this,arguments)},Ie)},count:function(X){var pe=0;return Q(X,function(){pe++}),pe},toArray:function(X){return Q(X,function(pe){return pe})||[]},only:function(X){if(!re(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return gt.Activity=S,gt.Children=Fe,gt.Component=$,gt.Fragment=a,gt.Profiler=d,gt.PureComponent=G,gt.StrictMode=c,gt.Suspense=_,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,gt.__COMPILER_RUNTIME={__proto__:null,c:function(X){return R.H.useMemoCache(X)}},gt.cache=function(X){return function(){return X.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(X,pe,Ie){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Pe=z({},X.props),et=X.key;if(pe!=null)for(je in pe.key!==void 0&&(et=""+pe.key),pe)!W.call(pe,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&pe.ref===void 0||(Pe[je]=pe[je]);var je=arguments.length-2;if(je===1)Pe.children=Ie;else if(1<je){for(var Et=Array(je),wt=0;wt<je;wt++)Et[wt]=arguments[wt+2];Pe.children=Et}return L(X.type,et,Pe)},gt.createContext=function(X){return X={$$typeof:x,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:g,_context:X},X},gt.createElement=function(X,pe,Ie){var Pe,et={},je=null;if(pe!=null)for(Pe in pe.key!==void 0&&(je=""+pe.key),pe)W.call(pe,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(et[Pe]=pe[Pe]);var Et=arguments.length-2;if(Et===1)et.children=Ie;else if(1<Et){for(var wt=Array(Et),Wt=0;Wt<Et;Wt++)wt[Wt]=arguments[Wt+2];et.children=wt}if(X&&X.defaultProps)for(Pe in Et=X.defaultProps,Et)et[Pe]===void 0&&(et[Pe]=Et[Pe]);return L(X,je,et)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(X){return{$$typeof:b,render:X}},gt.isValidElement=re,gt.lazy=function(X){return{$$typeof:T,_payload:{_status:-1,_result:X},_init:fe}},gt.memo=function(X,pe){return{$$typeof:w,type:X,compare:pe===void 0?null:pe}},gt.startTransition=function(X){var pe=R.T,Ie={};R.T=Ie;try{var Pe=X(),et=R.S;et!==null&&et(Ie,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(se,Ne)}catch(je){Ne(je)}finally{pe!==null&&Ie.types!==null&&(pe.types=Ie.types),R.T=pe}},gt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},gt.use=function(X){return R.H.use(X)},gt.useActionState=function(X,pe,Ie){return R.H.useActionState(X,pe,Ie)},gt.useCallback=function(X,pe){return R.H.useCallback(X,pe)},gt.useContext=function(X){return R.H.useContext(X)},gt.useDebugValue=function(){},gt.useDeferredValue=function(X,pe){return R.H.useDeferredValue(X,pe)},gt.useEffect=function(X,pe){return R.H.useEffect(X,pe)},gt.useEffectEvent=function(X){return R.H.useEffectEvent(X)},gt.useId=function(){return R.H.useId()},gt.useImperativeHandle=function(X,pe,Ie){return R.H.useImperativeHandle(X,pe,Ie)},gt.useInsertionEffect=function(X,pe){return R.H.useInsertionEffect(X,pe)},gt.useLayoutEffect=function(X,pe){return R.H.useLayoutEffect(X,pe)},gt.useMemo=function(X,pe){return R.H.useMemo(X,pe)},gt.useOptimistic=function(X,pe){return R.H.useOptimistic(X,pe)},gt.useReducer=function(X,pe,Ie){return R.H.useReducer(X,pe,Ie)},gt.useRef=function(X){return R.H.useRef(X)},gt.useState=function(X){return R.H.useState(X)},gt.useSyncExternalStore=function(X,pe,Ie){return R.H.useSyncExternalStore(X,pe,Ie)},gt.useTransition=function(){return R.H.useTransition()},gt.version="19.2.0",gt}var hm;function Ud(){return hm||(hm=1,Zh.exports=qy()),Zh.exports}var Qh={exports:{}},or={};var dm;function Xy(){if(dm)return or;dm=1;var s=Ud();function r(_){var w="https://react.dev/errors/"+_;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)w+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+_+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var c={d:{f:a,r:function(){throw Error(r(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},d=Symbol.for("react.portal");function g(_,w,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:S==null?null:""+S,children:_,containerInfo:w,implementation:T}}var x=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(_,w){if(_==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,or.createPortal=function(_,w){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(r(299));return g(_,w,null,T)},or.flushSync=function(_){var w=x.T,T=c.p;try{if(x.T=null,c.p=2,_)return _()}finally{x.T=w,c.p=T,c.d.f()}},or.preconnect=function(_,w){typeof _=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,c.d.C(_,w))},or.prefetchDNS=function(_){typeof _=="string"&&c.d.D(_)},or.preinit=function(_,w){if(typeof _=="string"&&w&&typeof w.as=="string"){var T=w.as,S=b(T,w.crossOrigin),M=typeof w.integrity=="string"?w.integrity:void 0,B=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;T==="style"?c.d.S(_,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:S,integrity:M,fetchPriority:B}):T==="script"&&c.d.X(_,{crossOrigin:S,integrity:M,fetchPriority:B,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},or.preinitModule=function(_,w){if(typeof _=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var T=b(w.as,w.crossOrigin);c.d.M(_,{crossOrigin:T,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&c.d.M(_)},or.preload=function(_,w){if(typeof _=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var T=w.as,S=b(T,w.crossOrigin);c.d.L(_,T,{crossOrigin:S,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},or.preloadModule=function(_,w){if(typeof _=="string")if(w){var T=b(w.as,w.crossOrigin);c.d.m(_,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:T,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else c.d.m(_)},or.requestFormReset=function(_){c.d.r(_)},or.unstable_batchedUpdates=function(_,w){return _(w)},or.useFormState=function(_,w,T){return x.H.useFormState(_,w,T)},or.useFormStatus=function(){return x.H.useHostTransitionStatus()},or.version="19.2.0",or}var gm;function F2(){if(gm)return Qh.exports;gm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Qh.exports=Xy(),Qh.exports}var mm;function Yy(){if(mm)return No;mm=1;var s=Gy(),r=Ud(),a=F2();function c(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function x(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function b(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(g(e)!==e)throw Error(c(188))}function w(e){var n=e.alternate;if(!n){if(n=g(e),n===null)throw Error(c(188));return n!==e?null:e}for(var o=e,h=n;;){var y=o.return;if(y===null)break;var E=y.alternate;if(E===null){if(h=y.return,h!==null){o=h;continue}break}if(y.child===E.child){for(E=y.child;E;){if(E===o)return _(y),e;if(E===h)return _(y),n;E=E.sibling}throw Error(c(188))}if(o.return!==h.return)o=y,h=E;else{for(var O=!1,k=y.child;k;){if(k===o){O=!0,o=y,h=E;break}if(k===h){O=!0,h=y,o=E;break}k=k.sibling}if(!O){for(k=E.child;k;){if(k===o){O=!0,o=E,h=y;break}if(k===h){O=!0,h=E,o=y;break}k=k.sibling}if(!O)throw Error(c(189))}}if(o.alternate!==h)throw Error(c(190))}if(o.tag!==3)throw Error(c(188));return o.stateNode.current===o?e:n}function T(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=T(e),n!==null)return n;e=e.sibling}return null}var S=Object.assign,M=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),G=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function ue(e){return e===null||typeof e!="object"?null:(e=re&&e[re]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Symbol.for("react.client.reference");function Oe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ee?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case $:return"Profiler";case H:return"StrictMode";case xe:return"Suspense";case se:return"SuspenseList";case L:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case G:return e.displayName||"Context";case te:return(e._context.displayName||"Context")+".Consumer";case oe:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return n=e.displayName||null,n!==null?n:Oe(e.type)||"Memo";case W:n=e._payload,e=e._init;try{return Oe(e(n))}catch{}}return null}var K=Array.isArray,ne=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ne=[],Fe=-1;function X(e){return{current:e}}function pe(e){0>Fe||(e.current=Ne[Fe],Ne[Fe]=null,Fe--)}function Ie(e,n){Fe++,Ne[Fe]=e.current,e.current=n}var Pe=X(null),et=X(null),je=X(null),Et=X(null);function wt(e,n){switch(Ie(je,n),Ie(et,e),Ie(Pe,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Rg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Rg(n),e=Ig(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}pe(Pe),Ie(Pe,e)}function Wt(){pe(Pe),pe(et),pe(je)}function Nr(e){e.memoizedState!==null&&Ie(Et,e);var n=Pe.current,o=Ig(n,e.type);n!==o&&(Ie(et,e),Ie(Pe,o))}function Tn(e){et.current===e&&(pe(Pe),pe(et)),Et.current===e&&(pe(Et),_o._currentValue=fe)}var un,xt;function Kn(e){if(un===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);un=n&&n[1]||"",xt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+un+e+xt}var ir=!1;function Zn(e,n){if(!e||ir)return"";ir=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(n){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(ve){var ye=ve}Reflect.construct(e,[],Te)}else{try{Te.call()}catch(ve){ye=ve}e.call(Te.prototype)}}else{try{throw Error()}catch(ve){ye=ve}(Te=e())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(ve){if(ve&&ye&&typeof ve.stack=="string")return[ve.stack,ye.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),O=E[0],k=E[1];if(O&&k){var q=O.split(`
`),me=k.split(`
`);for(y=h=0;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;for(;y<me.length&&!me[y].includes("DetermineComponentFrameRoot");)y++;if(h===q.length||y===me.length)for(h=q.length-1,y=me.length-1;1<=h&&0<=y&&q[h]!==me[y];)y--;for(;1<=h&&0<=y;h--,y--)if(q[h]!==me[y]){if(h!==1||y!==1)do if(h--,y--,0>y||q[h]!==me[y]){var Ae=`
`+q[h].replace(" at new "," at ");return e.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",e.displayName)),Ae}while(1<=h&&0<=y);break}}}finally{ir=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?Kn(o):""}function Nn(e,n){switch(e.tag){case 26:case 27:case 5:return Kn(e.type);case 16:return Kn("Lazy");case 13:return e.child!==n&&n!==null?Kn("Suspense Fallback"):Kn("Suspense");case 19:return Kn("SuspenseList");case 0:case 15:return Zn(e.type,!1);case 11:return Zn(e.type.render,!1);case 1:return Zn(e.type,!0);case 31:return Kn("Activity");default:return""}}function Ut(e){try{var n="",o=null;do n+=Nn(e,o),o=e,e=e.return;while(e);return n}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var bt=Object.prototype.hasOwnProperty,yi=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,oa=s.unstable_shouldYield,js=s.unstable_requestPaint,Ft=s.unstable_now,li=s.unstable_getCurrentPriorityLevel,Qn=s.unstable_ImmediatePriority,Mi=s.unstable_UserBlockingPriority,bn=s.unstable_NormalPriority,tn=s.unstable_LowPriority,ca=s.unstable_IdlePriority,ua=s.log,is=s.unstable_setDisableYieldValue,Qt=null,Me=null;function zt(e){if(typeof ua=="function"&&is(e),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Qt,e)}catch{}}var dt=Math.clz32?Math.clz32:fa,nn=Math.log,Bi=Math.LN2;function fa(e){return e>>>=0,e===0?32:31-(nn(e)/Bi|0)|0}var qr=256,_t=262144,ar=4194304;function Xr(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function wi(e,n,o){var h=e.pendingLanes;if(h===0)return 0;var y=0,E=e.suspendedLanes,O=e.pingedLanes;e=e.warmLanes;var k=h&134217727;return k!==0?(h=k&~E,h!==0?y=Xr(h):(O&=k,O!==0?y=Xr(O):o||(o=k&~e,o!==0&&(y=Xr(o))))):(k=h&~E,k!==0?y=Xr(k):O!==0?y=Xr(O):o||(o=h&~e,o!==0&&(y=Xr(o)))),y===0?0:n!==0&&n!==y&&(n&E)===0&&(E=y&-y,o=n&-n,E>=o||E===32&&(o&4194048)!==0)?n:y}function Hn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function ha(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xn(){var e=ar;return ar<<=1,(ar&62914560)===0&&(ar=4194304),e}function fr(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function Or(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function yr(e,n,o,h,y,E){var O=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var k=e.entanglements,q=e.expirationTimes,me=e.hiddenUpdates;for(o=O&~o;0<o;){var Ae=31-dt(o),Te=1<<Ae;k[Ae]=0,q[Ae]=-1;var ye=me[Ae];if(ye!==null)for(me[Ae]=null,Ae=0;Ae<ye.length;Ae++){var ve=ye[Ae];ve!==null&&(ve.lane&=-536870913)}o&=~Te}h!==0&&ks(e,h,0),E!==0&&y===0&&e.tag!==0&&(e.suspendedLanes|=E&~(O&~n))}function ks(e,n,o){e.pendingLanes|=n,e.suspendedLanes&=~n;var h=31-dt(n);e.entangledLanes|=n,e.entanglements[h]=e.entanglements[h]|1073741824|o&261930}function V(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var h=31-dt(o),y=1<<h;y&n|e[h]&n&&(e[h]|=n),o&=~y}}function ie(e,n){var o=n&-n;return o=(o&42)!==0?1:de(o),(o&(e.suspendedLanes|n))!==0?0:o}function de(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function De(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ke(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:em(e.type))}function _e(e,n){var o=Q.p;try{return Q.p=e,n()}finally{Q.p=o}}var He=Math.random().toString(36).slice(2),ze="__reactFiber$"+He,Ue="__reactProps$"+He,qe="__reactContainer$"+He,Ke="__reactEvents$"+He,Qe="__reactListeners$"+He,ut="__reactHandles$"+He,Ht="__reactResources$"+He,rn="__reactMarker$"+He;function kt(e){delete e[ze],delete e[Ue],delete e[Ke],delete e[Qe],delete e[ut]}function ct(e){var n=e[ze];if(n)return n;for(var o=e.parentNode;o;){if(n=o[qe]||o[ze]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=Pg(e);e!==null;){if(o=e[ze])return o;e=Pg(e)}return n}e=o,o=e.parentNode}return null}function tt(e){if(e=e[ze]||e[qe]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function sr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(c(33))}function On(e){var n=e[Ht];return n||(n=e[Ht]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Vt(e){e[rn]=!0}var Ce=new Set,da={};function Rt(e,n){Rn(e,n),Rn(e+"Capture",n)}function Rn(e,n){for(da[e]=n,e=0;e<n.length;e++)Ce.add(n[e])}var ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),St={},Ve={};function it(e){return bt.call(Ve,e)?!0:bt.call(St,e)?!1:ga.test(e)?Ve[e]=!0:(St[e]=!0,!1)}function hr(e,n,o){if(it(n))if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var h=n.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+o)}}function lr(e,n,o){if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+o)}}function It(e,n,o,h){if(h===null)e.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(n,o,""+h)}}function Tt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wr(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ll(e,n,o){var h=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,E=h.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return y.call(this)},set:function(O){o=""+O,E.call(this,O)}}),Object.defineProperty(e,n,{enumerable:h.enumerable}),{getValue:function(){return o},setValue:function(O){o=""+O},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function fn(e){if(!e._valueTracker){var n=wr(e)?"checked":"value";e._valueTracker=Ll(e,n,""+e[n])}}function oi(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),h="";return e&&(h=wr(e)?e.checked?"true":"false":e.value),e=h,e!==o?(n.setValue(e),!0):!1}function Ls(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ma=/[\n"\\]/g;function At(e){return e.replace(ma,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function jn(e,n,o,h,y,E,O,k){e.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?e.type=O:e.removeAttribute("type"),n!=null?O==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Tt(n)):e.value!==""+Tt(n)&&(e.value=""+Tt(n)):O!=="submit"&&O!=="reset"||e.removeAttribute("value"),n!=null?P(e,O,Tt(n)):o!=null?P(e,O,Tt(o)):h!=null&&e.removeAttribute("value"),y==null&&E!=null&&(e.defaultChecked=!!E),y!=null&&(e.checked=y&&typeof y!="function"&&typeof y!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?e.name=""+Tt(k):e.removeAttribute("name")}function ce(e,n,o,h,y,E,O,k){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.type=E),n!=null||o!=null){if(!(E!=="submit"&&E!=="reset"||n!=null)){fn(e);return}o=o!=null?""+Tt(o):"",n=n!=null?""+Tt(n):o,k||n===e.value||(e.value=n),e.defaultValue=n}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=k?e.checked:!!h,e.defaultChecked=!!h,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(e.name=O),fn(e)}function P(e,n,o){n==="number"&&Ls(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Ze(e,n,o,h){if(e=e.options,n){n={};for(var y=0;y<o.length;y++)n["$"+o[y]]=!0;for(o=0;o<e.length;o++)y=n.hasOwnProperty("$"+e[o].value),e[o].selected!==y&&(e[o].selected=y),y&&h&&(e[o].defaultSelected=!0)}else{for(o=""+Tt(o),n=null,y=0;y<e.length;y++){if(e[y].value===o){e[y].selected=!0,h&&(e[y].defaultSelected=!0);return}n!==null||e[y].disabled||(n=e[y])}n!==null&&(n.selected=!0)}}function In(e,n,o){if(n!=null&&(n=""+Tt(n),n!==e.value&&(e.value=n),o==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=o!=null?""+Tt(o):""}function dr(e,n,o,h){if(n==null){if(h!=null){if(o!=null)throw Error(c(92));if(K(h)){if(1<h.length)throw Error(c(93));h=h[0]}o=h}o==null&&(o=""),n=o}o=Tt(n),e.defaultValue=o,h=e.textContent,h===o&&h!==""&&h!==null&&(e.value=h),fn(e)}function xa(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var Pl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gr(e,n,o){var h=n.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":h?e.setProperty(n,o):typeof o!="number"||o===0||Pl.has(n)?n==="float"?e.cssFloat=o:e[n]=(""+o).trim():e[n]=o+"px"}function nt(e,n,o){if(n!=null&&typeof n!="object")throw Error(c(62));if(e=e.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||n!=null&&n.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var y in n)h=n[y],n.hasOwnProperty(y)&&o[y]!==h&&gr(e,y,h)}else for(var E in n)n.hasOwnProperty(E)&&gr(e,E,n[E])}function an(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $o=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$u=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pa(e){return $u.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function br(){}var as=null;function Ul(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hn=null,Yr=null;function ci(e){var n=tt(e);if(n&&(e=n.stateNode)){var o=e[Ue]||null;e:switch(e=n.stateNode,n.type){case"input":if(jn(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+At(""+n)+'"][type="radio"]'),n=0;n<o.length;n++){var h=o[n];if(h!==e&&h.form===e.form){var y=h[Ue]||null;if(!y)throw Error(c(90));jn(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(n=0;n<o.length;n++)h=o[n],h.form===e.form&&oi(h)}break e;case"textarea":In(e,o.value,o.defaultValue);break e;case"select":n=o.value,n!=null&&Ze(e,!!o.multiple,n,!1)}}}var at=!1;function ec(e,n,o){if(at)return e(n,o);at=!0;try{var h=e(n);return h}finally{if(at=!1,(hn!==null||Yr!==null)&&(qc(),hn&&(n=hn,e=Yr,Yr=hn=null,ci(n),e)))for(n=0;n<e.length;n++)ci(e[n])}}function ft(e,n){var o=e.stateNode;if(o===null)return null;var h=o[Ue]||null;if(h===null)return null;o=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(c(231,n,typeof o));return o}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fl=!1;if(sn)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Fl=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{Fl=!1}var ui=null,fi=null,Ps=null;function ya(){if(Ps)return Ps;var e,n=fi,o=n.length,h,y="value"in ui?ui.value:ui.textContent,E=y.length;for(e=0;e<o&&n[e]===y[e];e++);var O=o-e;for(h=1;h<=O&&n[o-h]===y[E-h];h++);return Ps=y.slice(e,1<h?1-h:void 0)}function bi(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function vi(){return!0}function zl(){return!1}function kn(e){function n(o,h,y,E,O){this._reactName=o,this._targetInst=y,this.type=h,this.nativeEvent=E,this.target=O,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(o=e[k],this[k]=o?o(E):E[k]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?vi:zl,this.isPropagationStopped=zl,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=vi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=vi)},persist:function(){},isPersistent:vi}),n}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vn=kn(Rr),wa=S({},Rr,{view:0,detail:0}),tc=kn(wa),Us,Hl,ss,Fs=S({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ls,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ss&&(ss&&e.type==="mousemove"?(Us=e.screenX-ss.screenX,Hl=e.screenY-ss.screenY):Hl=Us=0,ss=e),Us)},movementY:function(e){return"movementY"in e?e.movementY:Hl}}),Gt=kn(Fs),nc=S({},Fs,{dataTransfer:0}),zs=kn(nc),Ei=S({},wa,{relatedTarget:0}),Vl=kn(Ei),be=S({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),pt=kn(be),Gn=S({},Rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hs=kn(Gn),rc=S({},Rr,{data:0}),ic=kn(rc),ef={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dn(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Gl[e])?!!n[e]:!1}function ls(){return Dn}var pn=S({},wa,{key:function(e){if(e.key){var n=ef[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=bi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ls,charCode:function(e){return e.type==="keypress"?bi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vs=kn(pn),ki=S({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xt=kn(ki),st=S({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ls}),nf=kn(st),ln=S({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Li=kn(ln),ba=S({},Fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rf=kn(ba),Wr=S({},Rr,{newState:0,oldState:0}),ql=kn(Wr),ac=[9,13,27,32],os=sn&&"CompositionEvent"in window,va=null;sn&&"documentMode"in document&&(va=document.documentMode);var sc=sn&&"TextEvent"in window&&!va,lc=sn&&(!os||va&&8<va&&11>=va),Pi=" ",Gs=!1;function oc(e,n){switch(e){case"keyup":return ac.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ea(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _a=!1;function _i(e,n){switch(e){case"compositionend":return Ea(n);case"keypress":return n.which!==32?null:(Gs=!0,Pi);case"textInput":return e=n.data,e===Pi&&Gs?null:e;default:return null}}function qs(e,n){if(_a)return e==="compositionend"||!os&&oc(e,n)?(e=ya(),Ps=fi=ui=null,_a=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return lc&&n.locale!=="ko"?null:n.data;default:return null}}var vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!vr[e.type]:n==="textarea"}function Ir(e,n,o,h){hn?Yr?Yr.push(h):Yr=[h]:hn=h,n=Jc(n,"onChange"),0<n.length&&(o=new Vn("onChange","change",null,o,h),e.push({event:o,listeners:n}))}var cs=null,Ui=null;function af(e){Ag(e,0)}function us(e){var n=sr(e);if(oi(n))return e}function Dr(e,n){if(e==="change")return n}var cc=!1;if(sn){var fs;if(sn){var Fi="oninput"in document;if(!Fi){var Dt=document.createElement("div");Dt.setAttribute("oninput","return;"),Fi=typeof Dt.oninput=="function"}fs=Fi}else fs=!1;cc=fs&&(!document.documentMode||9<document.documentMode)}function hs(){cs&&(cs.detachEvent("onpropertychange",I),Ui=cs=null)}function I(e){if(e.propertyName==="value"&&us(Ui)){var n=[];Ir(n,Ui,e,Ul(e)),ec(af,n)}}function t(e,n,o){e==="focusin"?(hs(),cs=n,Ui=o,cs.attachEvent("onpropertychange",I)):e==="focusout"&&hs()}function i(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return us(Ui)}function l(e,n){if(e==="click")return us(n)}function u(e,n){if(e==="input"||e==="change")return us(n)}function f(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var m=typeof Object.is=="function"?Object.is:f;function p(e,n){if(m(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),h=Object.keys(n);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var y=o[h];if(!bt.call(n,y)||!m(e[y],n[y]))return!1}return!0}function v(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function A(e,n){var o=v(e);e=0;for(var h;o;){if(o.nodeType===3){if(h=e+o.textContent.length,e<=n&&h>=n)return{node:o,offset:n-e};e=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=v(o)}}function N(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?N(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function D(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ls(e.document);n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=Ls(e.document)}return n}function j(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var F=sn&&"documentMode"in document&&11>=document.documentMode,Y=null,J=null,le=null,we=!1;function Le(e,n,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;we||Y==null||Y!==Ls(h)||(h=Y,"selectionStart"in h&&j(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),le&&p(le,h)||(le=h,h=Jc(J,"onSelect"),0<h.length&&(n=new Vn("onSelect","select",null,n,o),e.push({event:n,listeners:h}),n.target=Y)))}function Be(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var Re={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionrun:Be("Transition","TransitionRun"),transitionstart:Be("Transition","TransitionStart"),transitioncancel:Be("Transition","TransitionCancel"),transitionend:Be("Transition","TransitionEnd")},vt={},ht={};sn&&(ht=document.createElement("div").style,"AnimationEvent"in window||(delete Re.animationend.animation,delete Re.animationiteration.animation,delete Re.animationstart.animation),"TransitionEvent"in window||delete Re.transitionend.transition);function En(e){if(vt[e])return vt[e];if(!Re[e])return e;var n=Re[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in ht)return vt[e]=n[o];return e}var Er=En("animationend"),Jn=En("animationiteration"),Yt=En("animationstart"),qn=En("transitionrun"),mr=En("transitionstart"),Aa=En("transitioncancel"),zi=En("transitionend"),uc=new Map,Yl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yl.push("scrollEnd");function hi(e,n){uc.set(e,n),Rt(n,[e])}var fc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Kr=[],Xs=0,sf=0;function hc(){for(var e=Xs,n=sf=Xs=0;n<e;){var o=Kr[n];Kr[n++]=null;var h=Kr[n];Kr[n++]=null;var y=Kr[n];Kr[n++]=null;var E=Kr[n];if(Kr[n++]=null,h!==null&&y!==null){var O=h.pending;O===null?y.next=y:(y.next=O.next,O.next=y),h.pending=y}E!==0&&a0(o,y,E)}}function dc(e,n,o,h){Kr[Xs++]=e,Kr[Xs++]=n,Kr[Xs++]=o,Kr[Xs++]=h,sf|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function lf(e,n,o,h){return dc(e,n,o,h),gc(e)}function ds(e,n){return dc(e,null,null,n),gc(e)}function a0(e,n,o){e.lanes|=o;var h=e.alternate;h!==null&&(h.lanes|=o);for(var y=!1,E=e.return;E!==null;)E.childLanes|=o,h=E.alternate,h!==null&&(h.childLanes|=o),E.tag===22&&(e=E.stateNode,e===null||e._visibility&1||(y=!0)),e=E,E=E.return;return e.tag===3?(E=e.stateNode,y&&n!==null&&(y=31-dt(o),e=E.hiddenUpdates,h=e[y],h===null?e[y]=[n]:h.push(n),n.lane=o|536870912),E):null}function gc(e){if(50<xo)throw xo=0,xh=null,Error(c(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ys={};function _p(e,n,o,h){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,n,o,h){return new _p(e,n,o,h)}function of(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hi(e,n){var o=e.alternate;return o===null?(o=Mr(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function s0(e,n){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,n=o.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function mc(e,n,o,h,y,E){var O=0;if(h=e,typeof e=="function")of(e)&&(O=1);else if(typeof e=="string")O=Ny(e,o,Pe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case L:return e=Mr(31,o,n,y),e.elementType=L,e.lanes=E,e;case z:return gs(o.children,y,E,n);case H:O=8,y|=24;break;case $:return e=Mr(12,o,n,y|2),e.elementType=$,e.lanes=E,e;case xe:return e=Mr(13,o,n,y),e.elementType=xe,e.lanes=E,e;case se:return e=Mr(19,o,n,y),e.elementType=se,e.lanes=E,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case G:O=10;break e;case te:O=9;break e;case oe:O=11;break e;case R:O=14;break e;case W:O=16,h=null;break e}O=29,o=Error(c(130,e===null?"null":typeof e,"")),h=null}return n=Mr(O,o,n,y),n.elementType=e,n.type=h,n.lanes=E,n}function gs(e,n,o,h){return e=Mr(7,e,h,n),e.lanes=o,e}function cf(e,n,o){return e=Mr(6,e,null,n),e.lanes=o,e}function l0(e){var n=Mr(18,null,null,0);return n.stateNode=e,n}function uf(e,n,o){return n=Mr(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var o0=new WeakMap;function Zr(e,n){if(typeof e=="object"&&e!==null){var o=o0.get(e);return o!==void 0?o:(n={value:e,source:n,stack:Ut(n)},o0.set(e,n),n)}return{value:e,source:n,stack:Ut(n)}}var Ws=[],Ks=0,xc=null,Wl=0,Qr=[],Jr=0,Ca=null,Ai=1,Ci="";function Vi(e,n){Ws[Ks++]=Wl,Ws[Ks++]=xc,xc=e,Wl=n}function c0(e,n,o){Qr[Jr++]=Ai,Qr[Jr++]=Ci,Qr[Jr++]=Ca,Ca=e;var h=Ai;e=Ci;var y=32-dt(h)-1;h&=~(1<<y),o+=1;var E=32-dt(n)+y;if(30<E){var O=y-y%5;E=(h&(1<<O)-1).toString(32),h>>=O,y-=O,Ai=1<<32-dt(n)+y|o<<y|h,Ci=E+e}else Ai=1<<E|o<<y|h,Ci=e}function ff(e){e.return!==null&&(Vi(e,1),c0(e,1,0))}function hf(e){for(;e===xc;)xc=Ws[--Ks],Ws[Ks]=null,Wl=Ws[--Ks],Ws[Ks]=null;for(;e===Ca;)Ca=Qr[--Jr],Qr[Jr]=null,Ci=Qr[--Jr],Qr[Jr]=null,Ai=Qr[--Jr],Qr[Jr]=null}function u0(e,n){Qr[Jr++]=Ai,Qr[Jr++]=Ci,Qr[Jr++]=Ca,Ai=n.id,Ci=n.overflow,Ca=e}var $n=null,dn=null,jt=!1,Sa=null,$r=!1,df=Error(c(519));function Ta(e){var n=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kl(Zr(n,e)),df}function f0(e){var n=e.stateNode,o=e.type,h=e.memoizedProps;switch(n[ze]=e,n[Ue]=h,o){case"dialog":Ot("cancel",n),Ot("close",n);break;case"iframe":case"object":case"embed":Ot("load",n);break;case"video":case"audio":for(o=0;o<yo.length;o++)Ot(yo[o],n);break;case"source":Ot("error",n);break;case"img":case"image":case"link":Ot("error",n),Ot("load",n);break;case"details":Ot("toggle",n);break;case"input":Ot("invalid",n),ce(n,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ot("invalid",n);break;case"textarea":Ot("invalid",n),dr(n,h.value,h.defaultValue,h.children)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||n.textContent===""+o||h.suppressHydrationWarning===!0||Ng(n.textContent,o)?(h.popover!=null&&(Ot("beforetoggle",n),Ot("toggle",n)),h.onScroll!=null&&Ot("scroll",n),h.onScrollEnd!=null&&Ot("scrollend",n),h.onClick!=null&&(n.onclick=br),n=!0):n=!1,n||Ta(e,!0)}function h0(e){for($n=e.return;$n;)switch($n.tag){case 5:case 31:case 13:$r=!1;return;case 27:case 3:$r=!0;return;default:$n=$n.return}}function Zs(e){if(e!==$n)return!1;if(!jt)return h0(e),jt=!0,!1;var n=e.tag,o;if((o=n!==3&&n!==27)&&((o=n===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||Ih(e.type,e.memoizedProps)),o=!o),o&&dn&&Ta(e),h0(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));dn=Lg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));dn=Lg(e)}else n===27?(n=dn,za(e.type)?(e=kh,kh=null,dn=e):dn=n):dn=$n?ti(e.stateNode.nextSibling):null;return!0}function ms(){dn=$n=null,jt=!1}function gf(){var e=Sa;return e!==null&&(Sr===null?Sr=e:Sr.push.apply(Sr,e),Sa=null),e}function Kl(e){Sa===null?Sa=[e]:Sa.push(e)}var mf=X(null),xs=null,Gi=null;function Na(e,n,o){Ie(mf,n._currentValue),n._currentValue=o}function qi(e){e._currentValue=mf.current,pe(mf)}function xf(e,n,o){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===o)break;e=e.return}}function pf(e,n,o,h){var y=e.child;for(y!==null&&(y.return=e);y!==null;){var E=y.dependencies;if(E!==null){var O=y.child;E=E.firstContext;e:for(;E!==null;){var k=E;E=y;for(var q=0;q<n.length;q++)if(k.context===n[q]){E.lanes|=o,k=E.alternate,k!==null&&(k.lanes|=o),xf(E.return,o,e),h||(O=null);break e}E=k.next}}else if(y.tag===18){if(O=y.return,O===null)throw Error(c(341));O.lanes|=o,E=O.alternate,E!==null&&(E.lanes|=o),xf(O,o,e),O=null}else O=y.child;if(O!==null)O.return=y;else for(O=y;O!==null;){if(O===e){O=null;break}if(y=O.sibling,y!==null){y.return=O.return,O=y;break}O=O.return}y=O}}function Qs(e,n,o,h){e=null;for(var y=n,E=!1;y!==null;){if(!E){if((y.flags&524288)!==0)E=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var O=y.alternate;if(O===null)throw Error(c(387));if(O=O.memoizedProps,O!==null){var k=y.type;m(y.pendingProps.value,O.value)||(e!==null?e.push(k):e=[k])}}else if(y===Et.current){if(O=y.alternate,O===null)throw Error(c(387));O.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(e!==null?e.push(_o):e=[_o])}y=y.return}e!==null&&pf(n,e,o,h),n.flags|=262144}function pc(e){for(e=e.firstContext;e!==null;){if(!m(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ps(e){xs=e,Gi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function er(e){return d0(xs,e)}function yc(e,n){return xs===null&&ps(e),d0(e,n)}function d0(e,n){var o=n._currentValue;if(n={context:n,memoizedValue:o,next:null},Gi===null){if(e===null)throw Error(c(308));Gi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Gi=Gi.next=n;return o}var Ap=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(o,h){e.push(h)}};this.abort=function(){n.aborted=!0,e.forEach(function(o){return o()})}},Cp=s.unstable_scheduleCallback,Sp=s.unstable_NormalPriority,Ln={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yf(){return{controller:new Ap,data:new Map,refCount:0}}function Zl(e){e.refCount--,e.refCount===0&&Cp(Sp,function(){e.controller.abort()})}var Ql=null,wf=0,Js=0,$s=null;function Tp(e,n){if(Ql===null){var o=Ql=[];wf=0,Js=Eh(),$s={status:"pending",value:void 0,then:function(h){o.push(h)}}}return wf++,n.then(g0,g0),n}function g0(){if(--wf===0&&Ql!==null){$s!==null&&($s.status="fulfilled");var e=Ql;Ql=null,Js=0,$s=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Np(e,n){var o=[],h={status:"pending",value:null,reason:null,then:function(y){o.push(y)}};return e.then(function(){h.status="fulfilled",h.value=n;for(var y=0;y<o.length;y++)(0,o[y])(n)},function(y){for(h.status="rejected",h.reason=y,y=0;y<o.length;y++)(0,o[y])(void 0)}),h}var m0=ne.S;ne.S=function(e,n){J1=Ft(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Tp(e,n),m0!==null&&m0(e,n)};var ys=X(null);function bf(){var e=ys.current;return e!==null?e:on.pooledCache}function wc(e,n){n===null?Ie(ys,ys.current):Ie(ys,n.pool)}function x0(){var e=bf();return e===null?null:{parent:Ln._currentValue,pool:e}}var el=Error(c(460)),vf=Error(c(474)),bc=Error(c(542)),vc={then:function(){}};function p0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function y0(e,n,o){switch(o=e[o],o===void 0?e.push(n):o!==n&&(n.then(br,br),n=o),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,b0(e),e;default:if(typeof n.status=="string")n.then(br,br);else{if(e=on,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=n,e.status="pending",e.then(function(h){if(n.status==="pending"){var y=n;y.status="fulfilled",y.value=h}},function(h){if(n.status==="pending"){var y=n;y.status="rejected",y.reason=h}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,b0(e),e}throw bs=n,el}}function ws(e){try{var n=e._init;return n(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(bs=o,el):o}}var bs=null;function w0(){if(bs===null)throw Error(c(459));var e=bs;return bs=null,e}function b0(e){if(e===el||e===bc)throw Error(c(483))}var tl=null,Jl=0;function Ec(e){var n=Jl;return Jl+=1,tl===null&&(tl=[]),y0(tl,e,n)}function $l(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function _c(e,n){throw n.$$typeof===M?Error(c(525)):(e=Object.prototype.toString.call(n),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function v0(e){function n(ae,ee){if(e){var ge=ae.deletions;ge===null?(ae.deletions=[ee],ae.flags|=16):ge.push(ee)}}function o(ae,ee){if(!e)return null;for(;ee!==null;)n(ae,ee),ee=ee.sibling;return null}function h(ae){for(var ee=new Map;ae!==null;)ae.key!==null?ee.set(ae.key,ae):ee.set(ae.index,ae),ae=ae.sibling;return ee}function y(ae,ee){return ae=Hi(ae,ee),ae.index=0,ae.sibling=null,ae}function E(ae,ee,ge){return ae.index=ge,e?(ge=ae.alternate,ge!==null?(ge=ge.index,ge<ee?(ae.flags|=67108866,ee):ge):(ae.flags|=67108866,ee)):(ae.flags|=1048576,ee)}function O(ae){return e&&ae.alternate===null&&(ae.flags|=67108866),ae}function k(ae,ee,ge,Se){return ee===null||ee.tag!==6?(ee=cf(ge,ae.mode,Se),ee.return=ae,ee):(ee=y(ee,ge),ee.return=ae,ee)}function q(ae,ee,ge,Se){var rt=ge.type;return rt===z?Ae(ae,ee,ge.props.children,Se,ge.key):ee!==null&&(ee.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===W&&ws(rt)===ee.type)?(ee=y(ee,ge.props),$l(ee,ge),ee.return=ae,ee):(ee=mc(ge.type,ge.key,ge.props,null,ae.mode,Se),$l(ee,ge),ee.return=ae,ee)}function me(ae,ee,ge,Se){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ge.containerInfo||ee.stateNode.implementation!==ge.implementation?(ee=uf(ge,ae.mode,Se),ee.return=ae,ee):(ee=y(ee,ge.children||[]),ee.return=ae,ee)}function Ae(ae,ee,ge,Se,rt){return ee===null||ee.tag!==7?(ee=gs(ge,ae.mode,Se,rt),ee.return=ae,ee):(ee=y(ee,ge),ee.return=ae,ee)}function Te(ae,ee,ge){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=cf(""+ee,ae.mode,ge),ee.return=ae,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case B:return ge=mc(ee.type,ee.key,ee.props,null,ae.mode,ge),$l(ge,ee),ge.return=ae,ge;case U:return ee=uf(ee,ae.mode,ge),ee.return=ae,ee;case W:return ee=ws(ee),Te(ae,ee,ge)}if(K(ee)||ue(ee))return ee=gs(ee,ae.mode,ge,null),ee.return=ae,ee;if(typeof ee.then=="function")return Te(ae,Ec(ee),ge);if(ee.$$typeof===G)return Te(ae,yc(ae,ee),ge);_c(ae,ee)}return null}function ye(ae,ee,ge,Se){var rt=ee!==null?ee.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return rt!==null?null:k(ae,ee,""+ge,Se);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case B:return ge.key===rt?q(ae,ee,ge,Se):null;case U:return ge.key===rt?me(ae,ee,ge,Se):null;case W:return ge=ws(ge),ye(ae,ee,ge,Se)}if(K(ge)||ue(ge))return rt!==null?null:Ae(ae,ee,ge,Se,null);if(typeof ge.then=="function")return ye(ae,ee,Ec(ge),Se);if(ge.$$typeof===G)return ye(ae,ee,yc(ae,ge),Se);_c(ae,ge)}return null}function ve(ae,ee,ge,Se,rt){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return ae=ae.get(ge)||null,k(ee,ae,""+Se,rt);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case B:return ae=ae.get(Se.key===null?ge:Se.key)||null,q(ee,ae,Se,rt);case U:return ae=ae.get(Se.key===null?ge:Se.key)||null,me(ee,ae,Se,rt);case W:return Se=ws(Se),ve(ae,ee,ge,Se,rt)}if(K(Se)||ue(Se))return ae=ae.get(ge)||null,Ae(ee,ae,Se,rt,null);if(typeof Se.then=="function")return ve(ae,ee,ge,Ec(Se),rt);if(Se.$$typeof===G)return ve(ae,ee,ge,yc(ee,Se),rt);_c(ee,Se)}return null}function Ye(ae,ee,ge,Se){for(var rt=null,Lt=null,Je=ee,yt=ee=0,Bt=null;Je!==null&&yt<ge.length;yt++){Je.index>yt?(Bt=Je,Je=null):Bt=Je.sibling;var Pt=ye(ae,Je,ge[yt],Se);if(Pt===null){Je===null&&(Je=Bt);break}e&&Je&&Pt.alternate===null&&n(ae,Je),ee=E(Pt,ee,yt),Lt===null?rt=Pt:Lt.sibling=Pt,Lt=Pt,Je=Bt}if(yt===ge.length)return o(ae,Je),jt&&Vi(ae,yt),rt;if(Je===null){for(;yt<ge.length;yt++)Je=Te(ae,ge[yt],Se),Je!==null&&(ee=E(Je,ee,yt),Lt===null?rt=Je:Lt.sibling=Je,Lt=Je);return jt&&Vi(ae,yt),rt}for(Je=h(Je);yt<ge.length;yt++)Bt=ve(Je,ae,yt,ge[yt],Se),Bt!==null&&(e&&Bt.alternate!==null&&Je.delete(Bt.key===null?yt:Bt.key),ee=E(Bt,ee,yt),Lt===null?rt=Bt:Lt.sibling=Bt,Lt=Bt);return e&&Je.forEach(function(Xa){return n(ae,Xa)}),jt&&Vi(ae,yt),rt}function lt(ae,ee,ge,Se){if(ge==null)throw Error(c(151));for(var rt=null,Lt=null,Je=ee,yt=ee=0,Bt=null,Pt=ge.next();Je!==null&&!Pt.done;yt++,Pt=ge.next()){Je.index>yt?(Bt=Je,Je=null):Bt=Je.sibling;var Xa=ye(ae,Je,Pt.value,Se);if(Xa===null){Je===null&&(Je=Bt);break}e&&Je&&Xa.alternate===null&&n(ae,Je),ee=E(Xa,ee,yt),Lt===null?rt=Xa:Lt.sibling=Xa,Lt=Xa,Je=Bt}if(Pt.done)return o(ae,Je),jt&&Vi(ae,yt),rt;if(Je===null){for(;!Pt.done;yt++,Pt=ge.next())Pt=Te(ae,Pt.value,Se),Pt!==null&&(ee=E(Pt,ee,yt),Lt===null?rt=Pt:Lt.sibling=Pt,Lt=Pt);return jt&&Vi(ae,yt),rt}for(Je=h(Je);!Pt.done;yt++,Pt=ge.next())Pt=ve(Je,ae,yt,Pt.value,Se),Pt!==null&&(e&&Pt.alternate!==null&&Je.delete(Pt.key===null?yt:Pt.key),ee=E(Pt,ee,yt),Lt===null?rt=Pt:Lt.sibling=Pt,Lt=Pt);return e&&Je.forEach(function(Uy){return n(ae,Uy)}),jt&&Vi(ae,yt),rt}function en(ae,ee,ge,Se){if(typeof ge=="object"&&ge!==null&&ge.type===z&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case B:e:{for(var rt=ge.key;ee!==null;){if(ee.key===rt){if(rt=ge.type,rt===z){if(ee.tag===7){o(ae,ee.sibling),Se=y(ee,ge.props.children),Se.return=ae,ae=Se;break e}}else if(ee.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===W&&ws(rt)===ee.type){o(ae,ee.sibling),Se=y(ee,ge.props),$l(Se,ge),Se.return=ae,ae=Se;break e}o(ae,ee);break}else n(ae,ee);ee=ee.sibling}ge.type===z?(Se=gs(ge.props.children,ae.mode,Se,ge.key),Se.return=ae,ae=Se):(Se=mc(ge.type,ge.key,ge.props,null,ae.mode,Se),$l(Se,ge),Se.return=ae,ae=Se)}return O(ae);case U:e:{for(rt=ge.key;ee!==null;){if(ee.key===rt)if(ee.tag===4&&ee.stateNode.containerInfo===ge.containerInfo&&ee.stateNode.implementation===ge.implementation){o(ae,ee.sibling),Se=y(ee,ge.children||[]),Se.return=ae,ae=Se;break e}else{o(ae,ee);break}else n(ae,ee);ee=ee.sibling}Se=uf(ge,ae.mode,Se),Se.return=ae,ae=Se}return O(ae);case W:return ge=ws(ge),en(ae,ee,ge,Se)}if(K(ge))return Ye(ae,ee,ge,Se);if(ue(ge)){if(rt=ue(ge),typeof rt!="function")throw Error(c(150));return ge=rt.call(ge),lt(ae,ee,ge,Se)}if(typeof ge.then=="function")return en(ae,ee,Ec(ge),Se);if(ge.$$typeof===G)return en(ae,ee,yc(ae,ge),Se);_c(ae,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ee!==null&&ee.tag===6?(o(ae,ee.sibling),Se=y(ee,ge),Se.return=ae,ae=Se):(o(ae,ee),Se=cf(ge,ae.mode,Se),Se.return=ae,ae=Se),O(ae)):o(ae,ee)}return function(ae,ee,ge,Se){try{Jl=0;var rt=en(ae,ee,ge,Se);return tl=null,rt}catch(Je){if(Je===el||Je===bc)throw Je;var Lt=Mr(29,Je,null,ae.mode);return Lt.lanes=Se,Lt.return=ae,Lt}finally{}}}var vs=v0(!0),E0=v0(!1),Oa=!1;function Ef(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _f(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ra(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ia(e,n,o){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(qt&2)!==0){var y=h.pending;return y===null?n.next=n:(n.next=y.next,y.next=n),h.pending=n,n=gc(e),a0(e,null,o),n}return dc(e,h,n,o),gc(e)}function eo(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194048)!==0)){var h=n.lanes;h&=e.pendingLanes,o|=h,n.lanes=o,V(e,o)}}function Af(e,n){var o=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var y=null,E=null;if(o=o.firstBaseUpdate,o!==null){do{var O={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};E===null?y=E=O:E=E.next=O,o=o.next}while(o!==null);E===null?y=E=n:E=E.next=n}else y=E=n;o={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}var Cf=!1;function to(){if(Cf){var e=$s;if(e!==null)throw e}}function no(e,n,o,h){Cf=!1;var y=e.updateQueue;Oa=!1;var E=y.firstBaseUpdate,O=y.lastBaseUpdate,k=y.shared.pending;if(k!==null){y.shared.pending=null;var q=k,me=q.next;q.next=null,O===null?E=me:O.next=me,O=q;var Ae=e.alternate;Ae!==null&&(Ae=Ae.updateQueue,k=Ae.lastBaseUpdate,k!==O&&(k===null?Ae.firstBaseUpdate=me:k.next=me,Ae.lastBaseUpdate=q))}if(E!==null){var Te=y.baseState;O=0,Ae=me=q=null,k=E;do{var ye=k.lane&-536870913,ve=ye!==k.lane;if(ve?(Mt&ye)===ye:(h&ye)===ye){ye!==0&&ye===Js&&(Cf=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ye=e,lt=k;ye=n;var en=o;switch(lt.tag){case 1:if(Ye=lt.payload,typeof Ye=="function"){Te=Ye.call(en,Te,ye);break e}Te=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=lt.payload,ye=typeof Ye=="function"?Ye.call(en,Te,ye):Ye,ye==null)break e;Te=S({},Te,ye);break e;case 2:Oa=!0}}ye=k.callback,ye!==null&&(e.flags|=64,ve&&(e.flags|=8192),ve=y.callbacks,ve===null?y.callbacks=[ye]:ve.push(ye))}else ve={lane:ye,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Ae===null?(me=Ae=ve,q=Te):Ae=Ae.next=ve,O|=ye;if(k=k.next,k===null){if(k=y.shared.pending,k===null)break;ve=k,k=ve.next,ve.next=null,y.lastBaseUpdate=ve,y.shared.pending=null}}while(!0);Ae===null&&(q=Te),y.baseState=q,y.firstBaseUpdate=me,y.lastBaseUpdate=Ae,E===null&&(y.shared.lanes=0),ka|=O,e.lanes=O,e.memoizedState=Te}}function _0(e,n){if(typeof e!="function")throw Error(c(191,e));e.call(n)}function A0(e,n){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)_0(o[e],n)}var nl=X(null),Ac=X(0);function C0(e,n){e=ea,Ie(Ac,e),Ie(nl,n),ea=e|n.baseLanes}function Sf(){Ie(Ac,ea),Ie(nl,nl.current)}function Tf(){ea=Ac.current,pe(nl),pe(Ac)}var Br=X(null),ei=null;function Da(e){var n=e.alternate;Ie(Mn,Mn.current&1),Ie(Br,e),ei===null&&(n===null||nl.current!==null||n.memoizedState!==null)&&(ei=e)}function Nf(e){Ie(Mn,Mn.current),Ie(Br,e),ei===null&&(ei=e)}function S0(e){e.tag===22?(Ie(Mn,Mn.current),Ie(Br,e),ei===null&&(ei=e)):Ma()}function Ma(){Ie(Mn,Mn.current),Ie(Br,Br.current)}function jr(e){pe(Br),ei===e&&(ei=null),pe(Mn)}var Mn=X(0);function Cc(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Bh(o)||jh(o)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Xi=0,mt=null,Jt=null,Pn=null,Sc=!1,rl=!1,Es=!1,Tc=0,ro=0,il=null,Op=0;function _n(){throw Error(c(321))}function Of(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!m(e[o],n[o]))return!1;return!0}function Rf(e,n,o,h,y,E){return Xi=E,mt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ne.H=e===null||e.memoizedState===null?c1:qf,Es=!1,E=o(h,y),Es=!1,rl&&(E=N0(n,o,h,y)),T0(e),E}function T0(e){ne.H=so;var n=Jt!==null&&Jt.next!==null;if(Xi=0,Pn=Jt=mt=null,Sc=!1,ro=0,il=null,n)throw Error(c(300));e===null||Un||(e=e.dependencies,e!==null&&pc(e)&&(Un=!0))}function N0(e,n,o,h){mt=e;var y=0;do{if(rl&&(il=null),ro=0,rl=!1,25<=y)throw Error(c(301));if(y+=1,Pn=Jt=null,e.updateQueue!=null){var E=e.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}ne.H=u1,E=n(o,h)}while(rl);return E}function Rp(){var e=ne.H,n=e.useState()[0];return n=typeof n.then=="function"?io(n):n,e=e.useState()[0],(Jt!==null?Jt.memoizedState:null)!==e&&(mt.flags|=1024),n}function If(){var e=Tc!==0;return Tc=0,e}function Df(e,n,o){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~o}function Mf(e){if(Sc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Sc=!1}Xi=0,Pn=Jt=mt=null,rl=!1,ro=Tc=0,il=null}function xr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?mt.memoizedState=Pn=e:Pn=Pn.next=e,Pn}function Bn(){if(Jt===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var n=Pn===null?mt.memoizedState:Pn.next;if(n!==null)Pn=n,Jt=e;else{if(e===null)throw mt.alternate===null?Error(c(467)):Error(c(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Pn===null?mt.memoizedState=Pn=e:Pn=Pn.next=e}return Pn}function Nc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function io(e){var n=ro;return ro+=1,il===null&&(il=[]),e=y0(il,e,n),n=mt,(Pn===null?n.memoizedState:Pn.next)===null&&(n=n.alternate,ne.H=n===null||n.memoizedState===null?c1:qf),e}function Oc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return io(e);if(e.$$typeof===G)return er(e)}throw Error(c(438,String(e)))}function Bf(e){var n=null,o=mt.updateQueue;if(o!==null&&(n=o.memoCache),n==null){var h=mt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(n={data:h.data.map(function(y){return y.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),o===null&&(o=Nc(),mt.updateQueue=o),o.memoCache=n,o=n.data[n.index],o===void 0)for(o=n.data[n.index]=Array(e),h=0;h<e;h++)o[h]=he;return n.index++,o}function Yi(e,n){return typeof n=="function"?n(e):n}function Rc(e){var n=Bn();return jf(n,Jt,e)}function jf(e,n,o){var h=e.queue;if(h===null)throw Error(c(311));h.lastRenderedReducer=o;var y=e.baseQueue,E=h.pending;if(E!==null){if(y!==null){var O=y.next;y.next=E.next,E.next=O}n.baseQueue=y=E,h.pending=null}if(E=e.baseState,y===null)e.memoizedState=E;else{n=y.next;var k=O=null,q=null,me=n,Ae=!1;do{var Te=me.lane&-536870913;if(Te!==me.lane?(Mt&Te)===Te:(Xi&Te)===Te){var ye=me.revertLane;if(ye===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Te===Js&&(Ae=!0);else if((Xi&ye)===ye){me=me.next,ye===Js&&(Ae=!0);continue}else Te={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},q===null?(k=q=Te,O=E):q=q.next=Te,mt.lanes|=ye,ka|=ye;Te=me.action,Es&&o(E,Te),E=me.hasEagerState?me.eagerState:o(E,Te)}else ye={lane:Te,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},q===null?(k=q=ye,O=E):q=q.next=ye,mt.lanes|=Te,ka|=Te;me=me.next}while(me!==null&&me!==n);if(q===null?O=E:q.next=k,!m(E,e.memoizedState)&&(Un=!0,Ae&&(o=$s,o!==null)))throw o;e.memoizedState=E,e.baseState=O,e.baseQueue=q,h.lastRenderedState=E}return y===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function kf(e){var n=Bn(),o=n.queue;if(o===null)throw Error(c(311));o.lastRenderedReducer=e;var h=o.dispatch,y=o.pending,E=n.memoizedState;if(y!==null){o.pending=null;var O=y=y.next;do E=e(E,O.action),O=O.next;while(O!==y);m(E,n.memoizedState)||(Un=!0),n.memoizedState=E,n.baseQueue===null&&(n.baseState=E),o.lastRenderedState=E}return[E,h]}function O0(e,n,o){var h=mt,y=Bn(),E=jt;if(E){if(o===void 0)throw Error(c(407));o=o()}else o=n();var O=!m((Jt||y).memoizedState,o);if(O&&(y.memoizedState=o,Un=!0),y=y.queue,Uf(D0.bind(null,h,y,e),[e]),y.getSnapshot!==n||O||Pn!==null&&Pn.memoizedState.tag&1){if(h.flags|=2048,al(9,{destroy:void 0},I0.bind(null,h,y,o,n),null),on===null)throw Error(c(349));E||(Xi&127)!==0||R0(h,n,o)}return o}function R0(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=mt.updateQueue,n===null?(n=Nc(),mt.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function I0(e,n,o,h){n.value=o,n.getSnapshot=h,M0(n)&&B0(e)}function D0(e,n,o){return o(function(){M0(n)&&B0(e)})}function M0(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!m(e,o)}catch{return!0}}function B0(e){var n=ds(e,2);n!==null&&Tr(n,e,2)}function Lf(e){var n=xr();if(typeof e=="function"){var o=e;if(e=o(),Es){zt(!0);try{o()}finally{zt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:e},n}function j0(e,n,o,h){return e.baseState=o,jf(e,Jt,typeof h=="function"?h:Yi)}function Ip(e,n,o,h,y){if(Mc(e))throw Error(c(485));if(e=n.action,e!==null){var E={payload:y,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){E.listeners.push(O)}};ne.T!==null?o(!0):E.isTransition=!1,h(E),o=n.pending,o===null?(E.next=n.pending=E,k0(n,E)):(E.next=o.next,n.pending=o.next=E)}}function k0(e,n){var o=n.action,h=n.payload,y=e.state;if(n.isTransition){var E=ne.T,O={};ne.T=O;try{var k=o(y,h),q=ne.S;q!==null&&q(O,k),L0(e,n,k)}catch(me){Pf(e,n,me)}finally{E!==null&&O.types!==null&&(E.types=O.types),ne.T=E}}else try{E=o(y,h),L0(e,n,E)}catch(me){Pf(e,n,me)}}function L0(e,n,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){P0(e,n,h)},function(h){return Pf(e,n,h)}):P0(e,n,o)}function P0(e,n,o){n.status="fulfilled",n.value=o,U0(n),e.state=o,n=e.pending,n!==null&&(o=n.next,o===n?e.pending=null:(o=o.next,n.next=o,k0(e,o)))}function Pf(e,n,o){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do n.status="rejected",n.reason=o,U0(n),n=n.next;while(n!==h)}e.action=null}function U0(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function F0(e,n){return n}function z0(e,n){if(jt){var o=on.formState;if(o!==null){e:{var h=mt;if(jt){if(dn){t:{for(var y=dn,E=$r;y.nodeType!==8;){if(!E){y=null;break t}if(y=ti(y.nextSibling),y===null){y=null;break t}}E=y.data,y=E==="F!"||E==="F"?y:null}if(y){dn=ti(y.nextSibling),h=y.data==="F!";break e}}Ta(h)}h=!1}h&&(n=o[0])}}return o=xr(),o.memoizedState=o.baseState=n,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:F0,lastRenderedState:n},o.queue=h,o=s1.bind(null,mt,h),h.dispatch=o,h=Lf(!1),E=Gf.bind(null,mt,!1,h.queue),h=xr(),y={state:n,dispatch:null,action:e,pending:null},h.queue=y,o=Ip.bind(null,mt,y,E,o),y.dispatch=o,h.memoizedState=e,[n,o,!1]}function H0(e){var n=Bn();return V0(n,Jt,e)}function V0(e,n,o){if(n=jf(e,n,F0)[0],e=Rc(Yi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var h=io(n)}catch(O){throw O===el?bc:O}else h=n;n=Bn();var y=n.queue,E=y.dispatch;return o!==n.memoizedState&&(mt.flags|=2048,al(9,{destroy:void 0},Dp.bind(null,y,o),null)),[h,E,e]}function Dp(e,n){e.action=n}function G0(e){var n=Bn(),o=Jt;if(o!==null)return V0(n,o,e);Bn(),n=n.memoizedState,o=Bn();var h=o.queue.dispatch;return o.memoizedState=e,[n,h,!1]}function al(e,n,o,h){return e={tag:e,create:o,deps:h,inst:n,next:null},n=mt.updateQueue,n===null&&(n=Nc(),mt.updateQueue=n),o=n.lastEffect,o===null?n.lastEffect=e.next=e:(h=o.next,o.next=e,e.next=h,n.lastEffect=e),e}function q0(){return Bn().memoizedState}function Ic(e,n,o,h){var y=xr();mt.flags|=e,y.memoizedState=al(1|n,{destroy:void 0},o,h===void 0?null:h)}function Dc(e,n,o,h){var y=Bn();h=h===void 0?null:h;var E=y.memoizedState.inst;Jt!==null&&h!==null&&Of(h,Jt.memoizedState.deps)?y.memoizedState=al(n,E,o,h):(mt.flags|=e,y.memoizedState=al(1|n,E,o,h))}function X0(e,n){Ic(8390656,8,e,n)}function Uf(e,n){Dc(2048,8,e,n)}function Mp(e){mt.flags|=4;var n=mt.updateQueue;if(n===null)n=Nc(),mt.updateQueue=n,n.events=[e];else{var o=n.events;o===null?n.events=[e]:o.push(e)}}function Y0(e){var n=Bn().memoizedState;return Mp({ref:n,nextImpl:e}),function(){if((qt&2)!==0)throw Error(c(440));return n.impl.apply(void 0,arguments)}}function W0(e,n){return Dc(4,2,e,n)}function K0(e,n){return Dc(4,4,e,n)}function Z0(e,n){if(typeof n=="function"){e=e();var o=n(e);return function(){typeof o=="function"?o():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Q0(e,n,o){o=o!=null?o.concat([e]):null,Dc(4,4,Z0.bind(null,n,e),o)}function Ff(){}function J0(e,n){var o=Bn();n=n===void 0?null:n;var h=o.memoizedState;return n!==null&&Of(n,h[1])?h[0]:(o.memoizedState=[e,n],e)}function $0(e,n){var o=Bn();n=n===void 0?null:n;var h=o.memoizedState;if(n!==null&&Of(n,h[1]))return h[0];if(h=e(),Es){zt(!0);try{e()}finally{zt(!1)}}return o.memoizedState=[h,n],h}function zf(e,n,o){return o===void 0||(Xi&1073741824)!==0&&(Mt&261930)===0?e.memoizedState=n:(e.memoizedState=o,e=eg(),mt.lanes|=e,ka|=e,o)}function e1(e,n,o,h){return m(o,n)?o:nl.current!==null?(e=zf(e,o,h),m(e,n)||(Un=!0),e):(Xi&42)===0||(Xi&1073741824)!==0&&(Mt&261930)===0?(Un=!0,e.memoizedState=o):(e=eg(),mt.lanes|=e,ka|=e,n)}function t1(e,n,o,h,y){var E=Q.p;Q.p=E!==0&&8>E?E:8;var O=ne.T,k={};ne.T=k,Gf(e,!1,n,o);try{var q=y(),me=ne.S;if(me!==null&&me(k,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var Ae=Np(q,h);ao(e,n,Ae,Pr(e))}else ao(e,n,h,Pr(e))}catch(Te){ao(e,n,{then:function(){},status:"rejected",reason:Te},Pr())}finally{Q.p=E,O!==null&&k.types!==null&&(O.types=k.types),ne.T=O}}function Bp(){}function Hf(e,n,o,h){if(e.tag!==5)throw Error(c(476));var y=n1(e).queue;t1(e,y,n,fe,o===null?Bp:function(){return r1(e),o(h)})}function n1(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:fe},next:null};var o={};return n.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:o},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function r1(e){var n=n1(e);n.next===null&&(n=e.alternate.memoizedState),ao(e,n.next.queue,{},Pr())}function Vf(){return er(_o)}function i1(){return Bn().memoizedState}function a1(){return Bn().memoizedState}function jp(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var o=Pr();e=Ra(o);var h=Ia(n,e,o);h!==null&&(Tr(h,n,o),eo(h,n,o)),n={cache:yf()},e.payload=n;return}n=n.return}}function kp(e,n,o){var h=Pr();o={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Mc(e)?l1(n,o):(o=lf(e,n,o,h),o!==null&&(Tr(o,e,h),o1(o,n,h)))}function s1(e,n,o){var h=Pr();ao(e,n,o,h)}function ao(e,n,o,h){var y={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Mc(e))l1(n,y);else{var E=e.alternate;if(e.lanes===0&&(E===null||E.lanes===0)&&(E=n.lastRenderedReducer,E!==null))try{var O=n.lastRenderedState,k=E(O,o);if(y.hasEagerState=!0,y.eagerState=k,m(k,O))return dc(e,n,y,0),on===null&&hc(),!1}catch{}finally{}if(o=lf(e,n,y,h),o!==null)return Tr(o,e,h),o1(o,n,h),!0}return!1}function Gf(e,n,o,h){if(h={lane:2,revertLane:Eh(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Mc(e)){if(n)throw Error(c(479))}else n=lf(e,o,h,2),n!==null&&Tr(n,e,2)}function Mc(e){var n=e.alternate;return e===mt||n!==null&&n===mt}function l1(e,n){rl=Sc=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function o1(e,n,o){if((o&4194048)!==0){var h=n.lanes;h&=e.pendingLanes,o|=h,n.lanes=o,V(e,o)}}var so={readContext:er,use:Oc,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};so.useEffectEvent=_n;var c1={readContext:er,use:Oc,useCallback:function(e,n){return xr().memoizedState=[e,n===void 0?null:n],e},useContext:er,useEffect:X0,useImperativeHandle:function(e,n,o){o=o!=null?o.concat([e]):null,Ic(4194308,4,Z0.bind(null,n,e),o)},useLayoutEffect:function(e,n){return Ic(4194308,4,e,n)},useInsertionEffect:function(e,n){Ic(4,2,e,n)},useMemo:function(e,n){var o=xr();n=n===void 0?null:n;var h=e();if(Es){zt(!0);try{e()}finally{zt(!1)}}return o.memoizedState=[h,n],h},useReducer:function(e,n,o){var h=xr();if(o!==void 0){var y=o(n);if(Es){zt(!0);try{o(n)}finally{zt(!1)}}}else y=n;return h.memoizedState=h.baseState=y,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:y},h.queue=e,e=e.dispatch=kp.bind(null,mt,e),[h.memoizedState,e]},useRef:function(e){var n=xr();return e={current:e},n.memoizedState=e},useState:function(e){e=Lf(e);var n=e.queue,o=s1.bind(null,mt,n);return n.dispatch=o,[e.memoizedState,o]},useDebugValue:Ff,useDeferredValue:function(e,n){var o=xr();return zf(o,e,n)},useTransition:function(){var e=Lf(!1);return e=t1.bind(null,mt,e.queue,!0,!1),xr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,o){var h=mt,y=xr();if(jt){if(o===void 0)throw Error(c(407));o=o()}else{if(o=n(),on===null)throw Error(c(349));(Mt&127)!==0||R0(h,n,o)}y.memoizedState=o;var E={value:o,getSnapshot:n};return y.queue=E,X0(D0.bind(null,h,E,e),[e]),h.flags|=2048,al(9,{destroy:void 0},I0.bind(null,h,E,o,n),null),o},useId:function(){var e=xr(),n=on.identifierPrefix;if(jt){var o=Ci,h=Ai;o=(h&~(1<<32-dt(h)-1)).toString(32)+o,n="_"+n+"R_"+o,o=Tc++,0<o&&(n+="H"+o.toString(32)),n+="_"}else o=Op++,n="_"+n+"r_"+o.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Vf,useFormState:z0,useActionState:z0,useOptimistic:function(e){var n=xr();n.memoizedState=n.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=o,n=Gf.bind(null,mt,!0,o),o.dispatch=n,[e,n]},useMemoCache:Bf,useCacheRefresh:function(){return xr().memoizedState=jp.bind(null,mt)},useEffectEvent:function(e){var n=xr(),o={impl:e};return n.memoizedState=o,function(){if((qt&2)!==0)throw Error(c(440));return o.impl.apply(void 0,arguments)}}},qf={readContext:er,use:Oc,useCallback:J0,useContext:er,useEffect:Uf,useImperativeHandle:Q0,useInsertionEffect:W0,useLayoutEffect:K0,useMemo:$0,useReducer:Rc,useRef:q0,useState:function(){return Rc(Yi)},useDebugValue:Ff,useDeferredValue:function(e,n){var o=Bn();return e1(o,Jt.memoizedState,e,n)},useTransition:function(){var e=Rc(Yi)[0],n=Bn().memoizedState;return[typeof e=="boolean"?e:io(e),n]},useSyncExternalStore:O0,useId:i1,useHostTransitionStatus:Vf,useFormState:H0,useActionState:H0,useOptimistic:function(e,n){var o=Bn();return j0(o,Jt,e,n)},useMemoCache:Bf,useCacheRefresh:a1};qf.useEffectEvent=Y0;var u1={readContext:er,use:Oc,useCallback:J0,useContext:er,useEffect:Uf,useImperativeHandle:Q0,useInsertionEffect:W0,useLayoutEffect:K0,useMemo:$0,useReducer:kf,useRef:q0,useState:function(){return kf(Yi)},useDebugValue:Ff,useDeferredValue:function(e,n){var o=Bn();return Jt===null?zf(o,e,n):e1(o,Jt.memoizedState,e,n)},useTransition:function(){var e=kf(Yi)[0],n=Bn().memoizedState;return[typeof e=="boolean"?e:io(e),n]},useSyncExternalStore:O0,useId:i1,useHostTransitionStatus:Vf,useFormState:G0,useActionState:G0,useOptimistic:function(e,n){var o=Bn();return Jt!==null?j0(o,Jt,e,n):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:Bf,useCacheRefresh:a1};u1.useEffectEvent=Y0;function Xf(e,n,o,h){n=e.memoizedState,o=o(h,n),o=o==null?n:S({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Yf={enqueueSetState:function(e,n,o){e=e._reactInternals;var h=Pr(),y=Ra(h);y.payload=n,o!=null&&(y.callback=o),n=Ia(e,y,h),n!==null&&(Tr(n,e,h),eo(n,e,h))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var h=Pr(),y=Ra(h);y.tag=1,y.payload=n,o!=null&&(y.callback=o),n=Ia(e,y,h),n!==null&&(Tr(n,e,h),eo(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=Pr(),h=Ra(o);h.tag=2,n!=null&&(h.callback=n),n=Ia(e,h,o),n!==null&&(Tr(n,e,o),eo(n,e,o))}};function f1(e,n,o,h,y,E,O){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,E,O):n.prototype&&n.prototype.isPureReactComponent?!p(o,h)||!p(y,E):!0}function h1(e,n,o,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,h),n.state!==e&&Yf.enqueueReplaceState(n,n.state,null)}function _s(e,n){var o=n;if("ref"in n){o={};for(var h in n)h!=="ref"&&(o[h]=n[h])}if(e=e.defaultProps){o===n&&(o=S({},o));for(var y in e)o[y]===void 0&&(o[y]=e[y])}return o}function d1(e){fc(e)}function g1(e){console.error(e)}function m1(e){fc(e)}function Bc(e,n){try{var o=e.onUncaughtError;o(n.value,{componentStack:n.stack})}catch(h){setTimeout(function(){throw h})}}function x1(e,n,o){try{var h=e.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Wf(e,n,o){return o=Ra(o),o.tag=3,o.payload={element:null},o.callback=function(){Bc(e,n)},o}function p1(e){return e=Ra(e),e.tag=3,e}function y1(e,n,o,h){var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var E=h.value;e.payload=function(){return y(E)},e.callback=function(){x1(n,o,h)}}var O=o.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(e.callback=function(){x1(n,o,h),typeof y!="function"&&(La===null?La=new Set([this]):La.add(this));var k=h.stack;this.componentDidCatch(h.value,{componentStack:k!==null?k:""})})}function Lp(e,n,o,h,y){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(n=o.alternate,n!==null&&Qs(n,o,y,!0),o=Br.current,o!==null){switch(o.tag){case 31:case 13:return ei===null?Xc():o.alternate===null&&An===0&&(An=3),o.flags&=-257,o.flags|=65536,o.lanes=y,h===vc?o.flags|=16384:(n=o.updateQueue,n===null?o.updateQueue=new Set([h]):n.add(h),wh(e,h,y)),!1;case 22:return o.flags|=65536,h===vc?o.flags|=16384:(n=o.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=n):(o=n.retryQueue,o===null?n.retryQueue=new Set([h]):o.add(h)),wh(e,h,y)),!1}throw Error(c(435,o.tag))}return wh(e,h,y),Xc(),!1}if(jt)return n=Br.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=y,h!==df&&(e=Error(c(422),{cause:h}),Kl(Zr(e,o)))):(h!==df&&(n=Error(c(423),{cause:h}),Kl(Zr(n,o))),e=e.current.alternate,e.flags|=65536,y&=-y,e.lanes|=y,h=Zr(h,o),y=Wf(e.stateNode,h,y),Af(e,y),An!==4&&(An=2)),!1;var E=Error(c(520),{cause:h});if(E=Zr(E,o),mo===null?mo=[E]:mo.push(E),An!==4&&(An=2),n===null)return!0;h=Zr(h,o),o=n;do{switch(o.tag){case 3:return o.flags|=65536,e=y&-y,o.lanes|=e,e=Wf(o.stateNode,h,e),Af(o,e),!1;case 1:if(n=o.type,E=o.stateNode,(o.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(La===null||!La.has(E))))return o.flags|=65536,y&=-y,o.lanes|=y,y=p1(y),y1(y,e,o,h),Af(o,y),!1}o=o.return}while(o!==null);return!1}var Kf=Error(c(461)),Un=!1;function tr(e,n,o,h){n.child=e===null?E0(n,null,o,h):vs(n,e.child,o,h)}function w1(e,n,o,h,y){o=o.render;var E=n.ref;if("ref"in h){var O={};for(var k in h)k!=="ref"&&(O[k]=h[k])}else O=h;return ps(n),h=Rf(e,n,o,O,E,y),k=If(),e!==null&&!Un?(Df(e,n,y),Wi(e,n,y)):(jt&&k&&ff(n),n.flags|=1,tr(e,n,h,y),n.child)}function b1(e,n,o,h,y){if(e===null){var E=o.type;return typeof E=="function"&&!of(E)&&E.defaultProps===void 0&&o.compare===null?(n.tag=15,n.type=E,v1(e,n,E,h,y)):(e=mc(o.type,null,h,n,n.mode,y),e.ref=n.ref,e.return=n,n.child=e)}if(E=e.child,!rh(e,y)){var O=E.memoizedProps;if(o=o.compare,o=o!==null?o:p,o(O,h)&&e.ref===n.ref)return Wi(e,n,y)}return n.flags|=1,e=Hi(E,h),e.ref=n.ref,e.return=n,n.child=e}function v1(e,n,o,h,y){if(e!==null){var E=e.memoizedProps;if(p(E,h)&&e.ref===n.ref)if(Un=!1,n.pendingProps=h=E,rh(e,y))(e.flags&131072)!==0&&(Un=!0);else return n.lanes=e.lanes,Wi(e,n,y)}return Zf(e,n,o,h,y)}function E1(e,n,o,h){var y=h.children,E=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((n.flags&128)!==0){if(E=E!==null?E.baseLanes|o:o,e!==null){for(h=n.child=e.child,y=0;h!==null;)y=y|h.lanes|h.childLanes,h=h.sibling;h=y&~E}else h=0,n.child=null;return _1(e,n,E,o,h)}if((o&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&wc(n,E!==null?E.cachePool:null),E!==null?C0(n,E):Sf(),S0(n);else return h=n.lanes=536870912,_1(e,n,E!==null?E.baseLanes|o:o,o,h)}else E!==null?(wc(n,E.cachePool),C0(n,E),Ma(),n.memoizedState=null):(e!==null&&wc(n,null),Sf(),Ma());return tr(e,n,y,o),n.child}function lo(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function _1(e,n,o,h,y){var E=bf();return E=E===null?null:{parent:Ln._currentValue,pool:E},n.memoizedState={baseLanes:o,cachePool:E},e!==null&&wc(n,null),Sf(),S0(n),e!==null&&Qs(e,n,h,!0),n.childLanes=y,null}function jc(e,n){return n=Lc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function A1(e,n,o){return vs(n,e.child,null,o),e=jc(n,n.pendingProps),e.flags|=2,jr(n),n.memoizedState=null,e}function Pp(e,n,o){var h=n.pendingProps,y=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(jt){if(h.mode==="hidden")return e=jc(n,h),n.lanes=536870912,lo(null,e);if(Nf(n),(e=dn)?(e=kg(e,$r),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ca!==null?{id:Ai,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},o=l0(e),o.return=n,n.child=o,$n=n,dn=null)):e=null,e===null)throw Ta(n);return n.lanes=536870912,null}return jc(n,h)}var E=e.memoizedState;if(E!==null){var O=E.dehydrated;if(Nf(n),y)if(n.flags&256)n.flags&=-257,n=A1(e,n,o);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(c(558));else if(Un||Qs(e,n,o,!1),y=(o&e.childLanes)!==0,Un||y){if(h=on,h!==null&&(O=ie(h,o),O!==0&&O!==E.retryLane))throw E.retryLane=O,ds(e,O),Tr(h,e,O),Kf;Xc(),n=A1(e,n,o)}else e=E.treeContext,dn=ti(O.nextSibling),$n=n,jt=!0,Sa=null,$r=!1,e!==null&&u0(n,e),n=jc(n,h),n.flags|=4096;return n}return e=Hi(e.child,{mode:h.mode,children:h.children}),e.ref=n.ref,n.child=e,e.return=n,e}function kc(e,n){var o=n.ref;if(o===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(c(284));(e===null||e.ref!==o)&&(n.flags|=4194816)}}function Zf(e,n,o,h,y){return ps(n),o=Rf(e,n,o,h,void 0,y),h=If(),e!==null&&!Un?(Df(e,n,y),Wi(e,n,y)):(jt&&h&&ff(n),n.flags|=1,tr(e,n,o,y),n.child)}function C1(e,n,o,h,y,E){return ps(n),n.updateQueue=null,o=N0(n,h,o,y),T0(e),h=If(),e!==null&&!Un?(Df(e,n,E),Wi(e,n,E)):(jt&&h&&ff(n),n.flags|=1,tr(e,n,o,E),n.child)}function S1(e,n,o,h,y){if(ps(n),n.stateNode===null){var E=Ys,O=o.contextType;typeof O=="object"&&O!==null&&(E=er(O)),E=new o(h,E),n.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Yf,n.stateNode=E,E._reactInternals=n,E=n.stateNode,E.props=h,E.state=n.memoizedState,E.refs={},Ef(n),O=o.contextType,E.context=typeof O=="object"&&O!==null?er(O):Ys,E.state=n.memoizedState,O=o.getDerivedStateFromProps,typeof O=="function"&&(Xf(n,o,O,h),E.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(O=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),O!==E.state&&Yf.enqueueReplaceState(E,E.state,null),no(n,h,E,y),to(),E.state=n.memoizedState),typeof E.componentDidMount=="function"&&(n.flags|=4194308),h=!0}else if(e===null){E=n.stateNode;var k=n.memoizedProps,q=_s(o,k);E.props=q;var me=E.context,Ae=o.contextType;O=Ys,typeof Ae=="object"&&Ae!==null&&(O=er(Ae));var Te=o.getDerivedStateFromProps;Ae=typeof Te=="function"||typeof E.getSnapshotBeforeUpdate=="function",k=n.pendingProps!==k,Ae||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k||me!==O)&&h1(n,E,h,O),Oa=!1;var ye=n.memoizedState;E.state=ye,no(n,h,E,y),to(),me=n.memoizedState,k||ye!==me||Oa?(typeof Te=="function"&&(Xf(n,o,Te,h),me=n.memoizedState),(q=Oa||f1(n,o,q,h,ye,me,O))?(Ae||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(n.flags|=4194308)):(typeof E.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=me),E.props=h,E.state=me,E.context=O,h=q):(typeof E.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{E=n.stateNode,_f(e,n),O=n.memoizedProps,Ae=_s(o,O),E.props=Ae,Te=n.pendingProps,ye=E.context,me=o.contextType,q=Ys,typeof me=="object"&&me!==null&&(q=er(me)),k=o.getDerivedStateFromProps,(me=typeof k=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O!==Te||ye!==q)&&h1(n,E,h,q),Oa=!1,ye=n.memoizedState,E.state=ye,no(n,h,E,y),to();var ve=n.memoizedState;O!==Te||ye!==ve||Oa||e!==null&&e.dependencies!==null&&pc(e.dependencies)?(typeof k=="function"&&(Xf(n,o,k,h),ve=n.memoizedState),(Ae=Oa||f1(n,o,Ae,h,ye,ve,q)||e!==null&&e.dependencies!==null&&pc(e.dependencies))?(me||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ve,q),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ve,q)),typeof E.componentDidUpdate=="function"&&(n.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof E.componentDidUpdate!="function"||O===e.memoizedProps&&ye===e.memoizedState||(n.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||O===e.memoizedProps&&ye===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=ve),E.props=h,E.state=ve,E.context=q,h=Ae):(typeof E.componentDidUpdate!="function"||O===e.memoizedProps&&ye===e.memoizedState||(n.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||O===e.memoizedProps&&ye===e.memoizedState||(n.flags|=1024),h=!1)}return E=h,kc(e,n),h=(n.flags&128)!==0,E||h?(E=n.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:E.render(),n.flags|=1,e!==null&&h?(n.child=vs(n,e.child,null,y),n.child=vs(n,null,o,y)):tr(e,n,o,y),n.memoizedState=E.state,e=n.child):e=Wi(e,n,y),e}function T1(e,n,o,h){return ms(),n.flags|=256,tr(e,n,o,h),n.child}var Qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jf(e){return{baseLanes:e,cachePool:x0()}}function $f(e,n,o){return e=e!==null?e.childLanes&~o:0,n&&(e|=Lr),e}function N1(e,n,o){var h=n.pendingProps,y=!1,E=(n.flags&128)!==0,O;if((O=E)||(O=e!==null&&e.memoizedState===null?!1:(Mn.current&2)!==0),O&&(y=!0,n.flags&=-129),O=(n.flags&32)!==0,n.flags&=-33,e===null){if(jt){if(y?Da(n):Ma(),(e=dn)?(e=kg(e,$r),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ca!==null?{id:Ai,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},o=l0(e),o.return=n,n.child=o,$n=n,dn=null)):e=null,e===null)throw Ta(n);return jh(e)?n.lanes=32:n.lanes=536870912,null}var k=h.children;return h=h.fallback,y?(Ma(),y=n.mode,k=Lc({mode:"hidden",children:k},y),h=gs(h,y,o,null),k.return=n,h.return=n,k.sibling=h,n.child=k,h=n.child,h.memoizedState=Jf(o),h.childLanes=$f(e,O,o),n.memoizedState=Qf,lo(null,h)):(Da(n),eh(n,k))}var q=e.memoizedState;if(q!==null&&(k=q.dehydrated,k!==null)){if(E)n.flags&256?(Da(n),n.flags&=-257,n=th(e,n,o)):n.memoizedState!==null?(Ma(),n.child=e.child,n.flags|=128,n=null):(Ma(),k=h.fallback,y=n.mode,h=Lc({mode:"visible",children:h.children},y),k=gs(k,y,o,null),k.flags|=2,h.return=n,k.return=n,h.sibling=k,n.child=h,vs(n,e.child,null,o),h=n.child,h.memoizedState=Jf(o),h.childLanes=$f(e,O,o),n.memoizedState=Qf,n=lo(null,h));else if(Da(n),jh(k)){if(O=k.nextSibling&&k.nextSibling.dataset,O)var me=O.dgst;O=me,h=Error(c(419)),h.stack="",h.digest=O,Kl({value:h,source:null,stack:null}),n=th(e,n,o)}else if(Un||Qs(e,n,o,!1),O=(o&e.childLanes)!==0,Un||O){if(O=on,O!==null&&(h=ie(O,o),h!==0&&h!==q.retryLane))throw q.retryLane=h,ds(e,h),Tr(O,e,h),Kf;Bh(k)||Xc(),n=th(e,n,o)}else Bh(k)?(n.flags|=192,n.child=e.child,n=null):(e=q.treeContext,dn=ti(k.nextSibling),$n=n,jt=!0,Sa=null,$r=!1,e!==null&&u0(n,e),n=eh(n,h.children),n.flags|=4096);return n}return y?(Ma(),k=h.fallback,y=n.mode,q=e.child,me=q.sibling,h=Hi(q,{mode:"hidden",children:h.children}),h.subtreeFlags=q.subtreeFlags&65011712,me!==null?k=Hi(me,k):(k=gs(k,y,o,null),k.flags|=2),k.return=n,h.return=n,h.sibling=k,n.child=h,lo(null,h),h=n.child,k=e.child.memoizedState,k===null?k=Jf(o):(y=k.cachePool,y!==null?(q=Ln._currentValue,y=y.parent!==q?{parent:q,pool:q}:y):y=x0(),k={baseLanes:k.baseLanes|o,cachePool:y}),h.memoizedState=k,h.childLanes=$f(e,O,o),n.memoizedState=Qf,lo(e.child,h)):(Da(n),o=e.child,e=o.sibling,o=Hi(o,{mode:"visible",children:h.children}),o.return=n,o.sibling=null,e!==null&&(O=n.deletions,O===null?(n.deletions=[e],n.flags|=16):O.push(e)),n.child=o,n.memoizedState=null,o)}function eh(e,n){return n=Lc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Lc(e,n){return e=Mr(22,e,null,n),e.lanes=0,e}function th(e,n,o){return vs(n,e.child,null,o),e=eh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function O1(e,n,o){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),xf(e.return,n,o)}function nh(e,n,o,h,y,E){var O=e.memoizedState;O===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:y,treeForkCount:E}:(O.isBackwards=n,O.rendering=null,O.renderingStartTime=0,O.last=h,O.tail=o,O.tailMode=y,O.treeForkCount=E)}function R1(e,n,o){var h=n.pendingProps,y=h.revealOrder,E=h.tail;h=h.children;var O=Mn.current,k=(O&2)!==0;if(k?(O=O&1|2,n.flags|=128):O&=1,Ie(Mn,O),tr(e,n,h,o),h=jt?Wl:0,!k&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&O1(e,o,n);else if(e.tag===19)O1(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(y){case"forwards":for(o=n.child,y=null;o!==null;)e=o.alternate,e!==null&&Cc(e)===null&&(y=o),o=o.sibling;o=y,o===null?(y=n.child,n.child=null):(y=o.sibling,o.sibling=null),nh(n,!1,y,o,E,h);break;case"backwards":case"unstable_legacy-backwards":for(o=null,y=n.child,n.child=null;y!==null;){if(e=y.alternate,e!==null&&Cc(e)===null){n.child=y;break}e=y.sibling,y.sibling=o,o=y,y=e}nh(n,!0,o,null,E,h);break;case"together":nh(n,!1,null,null,void 0,h);break;default:n.memoizedState=null}return n.child}function Wi(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),ka|=n.lanes,(o&n.childLanes)===0)if(e!==null){if(Qs(e,n,o,!1),(o&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(c(153));if(n.child!==null){for(e=n.child,o=Hi(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=Hi(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function rh(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&pc(e)))}function Up(e,n,o){switch(n.tag){case 3:wt(n,n.stateNode.containerInfo),Na(n,Ln,e.memoizedState.cache),ms();break;case 27:case 5:Nr(n);break;case 4:wt(n,n.stateNode.containerInfo);break;case 10:Na(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Nf(n),null;break;case 13:var h=n.memoizedState;if(h!==null)return h.dehydrated!==null?(Da(n),n.flags|=128,null):(o&n.child.childLanes)!==0?N1(e,n,o):(Da(n),e=Wi(e,n,o),e!==null?e.sibling:null);Da(n);break;case 19:var y=(e.flags&128)!==0;if(h=(o&n.childLanes)!==0,h||(Qs(e,n,o,!1),h=(o&n.childLanes)!==0),y){if(h)return R1(e,n,o);n.flags|=128}if(y=n.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ie(Mn,Mn.current),h)break;return null;case 22:return n.lanes=0,E1(e,n,o,n.pendingProps);case 24:Na(n,Ln,e.memoizedState.cache)}return Wi(e,n,o)}function I1(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps)Un=!0;else{if(!rh(e,o)&&(n.flags&128)===0)return Un=!1,Up(e,n,o);Un=(e.flags&131072)!==0}else Un=!1,jt&&(n.flags&1048576)!==0&&c0(n,Wl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var h=n.pendingProps;if(e=ws(n.elementType),n.type=e,typeof e=="function")of(e)?(h=_s(e,h),n.tag=1,n=S1(null,n,e,h,o)):(n.tag=0,n=Zf(null,n,e,h,o));else{if(e!=null){var y=e.$$typeof;if(y===oe){n.tag=11,n=w1(null,n,e,h,o);break e}else if(y===R){n.tag=14,n=b1(null,n,e,h,o);break e}}throw n=Oe(e)||e,Error(c(306,n,""))}}return n;case 0:return Zf(e,n,n.type,n.pendingProps,o);case 1:return h=n.type,y=_s(h,n.pendingProps),S1(e,n,h,y,o);case 3:e:{if(wt(n,n.stateNode.containerInfo),e===null)throw Error(c(387));h=n.pendingProps;var E=n.memoizedState;y=E.element,_f(e,n),no(n,h,null,o);var O=n.memoizedState;if(h=O.cache,Na(n,Ln,h),h!==E.cache&&pf(n,[Ln],o,!0),to(),h=O.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:O.cache},n.updateQueue.baseState=E,n.memoizedState=E,n.flags&256){n=T1(e,n,h,o);break e}else if(h!==y){y=Zr(Error(c(424)),n),Kl(y),n=T1(e,n,h,o);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(dn=ti(e.firstChild),$n=n,jt=!0,Sa=null,$r=!0,o=E0(n,null,h,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ms(),h===y){n=Wi(e,n,o);break e}tr(e,n,h,o)}n=n.child}return n;case 26:return kc(e,n),e===null?(o=Hg(n.type,null,n.pendingProps,null))?n.memoizedState=o:jt||(o=n.type,e=n.pendingProps,h=$c(je.current).createElement(o),h[ze]=n,h[Ue]=e,nr(h,o,e),Vt(h),n.stateNode=h):n.memoizedState=Hg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Nr(n),e===null&&jt&&(h=n.stateNode=Ug(n.type,n.pendingProps,je.current),$n=n,$r=!0,y=dn,za(n.type)?(kh=y,dn=ti(h.firstChild)):dn=y),tr(e,n,n.pendingProps.children,o),kc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&jt&&((y=h=dn)&&(h=my(h,n.type,n.pendingProps,$r),h!==null?(n.stateNode=h,$n=n,dn=ti(h.firstChild),$r=!1,y=!0):y=!1),y||Ta(n)),Nr(n),y=n.type,E=n.pendingProps,O=e!==null?e.memoizedProps:null,h=E.children,Ih(y,E)?h=null:O!==null&&Ih(y,O)&&(n.flags|=32),n.memoizedState!==null&&(y=Rf(e,n,Rp,null,null,o),_o._currentValue=y),kc(e,n),tr(e,n,h,o),n.child;case 6:return e===null&&jt&&((e=o=dn)&&(o=xy(o,n.pendingProps,$r),o!==null?(n.stateNode=o,$n=n,dn=null,e=!0):e=!1),e||Ta(n)),null;case 13:return N1(e,n,o);case 4:return wt(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=vs(n,null,h,o):tr(e,n,h,o),n.child;case 11:return w1(e,n,n.type,n.pendingProps,o);case 7:return tr(e,n,n.pendingProps,o),n.child;case 8:return tr(e,n,n.pendingProps.children,o),n.child;case 12:return tr(e,n,n.pendingProps.children,o),n.child;case 10:return h=n.pendingProps,Na(n,n.type,h.value),tr(e,n,h.children,o),n.child;case 9:return y=n.type._context,h=n.pendingProps.children,ps(n),y=er(y),h=h(y),n.flags|=1,tr(e,n,h,o),n.child;case 14:return b1(e,n,n.type,n.pendingProps,o);case 15:return v1(e,n,n.type,n.pendingProps,o);case 19:return R1(e,n,o);case 31:return Pp(e,n,o);case 22:return E1(e,n,o,n.pendingProps);case 24:return ps(n),h=er(Ln),e===null?(y=bf(),y===null&&(y=on,E=yf(),y.pooledCache=E,E.refCount++,E!==null&&(y.pooledCacheLanes|=o),y=E),n.memoizedState={parent:h,cache:y},Ef(n),Na(n,Ln,y)):((e.lanes&o)!==0&&(_f(e,n),no(n,null,null,o),to()),y=e.memoizedState,E=n.memoizedState,y.parent!==h?(y={parent:h,cache:h},n.memoizedState=y,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=y),Na(n,Ln,h)):(h=E.cache,Na(n,Ln,h),h!==y.cache&&pf(n,[Ln],o,!0))),tr(e,n,n.pendingProps.children,o),n.child;case 29:throw n.pendingProps}throw Error(c(156,n.tag))}function Ki(e){e.flags|=4}function ih(e,n,o,h,y){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(y&335544128)===y)if(e.stateNode.complete)e.flags|=8192;else if(ig())e.flags|=8192;else throw bs=vc,vf}else e.flags&=-16777217}function D1(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Yg(n))if(ig())e.flags|=8192;else throw bs=vc,vf}function Pc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?xn():536870912,e.lanes|=n,cl|=n)}function oo(e,n){if(!jt)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function gn(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,h=0;if(n)for(var y=e.child;y!==null;)o|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)o|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=h,e.childLanes=o,n}function Fp(e,n,o){var h=n.pendingProps;switch(hf(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(n),null;case 1:return gn(n),null;case 3:return o=n.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),n.memoizedState.cache!==h&&(n.flags|=2048),qi(Ln),Wt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Zs(n)?Ki(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gf())),gn(n),null;case 26:var y=n.type,E=n.memoizedState;return e===null?(Ki(n),E!==null?(gn(n),D1(n,E)):(gn(n),ih(n,y,null,h,o))):E?E!==e.memoizedState?(Ki(n),gn(n),D1(n,E)):(gn(n),n.flags&=-16777217):(e=e.memoizedProps,e!==h&&Ki(n),gn(n),ih(n,y,e,h,o)),null;case 27:if(Tn(n),o=je.current,y=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&Ki(n);else{if(!h){if(n.stateNode===null)throw Error(c(166));return gn(n),null}e=Pe.current,Zs(n)?f0(n):(e=Ug(y,h,o),n.stateNode=e,Ki(n))}return gn(n),null;case 5:if(Tn(n),y=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&Ki(n);else{if(!h){if(n.stateNode===null)throw Error(c(166));return gn(n),null}if(E=Pe.current,Zs(n))f0(n);else{var O=$c(je.current);switch(E){case 1:E=O.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:E=O.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":E=O.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":E=O.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":E=O.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof h.is=="string"?O.createElement("select",{is:h.is}):O.createElement("select"),h.multiple?E.multiple=!0:h.size&&(E.size=h.size);break;default:E=typeof h.is=="string"?O.createElement(y,{is:h.is}):O.createElement(y)}}E[ze]=n,E[Ue]=h;e:for(O=n.child;O!==null;){if(O.tag===5||O.tag===6)E.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===n)break e;for(;O.sibling===null;){if(O.return===null||O.return===n)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}n.stateNode=E;e:switch(nr(E,y,h),y){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ki(n)}}return gn(n),ih(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,o),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==h&&Ki(n);else{if(typeof h!="string"&&n.stateNode===null)throw Error(c(166));if(e=je.current,Zs(n)){if(e=n.stateNode,o=n.memoizedProps,h=null,y=$n,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}e[ze]=n,e=!!(e.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||Ng(e.nodeValue,o)),e||Ta(n,!0)}else e=$c(e).createTextNode(h),e[ze]=n,n.stateNode=e}return gn(n),null;case 31:if(o=n.memoizedState,e===null||e.memoizedState!==null){if(h=Zs(n),o!==null){if(e===null){if(!h)throw Error(c(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[ze]=n}else ms(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;gn(n),e=!1}else o=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return n.flags&256?(jr(n),n):(jr(n),null);if((n.flags&128)!==0)throw Error(c(558))}return gn(n),null;case 13:if(h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(y=Zs(n),h!==null&&h.dehydrated!==null){if(e===null){if(!y)throw Error(c(318));if(y=n.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(c(317));y[ze]=n}else ms(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;gn(n),y=!1}else y=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=y),y=!0;if(!y)return n.flags&256?(jr(n),n):(jr(n),null)}return jr(n),(n.flags&128)!==0?(n.lanes=o,n):(o=h!==null,e=e!==null&&e.memoizedState!==null,o&&(h=n.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==y&&(h.flags|=2048)),o!==e&&o&&(n.child.flags|=8192),Pc(n,n.updateQueue),gn(n),null);case 4:return Wt(),e===null&&Sh(n.stateNode.containerInfo),gn(n),null;case 10:return qi(n.type),gn(n),null;case 19:if(pe(Mn),h=n.memoizedState,h===null)return gn(n),null;if(y=(n.flags&128)!==0,E=h.rendering,E===null)if(y)oo(h,!1);else{if(An!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(E=Cc(e),E!==null){for(n.flags|=128,oo(h,!1),e=E.updateQueue,n.updateQueue=e,Pc(n,e),n.subtreeFlags=0,e=o,o=n.child;o!==null;)s0(o,e),o=o.sibling;return Ie(Mn,Mn.current&1|2),jt&&Vi(n,h.treeForkCount),n.child}e=e.sibling}h.tail!==null&&Ft()>Vc&&(n.flags|=128,y=!0,oo(h,!1),n.lanes=4194304)}else{if(!y)if(e=Cc(E),e!==null){if(n.flags|=128,y=!0,e=e.updateQueue,n.updateQueue=e,Pc(n,e),oo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!jt)return gn(n),null}else 2*Ft()-h.renderingStartTime>Vc&&o!==536870912&&(n.flags|=128,y=!0,oo(h,!1),n.lanes=4194304);h.isBackwards?(E.sibling=n.child,n.child=E):(e=h.last,e!==null?e.sibling=E:n.child=E,h.last=E)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=Ft(),e.sibling=null,o=Mn.current,Ie(Mn,y?o&1|2:o&1),jt&&Vi(n,h.treeForkCount),e):(gn(n),null);case 22:case 23:return jr(n),Tf(),h=n.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(n.flags|=8192):h&&(n.flags|=8192),h?(o&536870912)!==0&&(n.flags&128)===0&&(gn(n),n.subtreeFlags&6&&(n.flags|=8192)):gn(n),o=n.updateQueue,o!==null&&Pc(n,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),h=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(h=n.memoizedState.cachePool.pool),h!==o&&(n.flags|=2048),e!==null&&pe(ys),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),qi(Ln),gn(n),null;case 25:return null;case 30:return null}throw Error(c(156,n.tag))}function zp(e,n){switch(hf(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return qi(Ln),Wt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Tn(n),null;case 31:if(n.memoizedState!==null){if(jr(n),n.alternate===null)throw Error(c(340));ms()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(jr(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(c(340));ms()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return pe(Mn),null;case 4:return Wt(),null;case 10:return qi(n.type),null;case 22:case 23:return jr(n),Tf(),e!==null&&pe(ys),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return qi(Ln),null;case 25:return null;default:return null}}function M1(e,n){switch(hf(n),n.tag){case 3:qi(Ln),Wt();break;case 26:case 27:case 5:Tn(n);break;case 4:Wt();break;case 31:n.memoizedState!==null&&jr(n);break;case 13:jr(n);break;case 19:pe(Mn);break;case 10:qi(n.type);break;case 22:case 23:jr(n),Tf(),e!==null&&pe(ys);break;case 24:qi(Ln)}}function co(e,n){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var y=h.next;o=y;do{if((o.tag&e)===e){h=void 0;var E=o.create,O=o.inst;h=E(),O.destroy=h}o=o.next}while(o!==y)}}catch(k){Zt(n,n.return,k)}}function Ba(e,n,o){try{var h=n.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var E=y.next;h=E;do{if((h.tag&e)===e){var O=h.inst,k=O.destroy;if(k!==void 0){O.destroy=void 0,y=n;var q=o,me=k;try{me()}catch(Ae){Zt(y,q,Ae)}}}h=h.next}while(h!==E)}}catch(Ae){Zt(n,n.return,Ae)}}function B1(e){var n=e.updateQueue;if(n!==null){var o=e.stateNode;try{A0(n,o)}catch(h){Zt(e,e.return,h)}}}function j1(e,n,o){o.props=_s(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(h){Zt(e,n,h)}}function uo(e,n){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var h=e.stateNode;break;case 30:h=e.stateNode;break;default:h=e.stateNode}typeof o=="function"?e.refCleanup=o(h):o.current=h}}catch(y){Zt(e,n,y)}}function Si(e,n){var o=e.ref,h=e.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(y){Zt(e,n,y)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(y){Zt(e,n,y)}else o.current=null}function k1(e){var n=e.type,o=e.memoizedProps,h=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break e;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(y){Zt(e,e.return,y)}}function ah(e,n,o){try{var h=e.stateNode;cy(h,e.type,o,n),h[Ue]=n}catch(y){Zt(e,e.return,y)}}function L1(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&za(e.type)||e.tag===4}function sh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||L1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&za(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lh(e,n,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,n):(n=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,n.appendChild(e),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=br));else if(h!==4&&(h===27&&za(e.type)&&(o=e.stateNode,n=null),e=e.child,e!==null))for(lh(e,n,o),e=e.sibling;e!==null;)lh(e,n,o),e=e.sibling}function Uc(e,n,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(h!==4&&(h===27&&za(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Uc(e,n,o),e=e.sibling;e!==null;)Uc(e,n,o),e=e.sibling}function P1(e){var n=e.stateNode,o=e.memoizedProps;try{for(var h=e.type,y=n.attributes;y.length;)n.removeAttributeNode(y[0]);nr(n,h,o),n[ze]=e,n[Ue]=o}catch(E){Zt(e,e.return,E)}}var Zi=!1,Fn=!1,oh=!1,U1=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function Hp(e,n){if(e=e.containerInfo,Oh=su,e=D(e),j(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var y=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{o.nodeType,E.nodeType}catch{o=null;break e}var O=0,k=-1,q=-1,me=0,Ae=0,Te=e,ye=null;t:for(;;){for(var ve;Te!==o||y!==0&&Te.nodeType!==3||(k=O+y),Te!==E||h!==0&&Te.nodeType!==3||(q=O+h),Te.nodeType===3&&(O+=Te.nodeValue.length),(ve=Te.firstChild)!==null;)ye=Te,Te=ve;for(;;){if(Te===e)break t;if(ye===o&&++me===y&&(k=O),ye===E&&++Ae===h&&(q=O),(ve=Te.nextSibling)!==null)break;Te=ye,ye=Te.parentNode}Te=ve}o=k===-1||q===-1?null:{start:k,end:q}}else o=null}o=o||{start:0,end:0}}else o=null;for(Rh={focusedElem:e,selectionRange:o},su=!1,Wn=n;Wn!==null;)if(n=Wn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Wn=e;else for(;Wn!==null;){switch(n=Wn,E=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)y=e[o],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&E!==null){e=void 0,o=n,y=E.memoizedProps,E=E.memoizedState,h=o.stateNode;try{var Ye=_s(o.type,y);e=h.getSnapshotBeforeUpdate(Ye,E),h.__reactInternalSnapshotBeforeUpdate=e}catch(lt){Zt(o,o.return,lt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,o=e.nodeType,o===9)Mh(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Mh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=n.sibling,e!==null){e.return=n.return,Wn=e;break}Wn=n.return}}function F1(e,n,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:Ji(e,o),h&4&&co(5,o);break;case 1:if(Ji(e,o),h&4)if(e=o.stateNode,n===null)try{e.componentDidMount()}catch(O){Zt(o,o.return,O)}else{var y=_s(o.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(y,n,e.__reactInternalSnapshotBeforeUpdate)}catch(O){Zt(o,o.return,O)}}h&64&&B1(o),h&512&&uo(o,o.return);break;case 3:if(Ji(e,o),h&64&&(e=o.updateQueue,e!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{A0(e,n)}catch(O){Zt(o,o.return,O)}}break;case 27:n===null&&h&4&&P1(o);case 26:case 5:Ji(e,o),n===null&&h&4&&k1(o),h&512&&uo(o,o.return);break;case 12:Ji(e,o);break;case 31:Ji(e,o),h&4&&V1(e,o);break;case 13:Ji(e,o),h&4&&G1(e,o),h&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=Qp.bind(null,o),py(e,o))));break;case 22:if(h=o.memoizedState!==null||Zi,!h){n=n!==null&&n.memoizedState!==null||Fn,y=Zi;var E=Fn;Zi=h,(Fn=n)&&!E?$i(e,o,(o.subtreeFlags&8772)!==0):Ji(e,o),Zi=y,Fn=E}break;case 30:break;default:Ji(e,o)}}function z1(e){var n=e.alternate;n!==null&&(e.alternate=null,z1(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&kt(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var yn=null,_r=!1;function Qi(e,n,o){for(o=o.child;o!==null;)H1(e,n,o),o=o.sibling}function H1(e,n,o){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Qt,o)}catch{}switch(o.tag){case 26:Fn||Si(o,n),Qi(e,n,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Fn||Si(o,n);var h=yn,y=_r;za(o.type)&&(yn=o.stateNode,_r=!1),Qi(e,n,o),bo(o.stateNode),yn=h,_r=y;break;case 5:Fn||Si(o,n);case 6:if(h=yn,y=_r,yn=null,Qi(e,n,o),yn=h,_r=y,yn!==null)if(_r)try{(yn.nodeType===9?yn.body:yn.nodeName==="HTML"?yn.ownerDocument.body:yn).removeChild(o.stateNode)}catch(E){Zt(o,n,E)}else try{yn.removeChild(o.stateNode)}catch(E){Zt(o,n,E)}break;case 18:yn!==null&&(_r?(e=yn,Bg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),pl(e)):Bg(yn,o.stateNode));break;case 4:h=yn,y=_r,yn=o.stateNode.containerInfo,_r=!0,Qi(e,n,o),yn=h,_r=y;break;case 0:case 11:case 14:case 15:Ba(2,o,n),Fn||Ba(4,o,n),Qi(e,n,o);break;case 1:Fn||(Si(o,n),h=o.stateNode,typeof h.componentWillUnmount=="function"&&j1(o,n,h)),Qi(e,n,o);break;case 21:Qi(e,n,o);break;case 22:Fn=(h=Fn)||o.memoizedState!==null,Qi(e,n,o),Fn=h;break;default:Qi(e,n,o)}}function V1(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{pl(e)}catch(o){Zt(n,n.return,o)}}}function G1(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{pl(e)}catch(o){Zt(n,n.return,o)}}function Vp(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new U1),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new U1),n;default:throw Error(c(435,e.tag))}}function Fc(e,n){var o=Vp(e);n.forEach(function(h){if(!o.has(h)){o.add(h);var y=Jp.bind(null,e,h);h.then(y,y)}})}function Ar(e,n){var o=n.deletions;if(o!==null)for(var h=0;h<o.length;h++){var y=o[h],E=e,O=n,k=O;e:for(;k!==null;){switch(k.tag){case 27:if(za(k.type)){yn=k.stateNode,_r=!1;break e}break;case 5:yn=k.stateNode,_r=!1;break e;case 3:case 4:yn=k.stateNode.containerInfo,_r=!0;break e}k=k.return}if(yn===null)throw Error(c(160));H1(E,O,y),yn=null,_r=!1,E=y.alternate,E!==null&&(E.return=null),y.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)q1(n,e),n=n.sibling}var di=null;function q1(e,n){var o=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ar(n,e),Cr(e),h&4&&(Ba(3,e,e.return),co(3,e),Ba(5,e,e.return));break;case 1:Ar(n,e),Cr(e),h&512&&(Fn||o===null||Si(o,o.return)),h&64&&Zi&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var y=di;if(Ar(n,e),Cr(e),h&512&&(Fn||o===null||Si(o,o.return)),h&4){var E=o!==null?o.memoizedState:null;if(h=e.memoizedState,o===null)if(h===null)if(e.stateNode===null){e:{h=e.type,o=e.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":E=y.getElementsByTagName("title")[0],(!E||E[rn]||E[ze]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=y.createElement(h),y.head.insertBefore(E,y.querySelector("head > title"))),nr(E,h,o),E[ze]=e,Vt(E),h=E;break e;case"link":var O=qg("link","href",y).get(h+(o.href||""));if(O){for(var k=0;k<O.length;k++)if(E=O[k],E.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&E.getAttribute("rel")===(o.rel==null?null:o.rel)&&E.getAttribute("title")===(o.title==null?null:o.title)&&E.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){O.splice(k,1);break t}}E=y.createElement(h),nr(E,h,o),y.head.appendChild(E);break;case"meta":if(O=qg("meta","content",y).get(h+(o.content||""))){for(k=0;k<O.length;k++)if(E=O[k],E.getAttribute("content")===(o.content==null?null:""+o.content)&&E.getAttribute("name")===(o.name==null?null:o.name)&&E.getAttribute("property")===(o.property==null?null:o.property)&&E.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&E.getAttribute("charset")===(o.charSet==null?null:o.charSet)){O.splice(k,1);break t}}E=y.createElement(h),nr(E,h,o),y.head.appendChild(E);break;default:throw Error(c(468,h))}E[ze]=e,Vt(E),h=E}e.stateNode=h}else Xg(y,e.type,e.stateNode);else e.stateNode=Gg(y,h,e.memoizedProps);else E!==h?(E===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):E.count--,h===null?Xg(y,e.type,e.stateNode):Gg(y,h,e.memoizedProps)):h===null&&e.stateNode!==null&&ah(e,e.memoizedProps,o.memoizedProps)}break;case 27:Ar(n,e),Cr(e),h&512&&(Fn||o===null||Si(o,o.return)),o!==null&&h&4&&ah(e,e.memoizedProps,o.memoizedProps);break;case 5:if(Ar(n,e),Cr(e),h&512&&(Fn||o===null||Si(o,o.return)),e.flags&32){y=e.stateNode;try{xa(y,"")}catch(Ye){Zt(e,e.return,Ye)}}h&4&&e.stateNode!=null&&(y=e.memoizedProps,ah(e,y,o!==null?o.memoizedProps:y)),h&1024&&(oh=!0);break;case 6:if(Ar(n,e),Cr(e),h&4){if(e.stateNode===null)throw Error(c(162));h=e.memoizedProps,o=e.stateNode;try{o.nodeValue=h}catch(Ye){Zt(e,e.return,Ye)}}break;case 3:if(nu=null,y=di,di=eu(n.containerInfo),Ar(n,e),di=y,Cr(e),h&4&&o!==null&&o.memoizedState.isDehydrated)try{pl(n.containerInfo)}catch(Ye){Zt(e,e.return,Ye)}oh&&(oh=!1,X1(e));break;case 4:h=di,di=eu(e.stateNode.containerInfo),Ar(n,e),Cr(e),di=h;break;case 12:Ar(n,e),Cr(e);break;case 31:Ar(n,e),Cr(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Fc(e,h)));break;case 13:Ar(n,e),Cr(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Hc=Ft()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Fc(e,h)));break;case 22:y=e.memoizedState!==null;var q=o!==null&&o.memoizedState!==null,me=Zi,Ae=Fn;if(Zi=me||y,Fn=Ae||q,Ar(n,e),Fn=Ae,Zi=me,Cr(e),h&8192)e:for(n=e.stateNode,n._visibility=y?n._visibility&-2:n._visibility|1,y&&(o===null||q||Zi||Fn||As(e)),o=null,n=e;;){if(n.tag===5||n.tag===26){if(o===null){q=o=n;try{if(E=q.stateNode,y)O=E.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{k=q.stateNode;var Te=q.memoizedProps.style,ye=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;k.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(Ye){Zt(q,q.return,Ye)}}}else if(n.tag===6){if(o===null){q=n;try{q.stateNode.nodeValue=y?"":q.memoizedProps}catch(Ye){Zt(q,q.return,Ye)}}}else if(n.tag===18){if(o===null){q=n;try{var ve=q.stateNode;y?jg(ve,!0):jg(q.stateNode,!1)}catch(Ye){Zt(q,q.return,Ye)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;o===n&&(o=null),n=n.return}o===n&&(o=null),n.sibling.return=n.return,n=n.sibling}h&4&&(h=e.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,Fc(e,o))));break;case 19:Ar(n,e),Cr(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Fc(e,h)));break;case 30:break;case 21:break;default:Ar(n,e),Cr(e)}}function Cr(e){var n=e.flags;if(n&2){try{for(var o,h=e.return;h!==null;){if(L1(h)){o=h;break}h=h.return}if(o==null)throw Error(c(160));switch(o.tag){case 27:var y=o.stateNode,E=sh(e);Uc(e,E,y);break;case 5:var O=o.stateNode;o.flags&32&&(xa(O,""),o.flags&=-33);var k=sh(e);Uc(e,k,O);break;case 3:case 4:var q=o.stateNode.containerInfo,me=sh(e);lh(e,me,q);break;default:throw Error(c(161))}}catch(Ae){Zt(e,e.return,Ae)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function X1(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;X1(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ji(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)F1(e,n.alternate,n),n=n.sibling}function As(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ba(4,n,n.return),As(n);break;case 1:Si(n,n.return);var o=n.stateNode;typeof o.componentWillUnmount=="function"&&j1(n,n.return,o),As(n);break;case 27:bo(n.stateNode);case 26:case 5:Si(n,n.return),As(n);break;case 22:n.memoizedState===null&&As(n);break;case 30:As(n);break;default:As(n)}e=e.sibling}}function $i(e,n,o){for(o=o&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var h=n.alternate,y=e,E=n,O=E.flags;switch(E.tag){case 0:case 11:case 15:$i(y,E,o),co(4,E);break;case 1:if($i(y,E,o),h=E,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(me){Zt(h,h.return,me)}if(h=E,y=h.updateQueue,y!==null){var k=h.stateNode;try{var q=y.shared.hiddenCallbacks;if(q!==null)for(y.shared.hiddenCallbacks=null,y=0;y<q.length;y++)_0(q[y],k)}catch(me){Zt(h,h.return,me)}}o&&O&64&&B1(E),uo(E,E.return);break;case 27:P1(E);case 26:case 5:$i(y,E,o),o&&h===null&&O&4&&k1(E),uo(E,E.return);break;case 12:$i(y,E,o);break;case 31:$i(y,E,o),o&&O&4&&V1(y,E);break;case 13:$i(y,E,o),o&&O&4&&G1(y,E);break;case 22:E.memoizedState===null&&$i(y,E,o),uo(E,E.return);break;case 30:break;default:$i(y,E,o)}n=n.sibling}}function ch(e,n){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&Zl(o))}function uh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Zl(e))}function gi(e,n,o,h){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Y1(e,n,o,h),n=n.sibling}function Y1(e,n,o,h){var y=n.flags;switch(n.tag){case 0:case 11:case 15:gi(e,n,o,h),y&2048&&co(9,n);break;case 1:gi(e,n,o,h);break;case 3:gi(e,n,o,h),y&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Zl(e)));break;case 12:if(y&2048){gi(e,n,o,h),e=n.stateNode;try{var E=n.memoizedProps,O=E.id,k=E.onPostCommit;typeof k=="function"&&k(O,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(q){Zt(n,n.return,q)}}else gi(e,n,o,h);break;case 31:gi(e,n,o,h);break;case 13:gi(e,n,o,h);break;case 23:break;case 22:E=n.stateNode,O=n.alternate,n.memoizedState!==null?E._visibility&2?gi(e,n,o,h):fo(e,n):E._visibility&2?gi(e,n,o,h):(E._visibility|=2,sl(e,n,o,h,(n.subtreeFlags&10256)!==0||!1)),y&2048&&ch(O,n);break;case 24:gi(e,n,o,h),y&2048&&uh(n.alternate,n);break;default:gi(e,n,o,h)}}function sl(e,n,o,h,y){for(y=y&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var E=e,O=n,k=o,q=h,me=O.flags;switch(O.tag){case 0:case 11:case 15:sl(E,O,k,q,y),co(8,O);break;case 23:break;case 22:var Ae=O.stateNode;O.memoizedState!==null?Ae._visibility&2?sl(E,O,k,q,y):fo(E,O):(Ae._visibility|=2,sl(E,O,k,q,y)),y&&me&2048&&ch(O.alternate,O);break;case 24:sl(E,O,k,q,y),y&&me&2048&&uh(O.alternate,O);break;default:sl(E,O,k,q,y)}n=n.sibling}}function fo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var o=e,h=n,y=h.flags;switch(h.tag){case 22:fo(o,h),y&2048&&ch(h.alternate,h);break;case 24:fo(o,h),y&2048&&uh(h.alternate,h);break;default:fo(o,h)}n=n.sibling}}var ho=8192;function ll(e,n,o){if(e.subtreeFlags&ho)for(e=e.child;e!==null;)W1(e,n,o),e=e.sibling}function W1(e,n,o){switch(e.tag){case 26:ll(e,n,o),e.flags&ho&&e.memoizedState!==null&&Oy(o,di,e.memoizedState,e.memoizedProps);break;case 5:ll(e,n,o);break;case 3:case 4:var h=di;di=eu(e.stateNode.containerInfo),ll(e,n,o),di=h;break;case 22:e.memoizedState===null&&(h=e.alternate,h!==null&&h.memoizedState!==null?(h=ho,ho=16777216,ll(e,n,o),ho=h):ll(e,n,o));break;default:ll(e,n,o)}}function K1(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function go(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var h=n[o];Wn=h,Q1(h,e)}K1(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Z1(e),e=e.sibling}function Z1(e){switch(e.tag){case 0:case 11:case 15:go(e),e.flags&2048&&Ba(9,e,e.return);break;case 3:go(e);break;case 12:go(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,zc(e)):go(e);break;default:go(e)}}function zc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var h=n[o];Wn=h,Q1(h,e)}K1(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ba(8,n,n.return),zc(n);break;case 22:o=n.stateNode,o._visibility&2&&(o._visibility&=-3,zc(n));break;default:zc(n)}e=e.sibling}}function Q1(e,n){for(;Wn!==null;){var o=Wn;switch(o.tag){case 0:case 11:case 15:Ba(8,o,n);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Zl(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,Wn=h;else e:for(o=e;Wn!==null;){h=Wn;var y=h.sibling,E=h.return;if(z1(h),h===o){Wn=null;break e}if(y!==null){y.return=E,Wn=y;break e}Wn=E}}}var Gp={getCacheForType:function(e){var n=er(Ln),o=n.data.get(e);return o===void 0&&(o=e(),n.data.set(e,o)),o},cacheSignal:function(){return er(Ln).controller.signal}},qp=typeof WeakMap=="function"?WeakMap:Map,qt=0,on=null,Nt=null,Mt=0,Kt=0,kr=null,ja=!1,ol=!1,fh=!1,ea=0,An=0,ka=0,Cs=0,hh=0,Lr=0,cl=0,mo=null,Sr=null,dh=!1,Hc=0,J1=0,Vc=1/0,Gc=null,La=null,Xn=0,Pa=null,ul=null,ta=0,gh=0,mh=null,$1=null,xo=0,xh=null;function Pr(){return(qt&2)!==0&&Mt!==0?Mt&-Mt:ne.T!==null?Eh():ke()}function eg(){if(Lr===0)if((Mt&536870912)===0||jt){var e=_t;_t<<=1,(_t&3932160)===0&&(_t=262144),Lr=e}else Lr=536870912;return e=Br.current,e!==null&&(e.flags|=32),Lr}function Tr(e,n,o){(e===on&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)&&(fl(e,0),Ua(e,Mt,Lr,!1)),Or(e,o),((qt&2)===0||e!==on)&&(e===on&&((qt&2)===0&&(Cs|=o),An===4&&Ua(e,Mt,Lr,!1)),Ti(e))}function tg(e,n,o){if((qt&6)!==0)throw Error(c(327));var h=!o&&(n&127)===0&&(n&e.expiredLanes)===0||Hn(e,n),y=h?Wp(e,n):yh(e,n,!0),E=h;do{if(y===0){ol&&!h&&Ua(e,n,0,!1);break}else{if(o=e.current.alternate,E&&!Xp(o)){y=yh(e,n,!1),E=!1;continue}if(y===2){if(E=n,e.errorRecoveryDisabledLanes&E)var O=0;else O=e.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){n=O;e:{var k=e;y=mo;var q=k.current.memoizedState.isDehydrated;if(q&&(fl(k,O).flags|=256),O=yh(k,O,!1),O!==2){if(fh&&!q){k.errorRecoveryDisabledLanes|=E,Cs|=E,y=4;break e}E=Sr,Sr=y,E!==null&&(Sr===null?Sr=E:Sr.push.apply(Sr,E))}y=O}if(E=!1,y!==2)continue}}if(y===1){fl(e,0),Ua(e,n,0,!0);break}e:{switch(h=e,E=y,E){case 0:case 1:throw Error(c(345));case 4:if((n&4194048)!==n)break;case 6:Ua(h,n,Lr,!ja);break e;case 2:Sr=null;break;case 3:case 5:break;default:throw Error(c(329))}if((n&62914560)===n&&(y=Hc+300-Ft(),10<y)){if(Ua(h,n,Lr,!ja),wi(h,0,!0)!==0)break e;ta=n,h.timeoutHandle=Dg(ng.bind(null,h,o,Sr,Gc,dh,n,Lr,Cs,cl,ja,E,"Throttled",-0,0),y);break e}ng(h,o,Sr,Gc,dh,n,Lr,Cs,cl,ja,E,null,-0,0)}}break}while(!0);Ti(e)}function ng(e,n,o,h,y,E,O,k,q,me,Ae,Te,ye,ve){if(e.timeoutHandle=-1,Te=n.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:br},W1(n,E,Te);var Ye=(E&62914560)===E?Hc-Ft():(E&4194048)===E?J1-Ft():0;if(Ye=Ry(Te,Ye),Ye!==null){ta=E,e.cancelPendingCommit=Ye(ug.bind(null,e,n,E,o,h,y,O,k,q,Ae,Te,null,ye,ve)),Ua(e,E,O,!me);return}}ug(e,n,E,o,h,y,O,k,q)}function Xp(e){for(var n=e;;){var o=n.tag;if((o===0||o===11||o===15)&&n.flags&16384&&(o=n.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var y=o[h],E=y.getSnapshot;y=y.value;try{if(!m(E(),y))return!1}catch{return!1}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ua(e,n,o,h){n&=~hh,n&=~Cs,e.suspendedLanes|=n,e.pingedLanes&=~n,h&&(e.warmLanes|=n),h=e.expirationTimes;for(var y=n;0<y;){var E=31-dt(y),O=1<<E;h[E]=-1,y&=~O}o!==0&&ks(e,o,n)}function qc(){return(qt&6)===0?(po(0),!1):!0}function ph(){if(Nt!==null){if(Kt===0)var e=Nt.return;else e=Nt,Gi=xs=null,Mf(e),tl=null,Jl=0,e=Nt;for(;e!==null;)M1(e.alternate,e),e=e.return;Nt=null}}function fl(e,n){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,hy(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),ta=0,ph(),on=e,Nt=o=Hi(e.current,null),Mt=n,Kt=0,kr=null,ja=!1,ol=Hn(e,n),fh=!1,cl=Lr=hh=Cs=ka=An=0,Sr=mo=null,dh=!1,(n&8)!==0&&(n|=n&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=n;0<h;){var y=31-dt(h),E=1<<y;n|=e[y],h&=~E}return ea=n,hc(),o}function rg(e,n){mt=null,ne.H=so,n===el||n===bc?(n=w0(),Kt=3):n===vf?(n=w0(),Kt=4):Kt=n===Kf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,kr=n,Nt===null&&(An=1,Bc(e,Zr(n,e.current)))}function ig(){var e=Br.current;return e===null?!0:(Mt&4194048)===Mt?ei===null:(Mt&62914560)===Mt||(Mt&536870912)!==0?e===ei:!1}function ag(){var e=ne.H;return ne.H=so,e===null?so:e}function sg(){var e=ne.A;return ne.A=Gp,e}function Xc(){An=4,ja||(Mt&4194048)!==Mt&&Br.current!==null||(ol=!0),(ka&134217727)===0&&(Cs&134217727)===0||on===null||Ua(on,Mt,Lr,!1)}function yh(e,n,o){var h=qt;qt|=2;var y=ag(),E=sg();(on!==e||Mt!==n)&&(Gc=null,fl(e,n)),n=!1;var O=An;e:do try{if(Kt!==0&&Nt!==null){var k=Nt,q=kr;switch(Kt){case 8:ph(),O=6;break e;case 3:case 2:case 9:case 6:Br.current===null&&(n=!0);var me=Kt;if(Kt=0,kr=null,hl(e,k,q,me),o&&ol){O=0;break e}break;default:me=Kt,Kt=0,kr=null,hl(e,k,q,me)}}Yp(),O=An;break}catch(Ae){rg(e,Ae)}while(!0);return n&&e.shellSuspendCounter++,Gi=xs=null,qt=h,ne.H=y,ne.A=E,Nt===null&&(on=null,Mt=0,hc()),O}function Yp(){for(;Nt!==null;)lg(Nt)}function Wp(e,n){var o=qt;qt|=2;var h=ag(),y=sg();on!==e||Mt!==n?(Gc=null,Vc=Ft()+500,fl(e,n)):ol=Hn(e,n);e:do try{if(Kt!==0&&Nt!==null){n=Nt;var E=kr;t:switch(Kt){case 1:Kt=0,kr=null,hl(e,n,E,1);break;case 2:case 9:if(p0(E)){Kt=0,kr=null,og(n);break}n=function(){Kt!==2&&Kt!==9||on!==e||(Kt=7),Ti(e)},E.then(n,n);break e;case 3:Kt=7;break e;case 4:Kt=5;break e;case 7:p0(E)?(Kt=0,kr=null,og(n)):(Kt=0,kr=null,hl(e,n,E,7));break;case 5:var O=null;switch(Nt.tag){case 26:O=Nt.memoizedState;case 5:case 27:var k=Nt;if(O?Yg(O):k.stateNode.complete){Kt=0,kr=null;var q=k.sibling;if(q!==null)Nt=q;else{var me=k.return;me!==null?(Nt=me,Yc(me)):Nt=null}break t}}Kt=0,kr=null,hl(e,n,E,5);break;case 6:Kt=0,kr=null,hl(e,n,E,6);break;case 8:ph(),An=6;break e;default:throw Error(c(462))}}Kp();break}catch(Ae){rg(e,Ae)}while(!0);return Gi=xs=null,ne.H=h,ne.A=y,qt=o,Nt!==null?0:(on=null,Mt=0,hc(),An)}function Kp(){for(;Nt!==null&&!oa();)lg(Nt)}function lg(e){var n=I1(e.alternate,e,ea);e.memoizedProps=e.pendingProps,n===null?Yc(e):Nt=n}function og(e){var n=e,o=n.alternate;switch(n.tag){case 15:case 0:n=C1(o,n,n.pendingProps,n.type,void 0,Mt);break;case 11:n=C1(o,n,n.pendingProps,n.type.render,n.ref,Mt);break;case 5:Mf(n);default:M1(o,n),n=Nt=s0(n,ea),n=I1(o,n,ea)}e.memoizedProps=e.pendingProps,n===null?Yc(e):Nt=n}function hl(e,n,o,h){Gi=xs=null,Mf(n),tl=null,Jl=0;var y=n.return;try{if(Lp(e,y,n,o,Mt)){An=1,Bc(e,Zr(o,e.current)),Nt=null;return}}catch(E){if(y!==null)throw Nt=y,E;An=1,Bc(e,Zr(o,e.current)),Nt=null;return}n.flags&32768?(jt||h===1?e=!0:ol||(Mt&536870912)!==0?e=!1:(ja=e=!0,(h===2||h===9||h===3||h===6)&&(h=Br.current,h!==null&&h.tag===13&&(h.flags|=16384))),cg(n,e)):Yc(n)}function Yc(e){var n=e;do{if((n.flags&32768)!==0){cg(n,ja);return}e=n.return;var o=Fp(n.alternate,n,ea);if(o!==null){Nt=o;return}if(n=n.sibling,n!==null){Nt=n;return}Nt=n=e}while(n!==null);An===0&&(An=5)}function cg(e,n){do{var o=zp(e.alternate,e);if(o!==null){o.flags&=32767,Nt=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!n&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=o}while(e!==null);An=6,Nt=null}function ug(e,n,o,h,y,E,O,k,q){e.cancelPendingCommit=null;do Wc();while(Xn!==0);if((qt&6)!==0)throw Error(c(327));if(n!==null){if(n===e.current)throw Error(c(177));if(E=n.lanes|n.childLanes,E|=sf,yr(e,o,E,O,k,q),e===on&&(Nt=on=null,Mt=0),ul=n,Pa=e,ta=o,gh=E,mh=y,$1=h,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,$p(bn,function(){return mg(),null})):(e.callbackNode=null,e.callbackPriority=0),h=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||h){h=ne.T,ne.T=null,y=Q.p,Q.p=2,O=qt,qt|=4;try{Hp(e,n,o)}finally{qt=O,Q.p=y,ne.T=h}}Xn=1,fg(),hg(),dg()}}function fg(){if(Xn===1){Xn=0;var e=Pa,n=ul,o=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||o){o=ne.T,ne.T=null;var h=Q.p;Q.p=2;var y=qt;qt|=4;try{q1(n,e);var E=Rh,O=D(e.containerInfo),k=E.focusedElem,q=E.selectionRange;if(O!==k&&k&&k.ownerDocument&&N(k.ownerDocument.documentElement,k)){if(q!==null&&j(k)){var me=q.start,Ae=q.end;if(Ae===void 0&&(Ae=me),"selectionStart"in k)k.selectionStart=me,k.selectionEnd=Math.min(Ae,k.value.length);else{var Te=k.ownerDocument||document,ye=Te&&Te.defaultView||window;if(ye.getSelection){var ve=ye.getSelection(),Ye=k.textContent.length,lt=Math.min(q.start,Ye),en=q.end===void 0?lt:Math.min(q.end,Ye);!ve.extend&&lt>en&&(O=en,en=lt,lt=O);var ae=A(k,lt),ee=A(k,en);if(ae&&ee&&(ve.rangeCount!==1||ve.anchorNode!==ae.node||ve.anchorOffset!==ae.offset||ve.focusNode!==ee.node||ve.focusOffset!==ee.offset)){var ge=Te.createRange();ge.setStart(ae.node,ae.offset),ve.removeAllRanges(),lt>en?(ve.addRange(ge),ve.extend(ee.node,ee.offset)):(ge.setEnd(ee.node,ee.offset),ve.addRange(ge))}}}}for(Te=[],ve=k;ve=ve.parentNode;)ve.nodeType===1&&Te.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Te.length;k++){var Se=Te[k];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}su=!!Oh,Rh=Oh=null}finally{qt=y,Q.p=h,ne.T=o}}e.current=n,Xn=2}}function hg(){if(Xn===2){Xn=0;var e=Pa,n=ul,o=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||o){o=ne.T,ne.T=null;var h=Q.p;Q.p=2;var y=qt;qt|=4;try{F1(e,n.alternate,n)}finally{qt=y,Q.p=h,ne.T=o}}Xn=3}}function dg(){if(Xn===4||Xn===3){Xn=0,js();var e=Pa,n=ul,o=ta,h=$1;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Xn=5:(Xn=0,ul=Pa=null,gg(e,e.pendingLanes));var y=e.pendingLanes;if(y===0&&(La=null),De(o),n=n.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Qt,n,void 0,(n.current.flags&128)===128)}catch{}if(h!==null){n=ne.T,y=Q.p,Q.p=2,ne.T=null;try{for(var E=e.onRecoverableError,O=0;O<h.length;O++){var k=h[O];E(k.value,{componentStack:k.stack})}}finally{ne.T=n,Q.p=y}}(ta&3)!==0&&Wc(),Ti(e),y=e.pendingLanes,(o&261930)!==0&&(y&42)!==0?e===xh?xo++:(xo=0,xh=e):xo=0,po(0)}}function gg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Zl(n)))}function Wc(){return fg(),hg(),dg(),mg()}function mg(){if(Xn!==5)return!1;var e=Pa,n=gh;gh=0;var o=De(ta),h=ne.T,y=Q.p;try{Q.p=32>o?32:o,ne.T=null,o=mh,mh=null;var E=Pa,O=ta;if(Xn=0,ul=Pa=null,ta=0,(qt&6)!==0)throw Error(c(331));var k=qt;if(qt|=4,Z1(E.current),Y1(E,E.current,O,o),qt=k,po(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Qt,E)}catch{}return!0}finally{Q.p=y,ne.T=h,gg(e,n)}}function xg(e,n,o){n=Zr(o,n),n=Wf(e.stateNode,n,2),e=Ia(e,n,2),e!==null&&(Or(e,2),Ti(e))}function Zt(e,n,o){if(e.tag===3)xg(e,e,o);else for(;n!==null;){if(n.tag===3){xg(n,e,o);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(La===null||!La.has(h))){e=Zr(o,e),o=p1(2),h=Ia(n,o,2),h!==null&&(y1(o,h,n,e),Or(h,2),Ti(h));break}}n=n.return}}function wh(e,n,o){var h=e.pingCache;if(h===null){h=e.pingCache=new qp;var y=new Set;h.set(n,y)}else y=h.get(n),y===void 0&&(y=new Set,h.set(n,y));y.has(o)||(fh=!0,y.add(o),e=Zp.bind(null,e,n,o),n.then(e,e))}function Zp(e,n,o){var h=e.pingCache;h!==null&&h.delete(n),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,on===e&&(Mt&o)===o&&(An===4||An===3&&(Mt&62914560)===Mt&&300>Ft()-Hc?(qt&2)===0&&fl(e,0):hh|=o,cl===Mt&&(cl=0)),Ti(e)}function pg(e,n){n===0&&(n=xn()),e=ds(e,n),e!==null&&(Or(e,n),Ti(e))}function Qp(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),pg(e,o)}function Jp(e,n){var o=0;switch(e.tag){case 31:case 13:var h=e.stateNode,y=e.memoizedState;y!==null&&(o=y.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(c(314))}h!==null&&h.delete(n),pg(e,o)}function $p(e,n){return yi(e,n)}var Kc=null,dl=null,bh=!1,Zc=!1,vh=!1,Fa=0;function Ti(e){e!==dl&&e.next===null&&(dl===null?Kc=dl=e:dl=dl.next=e),Zc=!0,bh||(bh=!0,ty())}function po(e,n){if(!vh&&Zc){vh=!0;do for(var o=!1,h=Kc;h!==null;){if(e!==0){var y=h.pendingLanes;if(y===0)var E=0;else{var O=h.suspendedLanes,k=h.pingedLanes;E=(1<<31-dt(42|e)+1)-1,E&=y&~(O&~k),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(o=!0,vg(h,E))}else E=Mt,E=wi(h,h===on?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||Hn(h,E)||(o=!0,vg(h,E));h=h.next}while(o);vh=!1}}function ey(){yg()}function yg(){Zc=bh=!1;var e=0;Fa!==0&&fy()&&(e=Fa);for(var n=Ft(),o=null,h=Kc;h!==null;){var y=h.next,E=wg(h,n);E===0?(h.next=null,o===null?Kc=y:o.next=y,y===null&&(dl=o)):(o=h,(e!==0||(E&3)!==0)&&(Zc=!0)),h=y}Xn!==0&&Xn!==5||po(e),Fa!==0&&(Fa=0)}function wg(e,n){for(var o=e.suspendedLanes,h=e.pingedLanes,y=e.expirationTimes,E=e.pendingLanes&-62914561;0<E;){var O=31-dt(E),k=1<<O,q=y[O];q===-1?((k&o)===0||(k&h)!==0)&&(y[O]=ha(k,n)):q<=n&&(e.expiredLanes|=k),E&=~k}if(n=on,o=Mt,o=wi(e,e===n?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h=e.callbackNode,o===0||e===n&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)return h!==null&&h!==null&&Ge(h),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Hn(e,o)){if(n=o&-o,n===e.callbackPriority)return n;switch(h!==null&&Ge(h),De(o)){case 2:case 8:o=Mi;break;case 32:o=bn;break;case 268435456:o=ca;break;default:o=bn}return h=bg.bind(null,e),o=yi(o,h),e.callbackPriority=n,e.callbackNode=o,n}return h!==null&&h!==null&&Ge(h),e.callbackPriority=2,e.callbackNode=null,2}function bg(e,n){if(Xn!==0&&Xn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(Wc()&&e.callbackNode!==o)return null;var h=Mt;return h=wi(e,e===on?h:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h===0?null:(tg(e,h,n),wg(e,Ft()),e.callbackNode!=null&&e.callbackNode===o?bg.bind(null,e):null)}function vg(e,n){if(Wc())return null;tg(e,n,!0)}function ty(){dy(function(){(qt&6)!==0?yi(Qn,ey):yg()})}function Eh(){if(Fa===0){var e=Js;e===0&&(e=qr,qr<<=1,(qr&261888)===0&&(qr=256)),Fa=e}return Fa}function Eg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:pa(""+e)}function _g(e,n){var o=n.ownerDocument.createElement("input");return o.name=n.name,o.value=n.value,e.id&&o.setAttribute("form",e.id),n.parentNode.insertBefore(o,n),e=new FormData(e),o.parentNode.removeChild(o),e}function ny(e,n,o,h,y){if(n==="submit"&&o&&o.stateNode===y){var E=Eg((y[Ue]||null).action),O=h.submitter;O&&(n=(n=O[Ue]||null)?Eg(n.formAction):O.getAttribute("formAction"),n!==null&&(E=n,O=null));var k=new Vn("action","action",null,h,y);e.push({event:k,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Fa!==0){var q=O?_g(y,O):new FormData(y);Hf(o,{pending:!0,data:q,method:y.method,action:E},null,q)}}else typeof E=="function"&&(k.preventDefault(),q=O?_g(y,O):new FormData(y),Hf(o,{pending:!0,data:q,method:y.method,action:E},E,q))},currentTarget:y}]})}}for(var _h=0;_h<Yl.length;_h++){var Ah=Yl[_h],ry=Ah.toLowerCase(),iy=Ah[0].toUpperCase()+Ah.slice(1);hi(ry,"on"+iy)}hi(Er,"onAnimationEnd"),hi(Jn,"onAnimationIteration"),hi(Yt,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(qn,"onTransitionRun"),hi(mr,"onTransitionStart"),hi(Aa,"onTransitionCancel"),hi(zi,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),Rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ay=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yo));function Ag(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var h=e[o],y=h.event;h=h.listeners;e:{var E=void 0;if(n)for(var O=h.length-1;0<=O;O--){var k=h[O],q=k.instance,me=k.currentTarget;if(k=k.listener,q!==E&&y.isPropagationStopped())break e;E=k,y.currentTarget=me;try{E(y)}catch(Ae){fc(Ae)}y.currentTarget=null,E=q}else for(O=0;O<h.length;O++){if(k=h[O],q=k.instance,me=k.currentTarget,k=k.listener,q!==E&&y.isPropagationStopped())break e;E=k,y.currentTarget=me;try{E(y)}catch(Ae){fc(Ae)}y.currentTarget=null,E=q}}}}function Ot(e,n){var o=n[Ke];o===void 0&&(o=n[Ke]=new Set);var h=e+"__bubble";o.has(h)||(Cg(n,e,2,!1),o.add(h))}function Ch(e,n,o){var h=0;n&&(h|=4),Cg(o,e,h,n)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function Sh(e){if(!e[Qc]){e[Qc]=!0,Ce.forEach(function(o){o!=="selectionchange"&&(ay.has(o)||Ch(o,!1,e),Ch(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Qc]||(n[Qc]=!0,Ch("selectionchange",!1,n))}}function Cg(e,n,o,h){switch(em(n)){case 2:var y=My;break;case 8:y=By;break;default:y=zh}o=y.bind(null,n,o,e),y=void 0,!Fl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(y=!0),h?y!==void 0?e.addEventListener(n,o,{capture:!0,passive:y}):e.addEventListener(n,o,!0):y!==void 0?e.addEventListener(n,o,{passive:y}):e.addEventListener(n,o,!1)}function Th(e,n,o,h,y){var E=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var O=h.tag;if(O===3||O===4){var k=h.stateNode.containerInfo;if(k===y)break;if(O===4)for(O=h.return;O!==null;){var q=O.tag;if((q===3||q===4)&&O.stateNode.containerInfo===y)return;O=O.return}for(;k!==null;){if(O=ct(k),O===null)return;if(q=O.tag,q===5||q===6||q===26||q===27){h=E=O;continue e}k=k.parentNode}}h=h.return}ec(function(){var me=E,Ae=Ul(o),Te=[];e:{var ye=uc.get(e);if(ye!==void 0){var ve=Vn,Ye=e;switch(e){case"keypress":if(bi(o)===0)break e;case"keydown":case"keyup":ve=Vs;break;case"focusin":Ye="focus",ve=Vl;break;case"focusout":Ye="blur",ve=Vl;break;case"beforeblur":case"afterblur":ve=Vl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Gt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=zs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=nf;break;case Er:case Jn:case Yt:ve=pt;break;case zi:ve=Li;break;case"scroll":case"scrollend":ve=tc;break;case"wheel":ve=rf;break;case"copy":case"cut":case"paste":ve=Hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Xt;break;case"toggle":case"beforetoggle":ve=ql}var lt=(n&4)!==0,en=!lt&&(e==="scroll"||e==="scrollend"),ae=lt?ye!==null?ye+"Capture":null:ye;lt=[];for(var ee=me,ge;ee!==null;){var Se=ee;if(ge=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ge===null||ae===null||(Se=ft(ee,ae),Se!=null&&lt.push(wo(ee,Se,ge))),en)break;ee=ee.return}0<lt.length&&(ye=new ve(ye,Ye,null,o,Ae),Te.push({event:ye,listeners:lt}))}}if((n&7)===0){e:{if(ye=e==="mouseover"||e==="pointerover",ve=e==="mouseout"||e==="pointerout",ye&&o!==as&&(Ye=o.relatedTarget||o.fromElement)&&(ct(Ye)||Ye[qe]))break e;if((ve||ye)&&(ye=Ae.window===Ae?Ae:(ye=Ae.ownerDocument)?ye.defaultView||ye.parentWindow:window,ve?(Ye=o.relatedTarget||o.toElement,ve=me,Ye=Ye?ct(Ye):null,Ye!==null&&(en=g(Ye),lt=Ye.tag,Ye!==en||lt!==5&&lt!==27&&lt!==6)&&(Ye=null)):(ve=null,Ye=me),ve!==Ye)){if(lt=Gt,Se="onMouseLeave",ae="onMouseEnter",ee="mouse",(e==="pointerout"||e==="pointerover")&&(lt=Xt,Se="onPointerLeave",ae="onPointerEnter",ee="pointer"),en=ve==null?ye:sr(ve),ge=Ye==null?ye:sr(Ye),ye=new lt(Se,ee+"leave",ve,o,Ae),ye.target=en,ye.relatedTarget=ge,Se=null,ct(Ae)===me&&(lt=new lt(ae,ee+"enter",Ye,o,Ae),lt.target=ge,lt.relatedTarget=en,Se=lt),en=Se,ve&&Ye)t:{for(lt=sy,ae=ve,ee=Ye,ge=0,Se=ae;Se;Se=lt(Se))ge++;Se=0;for(var rt=ee;rt;rt=lt(rt))Se++;for(;0<ge-Se;)ae=lt(ae),ge--;for(;0<Se-ge;)ee=lt(ee),Se--;for(;ge--;){if(ae===ee||ee!==null&&ae===ee.alternate){lt=ae;break t}ae=lt(ae),ee=lt(ee)}lt=null}else lt=null;ve!==null&&Sg(Te,ye,ve,lt,!1),Ye!==null&&en!==null&&Sg(Te,en,Ye,lt,!0)}}e:{if(ye=me?sr(me):window,ve=ye.nodeName&&ye.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ye.type==="file")var Lt=Dr;else if(Xl(ye))if(cc)Lt=u;else{Lt=i;var Je=t}else ve=ye.nodeName,!ve||ve.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?me&&an(me.elementType)&&(Lt=Dr):Lt=l;if(Lt&&(Lt=Lt(e,me))){Ir(Te,Lt,o,Ae);break e}Je&&Je(e,ye,me),e==="focusout"&&me&&ye.type==="number"&&me.memoizedProps.value!=null&&P(ye,"number",ye.value)}switch(Je=me?sr(me):window,e){case"focusin":(Xl(Je)||Je.contentEditable==="true")&&(Y=Je,J=me,le=null);break;case"focusout":le=J=Y=null;break;case"mousedown":we=!0;break;case"contextmenu":case"mouseup":case"dragend":we=!1,Le(Te,o,Ae);break;case"selectionchange":if(F)break;case"keydown":case"keyup":Le(Te,o,Ae)}var yt;if(os)e:{switch(e){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else _a?oc(e,o)&&(Bt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Bt="onCompositionStart");Bt&&(lc&&o.locale!=="ko"&&(_a||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&_a&&(yt=ya()):(ui=Ae,fi="value"in ui?ui.value:ui.textContent,_a=!0)),Je=Jc(me,Bt),0<Je.length&&(Bt=new ic(Bt,e,null,o,Ae),Te.push({event:Bt,listeners:Je}),yt?Bt.data=yt:(yt=Ea(o),yt!==null&&(Bt.data=yt)))),(yt=sc?_i(e,o):qs(e,o))&&(Bt=Jc(me,"onBeforeInput"),0<Bt.length&&(Je=new ic("onBeforeInput","beforeinput",null,o,Ae),Te.push({event:Je,listeners:Bt}),Je.data=yt)),ny(Te,e,me,o,Ae)}Ag(Te,n)})}function wo(e,n,o){return{instance:e,listener:n,currentTarget:o}}function Jc(e,n){for(var o=n+"Capture",h=[];e!==null;){var y=e,E=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||E===null||(y=ft(e,o),y!=null&&h.unshift(wo(e,y,E)),y=ft(e,n),y!=null&&h.push(wo(e,y,E))),e.tag===3)return h;e=e.return}return[]}function sy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Sg(e,n,o,h,y){for(var E=n._reactName,O=[];o!==null&&o!==h;){var k=o,q=k.alternate,me=k.stateNode;if(k=k.tag,q!==null&&q===h)break;k!==5&&k!==26&&k!==27||me===null||(q=me,y?(me=ft(o,E),me!=null&&O.unshift(wo(o,me,q))):y||(me=ft(o,E),me!=null&&O.push(wo(o,me,q)))),o=o.return}O.length!==0&&e.push({event:n,listeners:O})}var ly=/\r\n?/g,oy=/\u0000|\uFFFD/g;function Tg(e){return(typeof e=="string"?e:""+e).replace(ly,`
`).replace(oy,"")}function Ng(e,n){return n=Tg(n),Tg(e)===n}function $t(e,n,o,h,y,E){switch(o){case"children":typeof h=="string"?n==="body"||n==="textarea"&&h===""||xa(e,h):(typeof h=="number"||typeof h=="bigint")&&n!=="body"&&xa(e,""+h);break;case"className":lr(e,"class",h);break;case"tabIndex":lr(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(e,o,h);break;case"style":nt(e,h,E);break;case"data":if(n!=="object"){lr(e,"data",h);break}case"src":case"href":if(h===""&&(n!=="a"||o!=="href")){e.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=pa(""+h),e.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(o==="formAction"?(n!=="input"&&$t(e,n,"name",y.name,y,null),$t(e,n,"formEncType",y.formEncType,y,null),$t(e,n,"formMethod",y.formMethod,y,null),$t(e,n,"formTarget",y.formTarget,y,null)):($t(e,n,"encType",y.encType,y,null),$t(e,n,"method",y.method,y,null),$t(e,n,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=pa(""+h),e.setAttribute(o,h);break;case"onClick":h!=null&&(e.onclick=br);break;case"onScroll":h!=null&&Ot("scroll",e);break;case"onScrollEnd":h!=null&&Ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(c(61));if(o=h.__html,o!=null){if(y.children!=null)throw Error(c(60));e.innerHTML=o}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}o=pa(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""+h):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":h===!0?e.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,h):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(o,h):e.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(o):e.setAttribute(o,h);break;case"popover":Ot("beforetoggle",e),Ot("toggle",e),hr(e,"popover",h);break;case"xlinkActuate":It(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":It(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":It(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":It(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":It(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":It(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":It(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":It(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":It(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":hr(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=$o.get(o)||o,hr(e,o,h))}}function Nh(e,n,o,h,y,E){switch(o){case"style":nt(e,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(c(61));if(o=h.__html,o!=null){if(y.children!=null)throw Error(c(60));e.innerHTML=o}}break;case"children":typeof h=="string"?xa(e,h):(typeof h=="number"||typeof h=="bigint")&&xa(e,""+h);break;case"onScroll":h!=null&&Ot("scroll",e);break;case"onScrollEnd":h!=null&&Ot("scrollend",e);break;case"onClick":h!=null&&(e.onclick=br);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!da.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(y=o.endsWith("Capture"),n=o.slice(2,y?o.length-7:void 0),E=e[Ue]||null,E=E!=null?E[o]:null,typeof E=="function"&&e.removeEventListener(n,E,y),typeof h=="function")){typeof E!="function"&&E!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(n,h,y);break e}o in e?e[o]=h:h===!0?e.setAttribute(o,""):hr(e,o,h)}}}function nr(e,n,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",e),Ot("load",e);var h=!1,y=!1,E;for(E in o)if(o.hasOwnProperty(E)){var O=o[E];if(O!=null)switch(E){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,n));default:$t(e,n,E,O,o,null)}}y&&$t(e,n,"srcSet",o.srcSet,o,null),h&&$t(e,n,"src",o.src,o,null);return;case"input":Ot("invalid",e);var k=E=O=y=null,q=null,me=null;for(h in o)if(o.hasOwnProperty(h)){var Ae=o[h];if(Ae!=null)switch(h){case"name":y=Ae;break;case"type":O=Ae;break;case"checked":q=Ae;break;case"defaultChecked":me=Ae;break;case"value":E=Ae;break;case"defaultValue":k=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(c(137,n));break;default:$t(e,n,h,Ae,o,null)}}ce(e,E,k,q,me,O,y,!1);return;case"select":Ot("invalid",e),h=O=E=null;for(y in o)if(o.hasOwnProperty(y)&&(k=o[y],k!=null))switch(y){case"value":E=k;break;case"defaultValue":O=k;break;case"multiple":h=k;default:$t(e,n,y,k,o,null)}n=E,o=O,e.multiple=!!h,n!=null?Ze(e,!!h,n,!1):o!=null&&Ze(e,!!h,o,!0);return;case"textarea":Ot("invalid",e),E=y=h=null;for(O in o)if(o.hasOwnProperty(O)&&(k=o[O],k!=null))switch(O){case"value":h=k;break;case"defaultValue":y=k;break;case"children":E=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(c(91));break;default:$t(e,n,O,k,o,null)}dr(e,h,y,E);return;case"option":for(q in o)if(o.hasOwnProperty(q)&&(h=o[q],h!=null))switch(q){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:$t(e,n,q,h,o,null)}return;case"dialog":Ot("beforetoggle",e),Ot("toggle",e),Ot("cancel",e),Ot("close",e);break;case"iframe":case"object":Ot("load",e);break;case"video":case"audio":for(h=0;h<yo.length;h++)Ot(yo[h],e);break;case"image":Ot("error",e),Ot("load",e);break;case"details":Ot("toggle",e);break;case"embed":case"source":case"link":Ot("error",e),Ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in o)if(o.hasOwnProperty(me)&&(h=o[me],h!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,n));default:$t(e,n,me,h,o,null)}return;default:if(an(n)){for(Ae in o)o.hasOwnProperty(Ae)&&(h=o[Ae],h!==void 0&&Nh(e,n,Ae,h,o,void 0));return}}for(k in o)o.hasOwnProperty(k)&&(h=o[k],h!=null&&$t(e,n,k,h,o,null))}function cy(e,n,o,h){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,E=null,O=null,k=null,q=null,me=null,Ae=null;for(ve in o){var Te=o[ve];if(o.hasOwnProperty(ve)&&Te!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":q=Te;default:h.hasOwnProperty(ve)||$t(e,n,ve,null,h,Te)}}for(var ye in h){var ve=h[ye];if(Te=o[ye],h.hasOwnProperty(ye)&&(ve!=null||Te!=null))switch(ye){case"type":E=ve;break;case"name":y=ve;break;case"checked":me=ve;break;case"defaultChecked":Ae=ve;break;case"value":O=ve;break;case"defaultValue":k=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(c(137,n));break;default:ve!==Te&&$t(e,n,ye,ve,h,Te)}}jn(e,O,k,q,me,Ae,E,y);return;case"select":ve=O=k=ye=null;for(E in o)if(q=o[E],o.hasOwnProperty(E)&&q!=null)switch(E){case"value":break;case"multiple":ve=q;default:h.hasOwnProperty(E)||$t(e,n,E,null,h,q)}for(y in h)if(E=h[y],q=o[y],h.hasOwnProperty(y)&&(E!=null||q!=null))switch(y){case"value":ye=E;break;case"defaultValue":k=E;break;case"multiple":O=E;default:E!==q&&$t(e,n,y,E,h,q)}n=k,o=O,h=ve,ye!=null?Ze(e,!!o,ye,!1):!!h!=!!o&&(n!=null?Ze(e,!!o,n,!0):Ze(e,!!o,o?[]:"",!1));return;case"textarea":ve=ye=null;for(k in o)if(y=o[k],o.hasOwnProperty(k)&&y!=null&&!h.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:$t(e,n,k,null,h,y)}for(O in h)if(y=h[O],E=o[O],h.hasOwnProperty(O)&&(y!=null||E!=null))switch(O){case"value":ye=y;break;case"defaultValue":ve=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(c(91));break;default:y!==E&&$t(e,n,O,y,h,E)}In(e,ye,ve);return;case"option":for(var Ye in o)if(ye=o[Ye],o.hasOwnProperty(Ye)&&ye!=null&&!h.hasOwnProperty(Ye))switch(Ye){case"selected":e.selected=!1;break;default:$t(e,n,Ye,null,h,ye)}for(q in h)if(ye=h[q],ve=o[q],h.hasOwnProperty(q)&&ye!==ve&&(ye!=null||ve!=null))switch(q){case"selected":e.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:$t(e,n,q,ye,h,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in o)ye=o[lt],o.hasOwnProperty(lt)&&ye!=null&&!h.hasOwnProperty(lt)&&$t(e,n,lt,null,h,ye);for(me in h)if(ye=h[me],ve=o[me],h.hasOwnProperty(me)&&ye!==ve&&(ye!=null||ve!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(c(137,n));break;default:$t(e,n,me,ye,h,ve)}return;default:if(an(n)){for(var en in o)ye=o[en],o.hasOwnProperty(en)&&ye!==void 0&&!h.hasOwnProperty(en)&&Nh(e,n,en,void 0,h,ye);for(Ae in h)ye=h[Ae],ve=o[Ae],!h.hasOwnProperty(Ae)||ye===ve||ye===void 0&&ve===void 0||Nh(e,n,Ae,ye,h,ve);return}}for(var ae in o)ye=o[ae],o.hasOwnProperty(ae)&&ye!=null&&!h.hasOwnProperty(ae)&&$t(e,n,ae,null,h,ye);for(Te in h)ye=h[Te],ve=o[Te],!h.hasOwnProperty(Te)||ye===ve||ye==null&&ve==null||$t(e,n,Te,ye,h,ve)}function Og(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,o=performance.getEntriesByType("resource"),h=0;h<o.length;h++){var y=o[h],E=y.transferSize,O=y.initiatorType,k=y.duration;if(E&&k&&Og(O)){for(O=0,k=y.responseEnd,h+=1;h<o.length;h++){var q=o[h],me=q.startTime;if(me>k)break;var Ae=q.transferSize,Te=q.initiatorType;Ae&&Og(Te)&&(q=q.responseEnd,O+=Ae*(q<k?1:(k-me)/(q-me)))}if(--h,n+=8*(E+O)/(y.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Oh=null,Rh=null;function $c(e){return e.nodeType===9?e:e.ownerDocument}function Rg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ig(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ih(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Dh=null;function fy(){var e=window.event;return e&&e.type==="popstate"?e===Dh?!1:(Dh=e,!0):(Dh=null,!1)}var Dg=typeof setTimeout=="function"?setTimeout:void 0,hy=typeof clearTimeout=="function"?clearTimeout:void 0,Mg=typeof Promise=="function"?Promise:void 0,dy=typeof queueMicrotask=="function"?queueMicrotask:typeof Mg<"u"?function(e){return Mg.resolve(null).then(e).catch(gy)}:Dg;function gy(e){setTimeout(function(){throw e})}function za(e){return e==="head"}function Bg(e,n){var o=n,h=0;do{var y=o.nextSibling;if(e.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"||o==="/&"){if(h===0){e.removeChild(y),pl(n);return}h--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")h++;else if(o==="html")bo(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,bo(o);for(var E=o.firstChild;E;){var O=E.nextSibling,k=E.nodeName;E[rn]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=O}}else o==="body"&&bo(e.ownerDocument.body);o=y}while(o);pl(n)}function jg(e,n){var o=e;e=0;do{var h=o.nextSibling;if(o.nodeType===1?n?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(n?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=h}while(o)}function Mh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var o=n;switch(n=n.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Mh(o),kt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function my(e,n,o,h){for(;e.nodeType===1;){var y=o;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[rn])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(E=e.getAttribute("rel"),E==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(E!==y.rel||e.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||e.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||e.getAttribute("title")!==(y.title==null?null:y.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(E=e.getAttribute("src"),(E!==(y.src==null?null:y.src)||e.getAttribute("type")!==(y.type==null?null:y.type)||e.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&E&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var E=y.name==null?null:""+y.name;if(y.type==="hidden"&&e.getAttribute("name")===E)return e}else return e;if(e=ti(e.nextSibling),e===null)break}return null}function xy(e,n,o){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=ti(e.nextSibling),e===null))return null;return e}function kg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ti(e.nextSibling),e===null))return null;return e}function Bh(e){return e.data==="$?"||e.data==="$~"}function jh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function py(e,n){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||o.readyState!=="loading")n();else{var h=function(){n(),o.removeEventListener("DOMContentLoaded",h)};o.addEventListener("DOMContentLoaded",h),e._reactRetry=h}}function ti(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var kh=null;function Lg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(n===0)return ti(e.nextSibling);n--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||n++}e=e.nextSibling}return null}function Pg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(n===0)return e;n--}else o!=="/$"&&o!=="/&"||n++}e=e.previousSibling}return null}function Ug(e,n,o){switch(n=$c(o),e){case"html":if(e=n.documentElement,!e)throw Error(c(452));return e;case"head":if(e=n.head,!e)throw Error(c(453));return e;case"body":if(e=n.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function bo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);kt(e)}var ni=new Map,Fg=new Set;function eu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var na=Q.d;Q.d={f:yy,r:wy,D:by,C:vy,L:Ey,m:_y,X:Cy,S:Ay,M:Sy};function yy(){var e=na.f(),n=qc();return e||n}function wy(e){var n=tt(e);n!==null&&n.tag===5&&n.type==="form"?r1(n):na.r(e)}var gl=typeof document>"u"?null:document;function zg(e,n,o){var h=gl;if(h&&typeof n=="string"&&n){var y=At(n);y='link[rel="'+e+'"][href="'+y+'"]',typeof o=="string"&&(y+='[crossorigin="'+o+'"]'),Fg.has(y)||(Fg.add(y),e={rel:e,crossOrigin:o,href:n},h.querySelector(y)===null&&(n=h.createElement("link"),nr(n,"link",e),Vt(n),h.head.appendChild(n)))}}function by(e){na.D(e),zg("dns-prefetch",e,null)}function vy(e,n){na.C(e,n),zg("preconnect",e,n)}function Ey(e,n,o){na.L(e,n,o);var h=gl;if(h&&e&&n){var y='link[rel="preload"][as="'+At(n)+'"]';n==="image"&&o&&o.imageSrcSet?(y+='[imagesrcset="'+At(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(y+='[imagesizes="'+At(o.imageSizes)+'"]')):y+='[href="'+At(e)+'"]';var E=y;switch(n){case"style":E=ml(e);break;case"script":E=xl(e)}ni.has(E)||(e=S({rel:"preload",href:n==="image"&&o&&o.imageSrcSet?void 0:e,as:n},o),ni.set(E,e),h.querySelector(y)!==null||n==="style"&&h.querySelector(vo(E))||n==="script"&&h.querySelector(Eo(E))||(n=h.createElement("link"),nr(n,"link",e),Vt(n),h.head.appendChild(n)))}}function _y(e,n){na.m(e,n);var o=gl;if(o&&e){var h=n&&typeof n.as=="string"?n.as:"script",y='link[rel="modulepreload"][as="'+At(h)+'"][href="'+At(e)+'"]',E=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=xl(e)}if(!ni.has(E)&&(e=S({rel:"modulepreload",href:e},n),ni.set(E,e),o.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Eo(E)))return}h=o.createElement("link"),nr(h,"link",e),Vt(h),o.head.appendChild(h)}}}function Ay(e,n,o){na.S(e,n,o);var h=gl;if(h&&e){var y=On(h).hoistableStyles,E=ml(e);n=n||"default";var O=y.get(E);if(!O){var k={loading:0,preload:null};if(O=h.querySelector(vo(E)))k.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":n},o),(o=ni.get(E))&&Lh(e,o);var q=O=h.createElement("link");Vt(q),nr(q,"link",e),q._p=new Promise(function(me,Ae){q.onload=me,q.onerror=Ae}),q.addEventListener("load",function(){k.loading|=1}),q.addEventListener("error",function(){k.loading|=2}),k.loading|=4,tu(O,n,h)}O={type:"stylesheet",instance:O,count:1,state:k},y.set(E,O)}}}function Cy(e,n){na.X(e,n);var o=gl;if(o&&e){var h=On(o).hoistableScripts,y=xl(e),E=h.get(y);E||(E=o.querySelector(Eo(y)),E||(e=S({src:e,async:!0},n),(n=ni.get(y))&&Ph(e,n),E=o.createElement("script"),Vt(E),nr(E,"link",e),o.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(y,E))}}function Sy(e,n){na.M(e,n);var o=gl;if(o&&e){var h=On(o).hoistableScripts,y=xl(e),E=h.get(y);E||(E=o.querySelector(Eo(y)),E||(e=S({src:e,async:!0,type:"module"},n),(n=ni.get(y))&&Ph(e,n),E=o.createElement("script"),Vt(E),nr(E,"link",e),o.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(y,E))}}function Hg(e,n,o,h){var y=(y=je.current)?eu(y):null;if(!y)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(n=ml(o.href),o=On(y).hoistableStyles,h=o.get(n),h||(h={type:"style",instance:null,count:0,state:null},o.set(n,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=ml(o.href);var E=On(y).hoistableStyles,O=E.get(e);if(O||(y=y.ownerDocument||y,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(e,O),(E=y.querySelector(vo(e)))&&!E._p&&(O.instance=E,O.state.loading=5),ni.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ni.set(e,o),E||Ty(y,e,o,O.state))),n&&h===null)throw Error(c(528,""));return O}if(n&&h!==null)throw Error(c(529,""));return null;case"script":return n=o.async,o=o.src,typeof o=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=xl(o),o=On(y).hoistableScripts,h=o.get(n),h||(h={type:"script",instance:null,count:0,state:null},o.set(n,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function ml(e){return'href="'+At(e)+'"'}function vo(e){return'link[rel="stylesheet"]['+e+"]"}function Vg(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function Ty(e,n,o,h){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?h.loading=1:(n=e.createElement("link"),h.preload=n,n.addEventListener("load",function(){return h.loading|=1}),n.addEventListener("error",function(){return h.loading|=2}),nr(n,"link",o),Vt(n),e.head.appendChild(n))}function xl(e){return'[src="'+At(e)+'"]'}function Eo(e){return"script[async]"+e}function Gg(e,n,o){if(n.count++,n.instance===null)switch(n.type){case"style":var h=e.querySelector('style[data-href~="'+At(o.href)+'"]');if(h)return n.instance=h,Vt(h),h;var y=S({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),Vt(h),nr(h,"style",y),tu(h,o.precedence,e),n.instance=h;case"stylesheet":y=ml(o.href);var E=e.querySelector(vo(y));if(E)return n.state.loading|=4,n.instance=E,Vt(E),E;h=Vg(o),(y=ni.get(y))&&Lh(h,y),E=(e.ownerDocument||e).createElement("link"),Vt(E);var O=E;return O._p=new Promise(function(k,q){O.onload=k,O.onerror=q}),nr(E,"link",h),n.state.loading|=4,tu(E,o.precedence,e),n.instance=E;case"script":return E=xl(o.src),(y=e.querySelector(Eo(E)))?(n.instance=y,Vt(y),y):(h=o,(y=ni.get(E))&&(h=S({},o),Ph(h,y)),e=e.ownerDocument||e,y=e.createElement("script"),Vt(y),nr(y,"link",h),e.head.appendChild(y),n.instance=y);case"void":return null;default:throw Error(c(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(h=n.instance,n.state.loading|=4,tu(h,o.precedence,e));return n.instance}function tu(e,n,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,E=y,O=0;O<h.length;O++){var k=h[O];if(k.dataset.precedence===n)E=k;else if(E!==y)break}E?E.parentNode.insertBefore(e,E.nextSibling):(n=o.nodeType===9?o.head:o,n.insertBefore(e,n.firstChild))}function Lh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Ph(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var nu=null;function qg(e,n,o){if(nu===null){var h=new Map,y=nu=new Map;y.set(o,h)}else y=nu,h=y.get(o),h||(h=new Map,y.set(o,h));if(h.has(e))return h;for(h.set(e,null),o=o.getElementsByTagName(e),y=0;y<o.length;y++){var E=o[y];if(!(E[rn]||E[ze]||e==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var O=E.getAttribute(n)||"";O=e+O;var k=h.get(O);k?k.push(E):h.set(O,[E])}}return h}function Xg(e,n,o){e=e.ownerDocument||e,e.head.insertBefore(o,n==="title"?e.querySelector("head > title"):null)}function Ny(e,n,o){if(o===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Yg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Oy(e,n,o,h){if(o.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=ml(h.href),E=n.querySelector(vo(y));if(E){n=E._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=ru.bind(e),n.then(e,e)),o.state.loading|=4,o.instance=E,Vt(E);return}E=n.ownerDocument||n,h=Vg(h),(y=ni.get(y))&&Lh(h,y),E=E.createElement("link"),Vt(E);var O=E;O._p=new Promise(function(k,q){O.onload=k,O.onerror=q}),nr(E,"link",h),o.instance=E}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,n),(n=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=ru.bind(e),n.addEventListener("load",o),n.addEventListener("error",o))}}var Uh=0;function Ry(e,n){return e.stylesheets&&e.count===0&&au(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var h=setTimeout(function(){if(e.stylesheets&&au(e,e.stylesheets),e.unsuspend){var E=e.unsuspend;e.unsuspend=null,E()}},6e4+n);0<e.imgBytes&&Uh===0&&(Uh=62500*uy());var y=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&au(e,e.stylesheets),e.unsuspend)){var E=e.unsuspend;e.unsuspend=null,E()}},(e.imgBytes>Uh?50:800)+n);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(h),clearTimeout(y)}}:null}function ru(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)au(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var iu=null;function au(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,iu=new Map,n.forEach(Iy,e),iu=null,ru.call(e))}function Iy(e,n){if(!(n.state.loading&4)){var o=iu.get(e);if(o)var h=o.get(null);else{o=new Map,iu.set(e,o);for(var y=e.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<y.length;E++){var O=y[E];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(o.set(O.dataset.precedence,O),h=O)}h&&o.set(null,h)}y=n.instance,O=y.getAttribute("data-precedence"),E=o.get(O)||h,E===h&&o.set(null,y),o.set(O,y),this.count++,h=ru.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),E?E.parentNode.insertBefore(y,E.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(y,e.firstChild)),n.state.loading|=4}}var _o={$$typeof:G,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Dy(e,n,o,h,y,E,O,k,q){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.hiddenUpdates=fr(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=E,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function Wg(e,n,o,h,y,E,O,k,q,me,Ae,Te){return e=new Dy(e,n,o,O,q,me,Ae,Te,k),n=1,E===!0&&(n|=24),E=Mr(3,null,null,n),e.current=E,E.stateNode=e,n=yf(),n.refCount++,e.pooledCache=n,n.refCount++,E.memoizedState={element:h,isDehydrated:o,cache:n},Ef(E),e}function Kg(e){return e?(e=Ys,e):Ys}function Zg(e,n,o,h,y,E){y=Kg(y),h.context===null?h.context=y:h.pendingContext=y,h=Ra(n),h.payload={element:o},E=E===void 0?null:E,E!==null&&(h.callback=E),o=Ia(e,h,n),o!==null&&(Tr(o,e,n),eo(o,e,n))}function Qg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function Fh(e,n){Qg(e,n),(e=e.alternate)&&Qg(e,n)}function Jg(e){if(e.tag===13||e.tag===31){var n=ds(e,67108864);n!==null&&Tr(n,e,67108864),Fh(e,67108864)}}function $g(e){if(e.tag===13||e.tag===31){var n=Pr();n=de(n);var o=ds(e,n);o!==null&&Tr(o,e,n),Fh(e,n)}}var su=!0;function My(e,n,o,h){var y=ne.T;ne.T=null;var E=Q.p;try{Q.p=2,zh(e,n,o,h)}finally{Q.p=E,ne.T=y}}function By(e,n,o,h){var y=ne.T;ne.T=null;var E=Q.p;try{Q.p=8,zh(e,n,o,h)}finally{Q.p=E,ne.T=y}}function zh(e,n,o,h){if(su){var y=Hh(h);if(y===null)Th(e,n,h,lu,o),tm(e,h);else if(ky(y,e,n,o,h))h.stopPropagation();else if(tm(e,h),n&4&&-1<jy.indexOf(e)){for(;y!==null;){var E=tt(y);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var O=Xr(E.pendingLanes);if(O!==0){var k=E;for(k.pendingLanes|=2,k.entangledLanes|=2;O;){var q=1<<31-dt(O);k.entanglements[1]|=q,O&=~q}Ti(E),(qt&6)===0&&(Vc=Ft()+500,po(0))}}break;case 31:case 13:k=ds(E,2),k!==null&&Tr(k,E,2),qc(),Fh(E,2)}if(E=Hh(h),E===null&&Th(e,n,h,lu,o),E===y)break;y=E}y!==null&&h.stopPropagation()}else Th(e,n,h,null,o)}}function Hh(e){return e=Ul(e),Vh(e)}var lu=null;function Vh(e){if(lu=null,e=ct(e),e!==null){var n=g(e);if(n===null)e=null;else{var o=n.tag;if(o===13){if(e=x(n),e!==null)return e;e=null}else if(o===31){if(e=b(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return lu=e,null}function em(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(li()){case Qn:return 2;case Mi:return 8;case bn:case tn:return 32;case ca:return 268435456;default:return 32}default:return 32}}var Gh=!1,Ha=null,Va=null,Ga=null,Ao=new Map,Co=new Map,qa=[],jy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tm(e,n){switch(e){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Ao.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(n.pointerId)}}function So(e,n,o,h,y,E){return e===null||e.nativeEvent!==E?(e={blockedOn:n,domEventName:o,eventSystemFlags:h,nativeEvent:E,targetContainers:[y]},n!==null&&(n=tt(n),n!==null&&Jg(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,y!==null&&n.indexOf(y)===-1&&n.push(y),e)}function ky(e,n,o,h,y){switch(n){case"focusin":return Ha=So(Ha,e,n,o,h,y),!0;case"dragenter":return Va=So(Va,e,n,o,h,y),!0;case"mouseover":return Ga=So(Ga,e,n,o,h,y),!0;case"pointerover":var E=y.pointerId;return Ao.set(E,So(Ao.get(E)||null,e,n,o,h,y)),!0;case"gotpointercapture":return E=y.pointerId,Co.set(E,So(Co.get(E)||null,e,n,o,h,y)),!0}return!1}function nm(e){var n=ct(e.target);if(n!==null){var o=g(n);if(o!==null){if(n=o.tag,n===13){if(n=x(o),n!==null){e.blockedOn=n,_e(e.priority,function(){$g(o)});return}}else if(n===31){if(n=b(o),n!==null){e.blockedOn=n,_e(e.priority,function(){$g(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ou(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=Hh(e.nativeEvent);if(o===null){o=e.nativeEvent;var h=new o.constructor(o.type,o);as=h,o.target.dispatchEvent(h),as=null}else return n=tt(o),n!==null&&Jg(n),e.blockedOn=o,!1;n.shift()}return!0}function rm(e,n,o){ou(e)&&o.delete(n)}function Ly(){Gh=!1,Ha!==null&&ou(Ha)&&(Ha=null),Va!==null&&ou(Va)&&(Va=null),Ga!==null&&ou(Ga)&&(Ga=null),Ao.forEach(rm),Co.forEach(rm)}function cu(e,n){e.blockedOn===n&&(e.blockedOn=null,Gh||(Gh=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ly)))}var uu=null;function im(e){uu!==e&&(uu=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){uu===e&&(uu=null);for(var n=0;n<e.length;n+=3){var o=e[n],h=e[n+1],y=e[n+2];if(typeof h!="function"){if(Vh(h||o)===null)continue;break}var E=tt(o);E!==null&&(e.splice(n,3),n-=3,Hf(E,{pending:!0,data:y,method:o.method,action:h},h,y))}}))}function pl(e){function n(q){return cu(q,e)}Ha!==null&&cu(Ha,e),Va!==null&&cu(Va,e),Ga!==null&&cu(Ga,e),Ao.forEach(n),Co.forEach(n);for(var o=0;o<qa.length;o++){var h=qa[o];h.blockedOn===e&&(h.blockedOn=null)}for(;0<qa.length&&(o=qa[0],o.blockedOn===null);)nm(o),o.blockedOn===null&&qa.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var y=o[h],E=o[h+1],O=y[Ue]||null;if(typeof E=="function")O||im(o);else if(O){var k=null;if(E&&E.hasAttribute("formAction")){if(y=E,O=E[Ue]||null)k=O.formAction;else if(Vh(y)!==null)continue}else k=O.action;typeof k=="function"?o[h+1]=k:(o.splice(h,3),h-=3),im(o)}}}function am(){function e(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(O){return y=O})},focusReset:"manual",scroll:"manual"})}function n(){y!==null&&(y(),y=null),h||setTimeout(o,20)}function o(){if(!h&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,y=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(o,100),function(){h=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),y!==null&&(y(),y=null)}}}function qh(e){this._internalRoot=e}fu.prototype.render=qh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(c(409));var o=n.current,h=Pr();Zg(o,h,e,n,null,null)},fu.prototype.unmount=qh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Zg(e.current,2,null,e,null,null),qc(),n[qe]=null}};function fu(e){this._internalRoot=e}fu.prototype.unstable_scheduleHydration=function(e){if(e){var n=ke();e={blockedOn:null,target:e,priority:n};for(var o=0;o<qa.length&&n!==0&&n<qa[o].priority;o++);qa.splice(o,0,e),o===0&&nm(e)}};var sm=r.version;if(sm!=="19.2.0")throw Error(c(527,sm,"19.2.0"));Q.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=w(n),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var Py={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{Qt=hu.inject(Py),Me=hu}catch{}}return No.createRoot=function(e,n){if(!d(e))throw Error(c(299));var o=!1,h="",y=d1,E=g1,O=m1;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(y=n.onUncaughtError),n.onCaughtError!==void 0&&(E=n.onCaughtError),n.onRecoverableError!==void 0&&(O=n.onRecoverableError)),n=Wg(e,1,!1,null,null,o,h,null,y,E,O,am),e[qe]=n.current,Sh(e),new qh(n)},No.hydrateRoot=function(e,n,o){if(!d(e))throw Error(c(299));var h=!1,y="",E=d1,O=g1,k=m1,q=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onUncaughtError!==void 0&&(E=o.onUncaughtError),o.onCaughtError!==void 0&&(O=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError),o.formState!==void 0&&(q=o.formState)),n=Wg(e,1,!0,n,o??null,h,y,q,E,O,k,am),n.context=Kg(null),o=n.current,h=Pr(),h=de(h),y=Ra(h),y.callback=null,Ia(o,y,h),o=h,n.current.lanes=o,Or(n,o),Ti(n),e[qe]=n.current,Sh(e),new fu(n)},No.version="19.2.0",No}var xm;function Wy(){if(xm)return Yh.exports;xm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Yh.exports=Yy(),Yh.exports}var Ky=Wy();const Zy=Vu(Ky);var Z=Ud();const sa=Vu(Z),Qy=Pd({__proto__:null,default:sa},[Z]);var z2=s=>{throw TypeError(s)},Jy=(s,r,a)=>r.has(s)||z2("Cannot "+a),Jh=(s,r,a)=>(Jy(s,r,"read from private field"),a?a.call(s):r.get(s)),$y=(s,r,a)=>r.has(s)?z2("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,a),pm="popstate";function ew(s={}){function r(c,d){let{pathname:g,search:x,hash:b}=c.location;return Fo("",{pathname:g,search:x,hash:b},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function a(c,d){return typeof d=="string"?d:Ii(d)}return nw(r,a,null,s)}function Ct(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function Sn(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function tw(){return Math.random().toString(36).substring(2,10)}function ym(s,r){return{usr:s.state,key:s.key,idx:r}}function Fo(s,r,a=null,c){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof r=="string"?ts(r):r,state:a,key:r&&r.key||c||tw()}}function Ii({pathname:s="/",search:r="",hash:a=""}){return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function ts(s){let r={};if(s){let a=s.indexOf("#");a>=0&&(r.hash=s.substring(a),s=s.substring(0,a));let c=s.indexOf("?");c>=0&&(r.search=s.substring(c),s=s.substring(0,c)),s&&(r.pathname=s)}return r}function nw(s,r,a,c={}){let{window:d=document.defaultView,v5Compat:g=!1}=c,x=d.history,b="POP",_=null,w=T();w==null&&(w=0,x.replaceState({...x.state,idx:w},""));function T(){return(x.state||{idx:null}).idx}function S(){b="POP";let H=T(),$=H==null?null:H-w;w=H,_&&_({action:b,location:z.location,delta:$})}function M(H,$){b="PUSH";let te=Fo(z.location,H,$);w=T()+1;let G=ym(te,w),oe=z.createHref(te);try{x.pushState(G,"",oe)}catch(xe){if(xe instanceof DOMException&&xe.name==="DataCloneError")throw xe;d.location.assign(oe)}g&&_&&_({action:b,location:z.location,delta:1})}function B(H,$){b="REPLACE";let te=Fo(z.location,H,$);w=T();let G=ym(te,w),oe=z.createHref(te);x.replaceState(G,"",oe),g&&_&&_({action:b,location:z.location,delta:0})}function U(H){return H2(H)}let z={get action(){return b},get location(){return s(d,x)},listen(H){if(_)throw new Error("A history only accepts one active listener");return d.addEventListener(pm,S),_=H,()=>{d.removeEventListener(pm,S),_=null}},createHref(H){return r(d,H)},createURL:U,encodeLocation(H){let $=U(H);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:M,replace:B,go(H){return x.go(H)}};return z}function H2(s,r=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(a,"No window.location.(origin|href) available to create URL");let c=typeof s=="string"?s:Ii(s);return c=c.replace(/ $/,"%20"),!r&&c.startsWith("//")&&(c=a+c),new URL(c,a)}var Do,wm=class{constructor(s){if($y(this,Do,new Map),s)for(let[r,a]of s)this.set(r,a)}get(s){if(Jh(this,Do).has(s))return Jh(this,Do).get(s);if(s.defaultValue!==void 0)return s.defaultValue;throw new Error("No value found for context")}set(s,r){Jh(this,Do).set(s,r)}};Do=new WeakMap;var rw=new Set(["lazy","caseSensitive","path","id","index","children"]);function iw(s){return rw.has(s)}var aw=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function sw(s){return aw.has(s)}function lw(s){return s.index===!0}function zo(s,r,a=[],c={},d=!1){return s.map((g,x)=>{let b=[...a,String(x)],_=typeof g.id=="string"?g.id:b.join("-");if(Ct(g.index!==!0||!g.children,"Cannot specify children on an index route"),Ct(d||!c[_],`Found a route id collision on id "${_}".  Route id's must be globally unique within Data Router usages`),lw(g)){let w={...g,id:_};return c[_]=bm(w,r(w)),w}else{let w={...g,id:_,children:void 0};return c[_]=bm(w,r(w)),g.children&&(w.children=zo(g.children,r,b,c,d)),w}})}function bm(s,r){return Object.assign(s,{...r,...typeof r.lazy=="object"&&r.lazy!=null?{lazy:{...s.lazy,...r.lazy}}:{}})}function Qa(s,r,a="/"){return Mo(s,r,a,!1)}function Mo(s,r,a,c){let d=typeof r=="string"?ts(r):r,g=ii(d.pathname||"/",a);if(g==null)return null;let x=V2(s);cw(x);let b=null;for(let _=0;b==null&&_<x.length;++_){let w=bw(g);b=yw(x[_],w,c)}return b}function ow(s,r){let{route:a,pathname:c,params:d}=s;return{id:a.id,pathname:c,params:d,data:r[a.id],loaderData:r[a.id],handle:a.handle}}function V2(s,r=[],a=[],c="",d=!1){let g=(x,b,_=d,w)=>{let T={relativePath:w===void 0?x.path||"":w,caseSensitive:x.caseSensitive===!0,childrenIndex:b,route:x};if(T.relativePath.startsWith("/")){if(!T.relativePath.startsWith(c)&&_)return;Ct(T.relativePath.startsWith(c),`Absolute route path "${T.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),T.relativePath=T.relativePath.slice(c.length)}let S=Oi([c,T.relativePath]),M=a.concat(T);x.children&&x.children.length>0&&(Ct(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),V2(x.children,r,M,S,_)),!(x.path==null&&!x.index)&&r.push({path:S,score:xw(S,x.index),routesMeta:M})};return s.forEach((x,b)=>{if(x.path===""||!x.path?.includes("?"))g(x,b);else for(let _ of G2(x.path))g(x,b,!0,_)}),r}function G2(s){let r=s.split("/");if(r.length===0)return[];let[a,...c]=r,d=a.endsWith("?"),g=a.replace(/\?$/,"");if(c.length===0)return d?[g,""]:[g];let x=G2(c.join("/")),b=[];return b.push(...x.map(_=>_===""?g:[g,_].join("/"))),d&&b.push(...x),b.map(_=>s.startsWith("/")&&_===""?"/":_)}function cw(s){s.sort((r,a)=>r.score!==a.score?a.score-r.score:pw(r.routesMeta.map(c=>c.childrenIndex),a.routesMeta.map(c=>c.childrenIndex)))}var uw=/^:[\w-]+$/,fw=3,hw=2,dw=1,gw=10,mw=-2,vm=s=>s==="*";function xw(s,r){let a=s.split("/"),c=a.length;return a.some(vm)&&(c+=mw),r&&(c+=hw),a.filter(d=>!vm(d)).reduce((d,g)=>d+(uw.test(g)?fw:g===""?dw:gw),c)}function pw(s,r){return s.length===r.length&&s.slice(0,-1).every((c,d)=>c===r[d])?s[s.length-1]-r[r.length-1]:0}function yw(s,r,a=!1){let{routesMeta:c}=s,d={},g="/",x=[];for(let b=0;b<c.length;++b){let _=c[b],w=b===c.length-1,T=g==="/"?r:r.slice(g.length)||"/",S=Du({path:_.relativePath,caseSensitive:_.caseSensitive,end:w},T),M=_.route;if(!S&&w&&a&&!c[c.length-1].route.index&&(S=Du({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},T)),!S)return null;Object.assign(d,S.params),x.push({params:d,pathname:Oi([g,S.pathname]),pathnameBase:Aw(Oi([g,S.pathnameBase])),route:M}),S.pathnameBase!=="/"&&(g=Oi([g,S.pathnameBase]))}return x}function Du(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[a,c]=ww(s.path,s.caseSensitive,s.end),d=r.match(a);if(!d)return null;let g=d[0],x=g.replace(/(.)\/+$/,"$1"),b=d.slice(1);return{params:c.reduce((w,{paramName:T,isOptional:S},M)=>{if(T==="*"){let U=b[M]||"";x=g.slice(0,g.length-U.length).replace(/(.)\/+$/,"$1")}const B=b[M];return S&&!B?w[T]=void 0:w[T]=(B||"").replace(/%2F/g,"/"),w},{}),pathname:g,pathnameBase:x,pattern:s}}function ww(s,r=!1,a=!0){Sn(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let c=[],d="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,b,_)=>(c.push({paramName:b,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(c.push({paramName:"*"}),d+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?d+="\\/*$":s!==""&&s!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,r?void 0:"i"),c]}function bw(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Sn(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),s}}function ii(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,c=s.charAt(a);return c&&c!=="/"?null:s.slice(a)||"/"}function vw({basename:s,pathname:r}){return r==="/"?s:Oi([s,r])}var Ew=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gu=s=>Ew.test(s);function _w(s,r="/"){let{pathname:a,search:c="",hash:d=""}=typeof s=="string"?ts(s):s,g;if(a)if(Gu(a))g=a;else{if(a.includes("//")){let x=a;a=a.replace(/\/\/+/g,"/"),Sn(!1,`Pathnames cannot have embedded double slashes - normalizing ${x} -> ${a}`)}a.startsWith("/")?g=Em(a.substring(1),"/"):g=Em(a,r)}else g=r;return{pathname:g,search:Cw(c),hash:Sw(d)}}function Em(s,r){let a=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(d=>{d===".."?a.length>1&&a.pop():d!=="."&&a.push(d)}),a.length>1?a.join("/"):"/"}function $h(s,r,a,c){return`Cannot include a '${s}' character in a manually specified \`to.${r}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function q2(s){return s.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function qu(s){let r=q2(s);return r.map((a,c)=>c===r.length-1?a.pathname:a.pathnameBase)}function Xu(s,r,a,c=!1){let d;typeof s=="string"?d=ts(s):(d={...s},Ct(!d.pathname||!d.pathname.includes("?"),$h("?","pathname","search",d)),Ct(!d.pathname||!d.pathname.includes("#"),$h("#","pathname","hash",d)),Ct(!d.search||!d.search.includes("#"),$h("#","search","hash",d)));let g=s===""||d.pathname==="",x=g?"/":d.pathname,b;if(x==null)b=a;else{let S=r.length-1;if(!c&&x.startsWith("..")){let M=x.split("/");for(;M[0]==="..";)M.shift(),S-=1;d.pathname=M.join("/")}b=S>=0?r[S]:"/"}let _=_w(d,b),w=x&&x!=="/"&&x.endsWith("/"),T=(g||x===".")&&a.endsWith("/");return!_.pathname.endsWith("/")&&(w||T)&&(_.pathname+="/"),_}var Oi=s=>s.join("/").replace(/\/\/+/g,"/"),Aw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Cw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Sw=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Yu=class{constructor(s,r,a,c=!1){this.status=s,this.statusText=r||"",this.internal=c,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function Ho(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Ko(s){return s.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var es=Symbol("Uninstrumented");function Tw(s,r){let a={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};s.forEach(d=>d({id:r.id,index:r.index,path:r.path,instrument(g){let x=Object.keys(a);for(let b of x)g[b]&&a[b].push(g[b])}}));let c={};if(typeof r.lazy=="function"&&a.lazy.length>0){let d=Nl(a.lazy,r.lazy,()=>{});d&&(c.lazy=d)}if(typeof r.lazy=="object"){let d=r.lazy;["middleware","loader","action"].forEach(g=>{let x=d[g],b=a[`lazy.${g}`];if(typeof x=="function"&&b.length>0){let _=Nl(b,x,()=>{});_&&(c.lazy=Object.assign(c.lazy||{},{[g]:_}))}})}return["loader","action"].forEach(d=>{let g=r[d];if(typeof g=="function"&&a[d].length>0){let x=g[es]??g,b=Nl(a[d],x,(..._)=>_m(_[0]));b&&(b[es]=x,c[d]=b)}}),r.middleware&&r.middleware.length>0&&a.middleware.length>0&&(c.middleware=r.middleware.map(d=>{let g=d[es]??d,x=Nl(a.middleware,g,(...b)=>_m(b[0]));return x?(x[es]=g,x):d})),c}function Nw(s,r){let a={navigate:[],fetch:[]};if(r.forEach(c=>c({instrument(d){let g=Object.keys(d);for(let x of g)d[x]&&a[x].push(d[x])}})),a.navigate.length>0){let c=s.navigate[es]??s.navigate,d=Nl(a.navigate,c,(...g)=>{let[x,b]=g;return{to:typeof x=="number"||typeof x=="string"?x:x?Ii(x):".",...Am(s,b??{})}});d&&(d[es]=c,s.navigate=d)}if(a.fetch.length>0){let c=s.fetch[es]??s.fetch,d=Nl(a.fetch,c,(...g)=>{let[x,,b,_]=g;return{href:b??".",fetcherKey:x,...Am(s,_??{})}});d&&(d[es]=c,s.fetch=d)}return s}function Nl(s,r,a){return s.length===0?null:async(...c)=>{let d=await X2(s,a(...c),()=>r(...c),s.length-1);if(d.type==="error")throw d.value;return d.value}}async function X2(s,r,a,c){let d=s[c],g;if(d){let x,b=async()=>(x?console.error("You cannot call instrumented handlers more than once"):x=X2(s,r,a,c-1),g=await x,Ct(g,"Expected a result"),g.type==="error"&&g.value instanceof Error?{status:"error",error:g.value}:{status:"success",error:void 0});try{await d(b,r)}catch(_){console.error("An instrumentation function threw an error:",_)}x||await b(),await x}else try{g={type:"success",value:await a()}}catch(x){g={type:"error",value:x}}return g||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function _m(s){let{request:r,context:a,params:c,unstable_pattern:d}=s;return{request:Ow(r),params:{...c},unstable_pattern:d,context:Rw(a)}}function Am(s,r){return{currentUrl:Ii(s.state.location),..."formMethod"in r?{formMethod:r.formMethod}:{},..."formEncType"in r?{formEncType:r.formEncType}:{},..."formData"in r?{formData:r.formData}:{},..."body"in r?{body:r.body}:{}}}function Ow(s){return{method:s.method,url:s.url,headers:{get:(...r)=>s.headers.get(...r)}}}function Rw(s){if(Dw(s)){let r={...s};return Object.freeze(r),r}else return{get:r=>s.get(r)}}var Iw=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dw(s){if(s===null||typeof s!="object")return!1;const r=Object.getPrototypeOf(s);return r===Object.prototype||r===null||Object.getOwnPropertyNames(r).sort().join("\0")===Iw}var Y2=["POST","PUT","PATCH","DELETE"],Mw=new Set(Y2),Bw=["GET",...Y2],jw=new Set(Bw),kw=new Set([301,302,303,307,308]),Lw=new Set([307,308]),ed={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Pw={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Oo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Uw=s=>({hasErrorBoundary:!!s.hasErrorBoundary}),W2="remix-router-transitions",K2=Symbol("ResetLoaderData");function Fw(s){const r=s.window?s.window:typeof window<"u"?window:void 0,a=typeof r<"u"&&typeof r.document<"u"&&typeof r.document.createElement<"u";Ct(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let c=s.hydrationRouteProperties||[],d=s.mapRouteProperties||Uw,g=d;if(s.unstable_instrumentations){let V=s.unstable_instrumentations;g=ie=>({...d(ie),...Tw(V.map(de=>de.route).filter(Boolean),ie)})}let x={},b=zo(s.routes,g,void 0,x),_,w=s.basename||"/";w.startsWith("/")||(w=`/${w}`);let T=s.dataStrategy||qw,S={...s.future},M=null,B=new Set,U=null,z=null,H=null,$=s.hydrationData!=null,te=Qa(b,s.history.location,w),G=!1,oe=null,xe;if(te==null&&!s.patchRoutesOnNavigation){let V=ri(404,{pathname:s.history.location.pathname}),{matches:ie,route:de}=gu(b);xe=!0,te=ie,oe={[de.id]:V}}else if(te&&!s.hydrationData&&xn(te,b,s.history.location.pathname).active&&(te=null),te)if(te.some(V=>V.route.lazy))xe=!1;else if(!te.some(V=>Fd(V.route)))xe=!0;else{let V=s.hydrationData?s.hydrationData.loaderData:null,ie=s.hydrationData?s.hydrationData.errors:null;if(ie){let de=te.findIndex(De=>ie[De.route.id]!==void 0);xe=te.slice(0,de+1).every(De=>!wd(De.route,V,ie))}else xe=te.every(de=>!wd(de.route,V,ie))}else{xe=!1,te=[];let V=xn(null,b,s.history.location.pathname);V.active&&V.matches&&(G=!0,te=V.matches)}let se,R={historyAction:s.history.action,location:s.history.location,matches:te,initialized:xe,navigation:ed,restoreScrollPosition:s.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||oe,fetchers:new Map,blockers:new Map},W="POP",L=null,he=!1,re,ue=!1,Ee=new Map,Oe=null,K=!1,ne=!1,Q=new Set,fe=new Map,Ne=0,Fe=-1,X=new Map,pe=new Set,Ie=new Map,Pe=new Map,et=new Set,je=new Map,Et,wt=null;function Wt(){if(M=s.history.listen(({action:V,location:ie,delta:de})=>{if(Et){Et(),Et=void 0;return}Sn(je.size===0||de!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let De=_t({currentLocation:R.location,nextLocation:ie,historyAction:V});if(De&&de!=null){let ke=new Promise(_e=>{Et=_e});s.history.go(de*-1),qr(De,{state:"blocked",location:ie,proceed(){qr(De,{state:"proceeding",proceed:void 0,reset:void 0,location:ie}),ke.then(()=>s.history.go(de))},reset(){let _e=new Map(R.blockers);_e.set(De,Oo),un({blockers:_e})}}),L?.resolve(),L=null;return}return Zn(V,ie)}),a){lb(r,Ee);let V=()=>ob(r,Ee);r.addEventListener("pagehide",V),Oe=()=>r.removeEventListener("pagehide",V)}return R.initialized||Zn("POP",R.location,{initialHydration:!0}),se}function Nr(){M&&M(),Oe&&Oe(),B.clear(),re&&re.abort(),R.fetchers.forEach((V,ie)=>is(ie)),R.blockers.forEach((V,ie)=>fa(ie))}function Tn(V){return B.add(V),()=>B.delete(V)}function un(V,ie={}){V.matches&&(V.matches=V.matches.map(ke=>{let _e=x[ke.route.id],He=ke.route;return He.element!==_e.element||He.errorElement!==_e.errorElement||He.hydrateFallbackElement!==_e.hydrateFallbackElement?{...ke,route:_e}:ke})),R={...R,...V};let de=[],De=[];R.fetchers.forEach((ke,_e)=>{ke.state==="idle"&&(et.has(_e)?de.push(_e):De.push(_e))}),et.forEach(ke=>{!R.fetchers.has(ke)&&!fe.has(ke)&&de.push(ke)}),[...B].forEach(ke=>ke(R,{deletedFetchers:de,newErrors:V.errors??null,viewTransitionOpts:ie.viewTransitionOpts,flushSync:ie.flushSync===!0})),de.forEach(ke=>is(ke)),De.forEach(ke=>R.fetchers.delete(ke))}function xt(V,ie,{flushSync:de}={}){let De=R.actionData!=null&&R.navigation.formMethod!=null&&pr(R.navigation.formMethod)&&R.navigation.state==="loading"&&V.state?._isRedirect!==!0,ke;ie.actionData?Object.keys(ie.actionData).length>0?ke=ie.actionData:ke=null:De?ke=R.actionData:ke=null;let _e=ie.loaderData?Bm(R.loaderData,ie.loaderData,ie.matches||[],ie.errors):R.loaderData,He=R.blockers;He.size>0&&(He=new Map(He),He.forEach((Ke,Qe)=>He.set(Qe,Oo)));let ze=K?!1:ha(V,ie.matches||R.matches),Ue=he===!0||R.navigation.formMethod!=null&&pr(R.navigation.formMethod)&&V.state?._isRedirect!==!0;_&&(b=_,_=void 0),K||W==="POP"||(W==="PUSH"?s.history.push(V,V.state):W==="REPLACE"&&s.history.replace(V,V.state));let qe;if(W==="POP"){let Ke=Ee.get(R.location.pathname);Ke&&Ke.has(V.pathname)?qe={currentLocation:R.location,nextLocation:V}:Ee.has(V.pathname)&&(qe={currentLocation:V,nextLocation:R.location})}else if(ue){let Ke=Ee.get(R.location.pathname);Ke?Ke.add(V.pathname):(Ke=new Set([V.pathname]),Ee.set(R.location.pathname,Ke)),qe={currentLocation:R.location,nextLocation:V}}un({...ie,actionData:ke,loaderData:_e,historyAction:W,location:V,initialized:!0,navigation:ed,revalidation:"idle",restoreScrollPosition:ze,preventScrollReset:Ue,blockers:He},{viewTransitionOpts:qe,flushSync:de===!0}),W="POP",he=!1,ue=!1,K=!1,ne=!1,L?.resolve(),L=null,wt?.resolve(),wt=null}async function Kn(V,ie){if(L?.resolve(),L=null,typeof V=="number"){L||(L=Pm());let Ht=L.promise;return s.history.go(V),Ht}let de=yd(R.location,R.matches,w,V,ie?.fromRouteId,ie?.relative),{path:De,submission:ke,error:_e}=Cm(!1,de,ie),He=R.location,ze=Fo(R.location,De,ie&&ie.state);ze={...ze,...s.history.encodeLocation(ze)};let Ue=ie&&ie.replace!=null?ie.replace:void 0,qe="PUSH";Ue===!0?qe="REPLACE":Ue===!1||ke!=null&&pr(ke.formMethod)&&ke.formAction===R.location.pathname+R.location.search&&(qe="REPLACE");let Ke=ie&&"preventScrollReset"in ie?ie.preventScrollReset===!0:void 0,Qe=(ie&&ie.flushSync)===!0,ut=_t({currentLocation:He,nextLocation:ze,historyAction:qe});if(ut){qr(ut,{state:"blocked",location:ze,proceed(){qr(ut,{state:"proceeding",proceed:void 0,reset:void 0,location:ze}),Kn(V,ie)},reset(){let Ht=new Map(R.blockers);Ht.set(ut,Oo),un({blockers:Ht})}});return}await Zn(qe,ze,{submission:ke,pendingError:_e,preventScrollReset:Ke,replace:ie&&ie.replace,enableViewTransition:ie&&ie.viewTransition,flushSync:Qe})}function ir(){wt||(wt=Pm()),Mi(),un({revalidation:"loading"});let V=wt.promise;return R.navigation.state==="submitting"?V:R.navigation.state==="idle"?(Zn(R.historyAction,R.location,{startUninterruptedRevalidation:!0}),V):(Zn(W||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation,enableViewTransition:ue===!0}),V)}async function Zn(V,ie,de){re&&re.abort(),re=null,W=V,K=(de&&de.startUninterruptedRevalidation)===!0,Hn(R.location,R.matches),he=(de&&de.preventScrollReset)===!0,ue=(de&&de.enableViewTransition)===!0;let De=_||b,ke=de&&de.overrideNavigation,_e=de?.initialHydration&&R.matches&&R.matches.length>0&&!G?R.matches:Qa(De,ie,w),He=(de&&de.flushSync)===!0;if(_e&&R.initialized&&!ne&&$w(R.location,ie)&&!(de&&de.submission&&pr(de.submission.formMethod))){xt(ie,{matches:_e},{flushSync:He});return}let ze=xn(_e,De,ie.pathname);if(ze.active&&ze.matches&&(_e=ze.matches),!_e){let{error:kt,notFoundMatches:ct,route:tt}=ar(ie.pathname);xt(ie,{matches:ct,loaderData:{},errors:{[tt.id]:kt}},{flushSync:He});return}re=new AbortController;let Ue=Cl(s.history,ie,re.signal,de&&de.submission),qe=s.getContext?await s.getContext():new wm,Ke;if(de&&de.pendingError)Ke=[Ja(_e).route.id,{type:"error",error:de.pendingError}];else if(de&&de.submission&&pr(de.submission.formMethod)){let kt=await Nn(Ue,ie,de.submission,_e,qe,ze.active,de&&de.initialHydration===!0,{replace:de.replace,flushSync:He});if(kt.shortCircuited)return;if(kt.pendingActionResult){let[ct,tt]=kt.pendingActionResult;if(zr(tt)&&Ho(tt.error)&&tt.error.status===404){re=null,xt(ie,{matches:kt.matches,loaderData:{},errors:{[ct]:tt.error}});return}}_e=kt.matches||_e,Ke=kt.pendingActionResult,ke=td(ie,de.submission),He=!1,ze.active=!1,Ue=Cl(s.history,Ue.url,Ue.signal)}let{shortCircuited:Qe,matches:ut,loaderData:Ht,errors:rn}=await Ut(Ue,ie,_e,qe,ze.active,ke,de&&de.submission,de&&de.fetcherSubmission,de&&de.replace,de&&de.initialHydration===!0,He,Ke);Qe||(re=null,xt(ie,{matches:ut||_e,...jm(Ke),loaderData:Ht,errors:rn}))}async function Nn(V,ie,de,De,ke,_e,He,ze={}){Mi();let Ue=ab(ie,de);if(un({navigation:Ue},{flushSync:ze.flushSync===!0}),_e){let Qe=await fr(De,ie.pathname,V.signal);if(Qe.type==="aborted")return{shortCircuited:!0};if(Qe.type==="error"){if(Qe.partialMatches.length===0){let{matches:Ht,route:rn}=gu(b);return{matches:Ht,pendingActionResult:[rn.id,{type:"error",error:Qe.error}]}}let ut=Ja(Qe.partialMatches).route.id;return{matches:Qe.partialMatches,pendingActionResult:[ut,{type:"error",error:Qe.error}]}}else if(Qe.matches)De=Qe.matches;else{let{notFoundMatches:ut,error:Ht,route:rn}=ar(ie.pathname);return{matches:ut,pendingActionResult:[rn.id,{type:"error",error:Ht}]}}}let qe,Ke=Ou(De,ie);if(!Ke.route.action&&!Ke.route.lazy)qe={type:"error",error:ri(405,{method:V.method,pathname:ie.pathname,routeId:Ke.route.id})};else{let Qe=Rl(g,x,V,De,Ke,He?[]:c,ke),ut=await li(V,Qe,ke,null);if(qe=ut[Ke.route.id],!qe){for(let Ht of De)if(ut[Ht.route.id]){qe=ut[Ht.route.id];break}}if(V.signal.aborted)return{shortCircuited:!0}}if(Ds(qe)){let Qe;return ze&&ze.replace!=null?Qe=ze.replace:Qe=Im(qe.response.headers.get("Location"),new URL(V.url),w)===R.location.pathname+R.location.search,await Ft(V,qe,!0,{submission:de,replace:Qe}),{shortCircuited:!0}}if(zr(qe)){let Qe=Ja(De,Ke.route.id);return(ze&&ze.replace)!==!0&&(W="PUSH"),{matches:De,pendingActionResult:[Qe.route.id,qe,Ke.route.id]}}return{matches:De,pendingActionResult:[Ke.route.id,qe]}}async function Ut(V,ie,de,De,ke,_e,He,ze,Ue,qe,Ke,Qe){let ut=_e||td(ie,He),Ht=He||ze||Lm(ut),rn=!K&&!qe;if(ke){if(rn){let it=bt(Qe);un({navigation:ut,...it!==void 0?{actionData:it}:{}},{flushSync:Ke})}let Ve=await fr(de,ie.pathname,V.signal);if(Ve.type==="aborted")return{shortCircuited:!0};if(Ve.type==="error"){if(Ve.partialMatches.length===0){let{matches:hr,route:lr}=gu(b);return{matches:hr,loaderData:{},errors:{[lr.id]:Ve.error}}}let it=Ja(Ve.partialMatches).route.id;return{matches:Ve.partialMatches,loaderData:{},errors:{[it]:Ve.error}}}else if(Ve.matches)de=Ve.matches;else{let{error:it,notFoundMatches:hr,route:lr}=ar(ie.pathname);return{matches:hr,loaderData:{},errors:{[lr.id]:it}}}}let kt=_||b,{dsMatches:ct,revalidatingFetchers:tt}=Sm(V,De,g,x,s.history,R,de,Ht,ie,qe?[]:c,qe===!0,ne,Q,et,Ie,pe,kt,w,s.patchRoutesOnNavigation!=null,Qe);if(Fe=++Ne,!s.dataStrategy&&!ct.some(Ve=>Ve.shouldLoad)&&!ct.some(Ve=>Ve.route.middleware&&Ve.route.middleware.length>0)&&tt.length===0){let Ve=dt();return xt(ie,{matches:de,loaderData:{},errors:Qe&&zr(Qe[1])?{[Qe[0]]:Qe[1].error}:null,...jm(Qe),...Ve?{fetchers:new Map(R.fetchers)}:{}},{flushSync:Ke}),{shortCircuited:!0}}if(rn){let Ve={};if(!ke){Ve.navigation=ut;let it=bt(Qe);it!==void 0&&(Ve.actionData=it)}tt.length>0&&(Ve.fetchers=yi(tt)),un(Ve,{flushSync:Ke})}tt.forEach(Ve=>{Me(Ve.key),Ve.controller&&fe.set(Ve.key,Ve.controller)});let sr=()=>tt.forEach(Ve=>Me(Ve.key));re&&re.signal.addEventListener("abort",sr);let{loaderResults:On,fetcherResults:Vt}=await Qn(ct,tt,V,De);if(V.signal.aborted)return{shortCircuited:!0};re&&re.signal.removeEventListener("abort",sr),tt.forEach(Ve=>fe.delete(Ve.key));let Ce=mu(On);if(Ce)return await Ft(V,Ce.result,!0,{replace:Ue}),{shortCircuited:!0};if(Ce=mu(Vt),Ce)return pe.add(Ce.key),await Ft(V,Ce.result,!0,{replace:Ue}),{shortCircuited:!0};let{loaderData:da,errors:Rt}=Mm(R,de,On,Qe,tt,Vt);qe&&R.errors&&(Rt={...R.errors,...Rt});let Rn=dt(),ga=nn(Fe),St=Rn||ga||tt.length>0;return{matches:de,loaderData:da,errors:Rt,...St?{fetchers:new Map(R.fetchers)}:{}}}function bt(V){if(V&&!zr(V[1]))return{[V[0]]:V[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function yi(V){return V.forEach(ie=>{let de=R.fetchers.get(ie.key),De=Ro(void 0,de?de.data:void 0);R.fetchers.set(ie.key,De)}),new Map(R.fetchers)}async function Ge(V,ie,de,De){Me(V);let ke=(De&&De.flushSync)===!0,_e=_||b,He=yd(R.location,R.matches,w,de,ie,De?.relative),ze=Qa(_e,He,w),Ue=xn(ze,_e,He);if(Ue.active&&Ue.matches&&(ze=Ue.matches),!ze){tn(V,ie,ri(404,{pathname:He}),{flushSync:ke});return}let{path:qe,submission:Ke,error:Qe}=Cm(!0,He,De);if(Qe){tn(V,ie,Qe,{flushSync:ke});return}let ut=s.getContext?await s.getContext():new wm,Ht=(De&&De.preventScrollReset)===!0;if(Ke&&pr(Ke.formMethod)){await oa(V,ie,qe,ze,ut,Ue.active,ke,Ht,Ke);return}Ie.set(V,{routeId:ie,path:qe}),await js(V,ie,qe,ze,ut,Ue.active,ke,Ht,Ke)}async function oa(V,ie,de,De,ke,_e,He,ze,Ue){Mi(),Ie.delete(V);let qe=R.fetchers.get(V);bn(V,sb(Ue,qe),{flushSync:He});let Ke=new AbortController,Qe=Cl(s.history,de,Ke.signal,Ue);if(_e){let It=await fr(De,new URL(Qe.url).pathname,Qe.signal,V);if(It.type==="aborted")return;if(It.type==="error"){tn(V,ie,It.error,{flushSync:He});return}else if(It.matches)De=It.matches;else{tn(V,ie,ri(404,{pathname:de}),{flushSync:He});return}}let ut=Ou(De,de);if(!ut.route.action&&!ut.route.lazy){let It=ri(405,{method:Ue.formMethod,pathname:de,routeId:ie});tn(V,ie,It,{flushSync:He});return}fe.set(V,Ke);let Ht=Ne,rn=Rl(g,x,Qe,De,ut,c,ke),kt=await li(Qe,rn,ke,V),ct=kt[ut.route.id];if(!ct){for(let It of rn)if(kt[It.route.id]){ct=kt[It.route.id];break}}if(Qe.signal.aborted){fe.get(V)===Ke&&fe.delete(V);return}if(et.has(V)){if(Ds(ct)||zr(ct)){bn(V,ra(void 0));return}}else{if(Ds(ct))if(fe.delete(V),Fe>Ht){bn(V,ra(void 0));return}else return pe.add(V),bn(V,Ro(Ue)),Ft(Qe,ct,!1,{fetcherSubmission:Ue,preventScrollReset:ze});if(zr(ct)){tn(V,ie,ct.error);return}}let tt=R.navigation.location||R.location,sr=Cl(s.history,tt,Ke.signal),On=_||b,Vt=R.navigation.state!=="idle"?Qa(On,R.navigation.location,w):R.matches;Ct(Vt,"Didn't find any matches after fetcher action");let Ce=++Ne;X.set(V,Ce);let da=Ro(Ue,ct.data);R.fetchers.set(V,da);let{dsMatches:Rt,revalidatingFetchers:Rn}=Sm(sr,ke,g,x,s.history,R,Vt,Ue,tt,c,!1,ne,Q,et,Ie,pe,On,w,s.patchRoutesOnNavigation!=null,[ut.route.id,ct]);Rn.filter(It=>It.key!==V).forEach(It=>{let Tt=It.key,wr=R.fetchers.get(Tt),Ll=Ro(void 0,wr?wr.data:void 0);R.fetchers.set(Tt,Ll),Me(Tt),It.controller&&fe.set(Tt,It.controller)}),un({fetchers:new Map(R.fetchers)});let ga=()=>Rn.forEach(It=>Me(It.key));Ke.signal.addEventListener("abort",ga);let{loaderResults:St,fetcherResults:Ve}=await Qn(Rt,Rn,sr,ke);if(Ke.signal.aborted)return;if(Ke.signal.removeEventListener("abort",ga),X.delete(V),fe.delete(V),Rn.forEach(It=>fe.delete(It.key)),R.fetchers.has(V)){let It=ra(ct.data);R.fetchers.set(V,It)}let it=mu(St);if(it)return Ft(sr,it.result,!1,{preventScrollReset:ze});if(it=mu(Ve),it)return pe.add(it.key),Ft(sr,it.result,!1,{preventScrollReset:ze});let{loaderData:hr,errors:lr}=Mm(R,Vt,St,void 0,Rn,Ve);nn(Ce),R.navigation.state==="loading"&&Ce>Fe?(Ct(W,"Expected pending action"),re&&re.abort(),xt(R.navigation.location,{matches:Vt,loaderData:hr,errors:lr,fetchers:new Map(R.fetchers)})):(un({errors:lr,loaderData:Bm(R.loaderData,hr,Vt,lr),fetchers:new Map(R.fetchers)}),ne=!1)}async function js(V,ie,de,De,ke,_e,He,ze,Ue){let qe=R.fetchers.get(V);bn(V,Ro(Ue,qe?qe.data:void 0),{flushSync:He});let Ke=new AbortController,Qe=Cl(s.history,de,Ke.signal);if(_e){let tt=await fr(De,new URL(Qe.url).pathname,Qe.signal,V);if(tt.type==="aborted")return;if(tt.type==="error"){tn(V,ie,tt.error,{flushSync:He});return}else if(tt.matches)De=tt.matches;else{tn(V,ie,ri(404,{pathname:de}),{flushSync:He});return}}let ut=Ou(De,de);fe.set(V,Ke);let Ht=Ne,rn=Rl(g,x,Qe,De,ut,c,ke),ct=(await li(Qe,rn,ke,V))[ut.route.id];if(fe.get(V)===Ke&&fe.delete(V),!Qe.signal.aborted){if(et.has(V)){bn(V,ra(void 0));return}if(Ds(ct))if(Fe>Ht){bn(V,ra(void 0));return}else{pe.add(V),await Ft(Qe,ct,!1,{preventScrollReset:ze});return}if(zr(ct)){tn(V,ie,ct.error);return}bn(V,ra(ct.data))}}async function Ft(V,ie,de,{submission:De,fetcherSubmission:ke,preventScrollReset:_e,replace:He}={}){de||(L?.resolve(),L=null),ie.response.headers.has("X-Remix-Revalidate")&&(ne=!0);let ze=ie.response.headers.get("Location");Ct(ze,"Expected a Location header on the redirect Response"),ze=Im(ze,new URL(V.url),w);let Ue=Fo(R.location,ze,{_isRedirect:!0});if(a){let rn=!1;if(ie.response.headers.has("X-Remix-Reload-Document"))rn=!0;else if(Gu(ze)){const kt=H2(ze,!0);rn=kt.origin!==r.location.origin||ii(kt.pathname,w)==null}if(rn){He?r.location.replace(ze):r.location.assign(ze);return}}re=null;let qe=He===!0||ie.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ke,formAction:Qe,formEncType:ut}=R.navigation;!De&&!ke&&Ke&&Qe&&ut&&(De=Lm(R.navigation));let Ht=De||ke;if(Lw.has(ie.response.status)&&Ht&&pr(Ht.formMethod))await Zn(qe,Ue,{submission:{...Ht,formAction:ze},preventScrollReset:_e||he,enableViewTransition:de?ue:void 0});else{let rn=td(Ue,De);await Zn(qe,Ue,{overrideNavigation:rn,fetcherSubmission:ke,preventScrollReset:_e||he,enableViewTransition:de?ue:void 0})}}async function li(V,ie,de,De){let ke,_e={};try{ke=await Yw(T,V,ie,De,de,!1)}catch(He){return ie.filter(ze=>ze.shouldLoad).forEach(ze=>{_e[ze.route.id]={type:"error",error:He}}),_e}if(V.signal.aborted)return _e;for(let[He,ze]of Object.entries(ke))if(rb(ze)){let Ue=ze.result;_e[He]={type:"redirect",response:Qw(Ue,V,He,ie,w)}}else _e[He]=await Zw(ze);return _e}async function Qn(V,ie,de,De){let ke=li(de,V,De,null),_e=Promise.all(ie.map(async Ue=>{if(Ue.matches&&Ue.match&&Ue.request&&Ue.controller){let Ke=(await li(Ue.request,Ue.matches,De,Ue.key))[Ue.match.route.id];return{[Ue.key]:Ke}}else return Promise.resolve({[Ue.key]:{type:"error",error:ri(404,{pathname:Ue.path})}})})),He=await ke,ze=(await _e).reduce((Ue,qe)=>Object.assign(Ue,qe),{});return{loaderResults:He,fetcherResults:ze}}function Mi(){ne=!0,Ie.forEach((V,ie)=>{fe.has(ie)&&Q.add(ie),Me(ie)})}function bn(V,ie,de={}){R.fetchers.set(V,ie),un({fetchers:new Map(R.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function tn(V,ie,de,De={}){let ke=Ja(R.matches,ie);is(V),un({errors:{[ke.route.id]:de},fetchers:new Map(R.fetchers)},{flushSync:(De&&De.flushSync)===!0})}function ca(V){return Pe.set(V,(Pe.get(V)||0)+1),et.has(V)&&et.delete(V),R.fetchers.get(V)||Pw}function ua(V,ie){Me(V,ie?.reason),bn(V,ra(null))}function is(V){let ie=R.fetchers.get(V);fe.has(V)&&!(ie&&ie.state==="loading"&&X.has(V))&&Me(V),Ie.delete(V),X.delete(V),pe.delete(V),et.delete(V),Q.delete(V),R.fetchers.delete(V)}function Qt(V){let ie=(Pe.get(V)||0)-1;ie<=0?(Pe.delete(V),et.add(V)):Pe.set(V,ie),un({fetchers:new Map(R.fetchers)})}function Me(V,ie){let de=fe.get(V);de&&(de.abort(ie),fe.delete(V))}function zt(V){for(let ie of V){let de=ca(ie),De=ra(de.data);R.fetchers.set(ie,De)}}function dt(){let V=[],ie=!1;for(let de of pe){let De=R.fetchers.get(de);Ct(De,`Expected fetcher: ${de}`),De.state==="loading"&&(pe.delete(de),V.push(de),ie=!0)}return zt(V),ie}function nn(V){let ie=[];for(let[de,De]of X)if(De<V){let ke=R.fetchers.get(de);Ct(ke,`Expected fetcher: ${de}`),ke.state==="loading"&&(Me(de),X.delete(de),ie.push(de))}return zt(ie),ie.length>0}function Bi(V,ie){let de=R.blockers.get(V)||Oo;return je.get(V)!==ie&&je.set(V,ie),de}function fa(V){R.blockers.delete(V),je.delete(V)}function qr(V,ie){let de=R.blockers.get(V)||Oo;Ct(de.state==="unblocked"&&ie.state==="blocked"||de.state==="blocked"&&ie.state==="blocked"||de.state==="blocked"&&ie.state==="proceeding"||de.state==="blocked"&&ie.state==="unblocked"||de.state==="proceeding"&&ie.state==="unblocked",`Invalid blocker state transition: ${de.state} -> ${ie.state}`);let De=new Map(R.blockers);De.set(V,ie),un({blockers:De})}function _t({currentLocation:V,nextLocation:ie,historyAction:de}){if(je.size===0)return;je.size>1&&Sn(!1,"A router only supports one blocker at a time");let De=Array.from(je.entries()),[ke,_e]=De[De.length-1],He=R.blockers.get(ke);if(!(He&&He.state==="proceeding")&&_e({currentLocation:V,nextLocation:ie,historyAction:de}))return ke}function ar(V){let ie=ri(404,{pathname:V}),de=_||b,{matches:De,route:ke}=gu(de);return{notFoundMatches:De,route:ke,error:ie}}function Xr(V,ie,de){if(U=V,H=ie,z=de||null,!$&&R.navigation===ed){$=!0;let De=ha(R.location,R.matches);De!=null&&un({restoreScrollPosition:De})}return()=>{U=null,H=null,z=null}}function wi(V,ie){return z&&z(V,ie.map(De=>ow(De,R.loaderData)))||V.key}function Hn(V,ie){if(U&&H){let de=wi(V,ie);U[de]=H()}}function ha(V,ie){if(U){let de=wi(V,ie),De=U[de];if(typeof De=="number")return De}return null}function xn(V,ie,de){if(s.patchRoutesOnNavigation)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:Mo(ie,de,w,!0)}}else return{active:!0,matches:Mo(ie,de,w,!0)||[]};return{active:!1,matches:null}}async function fr(V,ie,de,De){if(!s.patchRoutesOnNavigation)return{type:"success",matches:V};let ke=V;for(;;){let _e=_==null,He=_||b,ze=x;try{await s.patchRoutesOnNavigation({signal:de,path:ie,matches:ke,fetcherKey:De,patch:(Ke,Qe)=>{de.aborted||Tm(Ke,Qe,He,ze,g,!1)}})}catch(Ke){return{type:"error",error:Ke,partialMatches:ke}}finally{_e&&!de.aborted&&(b=[...b])}if(de.aborted)return{type:"aborted"};let Ue=Qa(He,ie,w),qe=null;if(Ue){if(Object.keys(Ue[0].params).length===0)return{type:"success",matches:Ue};if(qe=Mo(He,ie,w,!0),!(qe&&ke.length<qe.length&&Or(ke,qe.slice(0,ke.length))))return{type:"success",matches:Ue}}if(qe||(qe=Mo(He,ie,w,!0)),!qe||Or(ke,qe))return{type:"success",matches:null};ke=qe}}function Or(V,ie){return V.length===ie.length&&V.every((de,De)=>de.route.id===ie[De].route.id)}function yr(V){x={},_=zo(V,g,void 0,x)}function ks(V,ie,de=!1){let De=_==null;Tm(V,ie,_||b,x,g,de),De&&(b=[...b],un({}))}return se={get basename(){return w},get future(){return S},get state(){return R},get routes(){return b},get window(){return r},initialize:Wt,subscribe:Tn,enableScrollRestoration:Xr,navigate:Kn,fetch:Ge,revalidate:ir,createHref:V=>s.history.createHref(V),encodeLocation:V=>s.history.encodeLocation(V),getFetcher:ca,resetFetcher:ua,deleteFetcher:Qt,dispose:Nr,getBlocker:Bi,deleteBlocker:fa,patchRoutes:ks,_internalFetchControllers:fe,_internalSetRoutes:yr,_internalSetStateDoNotUseOrYouWillBreakYourApp(V){un(V)}},s.unstable_instrumentations&&(se=Nw(se,s.unstable_instrumentations.map(V=>V.router).filter(Boolean))),se}function zw(s){return s!=null&&("formData"in s&&s.formData!=null||"body"in s&&s.body!==void 0)}function yd(s,r,a,c,d,g){let x,b;if(d){x=[];for(let w of r)if(x.push(w),w.route.id===d){b=w;break}}else x=r,b=r[r.length-1];let _=Xu(c||".",qu(x),ii(s.pathname,a)||s.pathname,g==="path");if(c==null&&(_.search=s.search,_.hash=s.hash),(c==null||c===""||c===".")&&b){let w=zd(_.search);if(b.route.index&&!w)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!b.route.index&&w){let T=new URLSearchParams(_.search),S=T.getAll("index");T.delete("index"),S.filter(B=>B).forEach(B=>T.append("index",B));let M=T.toString();_.search=M?`?${M}`:""}}return a!=="/"&&(_.pathname=vw({basename:a,pathname:_.pathname})),Ii(_)}function Cm(s,r,a){if(!a||!zw(a))return{path:r};if(a.formMethod&&!ib(a.formMethod))return{path:r,error:ri(405,{method:a.formMethod})};let c=()=>({path:r,error:ri(400,{type:"invalid-body"})}),g=(a.formMethod||"get").toUpperCase(),x=tx(r);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!pr(g))return c();let S=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((M,[B,U])=>`${M}${B}=${U}
`,""):String(a.body);return{path:r,submission:{formMethod:g,formAction:x,formEncType:a.formEncType,formData:void 0,json:void 0,text:S}}}else if(a.formEncType==="application/json"){if(!pr(g))return c();try{let S=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:r,submission:{formMethod:g,formAction:x,formEncType:a.formEncType,formData:void 0,json:S,text:void 0}}}catch{return c()}}}Ct(typeof FormData=="function","FormData is not available in this environment");let b,_;if(a.formData)b=vd(a.formData),_=a.formData;else if(a.body instanceof FormData)b=vd(a.body),_=a.body;else if(a.body instanceof URLSearchParams)b=a.body,_=Dm(b);else if(a.body==null)b=new URLSearchParams,_=new FormData;else try{b=new URLSearchParams(a.body),_=Dm(b)}catch{return c()}let w={formMethod:g,formAction:x,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:_,json:void 0,text:void 0};if(pr(w.formMethod))return{path:r,submission:w};let T=ts(r);return s&&T.search&&zd(T.search)&&b.append("index",""),T.search=`?${b}`,{path:Ii(T),submission:w}}function Sm(s,r,a,c,d,g,x,b,_,w,T,S,M,B,U,z,H,$,te,G){let oe=G?zr(G[1])?G[1].error:G[1].data:void 0,xe=d.createURL(g.location),se=d.createURL(_),R;if(T&&g.errors){let Oe=Object.keys(g.errors)[0];R=x.findIndex(K=>K.route.id===Oe)}else if(G&&zr(G[1])){let Oe=G[0];R=x.findIndex(K=>K.route.id===Oe)-1}let W=G?G[1].statusCode:void 0,L=W&&W>=400,he={currentUrl:xe,currentParams:g.matches[0]?.params||{},nextUrl:se,nextParams:x[0].params,...b,actionResult:oe,actionStatus:W},re=Ko(x),ue=x.map((Oe,K)=>{let{route:ne}=Oe,Q=null;if(R!=null&&K>R?Q=!1:ne.lazy?Q=!0:Fd(ne)?T?Q=wd(ne,g.loaderData,g.errors):Hw(g.loaderData,g.matches[K],Oe)&&(Q=!0):Q=!1,Q!==null)return bd(a,c,s,re,Oe,w,r,Q);let fe=L?!1:S||xe.pathname+xe.search===se.pathname+se.search||xe.search!==se.search||Vw(g.matches[K],Oe),Ne={...he,defaultShouldRevalidate:fe},Fe=Mu(Oe,Ne);return bd(a,c,s,re,Oe,w,r,Fe,Ne)}),Ee=[];return U.forEach((Oe,K)=>{if(T||!x.some(Ie=>Ie.route.id===Oe.routeId)||B.has(K))return;let ne=g.fetchers.get(K),Q=ne&&ne.state!=="idle"&&ne.data===void 0,fe=Qa(H,Oe.path,$);if(!fe){if(te&&Q)return;Ee.push({key:K,routeId:Oe.routeId,path:Oe.path,matches:null,match:null,request:null,controller:null});return}if(z.has(K))return;let Ne=Ou(fe,Oe.path),Fe=new AbortController,X=Cl(d,Oe.path,Fe.signal),pe=null;if(M.has(K))M.delete(K),pe=Rl(a,c,X,fe,Ne,w,r);else if(Q)S&&(pe=Rl(a,c,X,fe,Ne,w,r));else{let Ie={...he,defaultShouldRevalidate:L?!1:S};Mu(Ne,Ie)&&(pe=Rl(a,c,X,fe,Ne,w,r,Ie))}pe&&Ee.push({key:K,routeId:Oe.routeId,path:Oe.path,matches:pe,match:Ne,request:X,controller:Fe})}),{dsMatches:ue,revalidatingFetchers:Ee}}function Fd(s){return s.loader!=null||s.middleware!=null&&s.middleware.length>0}function wd(s,r,a){if(s.lazy)return!0;if(!Fd(s))return!1;let c=r!=null&&s.id in r,d=a!=null&&a[s.id]!==void 0;return!c&&d?!1:typeof s.loader=="function"&&s.loader.hydrate===!0?!0:!c&&!d}function Hw(s,r,a){let c=!r||a.route.id!==r.route.id,d=!s.hasOwnProperty(a.route.id);return c||d}function Vw(s,r){let a=s.route.path;return s.pathname!==r.pathname||a!=null&&a.endsWith("*")&&s.params["*"]!==r.params["*"]}function Mu(s,r){if(s.route.shouldRevalidate){let a=s.route.shouldRevalidate(r);if(typeof a=="boolean")return a}return r.defaultShouldRevalidate}function Tm(s,r,a,c,d,g){let x;if(s){let w=c[s];Ct(w,`No route found to patch children into: routeId = ${s}`),w.children||(w.children=[]),x=w.children}else x=a;let b=[],_=[];if(r.forEach(w=>{let T=x.find(S=>Z2(w,S));T?_.push({existingRoute:T,newRoute:w}):b.push(w)}),b.length>0){let w=zo(b,d,[s||"_","patch",String(x?.length||"0")],c);x.push(...w)}if(g&&_.length>0)for(let w=0;w<_.length;w++){let{existingRoute:T,newRoute:S}=_[w],M=T,[B]=zo([S],d,[],{},!0);Object.assign(M,{element:B.element?B.element:M.element,errorElement:B.errorElement?B.errorElement:M.errorElement,hydrateFallbackElement:B.hydrateFallbackElement?B.hydrateFallbackElement:M.hydrateFallbackElement})}}function Z2(s,r){return"id"in s&&"id"in r&&s.id===r.id?!0:s.index===r.index&&s.path===r.path&&s.caseSensitive===r.caseSensitive?(!s.children||s.children.length===0)&&(!r.children||r.children.length===0)?!0:s.children.every((a,c)=>r.children?.some(d=>Z2(a,d))):!1}var Nm=new WeakMap,Q2=({key:s,route:r,manifest:a,mapRouteProperties:c})=>{let d=a[r.id];if(Ct(d,"No route found in manifest"),!d.lazy||typeof d.lazy!="object")return;let g=d.lazy[s];if(!g)return;let x=Nm.get(d);x||(x={},Nm.set(d,x));let b=x[s];if(b)return b;let _=(async()=>{let w=iw(s),S=d[s]!==void 0&&s!=="hasErrorBoundary";if(w)Sn(!w,"Route property "+s+" is not a supported lazy route property. This property will be ignored."),x[s]=Promise.resolve();else if(S)Sn(!1,`Route "${d.id}" has a static property "${s}" defined. The lazy property will be ignored.`);else{let M=await g();M!=null&&(Object.assign(d,{[s]:M}),Object.assign(d,c(d)))}typeof d.lazy=="object"&&(d.lazy[s]=void 0,Object.values(d.lazy).every(M=>M===void 0)&&(d.lazy=void 0))})();return x[s]=_,_},Om=new WeakMap;function Gw(s,r,a,c,d){let g=a[s.id];if(Ct(g,"No route found in manifest"),!s.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof s.lazy=="function"){let T=Om.get(g);if(T)return{lazyRoutePromise:T,lazyHandlerPromise:T};let S=(async()=>{Ct(typeof s.lazy=="function","No lazy route function found");let M=await s.lazy(),B={};for(let U in M){let z=M[U];if(z===void 0)continue;let H=sw(U),te=g[U]!==void 0&&U!=="hasErrorBoundary";H?Sn(!H,"Route property "+U+" is not a supported property to be returned from a lazy route function. This property will be ignored."):te?Sn(!te,`Route "${g.id}" has a static property "${U}" defined but its lazy function is also returning a value for this property. The lazy route property "${U}" will be ignored.`):B[U]=z}Object.assign(g,B),Object.assign(g,{...c(g),lazy:void 0})})();return Om.set(g,S),S.catch(()=>{}),{lazyRoutePromise:S,lazyHandlerPromise:S}}let x=Object.keys(s.lazy),b=[],_;for(let T of x){if(d&&d.includes(T))continue;let S=Q2({key:T,route:s,manifest:a,mapRouteProperties:c});S&&(b.push(S),T===r&&(_=S))}let w=b.length>0?Promise.all(b).then(()=>{}):void 0;return w?.catch(()=>{}),_?.catch(()=>{}),{lazyRoutePromise:w,lazyHandlerPromise:_}}async function Rm(s){let r=s.matches.filter(d=>d.shouldLoad),a={};return(await Promise.all(r.map(d=>d.resolve()))).forEach((d,g)=>{a[r[g].route.id]=d}),a}async function qw(s){return s.matches.some(r=>r.route.middleware)?J2(s,()=>Rm(s)):Rm(s)}function J2(s,r){return Xw(s,r,c=>c,tb,a);function a(c,d,g){if(g)return Promise.resolve(Object.assign(g.value,{[d]:{type:"error",result:c}}));{let{matches:x}=s,b=Math.min(Math.max(x.findIndex(w=>w.route.id===d),0),Math.max(x.findIndex(w=>w.shouldCallHandler()),0)),_=Ja(x,x[b].route.id).route.id;return Promise.resolve({[_]:{type:"error",result:c}})}}}async function Xw(s,r,a,c,d){let{matches:g,request:x,params:b,context:_,unstable_pattern:w}=s,T=g.flatMap(M=>M.route.middleware?M.route.middleware.map(B=>[M.route.id,B]):[]);return await $2({request:x,params:b,context:_,unstable_pattern:w},T,r,a,c,d)}async function $2(s,r,a,c,d,g,x=0){let{request:b}=s;if(b.signal.aborted)throw b.signal.reason??new Error(`Request aborted: ${b.method} ${b.url}`);let _=r[x];if(!_)return await a();let[w,T]=_,S,M=async()=>{if(S)throw new Error("You may only call `next()` once per middleware");try{return S={value:await $2(s,r,a,c,d,g,x+1)},S.value}catch(B){return S={value:await g(B,w,S)},S.value}};try{let B=await T(s,M),U=B!=null?c(B):void 0;return d(U)?U:S?U??S.value:(S={value:await M()},S.value)}catch(B){return await g(B,w,S)}}function ex(s,r,a,c,d){let g=Q2({key:"middleware",route:c.route,manifest:r,mapRouteProperties:s}),x=Gw(c.route,pr(a.method)?"action":"loader",r,s,d);return{middleware:g,route:x.lazyRoutePromise,handler:x.lazyHandlerPromise}}function bd(s,r,a,c,d,g,x,b,_=null){let w=!1,T=ex(s,r,a,d,g);return{...d,_lazyPromises:T,shouldLoad:b,shouldRevalidateArgs:_,shouldCallHandler(S){return w=!0,_?typeof S=="boolean"?Mu(d,{..._,defaultShouldRevalidate:S}):Mu(d,_):b},resolve(S){let{lazy:M,loader:B,middleware:U}=d.route,z=w||b||S&&!pr(a.method)&&(M||B),H=U&&U.length>0&&!B&&!M;return z&&(pr(a.method)||!H)?Ww({request:a,unstable_pattern:c,match:d,lazyHandlerPromise:T?.handler,lazyRoutePromise:T?.route,handlerOverride:S,scopedContext:x}):Promise.resolve({type:"data",result:void 0})}}}function Rl(s,r,a,c,d,g,x,b=null){return c.map(_=>_.route.id!==d.route.id?{..._,shouldLoad:!1,shouldRevalidateArgs:b,shouldCallHandler:()=>!1,_lazyPromises:ex(s,r,a,_,g),resolve:()=>Promise.resolve({type:"data",result:void 0})}:bd(s,r,a,Ko(c),_,g,x,!0,b))}async function Yw(s,r,a,c,d,g){a.some(w=>w._lazyPromises?.middleware)&&await Promise.all(a.map(w=>w._lazyPromises?.middleware));let x={request:r,unstable_pattern:Ko(a),params:a[0].params,context:d,matches:a},_=await s({...x,fetcherKey:c,runClientMiddleware:w=>{let T=x;return J2(T,()=>w({...T,fetcherKey:c,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(a.flatMap(w=>[w._lazyPromises?.handler,w._lazyPromises?.route]))}catch{}return _}async function Ww({request:s,unstable_pattern:r,match:a,lazyHandlerPromise:c,lazyRoutePromise:d,handlerOverride:g,scopedContext:x}){let b,_,w=pr(s.method),T=w?"action":"loader",S=M=>{let B,U=new Promise(($,te)=>B=te);_=()=>B(),s.signal.addEventListener("abort",_);let z=$=>typeof M!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${T}" [routeId: ${a.route.id}]`)):M({request:s,unstable_pattern:r,params:a.params,context:x},...$!==void 0?[$]:[]),H=(async()=>{try{return{type:"data",result:await(g?g(te=>z(te)):z())}}catch($){return{type:"error",result:$}}})();return Promise.race([H,U])};try{let M=w?a.route.action:a.route.loader;if(c||d)if(M){let B,[U]=await Promise.all([S(M).catch(z=>{B=z}),c,d]);if(B!==void 0)throw B;b=U}else{await c;let B=w?a.route.action:a.route.loader;if(B)[b]=await Promise.all([S(B),d]);else if(T==="action"){let U=new URL(s.url),z=U.pathname+U.search;throw ri(405,{method:s.method,pathname:z,routeId:a.route.id})}else return{type:"data",result:void 0}}else if(M)b=await S(M);else{let B=new URL(s.url),U=B.pathname+B.search;throw ri(404,{pathname:U})}}catch(M){return{type:"error",result:M}}finally{_&&s.signal.removeEventListener("abort",_)}return b}async function Kw(s){let r=s.headers.get("Content-Type");return r&&/\bapplication\/json\b/.test(r)?s.body==null?null:s.json():s.text()}async function Zw(s){let{result:r,type:a}=s;if(nx(r)){let c;try{c=await Kw(r)}catch(d){return{type:"error",error:d}}return a==="error"?{type:"error",error:new Yu(r.status,r.statusText,c),statusCode:r.status,headers:r.headers}:{type:"data",data:c,statusCode:r.status,headers:r.headers}}return a==="error"?km(r)?r.data instanceof Error?{type:"error",error:r.data,statusCode:r.init?.status,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"error",error:eb(r),statusCode:Ho(r)?r.status:void 0,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"error",error:r,statusCode:Ho(r)?r.status:void 0}:km(r)?{type:"data",data:r.data,statusCode:r.init?.status,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"data",data:r}}function Qw(s,r,a,c,d){let g=s.headers.get("Location");if(Ct(g,"Redirects returned/thrown from loaders/actions must have a Location header"),!Gu(g)){let x=c.slice(0,c.findIndex(b=>b.route.id===a)+1);g=yd(new URL(r.url),x,d,g),s.headers.set("Location",g)}return s}function Im(s,r,a){if(Gu(s)){let c=s,d=c.startsWith("//")?new URL(r.protocol+c):new URL(c),g=ii(d.pathname,a)!=null;if(d.origin===r.origin&&g)return d.pathname+d.search+d.hash}return s}function Cl(s,r,a,c){let d=s.createURL(tx(r)).toString(),g={signal:a};if(c&&pr(c.formMethod)){let{formMethod:x,formEncType:b}=c;g.method=x.toUpperCase(),b==="application/json"?(g.headers=new Headers({"Content-Type":b}),g.body=JSON.stringify(c.json)):b==="text/plain"?g.body=c.text:b==="application/x-www-form-urlencoded"&&c.formData?g.body=vd(c.formData):g.body=c.formData}return new Request(d,g)}function vd(s){let r=new URLSearchParams;for(let[a,c]of s.entries())r.append(a,typeof c=="string"?c:c.name);return r}function Dm(s){let r=new FormData;for(let[a,c]of s.entries())r.append(a,c);return r}function Jw(s,r,a,c=!1,d=!1){let g={},x=null,b,_=!1,w={},T=a&&zr(a[1])?a[1].error:void 0;return s.forEach(S=>{if(!(S.route.id in r))return;let M=S.route.id,B=r[M];if(Ct(!Ds(B),"Cannot handle redirect results in processLoaderData"),zr(B)){let U=B.error;if(T!==void 0&&(U=T,T=void 0),x=x||{},d)x[M]=U;else{let z=Ja(s,M);x[z.route.id]==null&&(x[z.route.id]=U)}c||(g[M]=K2),_||(_=!0,b=Ho(B.error)?B.error.status:500),B.headers&&(w[M]=B.headers)}else g[M]=B.data,B.statusCode&&B.statusCode!==200&&!_&&(b=B.statusCode),B.headers&&(w[M]=B.headers)}),T!==void 0&&a&&(x={[a[0]]:T},a[2]&&(g[a[2]]=void 0)),{loaderData:g,errors:x,statusCode:b||200,loaderHeaders:w}}function Mm(s,r,a,c,d,g){let{loaderData:x,errors:b}=Jw(r,a,c);return d.filter(_=>!_.matches||_.matches.some(w=>w.shouldLoad)).forEach(_=>{let{key:w,match:T,controller:S}=_;if(S&&S.signal.aborted)return;let M=g[w];if(Ct(M,"Did not find corresponding fetcher result"),zr(M)){let B=Ja(s.matches,T?.route.id);b&&b[B.route.id]||(b={...b,[B.route.id]:M.error}),s.fetchers.delete(w)}else if(Ds(M))Ct(!1,"Unhandled fetcher revalidation redirect");else{let B=ra(M.data);s.fetchers.set(w,B)}}),{loaderData:x,errors:b}}function Bm(s,r,a,c){let d=Object.entries(r).filter(([,g])=>g!==K2).reduce((g,[x,b])=>(g[x]=b,g),{});for(let g of a){let x=g.route.id;if(!r.hasOwnProperty(x)&&s.hasOwnProperty(x)&&g.route.loader&&(d[x]=s[x]),c&&c.hasOwnProperty(x))break}return d}function jm(s){return s?zr(s[1])?{actionData:{}}:{actionData:{[s[0]]:s[1].data}}:{}}function Ja(s,r){return(r?s.slice(0,s.findIndex(c=>c.route.id===r)+1):[...s]).reverse().find(c=>c.route.hasErrorBoundary===!0)||s[0]}function gu(s){let r=s.length===1?s[0]:s.find(a=>a.index||!a.path||a.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r}}function ri(s,{pathname:r,routeId:a,method:c,type:d,message:g}={}){let x="Unknown Server Error",b="Unknown @remix-run/router error";return s===400?(x="Bad Request",c&&r&&a?b=`You made a ${c} request to "${r}" but did not provide a \`loader\` for route "${a}", so there is no way to handle the request.`:d==="invalid-body"&&(b="Unable to encode submission body")):s===403?(x="Forbidden",b=`Route "${a}" does not match URL "${r}"`):s===404?(x="Not Found",b=`No route matches URL "${r}"`):s===405&&(x="Method Not Allowed",c&&r&&a?b=`You made a ${c.toUpperCase()} request to "${r}" but did not provide an \`action\` for route "${a}", so there is no way to handle the request.`:c&&(b=`Invalid request method "${c.toUpperCase()}"`)),new Yu(s||500,x,new Error(b),!0)}function mu(s){let r=Object.entries(s);for(let a=r.length-1;a>=0;a--){let[c,d]=r[a];if(Ds(d))return{key:c,result:d}}}function tx(s){let r=typeof s=="string"?ts(s):s;return Ii({...r,hash:""})}function $w(s,r){return s.pathname!==r.pathname||s.search!==r.search?!1:s.hash===""?r.hash!=="":s.hash===r.hash?!0:r.hash!==""}function eb(s){return new Yu(s.init?.status??500,s.init?.statusText??"Internal Server Error",s.data)}function tb(s){return s!=null&&typeof s=="object"&&Object.entries(s).every(([r,a])=>typeof r=="string"&&nb(a))}function nb(s){return s!=null&&typeof s=="object"&&"type"in s&&"result"in s&&(s.type==="data"||s.type==="error")}function rb(s){return nx(s.result)&&kw.has(s.result.status)}function zr(s){return s.type==="error"}function Ds(s){return(s&&s.type)==="redirect"}function km(s){return typeof s=="object"&&s!=null&&"type"in s&&"data"in s&&"init"in s&&s.type==="DataWithResponseInit"}function nx(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.headers=="object"&&typeof s.body<"u"}function ib(s){return jw.has(s.toUpperCase())}function pr(s){return Mw.has(s.toUpperCase())}function zd(s){return new URLSearchParams(s).getAll("index").some(r=>r==="")}function Ou(s,r){let a=typeof r=="string"?ts(r).search:r.search;if(s[s.length-1].route.index&&zd(a||""))return s[s.length-1];let c=q2(s);return c[c.length-1]}function Lm(s){let{formMethod:r,formAction:a,formEncType:c,text:d,formData:g,json:x}=s;if(!(!r||!a||!c)){if(d!=null)return{formMethod:r,formAction:a,formEncType:c,formData:void 0,json:void 0,text:d};if(g!=null)return{formMethod:r,formAction:a,formEncType:c,formData:g,json:void 0,text:void 0};if(x!==void 0)return{formMethod:r,formAction:a,formEncType:c,formData:void 0,json:x,text:void 0}}}function td(s,r){return r?{state:"loading",location:s,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}:{state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ab(s,r){return{state:"submitting",location:s,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}}function Ro(s,r){return s?{state:"loading",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:r}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function sb(s,r){return{state:"submitting",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:r?r.data:void 0}}function ra(s){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function lb(s,r){try{let a=s.sessionStorage.getItem(W2);if(a){let c=JSON.parse(a);for(let[d,g]of Object.entries(c||{}))g&&Array.isArray(g)&&r.set(d,new Set(g||[]))}}catch{}}function ob(s,r){if(r.size>0){let a={};for(let[c,d]of r)a[c]=[...d];try{s.sessionStorage.setItem(W2,JSON.stringify(a))}catch(c){Sn(!1,`Failed to save applied view transitions in sessionStorage (${c}).`)}}}function Pm(){let s,r,a=new Promise((c,d)=>{s=async g=>{c(g);try{await a}catch{}},r=async g=>{d(g);try{await a}catch{}}});return{promise:a,resolve:s,reject:r}}var Bs=Z.createContext(null);Bs.displayName="DataRouter";var Zo=Z.createContext(null);Zo.displayName="DataRouterState";Z.createContext(!1);var Hd=Z.createContext({isTransitioning:!1});Hd.displayName="ViewTransition";var rx=Z.createContext(new Map);rx.displayName="Fetchers";var cb=Z.createContext(null);cb.displayName="Await";var ai=Z.createContext(null);ai.displayName="Navigation";var Wu=Z.createContext(null);Wu.displayName="Location";var si=Z.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var Vd=Z.createContext(null);Vd.displayName="RouteError";function ub(s,{relative:r}={}){Ct(Ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:c}=Z.useContext(ai),{hash:d,pathname:g,search:x}=Qo(s,{relative:r}),b=g;return a!=="/"&&(b=g==="/"?a:Oi([a,g])),c.createHref({pathname:b,search:x,hash:d})}function Ml(){return Z.useContext(Wu)!=null}function ns(){return Ct(Ml(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(Wu).location}var ix="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ax(s){Z.useContext(ai).static||Z.useLayoutEffect(s)}function la(){let{isDataRoute:s}=Z.useContext(si);return s?Cb():fb()}function fb(){Ct(Ml(),"useNavigate() may be used only in the context of a <Router> component.");let s=Z.useContext(Bs),{basename:r,navigator:a}=Z.useContext(ai),{matches:c}=Z.useContext(si),{pathname:d}=ns(),g=JSON.stringify(qu(c)),x=Z.useRef(!1);return ax(()=>{x.current=!0}),Z.useCallback((_,w={})=>{if(Sn(x.current,ix),!x.current)return;if(typeof _=="number"){a.go(_);return}let T=Xu(_,JSON.parse(g),d,w.relative==="path");s==null&&r!=="/"&&(T.pathname=T.pathname==="/"?r:Oi([r,T.pathname])),(w.replace?a.replace:a.push)(T,w.state,w)},[r,a,g,d,s])}var hb=Z.createContext(null);function db(s){let r=Z.useContext(si).outlet;return Z.useMemo(()=>r&&Z.createElement(hb.Provider,{value:s},r),[r,s])}function sx(){let{matches:s}=Z.useContext(si),r=s[s.length-1];return r?r.params:{}}function Qo(s,{relative:r}={}){let{matches:a}=Z.useContext(si),{pathname:c}=ns(),d=JSON.stringify(qu(a));return Z.useMemo(()=>Xu(s,JSON.parse(d),c,r==="path"),[s,d,c,r])}function gb(s,r,a,c,d){Ct(Ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:g}=Z.useContext(ai),{matches:x}=Z.useContext(si),b=x[x.length-1],_=b?b.params:{},w=b?b.pathname:"/",T=b?b.pathnameBase:"/",S=b&&b.route;{let te=S&&S.path||"";lx(w,!S||te.endsWith("*")||te.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${te}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${te}"> to <Route path="${te==="/"?"*":`${te}/*`}">.`)}let M=ns(),B;B=M;let U=B.pathname||"/",z=U;if(T!=="/"){let te=T.replace(/^\//,"").split("/");z="/"+U.replace(/^\//,"").split("/").slice(te.length).join("/")}let H=Qa(s,{pathname:z});return Sn(S||H!=null,`No routes matched location "${B.pathname}${B.search}${B.hash}" `),Sn(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${B.pathname}${B.search}${B.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),wb(H&&H.map(te=>Object.assign({},te,{params:Object.assign({},_,te.params),pathname:Oi([T,g.encodeLocation?g.encodeLocation(te.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:te.pathname]),pathnameBase:te.pathnameBase==="/"?T:Oi([T,g.encodeLocation?g.encodeLocation(te.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:te.pathnameBase])})),x,a,c,d)}function mb(){let s=Ab(),r=Ho(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),a=s instanceof Error?s.stack:null,c="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:c},g={padding:"2px 4px",backgroundColor:c},x=null;return console.error("Error handled by React Router default ErrorBoundary:",s),x=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:g},"ErrorBoundary")," or"," ",Z.createElement("code",{style:g},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},r),a?Z.createElement("pre",{style:d},a):null,x)}var xb=Z.createElement(mb,null),pb=class extends Z.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){this.props.onError?this.props.onError(s,r):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?Z.createElement(si.Provider,{value:this.props.routeContext},Z.createElement(Vd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yb({routeContext:s,match:r,children:a}){let c=Z.useContext(Bs);return c&&c.static&&c.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=r.route.id),Z.createElement(si.Provider,{value:s},a)}function wb(s,r=[],a=null,c=null,d=null){if(s==null){if(!a)return null;if(a.errors)s=a.matches;else if(r.length===0&&!a.initialized&&a.matches.length>0)s=a.matches;else return null}let g=s,x=a?.errors;if(x!=null){let T=g.findIndex(S=>S.route.id&&x?.[S.route.id]!==void 0);Ct(T>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),g=g.slice(0,Math.min(g.length,T+1))}let b=!1,_=-1;if(a)for(let T=0;T<g.length;T++){let S=g[T];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(_=T),S.route.id){let{loaderData:M,errors:B}=a,U=S.route.loader&&!M.hasOwnProperty(S.route.id)&&(!B||B[S.route.id]===void 0);if(S.route.lazy||U){b=!0,_>=0?g=g.slice(0,_+1):g=[g[0]];break}}}let w=a&&c?(T,S)=>{c(T,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:Ko(a.matches),errorInfo:S})}:void 0;return g.reduceRight((T,S,M)=>{let B,U=!1,z=null,H=null;a&&(B=x&&S.route.id?x[S.route.id]:void 0,z=S.route.errorElement||xb,b&&(_<0&&M===0?(lx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,H=null):_===M&&(U=!0,H=S.route.hydrateFallbackElement||null)));let $=r.concat(g.slice(0,M+1)),te=()=>{let G;return B?G=z:U?G=H:S.route.Component?G=Z.createElement(S.route.Component,null):S.route.element?G=S.route.element:G=T,Z.createElement(yb,{match:S,routeContext:{outlet:T,matches:$,isDataRoute:a!=null},children:G})};return a&&(S.route.ErrorBoundary||S.route.errorElement||M===0)?Z.createElement(pb,{location:a.location,revalidation:a.revalidation,component:z,error:B,children:te(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:w}):te()},null)}function Gd(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bb(s){let r=Z.useContext(Bs);return Ct(r,Gd(s)),r}function vb(s){let r=Z.useContext(Zo);return Ct(r,Gd(s)),r}function Eb(s){let r=Z.useContext(si);return Ct(r,Gd(s)),r}function qd(s){let r=Eb(s),a=r.matches[r.matches.length-1];return Ct(a.route.id,`${s} can only be used on routes that contain a unique "id"`),a.route.id}function _b(){return qd("useRouteId")}function Ab(){let s=Z.useContext(Vd),r=vb("useRouteError"),a=qd("useRouteError");return s!==void 0?s:r.errors?.[a]}function Cb(){let{router:s}=bb("useNavigate"),r=qd("useNavigate"),a=Z.useRef(!1);return ax(()=>{a.current=!0}),Z.useCallback(async(d,g={})=>{Sn(a.current,ix),a.current&&(typeof d=="number"?await s.navigate(d):await s.navigate(d,{fromRouteId:r,...g}))},[s,r])}var Um={};function lx(s,r,a){!r&&!Um[s]&&(Um[s]=!0,Sn(!1,a))}var Fm={};function zm(s,r){!s&&!Fm[r]&&(Fm[r]=!0,console.warn(r))}var Sb="useOptimistic",Hm=Qy[Sb];function Tb(s){return Hm?Hm(s):[s,()=>{}]}function Nb(s){let r={hasErrorBoundary:s.hasErrorBoundary||s.ErrorBoundary!=null||s.errorElement!=null};return s.Component&&(s.element&&Sn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(r,{element:Z.createElement(s.Component),Component:void 0})),s.HydrateFallback&&(s.hydrateFallbackElement&&Sn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(r,{hydrateFallbackElement:Z.createElement(s.HydrateFallback),HydrateFallback:void 0})),s.ErrorBoundary&&(s.errorElement&&Sn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(r,{errorElement:Z.createElement(s.ErrorBoundary),ErrorBoundary:void 0})),r}var Ob=["HydrateFallback","hydrateFallbackElement"],Rb=class{constructor(){this.status="pending",this.promise=new Promise((r,a)=>{this.resolve=c=>{this.status==="pending"&&(this.status="resolved",r(c))},this.reject=c=>{this.status==="pending"&&(this.status="rejected",a(c))}})}};function Ib({router:s,flushSync:r,unstable_onError:a,unstable_useTransitions:c}){let[d,g]=Z.useState(s.state),[x,b]=Tb(d),[_,w]=Z.useState(),[T,S]=Z.useState({isTransitioning:!1}),[M,B]=Z.useState(),[U,z]=Z.useState(),[H,$]=Z.useState(),te=Z.useRef(new Map),G=Z.useCallback((R,{deletedFetchers:W,newErrors:L,flushSync:he,viewTransitionOpts:re})=>{L&&a&&Object.values(L).forEach(Ee=>a(Ee,{location:R.location,params:R.matches[0]?.params??{},unstable_pattern:Ko(R.matches)})),R.fetchers.forEach((Ee,Oe)=>{Ee.data!==void 0&&te.current.set(Oe,Ee.data)}),W.forEach(Ee=>te.current.delete(Ee)),zm(he===!1||r!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let ue=s.window!=null&&s.window.document!=null&&typeof s.window.document.startViewTransition=="function";if(zm(re==null||ue,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!re||!ue){r&&he?r(()=>g(R)):c===!1?g(R):Z.startTransition(()=>{c===!0&&b(Ee=>Vm(Ee,R)),g(R)});return}if(r&&he){r(()=>{U&&(M?.resolve(),U.skipTransition()),S({isTransitioning:!0,flushSync:!0,currentLocation:re.currentLocation,nextLocation:re.nextLocation})});let Ee=s.window.document.startViewTransition(()=>{r(()=>g(R))});Ee.finished.finally(()=>{r(()=>{B(void 0),z(void 0),w(void 0),S({isTransitioning:!1})})}),r(()=>z(Ee));return}U?(M?.resolve(),U.skipTransition(),$({state:R,currentLocation:re.currentLocation,nextLocation:re.nextLocation})):(w(R),S({isTransitioning:!0,flushSync:!1,currentLocation:re.currentLocation,nextLocation:re.nextLocation}))},[s.window,r,U,M,c,b,a]);Z.useLayoutEffect(()=>s.subscribe(G),[s,G]),Z.useEffect(()=>{T.isTransitioning&&!T.flushSync&&B(new Rb)},[T]),Z.useEffect(()=>{if(M&&_&&s.window){let R=_,W=M.promise,L=s.window.document.startViewTransition(async()=>{c===!1?g(R):Z.startTransition(()=>{c===!0&&b(he=>Vm(he,R)),g(R)}),await W});L.finished.finally(()=>{B(void 0),z(void 0),w(void 0),S({isTransitioning:!1})}),z(L)}},[_,M,s.window,c,b]),Z.useEffect(()=>{M&&_&&x.location.key===_.location.key&&M.resolve()},[M,U,x.location,_]),Z.useEffect(()=>{!T.isTransitioning&&H&&(w(H.state),S({isTransitioning:!0,flushSync:!1,currentLocation:H.currentLocation,nextLocation:H.nextLocation}),$(void 0))},[T.isTransitioning,H]);let oe=Z.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:R=>s.navigate(R),push:(R,W,L)=>s.navigate(R,{state:W,preventScrollReset:L?.preventScrollReset}),replace:(R,W,L)=>s.navigate(R,{replace:!0,state:W,preventScrollReset:L?.preventScrollReset})}),[s]),xe=s.basename||"/",se=Z.useMemo(()=>({router:s,navigator:oe,static:!1,basename:xe,unstable_onError:a}),[s,oe,xe,a]);return Z.createElement(Z.Fragment,null,Z.createElement(Bs.Provider,{value:se},Z.createElement(Zo.Provider,{value:x},Z.createElement(rx.Provider,{value:te.current},Z.createElement(Hd.Provider,{value:T},Z.createElement(jb,{basename:xe,location:x.location,navigationType:x.historyAction,navigator:oe,unstable_useTransitions:c===!0},Z.createElement(Db,{routes:s.routes,future:s.future,state:x,unstable_onError:a})))))),null)}function Vm(s,r){return{...s,navigation:r.navigation.state!=="idle"?r.navigation:s.navigation,revalidation:r.revalidation!=="idle"?r.revalidation:s.revalidation,actionData:r.navigation.state!=="submitting"?r.actionData:s.actionData,fetchers:r.fetchers}}var Db=Z.memo(Mb);function Mb({routes:s,future:r,state:a,unstable_onError:c}){return gb(s,void 0,a,c,r)}function Ed({to:s,replace:r,state:a,relative:c}){Ct(Ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=Z.useContext(ai);Sn(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:g}=Z.useContext(si),{pathname:x}=ns(),b=la(),_=Xu(s,qu(g),x,c==="path"),w=JSON.stringify(_);return Z.useEffect(()=>{b(JSON.parse(w),{replace:r,state:a,relative:c})},[b,w,c,r,a]),null}function Bb(s){return db(s.context)}function jb({basename:s="/",children:r=null,location:a,navigationType:c="POP",navigator:d,static:g=!1,unstable_useTransitions:x}){Ct(!Ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let b=s.replace(/^\/*/,"/"),_=Z.useMemo(()=>({basename:b,navigator:d,static:g,unstable_useTransitions:x,future:{}}),[b,d,g,x]);typeof a=="string"&&(a=ts(a));let{pathname:w="/",search:T="",hash:S="",state:M=null,key:B="default"}=a,U=Z.useMemo(()=>{let z=ii(w,b);return z==null?null:{location:{pathname:z,search:T,hash:S,state:M,key:B},navigationType:c}},[b,w,T,S,M,B,c]);return Sn(U!=null,`<Router basename="${b}"> is not able to match the URL "${w}${T}${S}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:Z.createElement(ai.Provider,{value:_},Z.createElement(Wu.Provider,{children:r,value:U}))}var Ru="get",Iu="application/x-www-form-urlencoded";function Ku(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function kb(s){return Ku(s)&&s.tagName.toLowerCase()==="button"}function Lb(s){return Ku(s)&&s.tagName.toLowerCase()==="form"}function Pb(s){return Ku(s)&&s.tagName.toLowerCase()==="input"}function Ub(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Fb(s,r){return s.button===0&&(!r||r==="_self")&&!Ub(s)}var xu=null;function zb(){if(xu===null)try{new FormData(document.createElement("form"),0),xu=!1}catch{xu=!0}return xu}var Hb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nd(s){return s!=null&&!Hb.has(s)?(Sn(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Iu}"`),null):s}function Vb(s,r){let a,c,d,g,x;if(Lb(s)){let b=s.getAttribute("action");c=b?ii(b,r):null,a=s.getAttribute("method")||Ru,d=nd(s.getAttribute("enctype"))||Iu,g=new FormData(s)}else if(kb(s)||Pb(s)&&(s.type==="submit"||s.type==="image")){let b=s.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let _=s.getAttribute("formaction")||b.getAttribute("action");if(c=_?ii(_,r):null,a=s.getAttribute("formmethod")||b.getAttribute("method")||Ru,d=nd(s.getAttribute("formenctype"))||nd(b.getAttribute("enctype"))||Iu,g=new FormData(b,s),!zb()){let{name:w,type:T,value:S}=s;if(T==="image"){let M=w?`${w}.`:"";g.append(`${M}x`,"0"),g.append(`${M}y`,"0")}else w&&g.append(w,S)}}else{if(Ku(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Ru,c=null,d=Iu,x=s}return g&&d==="text/plain"&&(x=g,g=void 0),{action:c,method:a.toLowerCase(),encType:d,formData:g,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xd(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function Gb(s,r,a){let c=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return c.pathname==="/"?c.pathname=`_root.${a}`:r&&ii(c.pathname,r)==="/"?c.pathname=`${r.replace(/\/$/,"")}/_root.${a}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${a}`,c}async function qb(s,r){if(s.id in r)return r[s.id];try{let a=await import(s.module);return r[s.id]=a,a}catch(a){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xb(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function Yb(s,r,a){let c=await Promise.all(s.map(async d=>{let g=r.routes[d.route.id];if(g){let x=await qb(g,a);return x.links?x.links():[]}return[]}));return Qb(c.flat(1).filter(Xb).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Gm(s,r,a,c,d,g){let x=(_,w)=>a[w]?_.route.id!==a[w].route.id:!0,b=(_,w)=>a[w].pathname!==_.pathname||a[w].route.path?.endsWith("*")&&a[w].params["*"]!==_.params["*"];return g==="assets"?r.filter((_,w)=>x(_,w)||b(_,w)):g==="data"?r.filter((_,w)=>{let T=c.routes[_.route.id];if(!T||!T.hasLoader)return!1;if(x(_,w)||b(_,w))return!0;if(_.route.shouldRevalidate){let S=_.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:_.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Wb(s,r,{includeHydrateFallback:a}={}){return Kb(s.map(c=>{let d=r.routes[c.route.id];if(!d)return[];let g=[d.module];return d.clientActionModule&&(g=g.concat(d.clientActionModule)),d.clientLoaderModule&&(g=g.concat(d.clientLoaderModule)),a&&d.hydrateFallbackModule&&(g=g.concat(d.hydrateFallbackModule)),d.imports&&(g=g.concat(d.imports)),g}).flat(1))}function Kb(s){return[...new Set(s)]}function Zb(s){let r={},a=Object.keys(s).sort();for(let c of a)r[c]=s[c];return r}function Qb(s,r){let a=new Set;return new Set(r),s.reduce((c,d)=>{let g=JSON.stringify(Zb(d));return a.has(g)||(a.add(g),c.push({key:g,link:d})),c},[])}function ox(){let s=Z.useContext(Bs);return Xd(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Jb(){let s=Z.useContext(Zo);return Xd(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Yd=Z.createContext(void 0);Yd.displayName="FrameworkContext";function cx(){let s=Z.useContext(Yd);return Xd(s,"You must render this element inside a <HydratedRouter> element"),s}function $b(s,r){let a=Z.useContext(Yd),[c,d]=Z.useState(!1),[g,x]=Z.useState(!1),{onFocus:b,onBlur:_,onMouseEnter:w,onMouseLeave:T,onTouchStart:S}=r,M=Z.useRef(null);Z.useEffect(()=>{if(s==="render"&&x(!0),s==="viewport"){let z=$=>{$.forEach(te=>{x(te.isIntersecting)})},H=new IntersectionObserver(z,{threshold:.5});return M.current&&H.observe(M.current),()=>{H.disconnect()}}},[s]),Z.useEffect(()=>{if(c){let z=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(z)}}},[c]);let B=()=>{d(!0)},U=()=>{d(!1),x(!1)};return a?s!=="intent"?[g,M,{}]:[g,M,{onFocus:Io(b,B),onBlur:Io(_,U),onMouseEnter:Io(w,B),onMouseLeave:Io(T,U),onTouchStart:Io(S,B)}]:[!1,M,{}]}function Io(s,r){return a=>{s&&s(a),a.defaultPrevented||r(a)}}function ev({page:s,...r}){let{router:a}=ox(),c=Z.useMemo(()=>Qa(a.routes,s,a.basename),[a.routes,s,a.basename]);return c?Z.createElement(nv,{page:s,matches:c,...r}):null}function tv(s){let{manifest:r,routeModules:a}=cx(),[c,d]=Z.useState([]);return Z.useEffect(()=>{let g=!1;return Yb(s,r,a).then(x=>{g||d(x)}),()=>{g=!0}},[s,r,a]),c}function nv({page:s,matches:r,...a}){let c=ns(),{manifest:d,routeModules:g}=cx(),{basename:x}=ox(),{loaderData:b,matches:_}=Jb(),w=Z.useMemo(()=>Gm(s,r,_,d,c,"data"),[s,r,_,d,c]),T=Z.useMemo(()=>Gm(s,r,_,d,c,"assets"),[s,r,_,d,c]),S=Z.useMemo(()=>{if(s===c.pathname+c.search+c.hash)return[];let U=new Set,z=!1;if(r.forEach($=>{let te=d.routes[$.route.id];!te||!te.hasLoader||(!w.some(G=>G.route.id===$.route.id)&&$.route.id in b&&g[$.route.id]?.shouldRevalidate||te.hasClientLoader?z=!0:U.add($.route.id))}),U.size===0)return[];let H=Gb(s,x,"data");return z&&U.size>0&&H.searchParams.set("_routes",r.filter($=>U.has($.route.id)).map($=>$.route.id).join(",")),[H.pathname+H.search]},[x,b,c,d,w,r,s,g]),M=Z.useMemo(()=>Wb(T,d),[T,d]),B=tv(T);return Z.createElement(Z.Fragment,null,S.map(U=>Z.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...a})),M.map(U=>Z.createElement("link",{key:U,rel:"modulepreload",href:U,...a})),B.map(({key:U,link:z})=>Z.createElement("link",{key:U,nonce:a.nonce,...z})))}function rv(...s){return r=>{s.forEach(a=>{typeof a=="function"?a(r):a!=null&&(a.current=r)})}}var ux=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ux&&(window.__reactRouterVersion="7.10.0")}catch{}function iv(s,r){return Fw({basename:r?.basename,getContext:r?.getContext,future:r?.future,history:ew({window:r?.window}),hydrationData:av(),routes:s,mapRouteProperties:Nb,hydrationRouteProperties:Ob,dataStrategy:r?.dataStrategy,patchRoutesOnNavigation:r?.patchRoutesOnNavigation,window:r?.window,unstable_instrumentations:r?.unstable_instrumentations}).initialize()}function av(){let s=window?.__staticRouterHydrationData;return s&&s.errors&&(s={...s,errors:sv(s.errors)}),s}function sv(s){if(!s)return null;let r=Object.entries(s),a={};for(let[c,d]of r)if(d&&d.__type==="RouteErrorResponse")a[c]=new Yu(d.status,d.statusText,d.data,d.internal===!0);else if(d&&d.__type==="Error"){if(d.__subType){let g=window[d.__subType];if(typeof g=="function")try{let x=new g(d.message);x.stack="",a[c]=x}catch{}}if(a[c]==null){let g=new Error(d.message);g.stack="",a[c]=g}}else a[c]=d;return a}var fx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ri=Z.forwardRef(function({onClick:r,discover:a="render",prefetch:c="none",relative:d,reloadDocument:g,replace:x,state:b,target:_,to:w,preventScrollReset:T,viewTransition:S,...M},B){let{basename:U,unstable_useTransitions:z}=Z.useContext(ai),H=typeof w=="string"&&fx.test(w),$,te=!1;if(typeof w=="string"&&H&&($=w,ux))try{let he=new URL(window.location.href),re=w.startsWith("//")?new URL(he.protocol+w):new URL(w),ue=ii(re.pathname,U);re.origin===he.origin&&ue!=null?w=ue+re.search+re.hash:te=!0}catch{Sn(!1,`<Link to="${w}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=ub(w,{relative:d}),[oe,xe,se]=$b(c,M),R=uv(w,{replace:x,state:b,target:_,preventScrollReset:T,relative:d,viewTransition:S,unstable_useTransitions:z});function W(he){r&&r(he),he.defaultPrevented||R(he)}let L=Z.createElement("a",{...M,...se,href:$||G,onClick:te||g?r:W,ref:rv(B,xe),target:_,"data-discover":!H&&a==="render"?"true":void 0});return oe&&!H?Z.createElement(Z.Fragment,null,L,Z.createElement(ev,{page:G})):L});Ri.displayName="Link";var lv=Z.forwardRef(function({"aria-current":r="page",caseSensitive:a=!1,className:c="",end:d=!1,style:g,to:x,viewTransition:b,children:_,...w},T){let S=Qo(x,{relative:w.relative}),M=ns(),B=Z.useContext(Zo),{navigator:U,basename:z}=Z.useContext(ai),H=B!=null&&mv(S)&&b===!0,$=U.encodeLocation?U.encodeLocation(S).pathname:S.pathname,te=M.pathname,G=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;a||(te=te.toLowerCase(),G=G?G.toLowerCase():null,$=$.toLowerCase()),G&&z&&(G=ii(G,z)||G);const oe=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let xe=te===$||!d&&te.startsWith($)&&te.charAt(oe)==="/",se=G!=null&&(G===$||!d&&G.startsWith($)&&G.charAt($.length)==="/"),R={isActive:xe,isPending:se,isTransitioning:H},W=xe?r:void 0,L;typeof c=="function"?L=c(R):L=[c,xe?"active":null,se?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let he=typeof g=="function"?g(R):g;return Z.createElement(Ri,{...w,"aria-current":W,className:L,ref:T,style:he,to:x,viewTransition:b},typeof _=="function"?_(R):_)});lv.displayName="NavLink";var ov=Z.forwardRef(({discover:s="render",fetcherKey:r,navigate:a,reloadDocument:c,replace:d,state:g,method:x=Ru,action:b,onSubmit:_,relative:w,preventScrollReset:T,viewTransition:S,...M},B)=>{let{unstable_useTransitions:U}=Z.useContext(ai),z=dv(),H=gv(b,{relative:w}),$=x.toLowerCase()==="get"?"get":"post",te=typeof b=="string"&&fx.test(b),G=oe=>{if(_&&_(oe),oe.defaultPrevented)return;oe.preventDefault();let xe=oe.nativeEvent.submitter,se=xe?.getAttribute("formmethod")||x,R=()=>z(xe||oe.currentTarget,{fetcherKey:r,method:se,navigate:a,replace:d,state:g,relative:w,preventScrollReset:T,viewTransition:S});U&&a!==!1?Z.startTransition(()=>R()):R()};return Z.createElement("form",{ref:B,method:$,action:H,onSubmit:c?_:G,...M,"data-discover":!te&&s==="render"?"true":void 0})});ov.displayName="Form";function cv(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hx(s){let r=Z.useContext(Bs);return Ct(r,cv(s)),r}function uv(s,{target:r,replace:a,state:c,preventScrollReset:d,relative:g,viewTransition:x,unstable_useTransitions:b}={}){let _=la(),w=ns(),T=Qo(s,{relative:g});return Z.useCallback(S=>{if(Fb(S,r)){S.preventDefault();let M=a!==void 0?a:Ii(w)===Ii(T),B=()=>_(s,{replace:M,state:c,preventScrollReset:d,relative:g,viewTransition:x});b?Z.startTransition(()=>B()):B()}},[w,_,T,a,c,r,s,d,g,x,b])}var fv=0,hv=()=>`__${String(++fv)}__`;function dv(){let{router:s}=hx("useSubmit"),{basename:r}=Z.useContext(ai),a=_b(),c=s.fetch,d=s.navigate;return Z.useCallback(async(g,x={})=>{let{action:b,method:_,encType:w,formData:T,body:S}=Vb(g,r);if(x.navigate===!1){let M=x.fetcherKey||hv();await c(M,a,x.action||b,{preventScrollReset:x.preventScrollReset,formData:T,body:S,formMethod:x.method||_,formEncType:x.encType||w,flushSync:x.flushSync})}else await d(x.action||b,{preventScrollReset:x.preventScrollReset,formData:T,body:S,formMethod:x.method||_,formEncType:x.encType||w,replace:x.replace,state:x.state,fromRouteId:a,flushSync:x.flushSync,viewTransition:x.viewTransition})},[c,d,r,a])}function gv(s,{relative:r}={}){let{basename:a}=Z.useContext(ai),c=Z.useContext(si);Ct(c,"useFormAction must be used inside a RouteContext");let[d]=c.matches.slice(-1),g={...Qo(s||".",{relative:r})},x=ns();if(s==null){g.search=x.search;let b=new URLSearchParams(g.search),_=b.getAll("index");if(_.some(T=>T==="")){b.delete("index"),_.filter(S=>S).forEach(S=>b.append("index",S));let T=b.toString();g.search=T?`?${T}`:""}}return(!s||s===".")&&d.route.index&&(g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(g.pathname=g.pathname==="/"?a:Oi([a,g.pathname])),Ii(g)}function mv(s,{relative:r}={}){let a=Z.useContext(Hd);Ct(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=hx("useViewTransitionState"),d=Qo(s,{relative:r});if(!a.isTransitioning)return!1;let g=ii(a.currentLocation.pathname,c)||a.currentLocation.pathname,x=ii(a.nextLocation.pathname,c)||a.nextLocation.pathname;return Du(d.pathname,x)!=null||Du(d.pathname,g)!=null}var xv=F2();function pv(s){return Z.createElement(Ib,{flushSync:xv.flushSync,...s})}var _d=function(s,r){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])},_d(s,r)};function dx(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");_d(s,r);function a(){this.constructor=s}s.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}var Bu=function(){return Bu=Object.assign||function(r){for(var a,c=1,d=arguments.length;c<d;c++){a=arguments[c];for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(r[g]=a[g])}return r},Bu.apply(this,arguments)};function Bl(s,r){var a={};for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&r.indexOf(c)<0&&(a[c]=s[c]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(s);d<c.length;d++)r.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(s,c[d])&&(a[c[d]]=s[c[d]]);return a}function gx(s,r,a,c){var d=arguments.length,g=d<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,a):c,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(s,r,a,c);else for(var b=s.length-1;b>=0;b--)(x=s[b])&&(g=(d<3?x(g):d>3?x(r,a,g):x(r,a))||g);return d>3&&g&&Object.defineProperty(r,a,g),g}function mx(s,r){return function(a,c){r(a,c,s)}}function xx(s,r,a,c,d,g){function x($){if($!==void 0&&typeof $!="function")throw new TypeError("Function expected");return $}for(var b=c.kind,_=b==="getter"?"get":b==="setter"?"set":"value",w=!r&&s?c.static?s:s.prototype:null,T=r||(w?Object.getOwnPropertyDescriptor(w,c.name):{}),S,M=!1,B=a.length-1;B>=0;B--){var U={};for(var z in c)U[z]=z==="access"?{}:c[z];for(var z in c.access)U.access[z]=c.access[z];U.addInitializer=function($){if(M)throw new TypeError("Cannot add initializers after decoration has completed");g.push(x($||null))};var H=(0,a[B])(b==="accessor"?{get:T.get,set:T.set}:T[_],U);if(b==="accessor"){if(H===void 0)continue;if(H===null||typeof H!="object")throw new TypeError("Object expected");(S=x(H.get))&&(T.get=S),(S=x(H.set))&&(T.set=S),(S=x(H.init))&&d.unshift(S)}else(S=x(H))&&(b==="field"?d.unshift(S):T[_]=S)}w&&Object.defineProperty(w,c.name,T),M=!0}function px(s,r,a){for(var c=arguments.length>2,d=0;d<r.length;d++)a=c?r[d].call(s,a):r[d].call(s);return c?a:void 0}function yx(s){return typeof s=="symbol"?s:"".concat(s)}function wx(s,r,a){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:a?"".concat(a," ",r):r})}function bx(s,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(s,r)}function We(s,r,a,c){function d(g){return g instanceof a?g:new a(function(x){x(g)})}return new(a||(a=Promise))(function(g,x){function b(T){try{w(c.next(T))}catch(S){x(S)}}function _(T){try{w(c.throw(T))}catch(S){x(S)}}function w(T){T.done?g(T.value):d(T.value).then(b,_)}w((c=c.apply(s,r||[])).next())})}function vx(s,r){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,d,g,x=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return x.next=b(0),x.throw=b(1),x.return=b(2),typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(T){return _([w,T])}}function _(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,d&&(g=w[0]&2?d.return:w[0]?d.throw||((g=d.return)&&g.call(d),0):d.next)&&!(g=g.call(d,w[1])).done)return g;switch(d=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,d=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){a.label=w[1];break}if(w[0]===6&&a.label<g[1]){a.label=g[1],g=w;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(w);break}g[2]&&a.ops.pop(),a.trys.pop();continue}w=r.call(s,a)}catch(T){w=[6,T],d=0}finally{c=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}var Zu=Object.create?(function(s,r,a,c){c===void 0&&(c=a);var d=Object.getOwnPropertyDescriptor(r,a);(!d||("get"in d?!r.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return r[a]}}),Object.defineProperty(s,c,d)}):(function(s,r,a,c){c===void 0&&(c=a),s[c]=r[a]});function Ex(s,r){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(r,a)&&Zu(r,s,a)}function ju(s){var r=typeof Symbol=="function"&&Symbol.iterator,a=r&&s[r],c=0;if(a)return a.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wd(s,r){var a=typeof Symbol=="function"&&s[Symbol.iterator];if(!a)return s;var c=a.call(s),d,g=[],x;try{for(;(r===void 0||r-- >0)&&!(d=c.next()).done;)g.push(d.value)}catch(b){x={error:b}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(x)throw x.error}}return g}function _x(){for(var s=[],r=0;r<arguments.length;r++)s=s.concat(Wd(arguments[r]));return s}function Ax(){for(var s=0,r=0,a=arguments.length;r<a;r++)s+=arguments[r].length;for(var c=Array(s),d=0,r=0;r<a;r++)for(var g=arguments[r],x=0,b=g.length;x<b;x++,d++)c[d]=g[x];return c}function Cx(s,r,a){if(a||arguments.length===2)for(var c=0,d=r.length,g;c<d;c++)(g||!(c in r))&&(g||(g=Array.prototype.slice.call(r,0,c)),g[c]=r[c]);return s.concat(g||Array.prototype.slice.call(r))}function Dl(s){return this instanceof Dl?(this.v=s,this):new Dl(s)}function Sx(s,r,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=a.apply(s,r||[]),d,g=[];return d=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),b("next"),b("throw"),b("return",x),d[Symbol.asyncIterator]=function(){return this},d;function x(B){return function(U){return Promise.resolve(U).then(B,S)}}function b(B,U){c[B]&&(d[B]=function(z){return new Promise(function(H,$){g.push([B,z,H,$])>1||_(B,z)})},U&&(d[B]=U(d[B])))}function _(B,U){try{w(c[B](U))}catch(z){M(g[0][3],z)}}function w(B){B.value instanceof Dl?Promise.resolve(B.value.v).then(T,S):M(g[0][2],B)}function T(B){_("next",B)}function S(B){_("throw",B)}function M(B,U){B(U),g.shift(),g.length&&_(g[0][0],g[0][1])}}function Tx(s){var r,a;return r={},c("next"),c("throw",function(d){throw d}),c("return"),r[Symbol.iterator]=function(){return this},r;function c(d,g){r[d]=s[d]?function(x){return(a=!a)?{value:Dl(s[d](x)),done:!1}:g?g(x):x}:g}}function Nx(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s[Symbol.asyncIterator],a;return r?r.call(s):(s=typeof ju=="function"?ju(s):s[Symbol.iterator](),a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a);function c(g){a[g]=s[g]&&function(x){return new Promise(function(b,_){x=s[g](x),d(b,_,x.done,x.value)})}}function d(g,x,b,_){Promise.resolve(_).then(function(w){g({value:w,done:b})},x)}}function Ox(s,r){return Object.defineProperty?Object.defineProperty(s,"raw",{value:r}):s.raw=r,s}var yv=Object.create?(function(s,r){Object.defineProperty(s,"default",{enumerable:!0,value:r})}):function(s,r){s.default=r},Ad=function(s){return Ad=Object.getOwnPropertyNames||function(r){var a=[];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(a[a.length]=c);return a},Ad(s)};function Rx(s){if(s&&s.__esModule)return s;var r={};if(s!=null)for(var a=Ad(s),c=0;c<a.length;c++)a[c]!=="default"&&Zu(r,s,a[c]);return yv(r,s),r}function Ix(s){return s&&s.__esModule?s:{default:s}}function Dx(s,r,a,c){if(a==="a"&&!c)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?s!==r||!c:!r.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?c:a==="a"?c.call(s):c?c.value:r.get(s)}function Mx(s,r,a,c,d){if(c==="m")throw new TypeError("Private method is not writable");if(c==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?s!==r||!d:!r.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return c==="a"?d.call(s,a):d?d.value=a:r.set(s,a),a}function Bx(s,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof s=="function"?r===s:s.has(r)}function jx(s,r,a){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var c,d;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");c=r[Symbol.asyncDispose]}if(c===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");c=r[Symbol.dispose],a&&(d=c)}if(typeof c!="function")throw new TypeError("Object not disposable.");d&&(c=function(){try{d.call(this)}catch(g){return Promise.reject(g)}}),s.stack.push({value:r,dispose:c,async:a})}else a&&s.stack.push({async:!0});return r}var wv=typeof SuppressedError=="function"?SuppressedError:function(s,r,a){var c=new Error(a);return c.name="SuppressedError",c.error=s,c.suppressed=r,c};function kx(s){function r(g){s.error=s.hasError?new wv(g,s.error,"An error was suppressed during disposal."):g,s.hasError=!0}var a,c=0;function d(){for(;a=s.stack.pop();)try{if(!a.async&&c===1)return c=0,s.stack.push(a),Promise.resolve().then(d);if(a.dispose){var g=a.dispose.call(a.value);if(a.async)return c|=2,Promise.resolve(g).then(d,function(x){return r(x),d()})}else c|=1}catch(x){r(x)}if(c===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return d()}function Lx(s,r){return typeof s=="string"&&/^\.\.?\//.test(s)?s.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,c,d,g,x){return c?r?".jsx":".js":d&&(!g||!x)?a:d+g+"."+x.toLowerCase()+"js"}):s}const bv={__extends:dx,__assign:Bu,__rest:Bl,__decorate:gx,__param:mx,__esDecorate:xx,__runInitializers:px,__propKey:yx,__setFunctionName:wx,__metadata:bx,__awaiter:We,__generator:vx,__createBinding:Zu,__exportStar:Ex,__values:ju,__read:Wd,__spread:_x,__spreadArrays:Ax,__spreadArray:Cx,__await:Dl,__asyncGenerator:Sx,__asyncDelegator:Tx,__asyncValues:Nx,__makeTemplateObject:Ox,__importStar:Rx,__importDefault:Ix,__classPrivateFieldGet:Dx,__classPrivateFieldSet:Mx,__classPrivateFieldIn:Bx,__addDisposableResource:jx,__disposeResources:kx,__rewriteRelativeImportExtension:Lx},vv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:jx,get __assign(){return Bu},__asyncDelegator:Tx,__asyncGenerator:Sx,__asyncValues:Nx,__await:Dl,__awaiter:We,__classPrivateFieldGet:Dx,__classPrivateFieldIn:Bx,__classPrivateFieldSet:Mx,__createBinding:Zu,__decorate:gx,__disposeResources:kx,__esDecorate:xx,__exportStar:Ex,__extends:dx,__generator:vx,__importDefault:Ix,__importStar:Rx,__makeTemplateObject:Ox,__metadata:bx,__param:mx,__propKey:yx,__read:Wd,__rest:Bl,__rewriteRelativeImportExtension:Lx,__runInitializers:px,__setFunctionName:wx,__spread:_x,__spreadArray:Cx,__spreadArrays:Ax,__values:ju,default:bv},Symbol.toStringTag,{value:"Module"})),Ev=s=>s?(...r)=>s(...r):(...r)=>fetch(...r);class Kd extends Error{constructor(r,a="FunctionsError",c){super(r),this.name=a,this.context=c}}class _v extends Kd{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class qm extends Kd{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Xm extends Kd{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Cd;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Cd||(Cd={}));class Av{constructor(r,{headers:a={},customFetch:c,region:d=Cd.Any}={}){this.url=r,this.headers=a,this.region=d,this.fetch=Ev(c)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return We(this,arguments,void 0,function*(a,c={}){var d;let g,x;try{const{headers:b,method:_,body:w,signal:T,timeout:S}=c;let M={},{region:B}=c;B||(B=this.region);const U=new URL(`${this.url}/${a}`);B&&B!=="any"&&(M["x-region"]=B,U.searchParams.set("forceFunctionRegion",B));let z;w&&(b&&!Object.prototype.hasOwnProperty.call(b,"Content-Type")||!b)?typeof Blob<"u"&&w instanceof Blob||w instanceof ArrayBuffer?(M["Content-Type"]="application/octet-stream",z=w):typeof w=="string"?(M["Content-Type"]="text/plain",z=w):typeof FormData<"u"&&w instanceof FormData?z=w:(M["Content-Type"]="application/json",z=JSON.stringify(w)):z=w;let H=T;S&&(x=new AbortController,g=setTimeout(()=>x.abort(),S),T?(H=x.signal,T.addEventListener("abort",()=>x.abort())):H=x.signal);const $=yield this.fetch(U.toString(),{method:_||"POST",headers:Object.assign(Object.assign(Object.assign({},M),this.headers),b),body:z,signal:H}).catch(xe=>{throw new _v(xe)}),te=$.headers.get("x-relay-error");if(te&&te==="true")throw new qm($);if(!$.ok)throw new Xm($);let G=((d=$.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),oe;return G==="application/json"?oe=yield $.json():G==="application/octet-stream"||G==="application/pdf"?oe=yield $.blob():G==="text/event-stream"?oe=$:G==="multipart/form-data"?oe=yield $.formData():oe=yield $.text(),{data:oe,error:null,response:$}}catch(b){return{data:null,error:b,response:b instanceof Xm||b instanceof qm?b.context:void 0}}finally{g&&clearTimeout(g)}})}}var cr={};const jl=Fy(vv);var pu={},yu={},wu={},bu={},vu={},Eu={},Ym;function Px(){if(Ym)return Eu;Ym=1,Object.defineProperty(Eu,"__esModule",{value:!0});class s extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return Eu.default=s,Eu}var Wm;function Ux(){if(Wm)return vu;Wm=1,Object.defineProperty(vu,"__esModule",{value:!0});const r=jl.__importDefault(Px());class a{constructor(d){var g,x;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(g=d.shouldThrowOnError)!==null&&g!==void 0?g:!1,this.signal=d.signal,this.isMaybeSingle=(x=d.isMaybeSingle)!==null&&x!==void 0?x:!1,d.fetch?this.fetch=d.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,g){return this.headers=new Headers(this.headers),this.headers.set(d,g),this}then(d,g){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const x=this.fetch;let b=x(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async _=>{var w,T,S,M;let B=null,U=null,z=null,H=_.status,$=_.statusText;if(_.ok){if(this.method!=="HEAD"){const xe=await _.text();xe===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((w=this.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?U=xe:U=JSON.parse(xe))}const G=(T=this.headers.get("Prefer"))===null||T===void 0?void 0:T.match(/count=(exact|planned|estimated)/),oe=(S=_.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");G&&oe&&oe.length>1&&(z=parseInt(oe[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(U)&&(U.length>1?(B={code:"PGRST116",details:`Results contain ${U.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},U=null,z=null,H=406,$="Not Acceptable"):U.length===1?U=U[0]:U=null)}else{const G=await _.text();try{B=JSON.parse(G),Array.isArray(B)&&_.status===404&&(U=[],B=null,H=200,$="OK")}catch{_.status===404&&G===""?(H=204,$="No Content"):B={message:G}}if(B&&this.isMaybeSingle&&(!((M=B?.details)===null||M===void 0)&&M.includes("0 rows"))&&(B=null,H=200,$="OK"),B&&this.shouldThrowOnError)throw new r.default(B)}return{error:B,data:U,count:z,status:H,statusText:$}});return this.shouldThrowOnError||(b=b.catch(_=>{var w,T,S,M,B,U;let z="";const H=_?.cause;if(H){const $=(w=H?.message)!==null&&w!==void 0?w:"",te=(T=H?.code)!==null&&T!==void 0?T:"";z=`${(S=_?.name)!==null&&S!==void 0?S:"FetchError"}: ${_?.message}`,z+=`

Caused by: ${(M=H?.name)!==null&&M!==void 0?M:"Error"}: ${$}`,te&&(z+=` (${te})`),H?.stack&&(z+=`
${H.stack}`)}else z=(B=_?.stack)!==null&&B!==void 0?B:"";return{error:{message:`${(U=_?.name)!==null&&U!==void 0?U:"FetchError"}: ${_?.message}`,details:z,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),b.then(d,g)}returns(){return this}overrideTypes(){return this}}return vu.default=a,vu}var Km;function Fx(){if(Km)return bu;Km=1,Object.defineProperty(bu,"__esModule",{value:!0});const r=jl.__importDefault(Ux());class a extends r.default{select(d){let g=!1;const x=(d??"*").split("").map(b=>/\s/.test(b)&&!g?"":(b==='"'&&(g=!g),b)).join("");return this.url.searchParams.set("select",x),this.headers.append("Prefer","return=representation"),this}order(d,{ascending:g=!0,nullsFirst:x,foreignTable:b,referencedTable:_=b}={}){const w=_?`${_}.order`:"order",T=this.url.searchParams.get(w);return this.url.searchParams.set(w,`${T?`${T},`:""}${d}.${g?"asc":"desc"}${x===void 0?"":x?".nullsfirst":".nullslast"}`),this}limit(d,{foreignTable:g,referencedTable:x=g}={}){const b=typeof x>"u"?"limit":`${x}.limit`;return this.url.searchParams.set(b,`${d}`),this}range(d,g,{foreignTable:x,referencedTable:b=x}={}){const _=typeof b>"u"?"offset":`${b}.offset`,w=typeof b>"u"?"limit":`${b}.limit`;return this.url.searchParams.set(_,`${d}`),this.url.searchParams.set(w,`${g-d+1}`),this}abortSignal(d){return this.signal=d,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:d=!1,verbose:g=!1,settings:x=!1,buffers:b=!1,wal:_=!1,format:w="text"}={}){var T;const S=[d?"analyze":null,g?"verbose":null,x?"settings":null,b?"buffers":null,_?"wal":null].filter(Boolean).join("|"),M=(T=this.headers.get("Accept"))!==null&&T!==void 0?T:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${w}; for="${M}"; options=${S};`),w==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(d){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${d}`),this}}return bu.default=a,bu}var Zm;function Zd(){if(Zm)return wu;Zm=1,Object.defineProperty(wu,"__esModule",{value:!0});const r=jl.__importDefault(Fx()),a=new RegExp("[,()]");class c extends r.default{eq(g,x){return this.url.searchParams.append(g,`eq.${x}`),this}neq(g,x){return this.url.searchParams.append(g,`neq.${x}`),this}gt(g,x){return this.url.searchParams.append(g,`gt.${x}`),this}gte(g,x){return this.url.searchParams.append(g,`gte.${x}`),this}lt(g,x){return this.url.searchParams.append(g,`lt.${x}`),this}lte(g,x){return this.url.searchParams.append(g,`lte.${x}`),this}like(g,x){return this.url.searchParams.append(g,`like.${x}`),this}likeAllOf(g,x){return this.url.searchParams.append(g,`like(all).{${x.join(",")}}`),this}likeAnyOf(g,x){return this.url.searchParams.append(g,`like(any).{${x.join(",")}}`),this}ilike(g,x){return this.url.searchParams.append(g,`ilike.${x}`),this}ilikeAllOf(g,x){return this.url.searchParams.append(g,`ilike(all).{${x.join(",")}}`),this}ilikeAnyOf(g,x){return this.url.searchParams.append(g,`ilike(any).{${x.join(",")}}`),this}regexMatch(g,x){return this.url.searchParams.append(g,`match.${x}`),this}regexIMatch(g,x){return this.url.searchParams.append(g,`imatch.${x}`),this}is(g,x){return this.url.searchParams.append(g,`is.${x}`),this}isDistinct(g,x){return this.url.searchParams.append(g,`isdistinct.${x}`),this}in(g,x){const b=Array.from(new Set(x)).map(_=>typeof _=="string"&&a.test(_)?`"${_}"`:`${_}`).join(",");return this.url.searchParams.append(g,`in.(${b})`),this}contains(g,x){return typeof x=="string"?this.url.searchParams.append(g,`cs.${x}`):Array.isArray(x)?this.url.searchParams.append(g,`cs.{${x.join(",")}}`):this.url.searchParams.append(g,`cs.${JSON.stringify(x)}`),this}containedBy(g,x){return typeof x=="string"?this.url.searchParams.append(g,`cd.${x}`):Array.isArray(x)?this.url.searchParams.append(g,`cd.{${x.join(",")}}`):this.url.searchParams.append(g,`cd.${JSON.stringify(x)}`),this}rangeGt(g,x){return this.url.searchParams.append(g,`sr.${x}`),this}rangeGte(g,x){return this.url.searchParams.append(g,`nxl.${x}`),this}rangeLt(g,x){return this.url.searchParams.append(g,`sl.${x}`),this}rangeLte(g,x){return this.url.searchParams.append(g,`nxr.${x}`),this}rangeAdjacent(g,x){return this.url.searchParams.append(g,`adj.${x}`),this}overlaps(g,x){return typeof x=="string"?this.url.searchParams.append(g,`ov.${x}`):this.url.searchParams.append(g,`ov.{${x.join(",")}}`),this}textSearch(g,x,{config:b,type:_}={}){let w="";_==="plain"?w="pl":_==="phrase"?w="ph":_==="websearch"&&(w="w");const T=b===void 0?"":`(${b})`;return this.url.searchParams.append(g,`${w}fts${T}.${x}`),this}match(g){return Object.entries(g).forEach(([x,b])=>{this.url.searchParams.append(x,`eq.${b}`)}),this}not(g,x,b){return this.url.searchParams.append(g,`not.${x}.${b}`),this}or(g,{foreignTable:x,referencedTable:b=x}={}){const _=b?`${b}.or`:"or";return this.url.searchParams.append(_,`(${g})`),this}filter(g,x,b){return this.url.searchParams.append(g,`${x}.${b}`),this}}return wu.default=c,wu}var Qm;function zx(){if(Qm)return yu;Qm=1,Object.defineProperty(yu,"__esModule",{value:!0});const r=jl.__importDefault(Zd());class a{constructor(d,{headers:g={},schema:x,fetch:b}){this.url=d,this.headers=new Headers(g),this.schema=x,this.fetch=b}select(d,g){const{head:x=!1,count:b}=g??{},_=x?"HEAD":"GET";let w=!1;const T=(d??"*").split("").map(S=>/\s/.test(S)&&!w?"":(S==='"'&&(w=!w),S)).join("");return this.url.searchParams.set("select",T),b&&this.headers.append("Prefer",`count=${b}`),new r.default({method:_,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(d,{count:g,defaultToNull:x=!0}={}){var b;const _="POST";if(g&&this.headers.append("Prefer",`count=${g}`),x||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const w=d.reduce((T,S)=>T.concat(Object.keys(S)),[]);if(w.length>0){const T=[...new Set(w)].map(S=>`"${S}"`);this.url.searchParams.set("columns",T.join(","))}}return new r.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}upsert(d,{onConflict:g,ignoreDuplicates:x=!1,count:b,defaultToNull:_=!0}={}){var w;const T="POST";if(this.headers.append("Prefer",`resolution=${x?"ignore":"merge"}-duplicates`),g!==void 0&&this.url.searchParams.set("on_conflict",g),b&&this.headers.append("Prefer",`count=${b}`),_||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const S=d.reduce((M,B)=>M.concat(Object.keys(B)),[]);if(S.length>0){const M=[...new Set(S)].map(B=>`"${B}"`);this.url.searchParams.set("columns",M.join(","))}}return new r.default({method:T,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}update(d,{count:g}={}){var x;const b="PATCH";return g&&this.headers.append("Prefer",`count=${g}`),new r.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}delete({count:d}={}){var g;const x="DELETE";return d&&this.headers.append("Prefer",`count=${d}`),new r.default({method:x,url:this.url,headers:this.headers,schema:this.schema,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return yu.default=a,yu}var Jm;function Cv(){if(Jm)return pu;Jm=1,Object.defineProperty(pu,"__esModule",{value:!0});const s=jl,r=s.__importDefault(zx()),a=s.__importDefault(Zd());class c{constructor(g,{headers:x={},schema:b,fetch:_}={}){this.url=g,this.headers=new Headers(x),this.schemaName=b,this.fetch=_}from(g){if(!g||typeof g!="string"||g.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const x=new URL(`${this.url}/${g}`);return new r.default(x,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(g){return new c(this.url,{headers:this.headers,schema:g,fetch:this.fetch})}rpc(g,x={},{head:b=!1,get:_=!1,count:w}={}){var T;let S;const M=new URL(`${this.url}/rpc/${g}`);let B;b||_?(S=b?"HEAD":"GET",Object.entries(x).filter(([z,H])=>H!==void 0).map(([z,H])=>[z,Array.isArray(H)?`{${H.join(",")}}`:`${H}`]).forEach(([z,H])=>{M.searchParams.append(z,H)})):(S="POST",B=x);const U=new Headers(this.headers);return w&&U.set("Prefer",`count=${w}`),new a.default({method:S,url:M,headers:U,schema:this.schemaName,body:B,fetch:(T=this.fetch)!==null&&T!==void 0?T:fetch})}}return pu.default=c,pu}var $m;function Sv(){if($m)return cr;$m=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.PostgrestError=cr.PostgrestBuilder=cr.PostgrestTransformBuilder=cr.PostgrestFilterBuilder=cr.PostgrestQueryBuilder=cr.PostgrestClient=void 0;const s=jl,r=s.__importDefault(Cv());cr.PostgrestClient=r.default;const a=s.__importDefault(zx());cr.PostgrestQueryBuilder=a.default;const c=s.__importDefault(Zd());cr.PostgrestFilterBuilder=c.default;const d=s.__importDefault(Fx());cr.PostgrestTransformBuilder=d.default;const g=s.__importDefault(Ux());cr.PostgrestBuilder=g.default;const x=s.__importDefault(Px());return cr.PostgrestError=x.default,cr.default={PostgrestClient:r.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:c.default,PostgrestTransformBuilder:d.default,PostgrestBuilder:g.default,PostgrestError:x.default},cr}var Hx=Sv();const Vx=Vu(Hx),Tv=Pd({__proto__:null,default:Vx},[Hx]),{PostgrestClient:Nv,PostgrestQueryBuilder:W_,PostgrestFilterBuilder:K_,PostgrestTransformBuilder:Z_,PostgrestBuilder:Q_,PostgrestError:J_}=Vx||Tv;class Ov{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const c=a.node,d=parseInt(c.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let a=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(a+=`

Suggested solution: ${r.workaround}`),new Error(a)}static createWebSocket(r,a){const c=this.getWebSocketConstructor();return new c(r,a)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Rv="2.86.0",Iv=`realtime-js/${Rv}`,Gx="1.0.0",Dv="2.0.0",e2=Gx,Sd=1e4,Mv=1e3,Bv=100;var Os;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Os||(Os={}));var Yn;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Yn||(Yn={}));var pi;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(pi||(pi={}));var Td;(function(s){s.websocket="websocket"})(Td||(Td={}));var Rs;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Rs||(Rs={}));class jv{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,a){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(r));let c=[r.join_ref,r.ref,r.topic,r.event,r.payload];return a(JSON.stringify(c))}_binaryEncodeUserBroadcastPush(r){var a;return this._isArrayBuffer((a=r.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var a,c;const d=(c=(a=r.payload)===null||a===void 0?void 0:a.payload)!==null&&c!==void 0?c:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(r){var a,c;const d=(c=(a=r.payload)===null||a===void 0?void 0:a.payload)!==null&&c!==void 0?c:{},x=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,x)}_encodeUserBroadcastPush(r,a,c){var d,g;const x=r.topic,b=(d=r.ref)!==null&&d!==void 0?d:"",_=(g=r.join_ref)!==null&&g!==void 0?g:"",w=r.payload.event,T=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},S=Object.keys(T).length===0?"":JSON.stringify(T);if(_.length>255)throw new Error(`joinRef length ${_.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`ref length ${b.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`topic length ${x.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`userEvent length ${w.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`metadata length ${S.length} exceeds maximum of 255`);const M=this.USER_BROADCAST_PUSH_META_LENGTH+_.length+b.length+x.length+w.length+S.length,B=new ArrayBuffer(this.HEADER_LENGTH+M);let U=new DataView(B),z=0;U.setUint8(z++,this.KINDS.userBroadcastPush),U.setUint8(z++,_.length),U.setUint8(z++,b.length),U.setUint8(z++,x.length),U.setUint8(z++,w.length),U.setUint8(z++,S.length),U.setUint8(z++,a),Array.from(_,$=>U.setUint8(z++,$.charCodeAt(0))),Array.from(b,$=>U.setUint8(z++,$.charCodeAt(0))),Array.from(x,$=>U.setUint8(z++,$.charCodeAt(0))),Array.from(w,$=>U.setUint8(z++,$.charCodeAt(0))),Array.from(S,$=>U.setUint8(z++,$.charCodeAt(0)));var H=new Uint8Array(B.byteLength+c.byteLength);return H.set(new Uint8Array(B),0),H.set(new Uint8Array(c),B.byteLength),H.buffer}decode(r,a){if(this._isArrayBuffer(r)){let c=this._binaryDecode(r);return a(c)}if(typeof r=="string"){const c=JSON.parse(r),[d,g,x,b,_]=c;return a({join_ref:d,ref:g,topic:x,event:b,payload:_})}return a({})}_binaryDecode(r){const a=new DataView(r),c=a.getUint8(0),d=new TextDecoder;switch(c){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,a,d)}}_decodeUserBroadcast(r,a,c){const d=a.getUint8(1),g=a.getUint8(2),x=a.getUint8(3),b=a.getUint8(4);let _=this.HEADER_LENGTH+4;const w=c.decode(r.slice(_,_+d));_=_+d;const T=c.decode(r.slice(_,_+g));_=_+g;const S=c.decode(r.slice(_,_+x));_=_+x;const M=r.slice(_,r.byteLength),B=b===this.JSON_ENCODING?JSON.parse(c.decode(M)):M,U={type:this.BROADCAST_EVENT,event:T,payload:B};return x>0&&(U.meta=JSON.parse(S)),{join_ref:null,ref:null,topic:w,event:this.BROADCAST_EVENT,payload:U}}_isArrayBuffer(r){var a;return r instanceof ArrayBuffer||((a=r?.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(r,a){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([c])=>a.includes(c)))}}class qx{constructor(r,a){this.callback=r,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var cn;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(cn||(cn={}));const t2=(s,r,a={})=>{var c;const d=(c=a.skipTypes)!==null&&c!==void 0?c:[];return r?Object.keys(r).reduce((g,x)=>(g[x]=kv(x,s,r,d),g),{}):{}},kv=(s,r,a,c)=>{const d=r.find(b=>b.name===s),g=d?.type,x=a[s];return g&&!c.includes(g)?Xx(g,x):Nd(x)},Xx=(s,r)=>{if(s.charAt(0)==="_"){const a=s.slice(1,s.length);return Fv(r,a)}switch(s){case cn.bool:return Lv(r);case cn.float4:case cn.float8:case cn.int2:case cn.int4:case cn.int8:case cn.numeric:case cn.oid:return Pv(r);case cn.json:case cn.jsonb:return Uv(r);case cn.timestamp:return zv(r);case cn.abstime:case cn.date:case cn.daterange:case cn.int4range:case cn.int8range:case cn.money:case cn.reltime:case cn.text:case cn.time:case cn.timestamptz:case cn.timetz:case cn.tsrange:case cn.tstzrange:return Nd(r);default:return Nd(r)}},Nd=s=>s,Lv=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Pv=s=>{if(typeof s=="string"){const r=parseFloat(s);if(!Number.isNaN(r))return r}return s},Uv=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(r){return console.log(`JSON parse error: ${r}`),s}return s},Fv=(s,r)=>{if(typeof s!="string")return s;const a=s.length-1,c=s[a];if(s[0]==="{"&&c==="}"){let g;const x=s.slice(1,a);try{g=JSON.parse("["+x+"]")}catch{g=x?x.split(","):[]}return g.map(b=>Xx(r,b))}return s},zv=s=>typeof s=="string"?s.replace(" ","T"):s,Yx=s=>{const r=new URL(s);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class rd{constructor(r,a,c={},d=Sd){this.channel=r,this.event=a,this.payload=c,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,a){var c;return this._hasReceived(r)&&a((c=this.receivedResp)===null||c===void 0?void 0:c.response),this.recHooks.push({status:r,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:a}){this.recHooks.filter(c=>c.status===r).forEach(c=>c.callback(a))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var n2;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(n2||(n2={}));class Po{constructor(r,a){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},d=>{const{onJoin:g,onLeave:x,onSync:b}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Po.syncState(this.state,d,g,x),this.pendingDiffs.forEach(_=>{this.state=Po.syncDiff(this.state,_,g,x)}),this.pendingDiffs=[],b()}),this.channel._on(c.diff,{},d=>{const{onJoin:g,onLeave:x,onSync:b}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=Po.syncDiff(this.state,d,g,x),b())}),this.onJoin((d,g,x)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:g,newPresences:x})}),this.onLeave((d,g,x)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:g,leftPresences:x})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,a,c,d){const g=this.cloneDeep(r),x=this.transformState(a),b={},_={};return this.map(g,(w,T)=>{x[w]||(_[w]=T)}),this.map(x,(w,T)=>{const S=g[w];if(S){const M=T.map(H=>H.presence_ref),B=S.map(H=>H.presence_ref),U=T.filter(H=>B.indexOf(H.presence_ref)<0),z=S.filter(H=>M.indexOf(H.presence_ref)<0);U.length>0&&(b[w]=U),z.length>0&&(_[w]=z)}else b[w]=T}),this.syncDiff(g,{joins:b,leaves:_},c,d)}static syncDiff(r,a,c,d){const{joins:g,leaves:x}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return c||(c=()=>{}),d||(d=()=>{}),this.map(g,(b,_)=>{var w;const T=(w=r[b])!==null&&w!==void 0?w:[];if(r[b]=this.cloneDeep(_),T.length>0){const S=r[b].map(B=>B.presence_ref),M=T.filter(B=>S.indexOf(B.presence_ref)<0);r[b].unshift(...M)}c(b,T,_)}),this.map(x,(b,_)=>{let w=r[b];if(!w)return;const T=_.map(S=>S.presence_ref);w=w.filter(S=>T.indexOf(S.presence_ref)<0),r[b]=w,d(b,w,_),w.length===0&&delete r[b]}),r}static map(r,a){return Object.getOwnPropertyNames(r).map(c=>a(c,r[c]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((a,c)=>{const d=r[c];return"metas"in d?a[c]=d.metas.map(g=>(g.presence_ref=g.phx_ref,delete g.phx_ref,delete g.phx_ref_prev,g)):a[c]=d,a},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var r2;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(r2||(r2={}));var Uo;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Uo||(Uo={}));var aa;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(aa||(aa={}));class Qd{constructor(r,a={config:{}},c){var d,g;if(this.topic=r,this.params=a,this.socket=c,this.bindings={},this.state=Yn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new rd(this,pi.join,this.params,this.timeout),this.rejoinTimer=new qx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Yn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(x=>x.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Yn.closed,this.socket._remove(this)}),this._onError(x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=Yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=Yn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pi.reply,{},(x,b)=>{this._trigger(this._replyEventName(b),x)}),this.presence=new Po(this),this.broadcastEndpointURL=Yx(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((g=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||g===void 0)&&g.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,a=this.timeout){var c,d,g;if(this.socket.isConnected()||this.socket.connect(),this.state==Yn.closed){const{config:{broadcast:x,presence:b,private:_}}=this.params,w=(d=(c=this.bindings.postgres_changes)===null||c===void 0?void 0:c.map(B=>B.filter))!==null&&d!==void 0?d:[],T=!!this.bindings[Uo.PRESENCE]&&this.bindings[Uo.PRESENCE].length>0||((g=this.params.config.presence)===null||g===void 0?void 0:g.enabled)===!0,S={},M={broadcast:x,presence:Object.assign(Object.assign({},b),{enabled:T}),postgres_changes:w,private:_};this.socket.accessTokenValue&&(S.access_token=this.socket.accessTokenValue),this._onError(B=>r?.(aa.CHANNEL_ERROR,B)),this._onClose(()=>r?.(aa.CLOSED)),this.updateJoinPayload(Object.assign({config:M},S)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:B})=>{var U;if(this.socket.setAuth(),B===void 0){r?.(aa.SUBSCRIBED);return}else{const z=this.bindings.postgres_changes,H=(U=z?.length)!==null&&U!==void 0?U:0,$=[];for(let te=0;te<H;te++){const G=z[te],{filter:{event:oe,schema:xe,table:se,filter:R}}=G,W=B&&B[te];if(W&&W.event===oe&&W.schema===xe&&W.table===se&&W.filter===R)$.push(Object.assign(Object.assign({},G),{id:W.id}));else{this.unsubscribe(),this.state=Yn.errored,r?.(aa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,r&&r(aa.SUBSCRIBED);return}}).receive("error",B=>{this.state=Yn.errored,r?.(aa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(B).join(", ")||"error")))}).receive("timeout",()=>{r?.(aa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,a={}){return await this.send({type:"presence",event:"track",payload:r},a.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,a,c){return this.state===Yn.joined&&r===Uo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,a,c)}async httpSend(r,a,c={}){var d;const g=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(a==null)return Promise.reject("Payload is required for httpSend()");const x={method:"POST",headers:{Authorization:g,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:a,private:this.private}]})},b=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(d=c.timeout)!==null&&d!==void 0?d:this.timeout);if(b.status===202)return{success:!0};let _=b.statusText;try{const w=await b.json();_=w.error||w.message||_}catch{}return Promise.reject(new Error(_))}async send(r,a={}){var c,d;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:g,payload:x}=r,_={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:g,payload:x,private:this.private}]})};try{const w=await this._fetchWithTimeout(this.broadcastEndpointURL,_,(c=a.timeout)!==null&&c!==void 0?c:this.timeout);return await((d=w.body)===null||d===void 0?void 0:d.cancel()),w.ok?"ok":"error"}catch(w){return w.name==="AbortError"?"timed out":"error"}}else return new Promise(g=>{var x,b,_;const w=this._push(r.type,r,a.timeout||this.timeout);r.type==="broadcast"&&!(!((_=(b=(x=this.params)===null||x===void 0?void 0:x.config)===null||b===void 0?void 0:b.broadcast)===null||_===void 0)&&_.ack)&&g("ok"),w.receive("ok",()=>g("ok")),w.receive("error",()=>g("error")),w.receive("timeout",()=>g("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Yn.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pi.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(d=>{c=new rd(this,pi.leave,{},r),c.receive("ok",()=>{a(),d("ok")}).receive("timeout",()=>{a(),d("timed out")}).receive("error",()=>{d("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{c?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Yn.closed,this.bindings={}}async _fetchWithTimeout(r,a,c){const d=new AbortController,g=setTimeout(()=>d.abort(),c),x=await this.socket.fetch(r,Object.assign(Object.assign({},a),{signal:d.signal}));return clearTimeout(g),x}_push(r,a,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new rd(this,r,a,c);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Bv){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(r,a,c){return a}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,a,c){var d,g;const x=r.toLocaleLowerCase(),{close:b,error:_,leave:w,join:T}=pi;if(c&&[b,_,w,T].indexOf(x)>=0&&c!==this._joinRef())return;let M=this._onMessage(x,a,c);if(a&&!M)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(x)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(B=>{var U,z,H;return((U=B.filter)===null||U===void 0?void 0:U.event)==="*"||((H=(z=B.filter)===null||z===void 0?void 0:z.event)===null||H===void 0?void 0:H.toLocaleLowerCase())===x}).map(B=>B.callback(M,c)):(g=this.bindings[x])===null||g===void 0||g.filter(B=>{var U,z,H,$,te,G;if(["broadcast","presence","postgres_changes"].includes(x))if("id"in B){const oe=B.id,xe=(U=B.filter)===null||U===void 0?void 0:U.event;return oe&&((z=a.ids)===null||z===void 0?void 0:z.includes(oe))&&(xe==="*"||xe?.toLocaleLowerCase()===((H=a.data)===null||H===void 0?void 0:H.type.toLocaleLowerCase()))}else{const oe=(te=($=B?.filter)===null||$===void 0?void 0:$.event)===null||te===void 0?void 0:te.toLocaleLowerCase();return oe==="*"||oe===((G=a?.event)===null||G===void 0?void 0:G.toLocaleLowerCase())}else return B.type.toLocaleLowerCase()===x}).map(B=>{if(typeof M=="object"&&"ids"in M){const U=M.data,{schema:z,table:H,commit_timestamp:$,type:te,errors:G}=U;M=Object.assign(Object.assign({},{schema:z,table:H,commit_timestamp:$,eventType:te,new:{},old:{},errors:G}),this._getPayloadRecords(U))}B.callback(M,c)})}_isClosed(){return this.state===Yn.closed}_isJoined(){return this.state===Yn.joined}_isJoining(){return this.state===Yn.joining}_isLeaving(){return this.state===Yn.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,a,c){const d=r.toLocaleLowerCase(),g={type:d,filter:a,callback:c};return this.bindings[d]?this.bindings[d].push(g):this.bindings[d]=[g],this}_off(r,a){const c=r.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(d=>{var g;return!(((g=d.type)===null||g===void 0?void 0:g.toLocaleLowerCase())===c&&Qd.isEqual(d.filter,a))})),this}static isEqual(r,a){if(Object.keys(r).length!==Object.keys(a).length)return!1;for(const c in r)if(r[c]!==a[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(pi.close,{},r)}_onError(r){this._on(pi.error,{},a=>r(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Yn.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const a={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(a.new=t2(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(a.old=t2(r.columns,r.old_record)),a}}const id=()=>{},_u={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Hv=[1e3,2e3,5e3,1e4],Vv=1e4,Gv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qv{constructor(r,a){var c;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sd,this.transport=null,this.heartbeatIntervalMs=_u.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=id,this.ref=0,this.reconnectTimer=null,this.vsn=e2,this.logger=id,this.conn=null,this.sendBuffer=[],this.serializer=new jv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>d?(...g)=>d(...g):(...g)=>fetch(...g),!(!((c=a?.params)===null||c===void 0)&&c.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${r}/${Td.websocket}`,this.httpEndpoint=Yx(r),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ov.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const a=r.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const a=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const r=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,a,c){this.logger(r,a,c)}connectionState(){switch(this.conn&&this.conn.readyState){case Os.connecting:return Rs.Connecting;case Os.open:return Rs.Open;case Os.closing:return Rs.Closing;default:return Rs.Closed}}isConnected(){return this.connectionState()===Rs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,a={config:{}}){const c=`realtime:${r}`,d=this.getChannels().find(g=>g.topic===c);if(d)return d;{const g=new Qd(`realtime:${r}`,a,this);return this.channels.push(g),g}}push(r){const{topic:a,event:c,payload:d,ref:g}=r,x=()=>{this.encode(r,b=>{var _;(_=this.conn)===null||_===void 0||_.send(b)})};this.log("push",`${a} ${c} (${g})`,d),this.isConnected()?x():this.sendBuffer.push(x)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Mv,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},_u.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let a=this.channels.find(c=>c.topic===r&&(c._isJoined()||c._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${r}"`),a.unsubscribe())}_remove(r){this.channels=this.channels.filter(a=>a.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(w){this.log("error","error in heartbeat callback",w)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:c,event:d,payload:g,ref:x}=a,b=x?`(${x})`:"",_=g.status||"";this.log("receive",`${_} ${c} ${d} ${b}`.trim(),g),this.channels.filter(w=>w._isMember(c)).forEach(w=>w._trigger(d,g,x)),this._triggerStateCallbacks("message",a)})}_clearTimer(r){var a;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Os.open||this.conn.readyState===Os.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var a;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(pi.error))}_appendParams(r,a){if(Object.keys(a).length===0)return r;const c=r.match(/\?/)?"&":"?",d=new URLSearchParams(a);return`${r}${c}${d}`}_workerObjectUrl(r){let a;if(r)a=r;else{const c=new Blob([Gv],{type:"application/javascript"});a=URL.createObjectURL(c)}return a}_setConnectionState(r,a=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(r=null){let a;r?a=r:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(c=>{const d={access_token:a,version:Iv};a&&c.updateJoinPayload(d),c.joinedOnce&&c._isJoined()&&c._push(pi.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${r}`,a)})}_triggerStateCallbacks(r,a){try{this.stateChangeCallbacks[r].forEach(c=>{try{c(a)}catch(d){this.log("error",`error in ${r} callback`,d)}})}catch(c){this.log("error",`error triggering ${r} callbacks`,c)}}_setupReconnectionTimer(){this.reconnectTimer=new qx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_u.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var a,c,d,g,x,b,_,w,T,S,M,B;switch(this.transport=(a=r?.transport)!==null&&a!==void 0?a:null,this.timeout=(c=r?.timeout)!==null&&c!==void 0?c:Sd,this.heartbeatIntervalMs=(d=r?.heartbeatIntervalMs)!==null&&d!==void 0?d:_u.HEARTBEAT_INTERVAL,this.worker=(g=r?.worker)!==null&&g!==void 0?g:!1,this.accessToken=(x=r?.accessToken)!==null&&x!==void 0?x:null,this.heartbeatCallback=(b=r?.heartbeatCallback)!==null&&b!==void 0?b:id,this.vsn=(_=r?.vsn)!==null&&_!==void 0?_:e2,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(w=r?.reconnectAfterMs)!==null&&w!==void 0?w:(U=>Hv[U-1]||Vv),this.vsn){case Gx:this.encode=(T=r?.encode)!==null&&T!==void 0?T:((U,z)=>z(JSON.stringify(U))),this.decode=(S=r?.decode)!==null&&S!==void 0?S:((U,z)=>z(JSON.parse(U)));break;case Dv:this.encode=(M=r?.encode)!==null&&M!==void 0?M:this.serializer.encode.bind(this.serializer),this.decode=(B=r?.decode)!==null&&B!==void 0?B:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class Qu extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function vn(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Xv extends Qu{constructor(r,a,c){super(r),this.name="StorageApiError",this.status=a,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Od extends Qu{constructor(r,a){super(r),this.name="StorageUnknownError",this.originalError=a}}const Jd=s=>s?(...r)=>s(...r):(...r)=>fetch(...r),Yv=()=>Response,Rd=s=>{if(Array.isArray(s))return s.map(a=>Rd(a));if(typeof s=="function"||s!==Object(s))return s;const r={};return Object.entries(s).forEach(([a,c])=>{const d=a.replace(/([-_][a-z])/gi,g=>g.toUpperCase().replace(/[-_]/g,""));r[d]=Rd(c)}),r},Wv=s=>{if(typeof s!="object"||s===null)return!1;const r=Object.getPrototypeOf(s);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Kv=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s),ad=s=>{var r;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(r=s.error)===null||r===void 0?void 0:r.message)||JSON.stringify(s)},Zv=(s,r,a)=>We(void 0,void 0,void 0,function*(){const c=yield Yv();s instanceof c&&!a?.noResolveJson?s.json().then(d=>{const g=s.status||500,x=d?.statusCode||g+"";r(new Xv(ad(d),g,x))}).catch(d=>{r(new Od(ad(d),d))}):r(new Od(ad(s),s))}),Qv=(s,r,a,c)=>{const d={method:s,headers:r?.headers||{}};return s==="GET"||!c?d:(Wv(c)?(d.headers=Object.assign({"Content-Type":"application/json"},r?.headers),d.body=JSON.stringify(c)):d.body=c,r?.duplex&&(d.duplex=r.duplex),Object.assign(Object.assign({},d),a))};function Jo(s,r,a,c,d,g){return We(this,void 0,void 0,function*(){return new Promise((x,b)=>{s(a,Qv(r,c,d,g)).then(_=>{if(!_.ok)throw _;return c?.noResolveJson?_:_.json()}).then(_=>x(_)).catch(_=>Zv(_,b,c))})})}function Vo(s,r,a,c){return We(this,void 0,void 0,function*(){return Jo(s,"GET",r,a,c)})}function xi(s,r,a,c,d){return We(this,void 0,void 0,function*(){return Jo(s,"POST",r,c,d,a)})}function Id(s,r,a,c,d){return We(this,void 0,void 0,function*(){return Jo(s,"PUT",r,c,d,a)})}function Jv(s,r,a,c){return We(this,void 0,void 0,function*(){return Jo(s,"HEAD",r,Object.assign(Object.assign({},a),{noResolveJson:!0}),c)})}function $d(s,r,a,c,d){return We(this,void 0,void 0,function*(){return Jo(s,"DELETE",r,c,d,a)})}class $v{constructor(r,a){this.downloadFn=r,this.shouldThrowOnError=a}then(r,a){return this.execute().then(r,a)}execute(){return We(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}})}}var Wx;class e3{constructor(r,a){this.downloadFn=r,this.shouldThrowOnError=a,this[Wx]="BlobDownloadBuilder",this.promise=null}asStream(){return new $v(this.downloadFn,this.shouldThrowOnError)}then(r,a){return this.getPromise().then(r,a)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return We(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}})}}Wx=Symbol.toStringTag;const t3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},i2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class n3{constructor(r,a={},c,d){this.shouldThrowOnError=!1,this.url=r,this.headers=a,this.bucketId=c,this.fetch=Jd(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,a,c,d){return We(this,void 0,void 0,function*(){try{let g;const x=Object.assign(Object.assign({},i2),d);let b=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(x.upsert)});const _=x.metadata;typeof Blob<"u"&&c instanceof Blob?(g=new FormData,g.append("cacheControl",x.cacheControl),_&&g.append("metadata",this.encodeMetadata(_)),g.append("",c)):typeof FormData<"u"&&c instanceof FormData?(g=c,g.has("cacheControl")||g.append("cacheControl",x.cacheControl),_&&!g.has("metadata")&&g.append("metadata",this.encodeMetadata(_))):(g=c,b["cache-control"]=`max-age=${x.cacheControl}`,b["content-type"]=x.contentType,_&&(b["x-metadata"]=this.toBase64(this.encodeMetadata(_))),(typeof ReadableStream<"u"&&g instanceof ReadableStream||g&&typeof g=="object"&&"pipe"in g&&typeof g.pipe=="function")&&!x.duplex&&(x.duplex="half")),d?.headers&&(b=Object.assign(Object.assign({},b),d.headers));const w=this._removeEmptyFolders(a),T=this._getFinalPath(w),S=yield(r=="PUT"?Id:xi)(this.fetch,`${this.url}/object/${T}`,g,Object.assign({headers:b},x?.duplex?{duplex:x.duplex}:{}));return{data:{path:w,id:S.Id,fullPath:S.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(vn(g))return{data:null,error:g};throw g}})}upload(r,a,c){return We(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,a,c)})}uploadToSignedUrl(r,a,c,d){return We(this,void 0,void 0,function*(){const g=this._removeEmptyFolders(r),x=this._getFinalPath(g),b=new URL(this.url+`/object/upload/sign/${x}`);b.searchParams.set("token",a);try{let _;const w=Object.assign({upsert:i2.upsert},d),T=Object.assign(Object.assign({},this.headers),{"x-upsert":String(w.upsert)});typeof Blob<"u"&&c instanceof Blob?(_=new FormData,_.append("cacheControl",w.cacheControl),_.append("",c)):typeof FormData<"u"&&c instanceof FormData?(_=c,_.append("cacheControl",w.cacheControl)):(_=c,T["cache-control"]=`max-age=${w.cacheControl}`,T["content-type"]=w.contentType);const S=yield Id(this.fetch,b.toString(),_,{headers:T});return{data:{path:g,fullPath:S.Key},error:null}}catch(_){if(this.shouldThrowOnError)throw _;if(vn(_))return{data:null,error:_};throw _}})}createSignedUploadUrl(r,a){return We(this,void 0,void 0,function*(){try{let c=this._getFinalPath(r);const d=Object.assign({},this.headers);a?.upsert&&(d["x-upsert"]="true");const g=yield xi(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:d}),x=new URL(this.url+g.url),b=x.searchParams.get("token");if(!b)throw new Qu("No token returned by API");return{data:{signedUrl:x.toString(),path:r,token:b},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(vn(c))return{data:null,error:c};throw c}})}update(r,a,c){return We(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,a,c)})}move(r,a,c){return We(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:a,destinationBucket:c?.destinationBucket},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(vn(d))return{data:null,error:d};throw d}})}copy(r,a,c){return We(this,void 0,void 0,function*(){try{return{data:{path:(yield xi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:a,destinationBucket:c?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(vn(d))return{data:null,error:d};throw d}})}createSignedUrl(r,a,c){return We(this,void 0,void 0,function*(){try{let d=this._getFinalPath(r),g=yield xi(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:a},c?.transform?{transform:c.transform}:{}),{headers:this.headers});const x=c?.download?`&download=${c.download===!0?"":c.download}`:"";return g={signedUrl:encodeURI(`${this.url}${g.signedURL}${x}`)},{data:g,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(vn(d))return{data:null,error:d};throw d}})}createSignedUrls(r,a,c){return We(this,void 0,void 0,function*(){try{const d=yield xi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:r},{headers:this.headers}),g=c?.download?`&download=${c.download===!0?"":c.download}`:"";return{data:d.map(x=>Object.assign(Object.assign({},x),{signedUrl:x.signedURL?encodeURI(`${this.url}${x.signedURL}${g}`):null})),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(vn(d))return{data:null,error:d};throw d}})}download(r,a){const d=typeof a?.transform<"u"?"render/image/authenticated":"object",g=this.transformOptsToQueryString(a?.transform||{}),x=g?`?${g}`:"",b=this._getFinalPath(r),_=()=>Vo(this.fetch,`${this.url}/${d}/${b}${x}`,{headers:this.headers,noResolveJson:!0});return new e3(_,this.shouldThrowOnError)}info(r){return We(this,void 0,void 0,function*(){const a=this._getFinalPath(r);try{const c=yield Vo(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:Rd(c),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(vn(c))return{data:null,error:c};throw c}})}exists(r){return We(this,void 0,void 0,function*(){const a=this._getFinalPath(r);try{return yield Jv(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(vn(c)&&c instanceof Od){const d=c.originalError;if([400,404].includes(d?.status))return{data:!1,error:c}}throw c}})}getPublicUrl(r,a){const c=this._getFinalPath(r),d=[],g=a?.download?`download=${a.download===!0?"":a.download}`:"";g!==""&&d.push(g);const b=typeof a?.transform<"u"?"render/image":"object",_=this.transformOptsToQueryString(a?.transform||{});_!==""&&d.push(_);let w=d.join("&");return w!==""&&(w=`?${w}`),{data:{publicUrl:encodeURI(`${this.url}/${b}/public/${c}${w}`)}}}remove(r){return We(this,void 0,void 0,function*(){try{return{data:yield $d(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vn(a))return{data:null,error:a};throw a}})}list(r,a,c){return We(this,void 0,void 0,function*(){try{const d=Object.assign(Object.assign(Object.assign({},t3),a),{prefix:r||""});return{data:yield xi(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},c),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(vn(d))return{data:null,error:d};throw d}})}listV2(r,a){return We(this,void 0,void 0,function*(){try{const c=Object.assign({},r);return{data:yield xi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},a),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(vn(c))return{data:null,error:c};throw c}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const a=[];return r.width&&a.push(`width=${r.width}`),r.height&&a.push(`height=${r.height}`),r.resize&&a.push(`resize=${r.resize}`),r.format&&a.push(`format=${r.format}`),r.quality&&a.push(`quality=${r.quality}`),a.join("&")}}const Kx="2.86.0",Zx={"X-Client-Info":`storage-js/${Kx}`};class r3{constructor(r,a={},c,d){this.shouldThrowOnError=!1;const g=new URL(r);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(g.hostname)&&!g.hostname.includes("storage.supabase.")&&(g.hostname=g.hostname.replace("supabase.","storage.supabase.")),this.url=g.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zx),a),this.fetch=Jd(c)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return We(this,void 0,void 0,function*(){try{const a=this.listBucketOptionsToQueryString(r);return{data:yield Vo(this.fetch,`${this.url}/bucket${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vn(a))return{data:null,error:a};throw a}})}getBucket(r){return We(this,void 0,void 0,function*(){try{return{data:yield Vo(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vn(a))return{data:null,error:a};throw a}})}createBucket(r){return We(this,arguments,void 0,function*(a,c={public:!1}){try{return{data:yield xi(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:c.type,public:c.public,file_size_limit:c.fileSizeLimit,allowed_mime_types:c.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(vn(d))return{data:null,error:d};throw d}})}updateBucket(r,a){return We(this,void 0,void 0,function*(){try{return{data:yield Id(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(vn(c))return{data:null,error:c};throw c}})}emptyBucket(r){return We(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vn(a))return{data:null,error:a};throw a}})}deleteBucket(r){return We(this,void 0,void 0,function*(){try{return{data:yield $d(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vn(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(r){const a={};return r&&("limit"in r&&(a.limit=String(r.limit)),"offset"in r&&(a.offset=String(r.offset)),r.search&&(a.search=r.search),r.sortColumn&&(a.sortColumn=r.sortColumn),r.sortOrder&&(a.sortOrder=r.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}}var Go=class extends Error{constructor(s,r){super(s),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function i3(s,r,a){const c=new URL(r,s);if(a)for(const[d,g]of Object.entries(a))g!==void 0&&c.searchParams.set(d,g);return c.toString()}async function a3(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function s3(s){const r=s.fetchImpl??globalThis.fetch;return{async request({method:a,path:c,query:d,body:g,headers:x}){const b=i3(s.baseUrl,c,d),_=await a3(s.auth),w=await r(b,{method:a,headers:{...g?{"Content-Type":"application/json"}:{},..._,...x},body:g?JSON.stringify(g):void 0}),T=await w.text(),S=(w.headers.get("content-type")||"").includes("application/json"),M=S&&T?JSON.parse(T):T;if(!w.ok){const B=S?M:void 0,U=B?.error;throw new Go(U?.message??`Request failed with status ${w.status}`,{status:w.status,icebergType:U?.type,icebergCode:U?.code,details:B})}return{status:w.status,headers:w.headers,data:M}}}}function Au(s){return s.join("")}var l3=class{constructor(s,r=""){this.client=s,this.prefix=r}async listNamespaces(s){const r=s?{parent:Au(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(c=>({namespace:c}))}async createNamespace(s,r){const a={namespace:s.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Au(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Au(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Au(s.namespace)}`}),!0}catch(r){if(r instanceof Go&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(s,r){try{return await this.createNamespace(s,r)}catch(a){if(a instanceof Go&&a.status===409)return;throw a}}};function yl(s){return s.join("")}var o3=class{constructor(s,r="",a){this.client=s,this.prefix=r,this.accessDelegation=a}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${yl(s.namespace)}/tables`})).data.identifiers}async createTable(s,r){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${yl(s.namespace)}/tables`,body:r,headers:a})).data.metadata}async updateTable(s,r){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${yl(s.namespace)}/tables/${s.name}`,body:r});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(s,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${yl(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(s){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${yl(s.namespace)}/tables/${s.name}`,headers:r})).data.metadata}async tableExists(s){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${yl(s.namespace)}/tables/${s.name}`,headers:r}),!0}catch(a){if(a instanceof Go&&a.status===404)return!1;throw a}}async createTableIfNotExists(s,r){try{return await this.createTable(s,r)}catch(a){if(a instanceof Go&&a.status===409)return await this.loadTable({namespace:s.namespace,name:r.name});throw a}}},c3=class{constructor(s){let r="v1";s.catalogName&&(r+=`/${s.catalogName}`);const a=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=s3({baseUrl:a,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new l3(this.client,r),this.tableOps=new o3(this.client,r,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,r){return this.namespaceOps.createNamespace(s,r)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,r){return this.tableOps.createTable(s,r)}async updateTable(s,r){return this.tableOps.updateTable(s,r)}async dropTable(s,r){await this.tableOps.dropTable(s,r)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,r){return this.namespaceOps.createNamespaceIfNotExists(s,r)}async createTableIfNotExists(s,r){return this.tableOps.createTableIfNotExists(s,r)}};class u3{constructor(r,a={},c){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zx),a),this.fetch=Jd(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return We(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vn(a))return{data:null,error:a};throw a}})}listBuckets(r){return We(this,void 0,void 0,function*(){try{const a=new URLSearchParams;r?.limit!==void 0&&a.set("limit",r.limit.toString()),r?.offset!==void 0&&a.set("offset",r.offset.toString()),r?.sortColumn&&a.set("sortColumn",r.sortColumn),r?.sortOrder&&a.set("sortOrder",r.sortOrder),r?.search&&a.set("search",r.search);const c=a.toString(),d=c?`${this.url}/bucket?${c}`:`${this.url}/bucket`;return{data:yield Vo(this.fetch,d,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vn(a))return{data:null,error:a};throw a}})}deleteBucket(r){return We(this,void 0,void 0,function*(){try{return{data:yield $d(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vn(a))return{data:null,error:a};throw a}})}from(r){if(!Kv(r))throw new Qu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new c3({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>We(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const e0={"X-Client-Info":`storage-js/${Kx}`,"Content-Type":"application/json"};class Qx extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Hr(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}class sd extends Qx{constructor(r,a,c){super(r),this.name="StorageVectorsApiError",this.status=a,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class f3 extends Qx{constructor(r,a){super(r),this.name="StorageVectorsUnknownError",this.originalError=a}}var a2;(function(s){s.InternalError="InternalError",s.S3VectorConflictException="S3VectorConflictException",s.S3VectorNotFoundException="S3VectorNotFoundException",s.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",s.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",s.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(a2||(a2={}));const t0=s=>s?(...r)=>s(...r):(...r)=>fetch(...r),h3=s=>{if(typeof s!="object"||s===null)return!1;const r=Object.getPrototypeOf(s);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},s2=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),d3=(s,r,a)=>We(void 0,void 0,void 0,function*(){if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!a?.noResolveJson){const d=s.status||500,g=s;if(typeof g.json=="function")g.json().then(x=>{const b=x?.statusCode||x?.code||d+"";r(new sd(s2(x),d,b))}).catch(()=>{const x=d+"",b=g.statusText||`HTTP ${d} error`;r(new sd(b,d,x))});else{const x=d+"",b=g.statusText||`HTTP ${d} error`;r(new sd(b,d,x))}}else r(new f3(s2(s),s))}),g3=(s,r,a,c)=>{const d={method:s,headers:r?.headers||{}};return c?(h3(c)?(d.headers=Object.assign({"Content-Type":"application/json"},r?.headers),d.body=JSON.stringify(c)):d.body=c,Object.assign(Object.assign({},d),a)):d};function m3(s,r,a,c,d,g){return We(this,void 0,void 0,function*(){return new Promise((x,b)=>{s(a,g3(r,c,d,g)).then(_=>{if(!_.ok)throw _;if(c?.noResolveJson)return _;const w=_.headers.get("content-type");return!w||!w.includes("application/json")?{}:_.json()}).then(_=>x(_)).catch(_=>d3(_,b,c))})})}function Vr(s,r,a,c,d){return We(this,void 0,void 0,function*(){return m3(s,"POST",r,c,d,a)})}class x3{constructor(r,a={},c){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},e0),a),this.fetch=t0(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return We(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}getIndex(r,a){return We(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:a},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Hr(c))return{data:null,error:c};throw c}})}listIndexes(r){return We(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}deleteIndex(r,a){return We(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:a},{headers:this.headers}))||{},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Hr(c))return{data:null,error:c};throw c}})}}class p3{constructor(r,a={},c){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},e0),a),this.fetch=t0(c)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return We(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Vr(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}getVectors(r){return We(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}listVectors(r){return We(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield Vr(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}queryVectors(r){return We(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}deleteVectors(r){return We(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Vr(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}}class y3{constructor(r,a={},c){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},e0),a),this.fetch=t0(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return We(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}getBucket(r){return We(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}listBuckets(){return We(this,arguments,void 0,function*(r={}){try{return{data:yield Vr(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}deleteBucket(r){return We(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Hr(a))return{data:null,error:a};throw a}})}}class w3 extends y3{constructor(r,a={}){super(r,a.headers||{},a.fetch)}from(r){return new b3(this.url,this.headers,r,this.fetch)}createBucket(r){const a=Object.create(null,{createBucket:{get:()=>super.createBucket}});return We(this,void 0,void 0,function*(){return a.createBucket.call(this,r)})}getBucket(r){const a=Object.create(null,{getBucket:{get:()=>super.getBucket}});return We(this,void 0,void 0,function*(){return a.getBucket.call(this,r)})}listBuckets(){const r=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return We(this,arguments,void 0,function*(a={}){return r.listBuckets.call(this,a)})}deleteBucket(r){const a=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return We(this,void 0,void 0,function*(){return a.deleteBucket.call(this,r)})}}class b3 extends x3{constructor(r,a,c,d){super(r,a,d),this.vectorBucketName=c}createIndex(r){const a=Object.create(null,{createIndex:{get:()=>super.createIndex}});return We(this,void 0,void 0,function*(){return a.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return We(this,arguments,void 0,function*(a={}){return r.listIndexes.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const a=Object.create(null,{getIndex:{get:()=>super.getIndex}});return We(this,void 0,void 0,function*(){return a.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const a=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return We(this,void 0,void 0,function*(){return a.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new v3(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class v3 extends p3{constructor(r,a,c,d,g){super(r,a,g),this.vectorBucketName=c,this.indexName=d}putVectors(r){const a=Object.create(null,{putVectors:{get:()=>super.putVectors}});return We(this,void 0,void 0,function*(){return a.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const a=Object.create(null,{getVectors:{get:()=>super.getVectors}});return We(this,void 0,void 0,function*(){return a.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return We(this,arguments,void 0,function*(a={}){return r.listVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const a=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return We(this,void 0,void 0,function*(){return a.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const a=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return We(this,void 0,void 0,function*(){return a.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class E3 extends r3{constructor(r,a={},c,d){super(r,a,c,d)}from(r){return new n3(this.url,this.headers,r,this.fetch)}get vectors(){return new w3(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new u3(this.url+"/iceberg",this.headers,this.fetch)}}const _3="2.86.0";let Bo="";typeof Deno<"u"?Bo="deno":typeof document<"u"?Bo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bo="react-native":Bo="node";const A3={"X-Client-Info":`supabase-js-${Bo}/${_3}`},C3={headers:A3},S3={schema:"public"},T3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},N3={},O3=s=>s?(...r)=>s(...r):(...r)=>fetch(...r),R3=()=>Headers,I3=(s,r,a)=>{const c=O3(a),d=R3();return async(g,x)=>{var b;const _=(b=await r())!==null&&b!==void 0?b:s;let w=new d(x?.headers);return w.has("apikey")||w.set("apikey",s),w.has("Authorization")||w.set("Authorization",`Bearer ${_}`),c(g,Object.assign(Object.assign({},x),{headers:w}))}};function D3(s){return s.endsWith("/")?s:s+"/"}function M3(s,r){var a,c;const{db:d,auth:g,realtime:x,global:b}=s,{db:_,auth:w,realtime:T,global:S}=r,M={db:Object.assign(Object.assign({},_),d),auth:Object.assign(Object.assign({},w),g),realtime:Object.assign(Object.assign({},T),x),storage:{},global:Object.assign(Object.assign(Object.assign({},S),b),{headers:Object.assign(Object.assign({},(a=S?.headers)!==null&&a!==void 0?a:{}),(c=b?.headers)!==null&&c!==void 0?c:{})}),accessToken:async()=>""};return s.accessToken?M.accessToken=s.accessToken:delete M.accessToken,M}function B3(s){const r=s?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(D3(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Jx="2.86.0",Sl=30*1e3,Dd=3,ld=Dd*Sl,j3="http://localhost:9999",k3="supabase.auth.token",L3={"X-Client-Info":`gotrue-js/${Jx}`},Md="X-Supabase-Api-Version",$x={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},P3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,U3=600*1e3;class qo extends Error{constructor(r,a,c){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=c}}function $e(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class F3 extends qo{constructor(r,a,c){super(r,a,c),this.name="AuthApiError",this.status=a,this.code=c}}function z3(s){return $e(s)&&s.name==="AuthApiError"}class Is extends qo{constructor(r,a){super(r),this.name="AuthUnknownError",this.originalError=a}}class rs extends qo{constructor(r,a,c,d){super(r,c,d),this.name=a,this.status=c}}class Ur extends rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function H3(s){return $e(s)&&s.name==="AuthSessionMissingError"}class wl extends rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cu extends rs{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Su extends rs{constructor(r,a=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V3(s){return $e(s)&&s.name==="AuthImplicitGrantRedirectError"}class l2 extends rs{constructor(r,a=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bd extends rs{constructor(r,a){super(r,"AuthRetryableFetchError",a,void 0)}}function od(s){return $e(s)&&s.name==="AuthRetryableFetchError"}class o2 extends rs{constructor(r,a,c){super(r,"AuthWeakPasswordError",a,"weak_password"),this.reasons=c}}class jd extends rs{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const ku="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),c2=` 	
\r=`.split(""),G3=(()=>{const s=new Array(128);for(let r=0;r<s.length;r+=1)s[r]=-1;for(let r=0;r<c2.length;r+=1)s[c2[r].charCodeAt(0)]=-2;for(let r=0;r<ku.length;r+=1)s[ku[r].charCodeAt(0)]=r;return s})();function u2(s,r,a){if(s!==null)for(r.queue=r.queue<<8|s,r.queuedBits+=8;r.queuedBits>=6;){const c=r.queue>>r.queuedBits-6&63;a(ku[c]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const c=r.queue>>r.queuedBits-6&63;a(ku[c]),r.queuedBits-=6}}function ep(s,r,a){const c=G3[s];if(c>-1)for(r.queue=r.queue<<6|c,r.queuedBits+=6;r.queuedBits>=8;)a(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(c===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function f2(s){const r=[],a=x=>{r.push(String.fromCodePoint(x))},c={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},g=x=>{Y3(x,c,a)};for(let x=0;x<s.length;x+=1)ep(s.charCodeAt(x),d,g);return r.join("")}function q3(s,r){if(s<=127){r(s);return}else if(s<=2047){r(192|s>>6),r(128|s&63);return}else if(s<=65535){r(224|s>>12),r(128|s>>6&63),r(128|s&63);return}else if(s<=1114111){r(240|s>>18),r(128|s>>12&63),r(128|s>>6&63),r(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function X3(s,r){for(let a=0;a<s.length;a+=1){let c=s.charCodeAt(a);if(c>55295&&c<=56319){const d=(c-55296)*1024&65535;c=(s.charCodeAt(a+1)-56320&65535|d)+65536,a+=1}q3(c,r)}}function Y3(s,r,a){if(r.utf8seq===0){if(s<=127){a(s);return}for(let c=1;c<6;c+=1)if((s>>7-c&1)===0){r.utf8seq=c;break}if(r.utf8seq===2)r.codepoint=s&31;else if(r.utf8seq===3)r.codepoint=s&15;else if(r.utf8seq===4)r.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|s&63,r.utf8seq-=1,r.utf8seq===0&&a(r.codepoint)}}function Il(s){const r=[],a={queue:0,queuedBits:0},c=d=>{r.push(d)};for(let d=0;d<s.length;d+=1)ep(s.charCodeAt(d),a,c);return new Uint8Array(r)}function W3(s){const r=[];return X3(s,a=>r.push(a)),new Uint8Array(r)}function Ms(s){const r=[],a={queue:0,queuedBits:0},c=d=>{r.push(d)};return s.forEach(d=>u2(d,a,c)),u2(null,a,c),r.join("")}function K3(s){return Math.round(Date.now()/1e3)+s}function Z3(){return Symbol("auth-callback")}const rr=()=>typeof window<"u"&&typeof document<"u",Ss={tested:!1,writable:!1},tp=()=>{if(!rr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ss.tested)return Ss.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Ss.tested=!0,Ss.writable=!0}catch{Ss.tested=!0,Ss.writable=!1}return Ss.writable};function Q3(s){const r={},a=new URL(s);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((d,g)=>{r[g]=d})}catch{}return a.searchParams.forEach((c,d)=>{r[d]=c}),r}const np=s=>s?(...r)=>s(...r):(...r)=>fetch(...r),J3=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Tl=async(s,r,a)=>{await s.setItem(r,JSON.stringify(a))},Ts=async(s,r)=>{const a=await s.getItem(r);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Ya=async(s,r)=>{await s.removeItem(r)};class Ju{constructor(){this.promise=new Ju.promiseConstructor((r,a)=>{this.resolve=r,this.reject=a})}}Ju.promiseConstructor=Promise;function cd(s){const r=s.split(".");if(r.length!==3)throw new jd("Invalid JWT structure");for(let c=0;c<r.length;c++)if(!P3.test(r[c]))throw new jd("JWT not in base64url format");return{header:JSON.parse(f2(r[0])),payload:JSON.parse(f2(r[1])),signature:Il(r[2]),raw:{header:r[0],payload:r[1]}}}async function $3(s){return await new Promise(r=>{setTimeout(()=>r(null),s)})}function e4(s,r){return new Promise((c,d)=>{(async()=>{for(let g=0;g<1/0;g++)try{const x=await s(g);if(!r(g,null,x)){c(x);return}}catch(x){if(!r(g,x)){d(x);return}}})()})}function t4(s){return("0"+s.toString(16)).substr(-2)}function n4(){const r=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",c=a.length;let d="";for(let g=0;g<56;g++)d+=a.charAt(Math.floor(Math.random()*c));return d}return crypto.getRandomValues(r),Array.from(r,t4).join("")}async function r4(s){const a=new TextEncoder().encode(s),c=await crypto.subtle.digest("SHA-256",a),d=new Uint8Array(c);return Array.from(d).map(g=>String.fromCharCode(g)).join("")}async function i4(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const a=await r4(s);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bl(s,r,a=!1){const c=n4();let d=c;a&&(d+="/PASSWORD_RECOVERY"),await Tl(s,`${r}-code-verifier`,d);const g=await i4(c);return[g,c===g?"plain":"s256"]}const a4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function s4(s){const r=s.headers.get(Md);if(!r||!r.match(a4))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function l4(s){if(!s)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(s<=r)throw new Error("JWT has expired")}function o4(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const c4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vl(s){if(!c4.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ud(){const s={};return new Proxy(s,{get:(r,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function u4(s,r){return new Proxy(s,{get:(a,c,d)=>{if(c==="__isInsecureUserWarningProxy")return!0;if(typeof c=="symbol"){const g=c.toString();if(g==="Symbol(Symbol.toPrimitive)"||g==="Symbol(Symbol.toStringTag)"||g==="Symbol(util.inspect.custom)"||g==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,c,d)}return!r.value&&typeof c=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(a,c,d)}})}function h2(s){return JSON.parse(JSON.stringify(s))}const Ns=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),f4=[502,503,504];async function d2(s){var r;if(!J3(s))throw new Bd(Ns(s),0);if(f4.includes(s.status))throw new Bd(Ns(s),s.status);let a;try{a=await s.json()}catch(g){throw new Is(Ns(g),g)}let c;const d=s4(s);if(d&&d.getTime()>=$x["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?c=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(c=a.error_code),c){if(c==="weak_password")throw new o2(Ns(a),s.status,((r=a.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(c==="session_not_found")throw new Ur}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((g,x)=>g&&typeof x=="string",!0))throw new o2(Ns(a),s.status,a.weak_password.reasons);throw new F3(Ns(a),s.status||500,c)}const h4=(s,r,a,c)=>{const d={method:s,headers:r?.headers||{}};return s==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),d.body=JSON.stringify(c),Object.assign(Object.assign({},d),a))};async function ot(s,r,a,c){var d;const g=Object.assign({},c?.headers);g[Md]||(g[Md]=$x["2024-01-01"].name),c?.jwt&&(g.Authorization=`Bearer ${c.jwt}`);const x=(d=c?.query)!==null&&d!==void 0?d:{};c?.redirectTo&&(x.redirect_to=c.redirectTo);const b=Object.keys(x).length?"?"+new URLSearchParams(x).toString():"",_=await d4(s,r,a+b,{headers:g,noResolveJson:c?.noResolveJson},{},c?.body);return c?.xform?c?.xform(_):{data:Object.assign({},_),error:null}}async function d4(s,r,a,c,d,g){const x=h4(r,c,d,g);let b;try{b=await s(a,Object.assign({},x))}catch(_){throw console.error(_),new Bd(Ns(_),0)}if(b.ok||await d2(b),c?.noResolveJson)return b;try{return await b.json()}catch(_){await d2(_)}}function mi(s){var r;let a=null;x4(s)&&(a=Object.assign({},s),s.expires_at||(a.expires_at=K3(s.expires_in)));const c=(r=s.user)!==null&&r!==void 0?r:s;return{data:{session:a,user:c},error:null}}function g2(s){const r=mi(s);return!r.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0)&&(r.data.weak_password=s.weak_password),r}function $a(s){var r;return{data:{user:(r=s.user)!==null&&r!==void 0?r:s},error:null}}function g4(s){return{data:s,error:null}}function m4(s){const{action_link:r,email_otp:a,hashed_token:c,redirect_to:d,verification_type:g}=s,x=Bl(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),b={action_link:r,email_otp:a,hashed_token:c,redirect_to:d,verification_type:g},_=Object.assign({},x);return{data:{properties:b,user:_},error:null}}function m2(s){return s}function x4(s){return s.access_token&&s.refresh_token&&s.expires_in}const fd=["global","local","others"];class p4{constructor({url:r="",headers:a={},fetch:c}){this.url=r,this.headers=a,this.fetch=np(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,a=fd[0]){if(fd.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fd.join(", ")}`);try{return await ot(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(c){if($e(c))return{data:null,error:c};throw c}}async inviteUserByEmail(r,a={}){try{return await ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:$a})}catch(c){if($e(c))return{data:{user:null},error:c};throw c}}async generateLink(r){try{const{options:a}=r,c=Bl(r,["options"]),d=Object.assign(Object.assign({},c),a);return"newEmail"in c&&(d.new_email=c?.newEmail,delete d.newEmail),await ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:m4,redirectTo:a?.redirectTo})}catch(a){if($e(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(r){try{return await ot(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:$a})}catch(a){if($e(a))return{data:{user:null},error:a};throw a}}async listUsers(r){var a,c,d,g,x,b,_;try{const w={nextPage:null,lastPage:0,total:0},T=await ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(a=r?.page)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:"",per_page:(g=(d=r?.perPage)===null||d===void 0?void 0:d.toString())!==null&&g!==void 0?g:""},xform:m2});if(T.error)throw T.error;const S=await T.json(),M=(x=T.headers.get("x-total-count"))!==null&&x!==void 0?x:0,B=(_=(b=T.headers.get("link"))===null||b===void 0?void 0:b.split(","))!==null&&_!==void 0?_:[];return B.length>0&&(B.forEach(U=>{const z=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(U.split(";")[1].split("=")[1]);w[`${H}Page`]=z}),w.total=parseInt(M)),{data:Object.assign(Object.assign({},S),w),error:null}}catch(w){if($e(w))return{data:{users:[]},error:w};throw w}}async getUserById(r){vl(r);try{return await ot(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:$a})}catch(a){if($e(a))return{data:{user:null},error:a};throw a}}async updateUserById(r,a){vl(r);try{return await ot(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:a,headers:this.headers,xform:$a})}catch(c){if($e(c))return{data:{user:null},error:c};throw c}}async deleteUser(r,a=!1){vl(r);try{return await ot(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:a},xform:$a})}catch(c){if($e(c))return{data:{user:null},error:c};throw c}}async _listFactors(r){vl(r.userId);try{const{data:a,error:c}=await ot(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:a,error:c}}catch(a){if($e(a))return{data:null,error:a};throw a}}async _deleteFactor(r){vl(r.userId),vl(r.id);try{return{data:await ot(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}}async _listOAuthClients(r){var a,c,d,g,x,b,_;try{const w={nextPage:null,lastPage:0,total:0},T=await ot(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(a=r?.page)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:"",per_page:(g=(d=r?.perPage)===null||d===void 0?void 0:d.toString())!==null&&g!==void 0?g:""},xform:m2});if(T.error)throw T.error;const S=await T.json(),M=(x=T.headers.get("x-total-count"))!==null&&x!==void 0?x:0,B=(_=(b=T.headers.get("link"))===null||b===void 0?void 0:b.split(","))!==null&&_!==void 0?_:[];return B.length>0&&(B.forEach(U=>{const z=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(U.split(";")[1].split("=")[1]);w[`${H}Page`]=z}),w.total=parseInt(M)),{data:Object.assign(Object.assign({},S),w),error:null}}catch(w){if($e(w))return{data:{clients:[]},error:w};throw w}}async _createOAuthClient(r){try{return await ot(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if($e(a))return{data:null,error:a};throw a}}async _getOAuthClient(r){try{return await ot(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if($e(a))return{data:null,error:a};throw a}}async _updateOAuthClient(r,a){try{return await ot(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:a,headers:this.headers,xform:c=>({data:c,error:null})})}catch(c){if($e(c))return{data:null,error:c};throw c}}async _deleteOAuthClient(r){try{return await ot(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(r){try{return await ot(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if($e(a))return{data:null,error:a};throw a}}}function x2(s={}){return{getItem:r=>s[r]||null,setItem:(r,a)=>{s[r]=a},removeItem:r=>{delete s[r]}}}const El={debug:!!(globalThis&&tp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rp extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class y4 extends rp{}async function w4(s,r,a){El.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,r);const c=new globalThis.AbortController;return r>0&&setTimeout(()=>{c.abort(),El.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:c.signal},async d=>{if(d){El.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,d.name);try{return await a()}finally{El.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,d.name)}}else{if(r===0)throw El.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new y4(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(El.debug)try{const g=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(g,null,"  "))}catch(g){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",g)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function b4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ip(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function v4(s){return parseInt(s,16)}function E4(s){const r=new TextEncoder().encode(s);return"0x"+Array.from(r,c=>c.toString(16).padStart(2,"0")).join("")}function _4(s){var r;const{chainId:a,domain:c,expirationTime:d,issuedAt:g=new Date,nonce:x,notBefore:b,requestId:_,resources:w,scheme:T,uri:S,version:M}=s;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!c)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(x&&x.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${x}`);if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(M!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${M}`);if(!((r=s.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const B=ip(s.address),U=T?`${T}://${c}`:c,z=s.statement?`${s.statement}
`:"",H=`${U} wants you to sign in with your Ethereum account:
${B}

${z}`;let $=`URI: ${S}
Version: ${M}
Chain ID: ${a}${x?`
Nonce: ${x}`:""}
Issued At: ${g.toISOString()}`;if(d&&($+=`
Expiration Time: ${d.toISOString()}`),b&&($+=`
Not Before: ${b.toISOString()}`),_&&($+=`
Request ID: ${_}`),w){let te=`
Resources:`;for(const G of w){if(!G||typeof G!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${G}`);te+=`
- ${G}`}$+=te}return`${H}
${$}`}class zn extends Error{constructor({message:r,code:a,cause:c,name:d}){var g;super(r,{cause:c}),this.__isWebAuthnError=!0,this.name=(g=d??(c instanceof Error?c.name:void 0))!==null&&g!==void 0?g:"Unknown Error",this.code=a}}class Lu extends zn{constructor(r,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:r}),this.name="WebAuthnUnknownError",this.originalError=a}}function A4({error:s,options:r}){var a,c,d;const{publicKey:g}=r;if(!g)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(r.signal instanceof AbortSignal)return new zn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((a=g.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new zn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(r.mediation==="conditional"&&((c=g.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new zn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((d=g.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new zn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new zn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new zn({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return g.pubKeyCredParams.filter(b=>b.type==="public-key").length===0?new zn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new zn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const x=window.location.hostname;if(ap(x)){if(g.rp.id!==x)return new zn({message:`The RP ID "${g.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new zn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(g.user.id.byteLength<1||g.user.id.byteLength>64)return new zn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new zn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new zn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function C4({error:s,options:r}){const{publicKey:a}=r;if(!a)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(r.signal instanceof AbortSignal)return new zn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new zn({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const c=window.location.hostname;if(ap(c)){if(a.rpId!==c)return new zn({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new zn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new zn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new zn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class S4{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const T4=new S4;function N4(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:r,user:a,excludeCredentials:c}=s,d=Bl(s,["challenge","user","excludeCredentials"]),g=Il(r).buffer,x=Object.assign(Object.assign({},a),{id:Il(a.id).buffer}),b=Object.assign(Object.assign({},d),{challenge:g,user:x});if(c&&c.length>0){b.excludeCredentials=new Array(c.length);for(let _=0;_<c.length;_++){const w=c[_];b.excludeCredentials[_]=Object.assign(Object.assign({},w),{id:Il(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return b}function O4(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:r,allowCredentials:a}=s,c=Bl(s,["challenge","allowCredentials"]),d=Il(r).buffer,g=Object.assign(Object.assign({},c),{challenge:d});if(a&&a.length>0){g.allowCredentials=new Array(a.length);for(let x=0;x<a.length;x++){const b=a[x];g.allowCredentials[x]=Object.assign(Object.assign({},b),{id:Il(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return g}function R4(s){var r;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const a=s;return{id:s.id,rawId:s.id,response:{attestationObject:Ms(new Uint8Array(s.response.attestationObject)),clientDataJSON:Ms(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(r=a.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function I4(s){var r;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const a=s,c=s.getClientExtensionResults(),d=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Ms(new Uint8Array(d.authenticatorData)),clientDataJSON:Ms(new Uint8Array(d.clientDataJSON)),signature:Ms(new Uint8Array(d.signature)),userHandle:d.userHandle?Ms(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:(r=a.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function ap(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function p2(){var s,r;return!!(rr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function D4(s){try{const r=await navigator.credentials.create(s);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Lu("Browser returned unexpected credential type",r)}:{data:null,error:new Lu("Empty credential response",r)}}catch(r){return{data:null,error:A4({error:r,options:s})}}}async function M4(s){try{const r=await navigator.credentials.get(s);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Lu("Browser returned unexpected credential type",r)}:{data:null,error:new Lu("Empty credential response",r)}}catch(r){return{data:null,error:C4({error:r,options:s})}}}const B4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},j4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Pu(...s){const r=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),a=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),c={};for(const d of s)if(d)for(const g in d){const x=d[g];if(x!==void 0)if(Array.isArray(x))c[g]=x;else if(a(x))c[g]=x;else if(r(x)){const b=c[g];r(b)?c[g]=Pu(b,x):c[g]=Pu(x)}else c[g]=x}return c}function k4(s,r){return Pu(B4,s,r||{})}function L4(s,r){return Pu(j4,s,r||{})}class P4{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:a,friendlyName:c,signal:d},g){try{const{data:x,error:b}=await this.client.mfa.challenge({factorId:r,webauthn:a});if(!x)return{data:null,error:b};const _=d??T4.createNewAbortSignal();if(x.webauthn.type==="create"){const{user:w}=x.webauthn.credential_options.publicKey;w.name||(w.name=`${w.id}:${c}`),w.displayName||(w.displayName=w.name)}switch(x.webauthn.type){case"create":{const w=k4(x.webauthn.credential_options.publicKey,g?.create),{data:T,error:S}=await D4({publicKey:w,signal:_});return T?{data:{factorId:r,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:T}},error:null}:{data:null,error:S}}case"request":{const w=L4(x.webauthn.credential_options.publicKey,g?.request),{data:T,error:S}=await M4(Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:w,signal:_}));return T?{data:{factorId:r,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:T}},error:null}:{data:null,error:S}}}}catch(x){return $e(x)?{data:null,error:x}:{data:null,error:new Is("Unexpected error in challenge",x)}}}async _verify({challengeId:r,factorId:a,webauthn:c}){return this.client.mfa.verify({factorId:a,challengeId:r,webauthn:c})}async _authenticate({factorId:r,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},g){if(!a)return{data:null,error:new qo("rpId is required for WebAuthn authentication")};try{if(!p2())return{data:null,error:new Is("Browser does not support WebAuthn",null)};const{data:x,error:b}=await this.challenge({factorId:r,webauthn:{rpId:a,rpOrigins:c},signal:d},{request:g});if(!x)return{data:null,error:b};const{webauthn:_}=x;return this._verify({factorId:r,challengeId:x.challengeId,webauthn:{type:_.type,rpId:a,rpOrigins:c,credential_response:_.credential_response}})}catch(x){return $e(x)?{data:null,error:x}:{data:null,error:new Is("Unexpected error in authenticate",x)}}}async _register({friendlyName:r,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},g){if(!a)return{data:null,error:new qo("rpId is required for WebAuthn registration")};try{if(!p2())return{data:null,error:new Is("Browser does not support WebAuthn",null)};const{data:x,error:b}=await this._enroll({friendlyName:r});if(!x)return await this.client.mfa.listFactors().then(T=>{var S;return(S=T.data)===null||S===void 0?void 0:S.all.find(M=>M.factor_type==="webauthn"&&M.friendly_name===r&&M.status!=="unverified")}).then(T=>T?this.client.mfa.unenroll({factorId:T?.id}):void 0),{data:null,error:b};const{data:_,error:w}=await this._challenge({factorId:x.id,friendlyName:x.friendly_name,webauthn:{rpId:a,rpOrigins:c},signal:d},{create:g});return _?this._verify({factorId:x.id,challengeId:_.challengeId,webauthn:{rpId:a,rpOrigins:c,type:_.webauthn.type,credential_response:_.webauthn.credential_response}}):{data:null,error:w}}catch(x){return $e(x)?{data:null,error:x}:{data:null,error:new Is("Unexpected error in register",x)}}}}b4();const U4={url:j3,storageKey:k3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:L3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function y2(s,r,a){return await a()}const _l={};class Xo{get jwks(){var r,a;return(a=(r=_l[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(r){_l[this.storageKey]=Object.assign(Object.assign({},_l[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,a;return(a=(r=_l[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){_l[this.storageKey]=Object.assign(Object.assign({},_l[this.storageKey]),{cachedAt:r})}constructor(r){var a,c,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const g=Object.assign(Object.assign({},U4),r);if(this.storageKey=g.storageKey,this.instanceID=(a=Xo.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Xo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!g.debug,typeof g.debug=="function"&&(this.logger=g.debug),this.instanceID>0&&rr()){const x=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(x),this.logDebugMessages&&console.trace(x)}if(this.persistSession=g.persistSession,this.autoRefreshToken=g.autoRefreshToken,this.admin=new p4({url:g.url,headers:g.headers,fetch:g.fetch}),this.url=g.url,this.headers=g.headers,this.fetch=np(g.fetch),this.lock=g.lock||y2,this.detectSessionInUrl=g.detectSessionInUrl,this.flowType=g.flowType,this.hasCustomAuthorizationHeader=g.hasCustomAuthorizationHeader,this.throwOnError=g.throwOnError,g.lock?this.lock=g.lock:rr()&&(!((c=globalThis?.navigator)===null||c===void 0)&&c.locks)?this.lock=w4:this.lock=y2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new P4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(g.storage?this.storage=g.storage:tp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=x2(this.memoryStorage)),g.userStorage&&(this.userStorage=g.userStorage)):(this.memoryStorage={},this.storage=x2(this.memoryStorage)),rr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(x){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",x)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async x=>{this._debug("received broadcast notification from other tab or client",x),await this._notifyAllSubscribers(x.data.event,x.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Jx}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let a={},c="none";if(rr()&&(a=Q3(window.location.href),this._isImplicitGrantCallback(a)?c="implicit":await this._isPKCECallback(a)&&(c="pkce")),rr()&&this.detectSessionInUrl&&c!=="none"){const{data:d,error:g}=await this._getSessionFromURL(a,c);if(g){if(this._debug("#_initialize()","error detecting session from URL",g),V3(g)){const _=(r=g.details)===null||r===void 0?void 0:r.code;if(_==="identity_already_exists"||_==="identity_not_found"||_==="single_identity_not_deletable")return{error:g}}return await this._removeSession(),{error:g}}const{session:x,redirectType:b}=d;return this._debug("#_initialize()","detected session in URL",x,"redirect type",b),await this._saveSession(x),setTimeout(async()=>{b==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",x):await this._notifyAllSubscribers("SIGNED_IN",x)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return $e(a)?this._returnResult({error:a}):this._returnResult({error:new Is("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var a,c,d;try{const g=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(c=(a=r?.options)===null||a===void 0?void 0:a.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:(d=r?.options)===null||d===void 0?void 0:d.captchaToken}},xform:mi}),{data:x,error:b}=g;if(b||!x)return this._returnResult({data:{user:null,session:null},error:b});const _=x.session,w=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:w,session:_},error:null})}catch(g){if($e(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signUp(r){var a,c,d;try{let g;if("email"in r){const{email:T,password:S,options:M}=r;let B=null,U=null;this.flowType==="pkce"&&([B,U]=await bl(this.storage,this.storageKey)),g=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:M?.emailRedirectTo,body:{email:T,password:S,data:(a=M?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:M?.captchaToken},code_challenge:B,code_challenge_method:U},xform:mi})}else if("phone"in r){const{phone:T,password:S,options:M}=r;g=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:T,password:S,data:(c=M?.data)!==null&&c!==void 0?c:{},channel:(d=M?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:M?.captchaToken}},xform:mi})}else throw new Cu("You must provide either an email or phone number and a password");const{data:x,error:b}=g;if(b||!x)return this._returnResult({data:{user:null,session:null},error:b});const _=x.session,w=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:w,session:_},error:null})}catch(g){if($e(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithPassword(r){try{let a;if("email"in r){const{email:g,password:x,options:b}=r;a=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:g,password:x,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:g2})}else if("phone"in r){const{phone:g,password:x,options:b}=r;a=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:g,password:x,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:g2})}else throw new Cu("You must provide either an email or phone number and a password");const{data:c,error:d}=a;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const g=new wl;return this._returnResult({data:{user:null,session:null},error:g})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:d})}catch(a){if($e(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(r){var a,c,d,g;return await this._handleProviderSignIn(r.provider,{redirectTo:(a=r.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=r.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=r.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(g=r.options)===null||g===void 0?void 0:g.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:a}=r;switch(a){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(r){var a,c,d,g,x,b,_,w,T,S,M;let B,U;if("message"in r)B=r.message,U=r.signature;else{const{chain:z,wallet:H,statement:$,options:te}=r;let G;if(rr())if(typeof H=="object")G=H;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")G=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!te?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=H}const oe=new URL((a=te?.url)!==null&&a!==void 0?a:window.location.href),xe=await G.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!xe||xe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const se=ip(xe[0]);let R=(c=te?.signInWithEthereum)===null||c===void 0?void 0:c.chainId;if(!R){const L=await G.request({method:"eth_chainId"});R=v4(L)}const W={domain:oe.host,address:se,statement:$,uri:oe.href,version:"1",chainId:R,nonce:(d=te?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(x=(g=te?.signInWithEthereum)===null||g===void 0?void 0:g.issuedAt)!==null&&x!==void 0?x:new Date,expirationTime:(b=te?.signInWithEthereum)===null||b===void 0?void 0:b.expirationTime,notBefore:(_=te?.signInWithEthereum)===null||_===void 0?void 0:_.notBefore,requestId:(w=te?.signInWithEthereum)===null||w===void 0?void 0:w.requestId,resources:(T=te?.signInWithEthereum)===null||T===void 0?void 0:T.resources};B=_4(W),U=await G.request({method:"personal_sign",params:[E4(B),se]})}try{const{data:z,error:H}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:B,signature:U},!((S=r.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(M=r.options)===null||M===void 0?void 0:M.captchaToken}}:null),xform:mi});if(H)throw H;if(!z||!z.session||!z.user){const $=new wl;return this._returnResult({data:{user:null,session:null},error:$})}return z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),this._returnResult({data:Object.assign({},z),error:H})}catch(z){if($e(z))return this._returnResult({data:{user:null,session:null},error:z});throw z}}async signInWithSolana(r){var a,c,d,g,x,b,_,w,T,S,M,B;let U,z;if("message"in r)U=r.message,z=r.signature;else{const{chain:H,wallet:$,statement:te,options:G}=r;let oe;if(rr())if(typeof $=="object")oe=$;else{const se=window;if("solana"in se&&typeof se.solana=="object"&&("signIn"in se.solana&&typeof se.solana.signIn=="function"||"signMessage"in se.solana&&typeof se.solana.signMessage=="function"))oe=se.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!G?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");oe=$}const xe=new URL((a=G?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in oe&&oe.signIn){const se=await oe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},G?.signInWithSolana),{version:"1",domain:xe.host,uri:xe.href}),te?{statement:te}:null));let R;if(Array.isArray(se)&&se[0]&&typeof se[0]=="object")R=se[0];else if(se&&typeof se=="object"&&"signedMessage"in se&&"signature"in se)R=se;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)U=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),z=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in oe)||typeof oe.signMessage!="function"||!("publicKey"in oe)||typeof oe!="object"||!oe.publicKey||!("toBase58"in oe.publicKey)||typeof oe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");U=[`${xe.host} wants you to sign in with your Solana account:`,oe.publicKey.toBase58(),...te?["",te,""]:[""],"Version: 1",`URI: ${xe.href}`,`Issued At: ${(d=(c=G?.signInWithSolana)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((g=G?.signInWithSolana)===null||g===void 0)&&g.notBefore?[`Not Before: ${G.signInWithSolana.notBefore}`]:[],...!((x=G?.signInWithSolana)===null||x===void 0)&&x.expirationTime?[`Expiration Time: ${G.signInWithSolana.expirationTime}`]:[],...!((b=G?.signInWithSolana)===null||b===void 0)&&b.chainId?[`Chain ID: ${G.signInWithSolana.chainId}`]:[],...!((_=G?.signInWithSolana)===null||_===void 0)&&_.nonce?[`Nonce: ${G.signInWithSolana.nonce}`]:[],...!((w=G?.signInWithSolana)===null||w===void 0)&&w.requestId?[`Request ID: ${G.signInWithSolana.requestId}`]:[],...!((S=(T=G?.signInWithSolana)===null||T===void 0?void 0:T.resources)===null||S===void 0)&&S.length?["Resources",...G.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const se=await oe.signMessage(new TextEncoder().encode(U),"utf8");if(!se||!(se instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");z=se}}try{const{data:H,error:$}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:Ms(z)},!((M=r.options)===null||M===void 0)&&M.captchaToken?{gotrue_meta_security:{captcha_token:(B=r.options)===null||B===void 0?void 0:B.captchaToken}}:null),xform:mi});if($)throw $;if(!H||!H.session||!H.user){const te=new wl;return this._returnResult({data:{user:null,session:null},error:te})}return H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),this._returnResult({data:Object.assign({},H),error:$})}catch(H){if($e(H))return this._returnResult({data:{user:null,session:null},error:H});throw H}}async _exchangeCodeForSession(r){const a=await Ts(this.storage,`${this.storageKey}-code-verifier`),[c,d]=(a??"").split("/");try{const{data:g,error:x}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:c},xform:mi});if(await Ya(this.storage,`${this.storageKey}-code-verifier`),x)throw x;if(!g||!g.session||!g.user){const b=new wl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign(Object.assign({},g),{redirectType:d??null}),error:x})}catch(g){if($e(g))return this._returnResult({data:{user:null,session:null,redirectType:null},error:g});throw g}}async signInWithIdToken(r){try{const{options:a,provider:c,token:d,access_token:g,nonce:x}=r,b=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:d,access_token:g,nonce:x,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:mi}),{data:_,error:w}=b;if(w)return this._returnResult({data:{user:null,session:null},error:w});if(!_||!_.session||!_.user){const T=new wl;return this._returnResult({data:{user:null,session:null},error:T})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:_,error:w})}catch(a){if($e(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(r){var a,c,d,g,x;try{if("email"in r){const{email:b,options:_}=r;let w=null,T=null;this.flowType==="pkce"&&([w,T]=await bl(this.storage,this.storageKey));const{error:S}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:b,data:(a=_?.data)!==null&&a!==void 0?a:{},create_user:(c=_?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:w,code_challenge_method:T},redirectTo:_?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:S})}if("phone"in r){const{phone:b,options:_}=r,{data:w,error:T}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:(d=_?.data)!==null&&d!==void 0?d:{},create_user:(g=_?.shouldCreateUser)!==null&&g!==void 0?g:!0,gotrue_meta_security:{captcha_token:_?.captchaToken},channel:(x=_?.channel)!==null&&x!==void 0?x:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:w?.message_id},error:T})}throw new Cu("You must provide either an email or phone number.")}catch(b){if($e(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async verifyOtp(r){var a,c;try{let d,g;"options"in r&&(d=(a=r.options)===null||a===void 0?void 0:a.redirectTo,g=(c=r.options)===null||c===void 0?void 0:c.captchaToken);const{data:x,error:b}=await ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:g}}),redirectTo:d,xform:mi});if(b)throw b;if(!x)throw new Error("An error occurred on token verification.");const _=x.session,w=x.user;return _?.access_token&&(await this._saveSession(_),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",_)),this._returnResult({data:{user:w,session:_},error:null})}catch(d){if($e(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(r){var a,c,d,g,x;try{let b=null,_=null;this.flowType==="pkce"&&([b,_]=await bl(this.storage,this.storageKey));const w=await ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(c=(a=r.options)===null||a===void 0?void 0:a.redirectTo)!==null&&c!==void 0?c:void 0}),!((d=r?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:b,code_challenge_method:_}),headers:this.headers,xform:g4});return!((g=w.data)===null||g===void 0)&&g.url&&rr()&&!(!((x=r.options)===null||x===void 0)&&x.skipBrowserRedirect)&&window.location.assign(w.data.url),this._returnResult(w)}catch(b){if($e(b))return this._returnResult({data:null,error:b});throw b}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:a},error:c}=r;if(c)throw c;if(!a)throw new Ur;const{error:d}=await ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(r){if($e(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const a=`${this.url}/resend`;if("email"in r){const{email:c,type:d,options:g}=r,{error:x}=await ot(this.fetch,"POST",a,{headers:this.headers,body:{email:c,type:d,gotrue_meta_security:{captcha_token:g?.captchaToken}},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}else if("phone"in r){const{phone:c,type:d,options:g}=r,{data:x,error:b}=await ot(this.fetch,"POST",a,{headers:this.headers,body:{phone:c,type:d,gotrue_meta_security:{captcha_token:g?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:x?.message_id},error:b})}throw new Cu("You must provide either an email or phone number and a type")}catch(a){if($e(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(r,a){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const c=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await c,await a()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const c=a();for(this.pendingInLock.push((async()=>{try{await c}catch{}})()),await c;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await c}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await r(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const a=await Ts(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?r=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const c=r.expires_at?r.expires_at*1e3-Date.now()<ld:!1;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",r.expires_at),!c){if(this.userStorage){const x=await Ts(this.userStorage,this.storageKey+"-user");x?.user?r.user=x.user:r.user=ud()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const x={value:this.suppressGetSessionWarning};r.user=u4(r.user,x),x.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:d,error:g}=await this._callRefreshToken(r.refresh_token);return g?this._returnResult({data:{session:null},error:g}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:$a}):await this._useSession(async a=>{var c,d,g;const{data:x,error:b}=a;if(b)throw b;return!(!((c=x.session)===null||c===void 0)&&c.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ur}:await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(g=(d=x.session)===null||d===void 0?void 0:d.access_token)!==null&&g!==void 0?g:void 0,xform:$a})})}catch(a){if($e(a))return H3(a)&&(await this._removeSession(),await Ya(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(r,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,a))}async _updateUser(r,a={}){try{return await this._useSession(async c=>{const{data:d,error:g}=c;if(g)throw g;if(!d.session)throw new Ur;const x=d.session;let b=null,_=null;this.flowType==="pkce"&&r.email!=null&&([b,_]=await bl(this.storage,this.storageKey));const{data:w,error:T}=await ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:b,code_challenge_method:_}),jwt:x.access_token,xform:$a});if(T)throw T;return x.user=w.user,await this._saveSession(x),await this._notifyAllSubscribers("USER_UPDATED",x),this._returnResult({data:{user:x.user},error:null})})}catch(c){if($e(c))return this._returnResult({data:{user:null},error:c});throw c}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new Ur;const a=Date.now()/1e3;let c=a,d=!0,g=null;const{payload:x}=cd(r.access_token);if(x.exp&&(c=x.exp,d=c<=a),d){const{data:b,error:_}=await this._callRefreshToken(r.refresh_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});if(!b)return{data:{user:null,session:null},error:null};g=b}else{const{data:b,error:_}=await this._getUser(r.access_token);if(_)throw _;g={access_token:r.access_token,refresh_token:r.refresh_token,user:b.user,token_type:"bearer",expires_in:c-a,expires_at:c},await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)}return this._returnResult({data:{user:g.user,session:g},error:null})}catch(a){if($e(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async a=>{var c;if(!r){const{data:x,error:b}=a;if(b)throw b;r=(c=x.session)!==null&&c!==void 0?c:void 0}if(!r?.refresh_token)throw new Ur;const{data:d,error:g}=await this._callRefreshToken(r.refresh_token);return g?this._returnResult({data:{user:null,session:null},error:g}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if($e(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(r,a){try{if(!rr())throw new Su("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Su(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new l2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Su("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new l2("No code detected.");const{data:te,error:G}=await this._exchangeCodeForSession(r.code);if(G)throw G;const oe=new URL(window.location.href);return oe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",oe.toString()),{data:{session:te.session,redirectType:null},error:null}}const{provider_token:c,provider_refresh_token:d,access_token:g,refresh_token:x,expires_in:b,expires_at:_,token_type:w}=r;if(!g||!b||!x||!w)throw new Su("No session defined in URL");const T=Math.round(Date.now()/1e3),S=parseInt(b);let M=T+S;_&&(M=parseInt(_));const B=M-T;B*1e3<=Sl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${B}s, should have been closer to ${S}s`);const U=M-S;T-U>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",U,M,T):T-U<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",U,M,T);const{data:z,error:H}=await this._getUser(g);if(H)throw H;const $={provider_token:c,provider_refresh_token:d,access_token:g,expires_in:S,expires_at:M,refresh_token:x,token_type:w,user:z.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:$,redirectType:r.type},error:null})}catch(c){if($e(c))return this._returnResult({data:{session:null,redirectType:null},error:c});throw c}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const a=await Ts(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&a)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async a=>{var c;const{data:d,error:g}=a;if(g)return this._returnResult({error:g});const x=(c=d.session)===null||c===void 0?void 0:c.access_token;if(x){const{error:b}=await this.admin.signOut(x,r);if(b&&!(z3(b)&&(b.status===404||b.status===401||b.status===403)))return this._returnResult({error:b})}return r!=="others"&&(await this._removeSession(),await Ya(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const a=Z3(),c={id:a,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,c),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:c}}}async _emitInitialSession(r){return await this._useSession(async a=>{var c,d;try{const{data:{session:g},error:x}=a;if(x)throw x;await((c=this.stateChangeEmitters.get(r))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",g)),this._debug("INITIAL_SESSION","callback id",r,"session",g)}catch(g){await((d=this.stateChangeEmitters.get(r))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",g),console.error(g)}})}async resetPasswordForEmail(r,a={}){let c=null,d=null;this.flowType==="pkce"&&([c,d]=await bl(this.storage,this.storageKey,!0));try{return await ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:c,code_challenge_method:d,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(g){if($e(g))return this._returnResult({data:null,error:g});throw g}}async getUserIdentities(){var r;try{const{data:a,error:c}=await this.getUser();if(c)throw c;return this._returnResult({data:{identities:(r=a.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var a;try{const{data:c,error:d}=await this._useSession(async g=>{var x,b,_,w,T;const{data:S,error:M}=g;if(M)throw M;const B=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(x=r.options)===null||x===void 0?void 0:x.redirectTo,scopes:(b=r.options)===null||b===void 0?void 0:b.scopes,queryParams:(_=r.options)===null||_===void 0?void 0:_.queryParams,skipBrowserRedirect:!0});return await ot(this.fetch,"GET",B,{headers:this.headers,jwt:(T=(w=S.session)===null||w===void 0?void 0:w.access_token)!==null&&T!==void 0?T:void 0})});if(d)throw d;return rr()&&!(!((a=r.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c?.url),this._returnResult({data:{provider:r.provider,url:c?.url},error:null})}catch(c){if($e(c))return this._returnResult({data:{provider:r.provider,url:null},error:c});throw c}}async linkIdentityIdToken(r){return await this._useSession(async a=>{var c;try{const{error:d,data:{session:g}}=a;if(d)throw d;const{options:x,provider:b,token:_,access_token:w,nonce:T}=r,S=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(c=g?.access_token)!==null&&c!==void 0?c:void 0,body:{provider:b,id_token:_,access_token:w,nonce:T,link_identity:!0,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:mi}),{data:M,error:B}=S;return B?this._returnResult({data:{user:null,session:null},error:B}):!M||!M.session||!M.user?this._returnResult({data:{user:null,session:null},error:new wl}):(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("USER_UPDATED",M.session)),this._returnResult({data:M,error:B}))}catch(d){if($e(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(r){try{return await this._useSession(async a=>{var c,d;const{data:g,error:x}=a;if(x)throw x;return await ot(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(d=(c=g.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(r){const a=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(a,"begin");try{const c=Date.now();return await e4(async d=>(d>0&&await $3(200*Math.pow(2,d-1)),this._debug(a,"refreshing attempt",d),await ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:mi})),(d,g)=>{const x=200*Math.pow(2,d);return g&&od(g)&&Date.now()+x-c<Sl})}catch(c){if(this._debug(a,"error",c),$e(c))return this._returnResult({data:{session:null,user:null},error:c});throw c}finally{this._debug(a,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,a){const c=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",a,"url",c),rr()&&!a.skipBrowserRedirect&&window.location.assign(c),{data:{provider:r,url:c},error:null}}async _recoverAndRefresh(){var r,a;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const d=await Ts(this.storage,this.storageKey);if(d&&this.userStorage){let x=await Ts(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!x&&(x={user:d.user},await Tl(this.userStorage,this.storageKey+"-user",x)),d.user=(r=x?.user)!==null&&r!==void 0?r:ud()}else if(d&&!d.user&&!d.user){const x=await Ts(this.storage,this.storageKey+"-user");x&&x?.user?(d.user=x.user,await Ya(this.storage,this.storageKey+"-user"),await Tl(this.storage,this.storageKey,d)):d.user=ud()}if(this._debug(c,"session from storage",d),!this._isValidSession(d)){this._debug(c,"session is not valid"),d!==null&&await this._removeSession();return}const g=((a=d.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<ld;if(this._debug(c,`session has${g?"":" not"} expired with margin of ${ld}s`),g){if(this.autoRefreshToken&&d.refresh_token){const{error:x}=await this._callRefreshToken(d.refresh_token);x&&(console.error(x),od(x)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",x),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:x,error:b}=await this._getUser(d.access_token);!b&&x?.user?(d.user=x.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(x){console.error("Error getting user data:",x),this._debug(c,"error getting user data, skipping SIGNED_IN notification",x)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(c,"error",d),console.error(d);return}finally{this._debug(c,"end")}}async _callRefreshToken(r){var a,c;if(!r)throw new Ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Ju;const{data:g,error:x}=await this._refreshAccessToken(r);if(x)throw x;if(!g.session)throw new Ur;await this._saveSession(g.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",g.session);const b={data:g.session,error:null};return this.refreshingDeferred.resolve(b),b}catch(g){if(this._debug(d,"error",g),$e(g)){const x={data:null,error:g};return od(g)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(x),x}throw(c=this.refreshingDeferred)===null||c===void 0||c.reject(g),g}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(r,a,c=!0){const d=`#_notifyAllSubscribers(${r})`;this._debug(d,"begin",a,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:r,session:a});const g=[],x=Array.from(this.stateChangeEmitters.values()).map(async b=>{try{await b.callback(r,a)}catch(_){g.push(_)}});if(await Promise.all(x),g.length>0){for(let b=0;b<g.length;b+=1)console.error(g[b]);throw g[0]}}finally{this._debug(d,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const a=Object.assign({},r),c=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!c&&a.user&&await Tl(this.userStorage,this.storageKey+"-user",{user:a.user});const d=Object.assign({},a);delete d.user;const g=h2(d);await Tl(this.storage,this.storageKey,g)}else{const d=h2(a);await Tl(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),await Ya(this.storage,this.storageKey),await Ya(this.storage,this.storageKey+"-code-verifier"),await Ya(this.storage,this.storageKey+"-user"),this.userStorage&&await Ya(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&rr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Sl);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async a=>{const{data:{session:c}}=a;if(!c||!c.refresh_token||!c.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((c.expires_at*1e3-r)/Sl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${Sl}ms, refresh threshold is ${Dd} ticks`),d<=Dd&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof rp)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const a=`#_onVisibilityChanged(${r})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,a,c){const d=[`provider=${encodeURIComponent(a)}`];if(c?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),c?.scopes&&d.push(`scopes=${encodeURIComponent(c.scopes)}`),this.flowType==="pkce"){const[g,x]=await bl(this.storage,this.storageKey),b=new URLSearchParams({code_challenge:`${encodeURIComponent(g)}`,code_challenge_method:`${encodeURIComponent(x)}`});d.push(b.toString())}if(c?.queryParams){const g=new URLSearchParams(c.queryParams);d.push(g.toString())}return c?.skipBrowserRedirect&&d.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${r}?${d.join("&")}`}async _unenroll(r){try{return await this._useSession(async a=>{var c;const{data:d,error:g}=a;return g?this._returnResult({data:null,error:g}):await ot(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(c=d?.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(r){try{return await this._useSession(async a=>{var c,d;const{data:g,error:x}=a;if(x)return this._returnResult({data:null,error:x});const b=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:_,error:w}=await ot(this.fetch,"POST",`${this.url}/factors`,{body:b,headers:this.headers,jwt:(c=g?.session)===null||c===void 0?void 0:c.access_token});return w?this._returnResult({data:null,error:w}):(r.factorType==="totp"&&_.type==="totp"&&(!((d=_?.totp)===null||d===void 0)&&d.qr_code)&&(_.totp.qr_code=`data:image/svg+xml;utf-8,${_.totp.qr_code}`),this._returnResult({data:_,error:null}))})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:d,error:g}=a;if(g)return this._returnResult({data:null,error:g});const x=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?R4(r.webauthn.credential_response):I4(r.webauthn.credential_response)})}:{code:r.code}),{data:b,error:_}=await ot(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:x,headers:this.headers,jwt:(c=d?.session)===null||c===void 0?void 0:c.access_token});return _?this._returnResult({data:null,error:_}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+b.expires_in},b)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",b),this._returnResult({data:b,error:_}))})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:d,error:g}=a;if(g)return this._returnResult({data:null,error:g});const x=await ot(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(c=d?.session)===null||c===void 0?void 0:c.access_token});if(x.error)return x;const{data:b}=x;if(b.type!=="webauthn")return{data:b,error:null};switch(b.webauthn.type){case"create":return{data:Object.assign(Object.assign({},b),{webauthn:Object.assign(Object.assign({},b.webauthn),{credential_options:Object.assign(Object.assign({},b.webauthn.credential_options),{publicKey:N4(b.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},b),{webauthn:Object.assign(Object.assign({},b.webauthn),{credential_options:Object.assign(Object.assign({},b.webauthn.credential_options),{publicKey:O4(b.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(r){const{data:a,error:c}=await this._challenge({factorId:r.factorId});return c?this._returnResult({data:null,error:c}):await this._verify({factorId:r.factorId,challengeId:a.id,code:r.code})}async _listFactors(){var r;const{data:{user:a},error:c}=await this.getUser();if(c)return{data:null,error:c};const d={all:[],phone:[],totp:[],webauthn:[]};for(const g of(r=a?.factors)!==null&&r!==void 0?r:[])d.all.push(g),g.status==="verified"&&d[g.factor_type].push(g);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var r,a;const{data:{session:c},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=cd(c.access_token);let x=null;g.aal&&(x=g.aal);let b=x;((a=(r=c.user.factors)===null||r===void 0?void 0:r.filter(T=>T.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(b="aal2");const w=g.amr||[];return{data:{currentLevel:x,nextLevel:b,currentAuthenticationMethods:w},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async a=>{const{data:{session:c},error:d}=a;return d?this._returnResult({data:null,error:d}):c?await ot(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:c.access_token,xform:g=>({data:g,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(r,a){try{return await this._useSession(async c=>{const{data:{session:d},error:g}=c;if(g)return this._returnResult({data:null,error:g});if(!d)return this._returnResult({data:null,error:new Ur});const x=await ot(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:b=>({data:b,error:null})});return x.data&&x.data.redirect_url&&rr()&&!a?.skipBrowserRedirect&&window.location.assign(x.data.redirect_url),x})}catch(c){if($e(c))return this._returnResult({data:null,error:c});throw c}}async _denyAuthorization(r,a){try{return await this._useSession(async c=>{const{data:{session:d},error:g}=c;if(g)return this._returnResult({data:null,error:g});if(!d)return this._returnResult({data:null,error:new Ur});const x=await ot(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:b=>({data:b,error:null})});return x.data&&x.data.redirect_url&&rr()&&!a?.skipBrowserRedirect&&window.location.assign(x.data.redirect_url),x})}catch(c){if($e(c))return this._returnResult({data:null,error:c});throw c}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:a},error:c}=r;return c?this._returnResult({data:null,error:c}):a?await ot(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(r){if($e(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async a=>{const{data:{session:c},error:d}=a;return d?this._returnResult({data:null,error:d}):c?(await ot(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:c.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ur})})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(r,a={keys:[]}){let c=a.keys.find(b=>b.kid===r);if(c)return c;const d=Date.now();if(c=this.jwks.keys.find(b=>b.kid===r),c&&this.jwks_cached_at+U3>d)return c;const{data:g,error:x}=await ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(x)throw x;return!g.keys||g.keys.length===0||(this.jwks=g,this.jwks_cached_at=d,c=g.keys.find(b=>b.kid===r),!c)?null:c}async getClaims(r,a={}){try{let c=r;if(!c){const{data:B,error:U}=await this.getSession();if(U||!B.session)return this._returnResult({data:null,error:U});c=B.session.access_token}const{header:d,payload:g,signature:x,raw:{header:b,payload:_}}=cd(c);a?.allowExpired||l4(g.exp);const w=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!w){const{error:B}=await this.getUser(c);if(B)throw B;return{data:{claims:g,header:d,signature:x},error:null}}const T=o4(d.alg),S=await crypto.subtle.importKey("jwk",w,T,!0,["verify"]);if(!await crypto.subtle.verify(T,S,x,W3(`${b}.${_}`)))throw new jd("Invalid JWT signature");return{data:{claims:g,header:d,signature:x},error:null}}catch(c){if($e(c))return this._returnResult({data:null,error:c});throw c}}}Xo.nextInstanceID={};const F4=Xo;class z4 extends F4{constructor(r){super(r)}}class H4{constructor(r,a,c){var d,g,x;this.supabaseUrl=r,this.supabaseKey=a;const b=B3(r);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const _=`sb-${b.hostname.split(".")[0]}-auth-token`,w={db:S3,realtime:N3,auth:Object.assign(Object.assign({},T3),{storageKey:_}),global:C3},T=M3(c??{},w);this.storageKey=(d=T.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(g=T.global.headers)!==null&&g!==void 0?g:{},T.accessToken?(this.accessToken=T.accessToken,this.auth=new Proxy({},{get:(S,M)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(M)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((x=T.auth)!==null&&x!==void 0?x:{},this.headers,T.global.fetch),this.fetch=I3(a,this._getAccessToken.bind(this),T.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},T.realtime)),this.accessToken&&this.accessToken().then(S=>this.realtime.setAuth(S)).catch(S=>console.warn("Failed to set initial Realtime auth token:",S)),this.rest=new Nv(new URL("rest/v1",b).href,{headers:this.headers,schema:T.db.schema,fetch:this.fetch}),this.storage=new E3(this.storageUrl.href,this.headers,this.fetch,c?.storage),T.accessToken||this._listenForAuthEvents()}get functions(){return new Av(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,a={},c={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,a,c)}channel(r,a={config:{}}){return this.realtime.channel(r,a)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r,a;if(this.accessToken)return await this.accessToken();const{data:c}=await this.auth.getSession();return(a=(r=c.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:a,detectSessionInUrl:c,storage:d,userStorage:g,storageKey:x,flowType:b,lock:_,debug:w,throwOnError:T},S,M){const B={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new z4({url:this.authUrl.href,headers:Object.assign(Object.assign({},B),S),storageKey:x,autoRefreshToken:r,persistSession:a,detectSessionInUrl:c,storage:d,userStorage:g,flowType:b,lock:_,debug:w,throwOnError:T,fetch:M,hasCustomAuthorizationHeader:Object.keys(this.headers).some(U=>U.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new qv(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,c)=>{this._handleTokenChanged(a,"CLIENT",c?.access_token)})}_handleTokenChanged(r,a,c){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==c?(this.changedAccessToken=c,this.realtime.setAuth(c)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const V4=(s,r,a)=>new H4(s,r,a);function G4(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const r=s.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}G4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const q4="https://mecvspllrrmglqoertqd.supabase.co",X4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1lY3ZzcGxscnJtZ2xxb2VydHFkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3NDU1MjMsImV4cCI6MjA4MDMyMTUyM30.761VROa0aehveE3rU-GfaN7NXzL2lNn2ghJIB26BKS8",Gr=V4(q4,X4),Y4=async()=>Gr.auth.signOut(),W4=async()=>Gr.auth.signInWithOAuth({provider:"google",options:{redirectTo:"https://mecvspllrrmglqoertqd.supabase.co/auth/v1/callback"}}),K4=async(s,r)=>Gr.auth.signInWithPassword({email:s,password:r}),Z4=async(s,r,a)=>{const c={role:"user"};return Gr.auth.signUp({email:s,password:r,options:{data:c}})},sp=Z.createContext({}),Q4=({children:s})=>{const[r,a]=Z.useState(null),[c,d]=Z.useState(null),[g,x]=Z.useState(!0);Z.useEffect(()=>{const{data:{subscription:w}}=Gr.auth.onAuthStateChange(async(T,S)=>{d(S),a(S?.user??null),x(!1);try{const M=S?.user;if(M&&(!M.user_metadata||!M.user_metadata.role)){await Gr.auth.updateUser({data:{role:"user",...M.user_metadata||{}}});const B=await Gr.auth.getSession();d(B.data.session),a(B.data.session?.user??null)}}catch(M){console.error("Erreur lors de la mise  jour du role par dfaut (onAuthStateChange):",M)}});return()=>w.unsubscribe()},[]);const _={user:r,session:c,loading:g,signOut:()=>Y4(),isAdmin:(()=>{if(!r)return!1;const w=r.user_metadata?.role||r.app_metadata?.role;return w==="admin"||w==="dev"})()};return C.jsx(sp.Provider,{value:_,children:s})},Di=()=>{const s=Z.useContext(sp);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s};function J4(){const{user:s,isAdmin:r}=Di(),a=la();return Z.useEffect(()=>{s&&r&&a("/admin")},[s,r,a]),C.jsx("div",{className:"container mx-auto px-4 py-12",children:C.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[C.jsxs("h1",{className:"text-4xl font-bold mb-4 text-gray-800",children:["Bienvenue ",s?s.user_metadata?.full_name||s.email:"sur notre site"," !"]}),C.jsx("p",{className:"text-xl text-gray-600 mb-8",children:s?"Vous tes connect avec succs.":"Connectez-vous pour accder  toutes les fonctionnalits."}),C.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[C.jsx(Ri,{to:"/scanner",className:"inline-block px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition shadow-md hover:shadow-lg",children:"Scanner un QR Code"}),s?C.jsx(Ri,{to:"/profile",className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition shadow-md hover:shadow-lg",children:"Voir mon profil"}):C.jsx(Ri,{to:"/login",className:"inline-block px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition shadow-md hover:shadow-lg",children:"Se connecter"})]})]})})}const lp="/assets/logo-Mao1-Bm70uRq3.PNG";function $4(){const s=la(),{user:r}=Di(),[a,c]=Z.useState(!1),[d,g]=Z.useState({name:"",email:"",password:"",confirmPassword:""}),[x,b]=Z.useState(!1),[_,w]=Z.useState(!1),[T,S]=Z.useState(!1),[M,B]=Z.useState(""),[U,z]=Z.useState(""),[H,$]=Z.useState(!1),[te,G]=Z.useState(!1);Z.useEffect(()=>{if(r){const R=r.user_metadata?.role||r.app_metadata?.role;s(R==="admin"||R==="dev"?"/admin":"/")}},[r,s]);async function oe(){B(""),S(!0);try{const{error:R}=await W4();if(R)throw R}catch(R){B(R.message)}finally{S(!1)}}async function xe(R){if(R.preventDefault(),B(""),z(""),a){if(d.password!==d.confirmPassword){B("Les mots de passe ne correspondent pas");return}if(!_){B("Vous devez accepter les conditions d'utilisation");return}}S(!0);try{if(a){const{data:W,error:L}=await Z4(d.email,d.password);if(L)throw L;const he=W?.user;console.log("Utilisateur cr:",he),z("Inscription russie ! Vrifiez vos emails pour confirmer votre compte."),g({name:"",email:"",password:"",confirmPassword:""}),w(!1)}else{const{data:W,error:L}=await K4(d.email,d.password);if(L)throw L;const he=W?.user?.user_metadata?.role||W?.user?.app_metadata?.role;s(he==="admin"||he==="dev"?"/admin":"/")}}catch(W){B(W.message)}finally{S(!1)}}const se=(R,W)=>{g(L=>({...L,[R]:W}))};return C.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-orange-100 px-4 py-8",children:C.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-2xl p-8",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("div",{className:"flex justify-center mb-4",children:C.jsx("div",{className:"w-24 h-24 bg-orange-500 rounded-3xl flex items-center justify-center shadow-lg",children:C.jsx("img",{src:lp,alt:"MAO Code",className:"w-20 h-20 object-contain"})})}),C.jsx("p",{className:"text-gray-600 text-sm",children:"Dcouvre l'art qui parle"})]}),C.jsxs("div",{className:"flex mb-6 border-b border-gray-200",children:[C.jsxs("button",{onClick:()=>c(!1),className:`flex-1 pb-3 text-center font-medium transition-colors relative ${a?"text-gray-400":"text-orange-500"}`,children:["Connexion",!a&&C.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-orange-500"})]}),C.jsxs("button",{onClick:()=>c(!0),className:`flex-1 pb-3 text-center font-medium transition-colors relative ${a?"text-orange-500":"text-gray-400"}`,children:["Inscription",a&&C.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-orange-500"})]})]}),M&&C.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-xl text-sm",children:M}),U&&C.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded-xl text-sm",children:U}),C.jsxs("form",{onSubmit:xe,className:"space-y-4 mb-6",children:[a&&C.jsx("div",{children:C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:C.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),C.jsx("input",{type:"text",value:d.name,onChange:R=>se("name",R.target.value),required:a,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:"Ton nom",disabled:T})]})}),C.jsx("div",{children:C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:C.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),C.jsx("input",{type:"email",value:d.email,onChange:R=>se("email",R.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:"ton@email.com",disabled:T})]})}),C.jsx("div",{children:C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:C.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),C.jsx("input",{type:H?"text":"password",value:d.password,onChange:R=>se("password",R.target.value),required:!0,minLength:6,className:"w-full pl-12 pr-12 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:"Mot de passe",disabled:T}),C.jsx("button",{type:"button",onClick:()=>$(!H),className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:C.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:H?C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}):C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]})}),a&&C.jsx("div",{children:C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:C.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),C.jsx("input",{type:te?"text":"password",value:d.confirmPassword,onChange:R=>se("confirmPassword",R.target.value),required:a,minLength:6,className:"w-full pl-12 pr-12 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:"Confirme ton mot de passe",disabled:T}),C.jsx("button",{type:"button",onClick:()=>G(!te),className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:C.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:te?C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}):C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]})}),!a&&C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("label",{className:"flex items-center cursor-pointer",children:[C.jsx("input",{type:"checkbox",checked:x,onChange:R=>b(R.target.checked),className:"w-4 h-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500",disabled:T}),C.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Se souvenir de moi"})]}),C.jsx("a",{href:"#",className:"text-sm text-blue-600 hover:text-blue-700",children:"Mot de passe oubli ?"})]}),a&&C.jsxs("label",{className:"flex items-start cursor-pointer",children:[C.jsx("input",{type:"checkbox",checked:_,onChange:R=>w(R.target.checked),className:"w-4 h-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500 mt-0.5",disabled:T}),C.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["J'accepte les ",C.jsx("span",{className:"text-orange-500 font-medium",children:"conditions d'utilisation"})]})]}),C.jsx("button",{type:"submit",disabled:T,className:"w-full py-3 bg-orange-500 hover:bg-orange-600 text-white font-semibold rounded-xl transition shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Chargement...":a?"Crer mon compte":"Se connecter"})]}),C.jsxs("div",{className:"relative mb-6",children:[C.jsx("div",{className:"absolute inset-0 flex items-center",children:C.jsx("div",{className:"w-full border-t border-gray-300"})}),C.jsx("div",{className:"relative flex justify-center text-sm",children:C.jsx("span",{className:"px-2 bg-white text-gray-500",children:"OU"})})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("button",{onClick:oe,disabled:T,className:"w-full py-3 bg-white hover:bg-gray-50 text-gray-700 font-medium rounded-xl border border-gray-300 transition flex items-center justify-center gap-3 shadow-sm hover:shadow disabled:opacity-50 disabled:cursor-not-allowed",children:[C.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[C.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),C.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),C.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),C.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google"]}),C.jsxs("button",{disabled:T,className:"w-full py-3 bg-black hover:bg-gray-900 text-white font-medium rounded-xl transition flex items-center justify-center gap-3 shadow-sm hover:shadow disabled:opacity-50 disabled:cursor-not-allowed",children:[C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701"})}),"Continuer avec Apple"]})]}),C.jsx("div",{className:"mt-6 text-center",children:C.jsxs("p",{className:"text-sm text-gray-600",children:[a?"Dj un compte ?":"Pas de compte ?"," ",C.jsx("button",{onClick:()=>c(!a),className:"text-orange-500 hover:text-orange-600 font-medium",disabled:T,children:a?"Se connecter":"S'inscrire"})]})})]})})}const eE=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tE=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,a,c)=>c?c.toUpperCase():a.toLowerCase()),w2=s=>{const r=tE(s);return r.charAt(0).toUpperCase()+r.slice(1)},op=(...s)=>s.filter((r,a,c)=>!!r&&r.trim()!==""&&c.indexOf(r)===a).join(" ").trim(),nE=s=>{for(const r in s)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var rE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const iE=Z.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:d="",children:g,iconNode:x,...b},_)=>Z.createElement("svg",{ref:_,...rE,width:r,height:r,stroke:s,strokeWidth:c?Number(a)*24/Number(r):a,className:op("lucide",d),...!g&&!nE(b)&&{"aria-hidden":"true"},...b},[...x.map(([w,T])=>Z.createElement(w,T)),...Array.isArray(g)?g:[g]]));const wn=(s,r)=>{const a=Z.forwardRef(({className:c,...d},g)=>Z.createElement(iE,{ref:g,iconNode:r,className:op(`lucide-${eE(w2(s))}`,`lucide-${s}`,c),...d}));return a.displayName=w2(s),a};const aE=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],sE=wn("arrow-left",aE);const lE=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],oE=wn("bell",lE);const cE=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],cp=wn("camera",cE);const uE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],up=wn("check",uE);const fE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],hE=wn("circle-alert",fE);const dE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gE=wn("circle-question-mark",dE);const mE=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xE=wn("clock",mE);const pE=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],yE=wn("credit-card",pE);const wE=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],bE=wn("crown",wE);const vE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],hd=wn("image",vE);const EE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_E=wn("info",EE);const AE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],b2=wn("lock",AE);const CE=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fp=wn("log-out",CE);const SE=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],dd=wn("mail",SE);const TE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Uu=wn("map-pin",TE);const NE=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],OE=wn("menu",NE);const RE=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],gd=wn("message-circle",RE);const IE=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Yo=wn("mic",IE);const DE=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ME=wn("rotate-ccw",DE);const BE=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hp=wn("settings",BE);const jE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],kE=wn("shield",jE);const LE=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],kd=wn("trophy",LE);const PE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],n0=wn("user",PE);const UE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],r0=wn("x",UE);function FE({isOpen:s,onClose:r,user:a,onSave:c}){const[d,g]=Z.useState({fullName:a?.user_metadata?.full_name||"",currentEmail:a?.email||"",newEmail:"",currentPassword:"",newPassword:"",confirmPassword:""}),[x,b]=Z.useState("profile"),[_,w]=Z.useState(!1),[T,S]=Z.useState(""),[M,B]=Z.useState(""),[U,z]=Z.useState(!1),H=xe=>xe?xe.split(" ").map(se=>se[0]).join("").toUpperCase().slice(0,2):a?.email?.[0]?.toUpperCase()||"U",$=(xe,se)=>{g(R=>({...R,[xe]:se})),S(""),B("")},te=async()=>{S(""),B(""),w(!0);try{await c({fullName:d.fullName}),B("Profil mis  jour avec succs !"),setTimeout(()=>{r()},1500)}catch(xe){S(xe.message||"Erreur lors de la mise  jour")}finally{w(!1)}},G=async()=>{if(!d.newEmail){S("Veuillez entrer une nouvelle adresse email");return}S(""),w(!0);try{z(!0),B("Email de confirmation envoy ! Vrifiez votre bote de rception.")}catch(xe){S(xe.message||"Erreur lors de l'envoi de la confirmation")}finally{w(!1)}},oe=async()=>{if(!d.currentPassword){S("Veuillez entrer votre mot de passe actuel");return}if(!d.newPassword||d.newPassword.length<6){S("Le nouveau mot de passe doit contenir au moins 6 caractres");return}if(d.newPassword!==d.confirmPassword){S("Les mots de passe ne correspondent pas");return}S(""),w(!0);try{B("Mot de passe modifi avec succs !"),g(xe=>({...xe,currentPassword:"",newPassword:"",confirmPassword:""})),setTimeout(()=>{b("profile")},1500)}catch(xe){S(xe.message||"Erreur lors du changement de mot de passe")}finally{w(!1)}};return s?C.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:[C.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col animate-slideUp",children:[C.jsxs("div",{className:"flex items-center justify-between p-4 lg:p-6 border-b",children:[C.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-gray-800",children:"Modifier le profil"}),C.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition",children:C.jsx(r0,{className:"w-5 h-5 text-gray-600"})})]}),C.jsxs("div",{className:"flex border-b bg-gray-50",children:[C.jsxs("button",{onClick:()=>b("profile"),className:`flex-1 py-3 px-4 text-sm font-medium transition relative ${x==="profile"?"text-orange-600 bg-white":"text-gray-600 hover:text-gray-800"}`,children:[C.jsx(n0,{className:"w-4 h-4 inline mr-2"}),"Profil",x==="profile"&&C.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-orange-600"})]}),C.jsxs("button",{onClick:()=>b("email"),className:`flex-1 py-3 px-4 text-sm font-medium transition relative ${x==="email"?"text-orange-600 bg-white":"text-gray-600 hover:text-gray-800"}`,children:[C.jsx(dd,{className:"w-4 h-4 inline mr-2"}),"Email",x==="email"&&C.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-orange-600"})]}),C.jsxs("button",{onClick:()=>b("password"),className:`flex-1 py-3 px-4 text-sm font-medium transition relative ${x==="password"?"text-orange-600 bg-white":"text-gray-600 hover:text-gray-800"}`,children:[C.jsx(b2,{className:"w-4 h-4 inline mr-2"}),"Mot de passe",x==="password"&&C.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-orange-600"})]})]}),T&&C.jsxs("div",{className:"mx-4 lg:mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[C.jsx(hE,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),C.jsx("p",{className:"text-sm text-red-700",children:T})]}),M&&C.jsxs("div",{className:"mx-4 lg:mx-6 mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-start gap-2",children:[C.jsx(up,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),C.jsx("p",{className:"text-sm text-green-700",children:M})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:[x==="profile"&&C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsxs("div",{className:"relative group mb-4",children:[a?.user_metadata?.avatar_url?C.jsx("img",{src:a.user_metadata.avatar_url,alt:"Avatar",className:"w-24 h-24 rounded-full shadow-lg object-cover"}):C.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg",children:H(d.fullName)}),C.jsx("button",{className:"absolute bottom-0 right-0 w-9 h-9 bg-orange-500 hover:bg-orange-600 rounded-full flex items-center justify-center border-4 border-white cursor-pointer transition shadow-lg",children:C.jsx(cp,{className:"w-4 h-4 text-white"})})]}),C.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Cliquez pour changer votre photo de profil"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet"}),C.jsx("input",{type:"text",value:d.fullName,onChange:xe=>$("fullName",xe.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:"Votre nom complet"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email actuel"}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"email",value:d.currentEmail,disabled:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-gray-600 cursor-not-allowed"}),C.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:C.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium",children:"Vrifi"})})]}),C.jsx("p",{className:"text-xs text-gray-500 mt-1",children:`Pour changer votre email, utilisez l'onglet "Email"`})]})]}),x==="email"&&C.jsx("div",{className:"space-y-6",children:U?C.jsxs("div",{className:"text-center py-8",children:[C.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:C.jsx(dd,{className:"w-8 h-8 text-green-600"})}),C.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Email de confirmation envoy !"}),C.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Nous avons envoy un email  ",C.jsx("strong",{children:d.newEmail}),". Cliquez sur le lien dans l'email pour confirmer le changement."]}),C.jsx("button",{onClick:()=>z(!1),className:"text-orange-600 hover:text-orange-700 font-medium text-sm",children:"Modifier l'adresse email"})]}):C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:C.jsxs("div",{className:"flex gap-3",children:[C.jsx(dd,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-blue-900 text-sm mb-1",children:"Changement d'email scuris"}),C.jsx("p",{className:"text-xs text-blue-700",children:"Pour des raisons de scurit, vous recevrez un email de confirmation  votre nouvelle adresse. Vous devrez cliquer sur le lien pour finaliser le changement."})]})]})}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email actuel"}),C.jsx("input",{type:"email",value:d.currentEmail,disabled:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-gray-600 cursor-not-allowed"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nouvelle adresse email"}),C.jsx("input",{type:"email",value:d.newEmail,onChange:xe=>$("newEmail",xe.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:"nouvelle@email.com"})]})]})}),x==="password"&&C.jsxs("div",{className:"space-y-6",children:[C.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:C.jsxs("div",{className:"flex gap-3",children:[C.jsx(b2,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-amber-900 text-sm mb-1",children:"Scurit du mot de passe"}),C.jsx("p",{className:"text-xs text-amber-700",children:"Votre nouveau mot de passe doit contenir au moins 6 caractres."})]})]})}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe actuel"}),C.jsx("input",{type:"password",value:d.currentPassword,onChange:xe=>$("currentPassword",xe.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:""})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nouveau mot de passe"}),C.jsx("input",{type:"password",value:d.newPassword,onChange:xe=>$("newPassword",xe.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:"",minLength:6})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmer le nouveau mot de passe"}),C.jsx("input",{type:"password",value:d.confirmPassword,onChange:xe=>$("confirmPassword",xe.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:"",minLength:6})]})]})]}),C.jsxs("div",{className:"p-4 lg:p-6 border-t bg-gray-50 flex gap-3",children:[C.jsx("button",{onClick:r,className:"flex-1 py-3 px-4 bg-white border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition",children:"Annuler"}),C.jsx("button",{onClick:()=>{x==="profile"?te():x==="email"&&!U?G():x==="password"&&oe()},disabled:_||x==="email"&&U,className:"flex-1 py-3 px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl font-semibold hover:shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Chargement...":x==="profile"?"Sauvegarder":x==="email"?"Envoyer la confirmation":"Changer le mot de passe"})]})]}),C.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-slideUp {
          animation: slideUp 0.3s ease-out;
        }
      `})]}):null}function zE(){const{user:s,signOut:r}=Di(),[a,c]=Z.useState(!1),d=T=>T.split(" ").map(S=>S[0]).join("").toUpperCase().slice(0,2),g=s?.user_metadata?.full_name||s?.email?.split("@")[0]||"ArtLover",x=s?.user_metadata?.avatar_url,b=12,_=async T=>{console.log("Saving profile:",T)},w=async()=>{await r()};return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 lg:py-8",children:[C.jsx("h1",{className:"lg:hidden text-center text-2xl font-bold mb-6",children:"Profil"}),C.jsxs("div",{className:"lg:grid lg:grid-cols-[340px_1fr] lg:gap-6",children:[C.jsxs("div",{className:"space-y-6",children:[C.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 lg:p-8",children:C.jsxs("div",{className:"flex flex-col items-center text-center",children:[C.jsxs("div",{className:"relative group mb-4",children:[x?C.jsx("img",{src:x,alt:"Avatar",className:"w-24 h-24 lg:w-28 lg:h-28 rounded-full shadow-lg object-cover"}):C.jsx("div",{className:"w-24 h-24 lg:w-28 lg:h-28 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center text-white text-3xl lg:text-4xl font-bold shadow-lg",children:d(g)}),C.jsx("button",{onClick:()=>c(!0),className:"absolute bottom-0 right-0 w-9 h-9 lg:w-10 lg:h-10 bg-blue-500 rounded-full flex items-center justify-center border-4 border-white cursor-pointer hover:bg-blue-600 transition shadow-lg",children:C.jsx(cp,{className:"w-4 h-4 lg:w-5 lg:h-5 text-white"})})]}),C.jsx("h2",{className:"text-xl lg:text-2xl font-bold mb-1",children:g}),C.jsx("p",{className:"text-gray-600 text-sm mb-2",children:s?.email}),C.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Membre depuis Janvier 2024"}),C.jsx("button",{onClick:()=>c(!0),className:"w-full bg-white border border-gray-300 text-gray-700 py-2.5 rounded-lg font-medium hover:bg-gray-50 transition mb-3",children:"Modifier le profil"}),C.jsx("button",{className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2.5 rounded-lg font-semibold hover:shadow-lg transition",children:"Passer  Premium"})]})}),C.jsxs("div",{className:"hidden lg:block bg-white rounded-xl shadow-sm p-6",children:[C.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[C.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:C.jsx(xE,{className:"w-5 h-5 text-orange-600"})}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-bold text-base",children:"Crdits Voix"}),C.jsx("p",{className:"text-xs text-gray-600",children:"Minutes restantes"})]})]}),C.jsxs("div",{className:"mb-4",children:[C.jsxs("div",{className:"flex justify-between items-baseline mb-2",children:[C.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:[b," min"]}),C.jsx("span",{className:"text-sm text-gray-500",children:"/ 30 min"})]}),C.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:C.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-orange-600 h-2 rounded-full",style:{width:"40%"}})})]}),C.jsx("button",{className:"w-full bg-white border-2 border-orange-500 text-orange-600 py-2.5 rounded-lg font-semibold hover:bg-orange-50 transition",children:"Acheter des crdits"})]})]}),C.jsxs("div",{className:"space-y-6 mt-6 lg:mt-0",children:[C.jsxs("div",{className:"lg:hidden grid grid-cols-3 gap-3 mb-6",children:[C.jsx(md,{icon:C.jsx(hd,{}),value:"42",label:"uvres"}),C.jsx(md,{icon:C.jsx(gd,{}),value:"126",label:"Messages"}),C.jsx(md,{icon:C.jsx(Uu,{}),value:"8",label:"Quartiers"})]}),C.jsxs("div",{className:"hidden lg:grid lg:grid-cols-4 gap-4",children:[C.jsx(Tu,{icon:C.jsx(hd,{}),value:"42",label:"uvres dcouvertes"}),C.jsx(Tu,{icon:C.jsx(gd,{}),value:"126",label:"Messages envoys"}),C.jsx(Tu,{icon:C.jsx(Uu,{}),value:"8",label:"Quartiers visits"}),C.jsx(Tu,{icon:C.jsx(kd,{}),value:"5/12",label:"Qutes compltes"})]}),C.jsxs("div",{className:"hidden lg:block bg-white rounded-xl shadow-sm p-6",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h3",{className:"font-bold text-lg",children:"uvres Rcentes"}),C.jsxs("button",{className:"text-blue-600 text-sm font-medium hover:underline flex items-center gap-1",children:["Voir tout",C.jsx("span",{children:""})]})]}),C.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[C.jsx(Nu,{title:"Libert Urbaine",location:"Zongo, Cotonou",imageUrl:"https://images.unsplash.com/photo-1561214115-f2f134cc4912?w=400&h=400&fit=crop"}),C.jsx(Nu,{title:"Espoir Digital",location:"Akpakpa, Cotonou",imageUrl:"https://images.unsplash.com/photo-1579783902614-a3fb3927b6a5?w=400&h=400&fit=crop"}),C.jsx(Nu,{title:"Rythme Africain",location:"Ganhi, Cotonou",imageUrl:"https://images.unsplash.com/photo-1582561833649-b5c1ffaee85e?w=400&h=400&fit=crop"}),C.jsx(Nu,{title:"Renaissance",location:"Haie Vive, Cotonou",imageUrl:"https://images.unsplash.com/photo-1549887534-1541e9326642?w=400&h=400&fit=crop"})]})]}),C.jsxs("div",{className:"lg:hidden bg-white rounded-xl shadow-sm p-6",children:[C.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[C.jsx(Yo,{className:"w-5 h-5 text-orange-500"}),"Crdits Vocaux"]}),C.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-5 border border-orange-200",children:[C.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[C.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center shadow-lg",children:C.jsx(Yo,{className:"w-7 h-7 text-white"})}),C.jsxs("div",{className:"flex-1",children:[C.jsxs("div",{className:"font-bold text-base",children:[b," minutes"]}),C.jsx("div",{className:"text-sm text-gray-600",children:"sur 30 minutes"})]})]}),C.jsx("div",{className:"w-full bg-orange-200 rounded-full h-3 mb-4 shadow-inner",children:C.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-orange-600 h-3 rounded-full shadow-sm",style:{width:"40%"}})}),C.jsx("button",{className:"w-full bg-white border-2 border-orange-500 text-orange-600 py-3 rounded-xl font-bold hover:bg-orange-50 transition",children:"Acheter 1h de voix - 6"})]})]}),C.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 lg:gap-6",children:[C.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[C.jsx("h3",{className:"font-bold text-lg mb-4",children:"Mon Activit"}),C.jsxs("div",{className:"space-y-1",children:[C.jsx(Al,{icon:C.jsx(hd,{}),text:"uvres scannes"}),C.jsx(Al,{icon:C.jsx(gd,{}),text:"Historique des chats"}),C.jsx(Al,{icon:C.jsx(kd,{}),text:"Mes qutes"})]})]}),C.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[C.jsx("h3",{className:"font-bold text-lg mb-4",children:"Paramtres"}),C.jsxs("div",{className:"space-y-1",children:[C.jsx(Al,{icon:C.jsx(hp,{}),text:"Paramtres du compte"}),C.jsx(Al,{icon:C.jsx(gE,{}),text:"Aide & Support"}),C.jsx(Al,{icon:C.jsx(_E,{}),text:" propos de MAO"}),C.jsx(HE,{icon:C.jsx(fp,{}),text:"Se dconnecter",onClick:w})]})]})]})]})]}),C.jsx("div",{className:"h-20 lg:hidden"})]}),C.jsx(FE,{isOpen:a,onClose:()=>c(!1),user:s,onSave:_})]})}function md({icon:s,value:r,label:a}){return C.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 text-center",children:[C.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 mx-auto mb-2",children:sa.cloneElement(s,{className:"w-5 h-5"})}),C.jsx("div",{className:"text-2xl font-bold text-gray-800",children:r}),C.jsx("div",{className:"text-xs text-gray-600",children:a})]})}function Tu({icon:s,value:r,label:a}){return C.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition group cursor-pointer",children:[C.jsx("div",{className:"w-12 h-12 bg-gray-100 group-hover:bg-orange-100 rounded-full flex items-center justify-center text-gray-600 group-hover:text-orange-600 mb-3 transition",children:sa.cloneElement(s,{className:"w-6 h-6"})}),C.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:r}),C.jsx("div",{className:"text-xs text-gray-600",children:a})]})}function Nu({title:s,location:r,imageUrl:a}){return C.jsxs("div",{className:"group relative rounded-xl overflow-hidden cursor-pointer shadow-sm hover:shadow-lg transition aspect-square",children:[C.jsx("img",{src:a,alt:s,className:"w-full h-full object-cover group-hover:scale-110 transition duration-300"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),C.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[C.jsx("h4",{className:"font-semibold text-sm mb-1",children:s}),C.jsx("p",{className:"text-xs opacity-90",children:r})]})]})}function Al({icon:s,text:r,onClick:a}){return C.jsxs("button",{onClick:a,className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-orange-50 transition group",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:"w-9 h-9 bg-gray-100 group-hover:bg-orange-100 rounded-lg flex items-center justify-center text-gray-600 group-hover:text-orange-600 transition",children:sa.cloneElement(s,{className:"w-5 h-5"})}),C.jsx("span",{className:"font-medium text-gray-800 text-sm",children:r})]}),C.jsx("span",{className:"text-gray-400 group-hover:text-orange-500 text-xl transition",children:""})]})}function HE({icon:s,text:r,onClick:a}){return C.jsxs("button",{onClick:a,className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 transition group",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:"w-9 h-9 bg-red-100 rounded-lg flex items-center justify-center text-red-600",children:sa.cloneElement(s,{className:"w-5 h-5"})}),C.jsx("span",{className:"font-medium text-red-600 text-sm",children:r})]}),C.jsx("span",{className:"text-red-400 text-xl",children:""})]})}function VE({children:s}){const{user:r,loading:a}=Di();return a?C.jsx("div",{className:"flex items-center justify-center min-h-screen",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),C.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})}):r?s:C.jsx(Ed,{to:"/login",replace:!0})}function v2({children:s}){const{user:r,loading:a,isAdmin:c}=Di();return a?C.jsx("div",{className:"flex items-center justify-center min-h-screen",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),C.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})}):r?c?s:C.jsx(Ed,{to:"/",replace:!0}):C.jsx(Ed,{to:"/login",replace:!0})}function dp(){const[s,r]=Z.useState(!1),[a,c]=Z.useState(!1),{user:d,signOut:g}=Di(),x=!!d,b=B=>B?.split(" ").map(U=>U[0]).join("").toUpperCase().slice(0,2)||"U",_=d?.user_metadata?.full_name||d?.email?.split("@")[0]||"ArtLover",w=d?.user_metadata?.avatar_url,T=12,S=3,M=async()=>{await g(),c(!1)};return C.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[C.jsxs("div",{className:"flex items-center justify-between h-16 lg:h-20",children:[C.jsx("a",{href:"/",className:"flex items-center cursor-pointer",children:C.jsx("img",{src:"../src/assets/logo-Mao.PNG",alt:"MAO Logo",className:"h-10 lg:h-14 w-auto object-contain"})}),C.jsxs("nav",{className:"hidden lg:flex items-center gap-8",children:[C.jsx("a",{href:"/",className:"text-gray-700 hover:text-orange-500 font-medium transition",children:"Accueil"}),C.jsx("a",{href:"/explorer",className:"text-gray-700 hover:text-orange-500 font-medium transition",children:"Explorer"}),C.jsx("a",{href:"/quetes",className:"text-gray-700 hover:text-orange-500 font-medium transition",children:"Qutes"}),C.jsx("a",{href:"/about",className:"text-gray-700 hover:text-orange-500 font-medium transition",children:" propos"})]}),C.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[x?C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"hidden lg:flex items-center gap-2 bg-orange-50 px-3 py-2 rounded-lg",children:[C.jsx(Yo,{className:"w-4 h-4 text-orange-600"}),C.jsxs("span",{className:"text-sm font-semibold text-orange-600",children:[T," min"]})]}),C.jsxs("button",{className:"relative p-2 hover:bg-gray-100 rounded-lg transition",children:[C.jsx(oE,{className:"w-5 h-5 lg:w-6 lg:h-6 text-gray-600"}),C.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-500 rounded-full text-white text-xs flex items-center justify-center font-bold",children:S})]}),C.jsxs("div",{className:"relative ml-auto",children:[C.jsxs("button",{onClick:()=>c(!a),className:"flex items-center gap-2 hover:bg-gray-100 p-2 rounded-lg transition",children:[C.jsx("span",{className:"hidden lg:block text-sm font-medium text-gray-700 max-w-[120px] truncate",children:_}),w?C.jsx("img",{src:w,alt:"Avatar",className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full object-cover"}):C.jsx("div",{className:"w-9 h-9 lg:w-10 lg:h-10 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:b(_)})]}),a&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),C.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",children:[C.jsxs("div",{className:"px-4 py-3 border-b",children:[C.jsx("p",{className:"font-semibold text-gray-800",children:_}),C.jsx("p",{className:"text-sm text-gray-500 truncate",children:d?.email})]}),C.jsxs("div",{className:"py-2",children:[C.jsxs("a",{href:"/profile",className:"flex items-center gap-3 px-4 py-2 hover:bg-gray-50 transition",children:[C.jsx(n0,{className:"w-5 h-5 text-gray-600"}),C.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mon Profil"})]}),C.jsxs("a",{href:"/settings",className:"flex items-center gap-3 px-4 py-2 hover:bg-gray-50 transition",children:[C.jsx(hp,{className:"w-5 h-5 text-gray-600"}),C.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Paramtres"})]}),C.jsx("div",{className:"lg:hidden",children:C.jsxs("a",{href:"/credits",className:"flex items-center gap-3 px-4 py-2 hover:bg-gray-50 transition",children:[C.jsx(Yo,{className:"w-5 h-5 text-orange-600"}),C.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Crdits Voix"}),C.jsxs("span",{className:"ml-auto text-sm font-semibold text-orange-600",children:[T," min"]})]})})]}),C.jsx("div",{className:"border-t pt-2",children:C.jsxs("button",{onClick:M,className:"flex items-center gap-3 px-4 py-2 hover:bg-red-50 transition w-full text-left",children:[C.jsx(fp,{className:"w-5 h-5 text-red-600"}),C.jsx("span",{className:"text-sm font-medium text-red-600",children:"Se dconnecter"})]})})]})]})]})]}):C.jsxs(C.Fragment,{children:[C.jsx("a",{href:"/login",className:"hidden lg:block text-gray-700 hover:text-orange-500 font-medium transition",children:"Connexion"}),C.jsx("a",{href:"/login",className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-4 lg:px-6 py-2 lg:py-2.5 rounded-lg font-semibold hover:shadow-lg transition",children:"Inscription"})]}),C.jsx("button",{onClick:()=>r(!s),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg transition",children:s?C.jsx(r0,{className:"w-6 h-6 text-gray-600"}):C.jsx(OE,{className:"w-6 h-6 text-gray-600"})})]})]}),s&&C.jsxs("div",{className:"lg:hidden border-t py-4 space-y-2",children:[C.jsx("a",{href:"/",className:"block px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 rounded-lg font-medium transition",children:"Accueil"}),C.jsxs("a",{href:"/explorer",className:"block px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 rounded-lg font-medium transition flex items-center gap-2",children:[C.jsx(Uu,{className:"w-5 h-5"}),"Explorer"]}),C.jsxs("a",{href:"/quetes",className:"block px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 rounded-lg font-medium transition flex items-center gap-2",children:[C.jsx(kd,{className:"w-5 h-5"}),"Qutes"]}),C.jsx("a",{href:"/about",className:"block px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 rounded-lg font-medium transition",children:" propos"}),!x&&C.jsxs("div",{className:"pt-4 border-t space-y-2",children:[C.jsx("a",{href:"/login",className:"block w-full text-center px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg font-medium transition border border-gray-300",children:"Connexion"}),C.jsx("a",{href:"/login",className:"block w-full text-center bg-gradient-to-r from-orange-500 to-orange-600 text-white px-4 py-3 rounded-lg font-semibold hover:shadow-lg transition",children:"Inscription"})]})]})]})})}function GE(){return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsx(dp,{}),C.jsx("main",{children:C.jsx(Bb,{})})]})}var Xe;(function(s){s[s.QR_CODE=0]="QR_CODE",s[s.AZTEC=1]="AZTEC",s[s.CODABAR=2]="CODABAR",s[s.CODE_39=3]="CODE_39",s[s.CODE_93=4]="CODE_93",s[s.CODE_128=5]="CODE_128",s[s.DATA_MATRIX=6]="DATA_MATRIX",s[s.MAXICODE=7]="MAXICODE",s[s.ITF=8]="ITF",s[s.EAN_13=9]="EAN_13",s[s.EAN_8=10]="EAN_8",s[s.PDF_417=11]="PDF_417",s[s.RSS_14=12]="RSS_14",s[s.RSS_EXPANDED=13]="RSS_EXPANDED",s[s.UPC_A=14]="UPC_A",s[s.UPC_E=15]="UPC_E",s[s.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xe||(Xe={}));var E2=new Map([[Xe.QR_CODE,"QR_CODE"],[Xe.AZTEC,"AZTEC"],[Xe.CODABAR,"CODABAR"],[Xe.CODE_39,"CODE_39"],[Xe.CODE_93,"CODE_93"],[Xe.CODE_128,"CODE_128"],[Xe.DATA_MATRIX,"DATA_MATRIX"],[Xe.MAXICODE,"MAXICODE"],[Xe.ITF,"ITF"],[Xe.EAN_13,"EAN_13"],[Xe.EAN_8,"EAN_8"],[Xe.PDF_417,"PDF_417"],[Xe.RSS_14,"RSS_14"],[Xe.RSS_EXPANDED,"RSS_EXPANDED"],[Xe.UPC_A,"UPC_A"],[Xe.UPC_E,"UPC_E"],[Xe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),_2;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.URL=1]="URL"})(_2||(_2={}));function qE(s){return Object.values(Xe).includes(s)}var Fu;(function(s){s[s.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",s[s.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Fu||(Fu={}));var XE=(function(){function s(){}return s.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",s.SCAN_DEFAULT_FPS=2,s.DEFAULT_DISABLE_FLIP=!1,s.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,s.DEFAULT_SUPPORTED_SCAN_TYPE=[Fu.SCAN_TYPE_CAMERA,Fu.SCAN_TYPE_FILE],s})(),gp=(function(){function s(r,a){this.format=r,this.formatName=a}return s.prototype.toString=function(){return this.formatName},s.create=function(r){if(!E2.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new s(r,E2.get(r))},s})(),A2=(function(){function s(){}return s.createFromText=function(r){var a={text:r};return{decodedText:r,result:a}},s.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},s})(),Ld;(function(s){s[s.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",s[s.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",s[s.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ld||(Ld={}));var YE=(function(){function s(){}return s.createFrom=function(r){return{errorMessage:r,type:Ld.UNKWOWN_ERROR}},s})(),WE=(function(){function s(r){this.verbose=r}return s.prototype.log=function(r){this.verbose&&console.log(r)},s.prototype.warn=function(r){this.verbose&&console.warn(r)},s.prototype.logError=function(r,a){(this.verbose||a===!0)&&console.error(r)},s.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},s})();function ia(s){return typeof s>"u"||s===null}var Ol=(function(){function s(){}return s.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},s.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},s.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},s.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},s.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},s.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},s.scannerPaused=function(){return"Scanner paused"},s})(),mp=(function(){function s(){}return s.isMediaStreamConstraintsValid=function(r,a){if(typeof r!="object"){var c=typeof r;return a.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(c,"."),!0),!1}for(var d=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(d),x=Object.keys(r),b=0,_=x;b<_.length;b++){var w=_[b];if(g.has(w))return a.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},s})(),jo={exports:{}},KE=jo.exports,C2;function ZE(){return C2||(C2=1,(function(s,r){(function(a,c){c(r)})(KE,(function(a){function c(I){return I==null}var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,t){I.__proto__=t}||function(I,t){for(var i in t)t.hasOwnProperty(i)&&(I[i]=t[i])};function g(I,t){d(I,t);function i(){this.constructor=I}I.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function x(I,t){var i=Object.setPrototypeOf;i?i(I,t):I.__proto__=t}function b(I,t){t===void 0&&(t=I.constructor);var i=Error.captureStackTrace;i&&i(I,t)}var _=(function(I){g(t,I);function t(i){var l=this.constructor,u=I.call(this,i)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),x(u,l.prototype),b(u),u}return t})(Error);class w extends _{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}w.kind="Exception";class T extends w{}T.kind="ArgumentException";class S extends w{}S.kind="IllegalArgumentException";class M{constructor(t){if(this.binarizer=t,t===null)throw new S("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,l,u){const f=this.binarizer.getLuminanceSource().crop(t,i,l,u);return new M(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class B extends w{static getChecksumInstance(){return new B}}B.kind="ChecksumException";class U{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class z{static arraycopy(t,i,l,u,f){for(;f--;)l[u++]=t[i++]}static currentTimeMillis(){return Date.now()}}class H extends w{}H.kind="IndexOutOfBoundsException";class $ extends H{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}$.kind="ArrayIndexOutOfBoundsException";class te{static fill(t,i){for(let l=0,u=t.length;l<u;l++)t[l]=i}static fillWithin(t,i,l,u){te.rangeCheck(t.length,i,l);for(let f=i;f<l;f++)t[f]=u}static rangeCheck(t,i,l){if(i>l)throw new S("fromIndex("+i+") > toIndex("+l+")");if(i<0)throw new $(i);if(l>t)throw new $(l)}static asList(...t){return t}static create(t,i,l){return Array.from({length:t}).map(f=>Array.from({length:i}).fill(l))}static createInt32Array(t,i,l){return Array.from({length:t}).map(f=>Int32Array.from({length:i}).fill(l))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let l=0,u=t.length;l<u;l++)if(t[l]!==i[l])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const l of t)i=31*i+l;return i}static fillUint8Array(t,i){for(let l=0;l!==t.length;l++)t[l]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const l=new Uint8Array(i);return l.set(t),l}return t.slice(0,i)}static copyOfRange(t,i,l){const u=l-i,f=new Int32Array(u);return z.arraycopy(t,i,f,0,u),f}static binarySearch(t,i,l){l===void 0&&(l=te.numberComparator);let u=0,f=t.length-1;for(;u<=f;){const m=f+u>>1,p=l(i,t[m]);if(p>0)u=m+1;else if(p<0)f=m-1;else return m}return-u-1}static numberComparator(t,i){return t-i}}class G{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let l=31;return i=t<<16,i!==0&&(l-=16,t=i),i=t<<8,i!==0&&(l-=8,t=i),i=t<<4,i!==0&&(l-=4,t=i),i=t<<2,i!==0&&(l-=2,t=i),l-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}G.MIN_VALUE_32_BITS=-2147483648,G.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=oe.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=oe.makeArray(t);z.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const l=this.bits;let u=Math.floor(t/32),f=l[u];f&=~((1<<(t&31))-1);const m=l.length;for(;f===0;){if(++u===m)return i;f=l[u]}const p=u*32+G.numberOfTrailingZeros(f);return p>i?i:p}getNextUnset(t){const i=this.size;if(t>=i)return i;const l=this.bits;let u=Math.floor(t/32),f=~l[u];f&=~((1<<(t&31))-1);const m=l.length;for(;f===0;){if(++u===m)return i;f=~l[u]}const p=u*32+G.numberOfTrailingZeros(f);return p>i?i:p}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new S;if(i===t)return;i--;const l=Math.floor(t/32),u=Math.floor(i/32),f=this.bits;for(let m=l;m<=u;m++){const p=m>l?0:t&31,A=(2<<(m<u?31:i&31))-(1<<p);f[m]|=A}}clear(){const t=this.bits.length,i=this.bits;for(let l=0;l<t;l++)i[l]=0}isRange(t,i,l){if(i<t||t<0||i>this.size)throw new S;if(i===t)return!0;i--;const u=Math.floor(t/32),f=Math.floor(i/32),m=this.bits;for(let p=u;p<=f;p++){const v=p>u?0:t&31,N=(2<<(p<f?31:i&31))-(1<<v)&4294967295;if((m[p]&N)!==(l?N:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new S("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let l=i;l>0;l--)this.appendBit((t>>l-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let l=0;l<i;l++)this.appendBit(t.get(l))}xor(t){if(this.size!==t.size)throw new S("Sizes don't match");const i=this.bits;for(let l=0,u=i.length;l<u;l++)i[l]^=t.bits[l]}toBytes(t,i,l,u){for(let f=0;f<u;f++){let m=0;for(let p=0;p<8;p++)this.get(t)&&(m|=1<<7-p),t++;i[l+f]=m}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),l=i+1,u=this.bits;for(let f=0;f<l;f++){let m=u[f];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,t[i-f]=m}if(this.size!==l*32){const f=l*32-this.size;let m=t[0]>>>f;for(let p=1;p<l;p++){const v=t[p];m|=v<<32-f,t[p-1]=m,m=v>>>f}t[l-1]=m}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof oe))return!1;const i=t;return this.size===i.size&&te.equals(this.bits,i.bits)}hashCode(){return 31*this.size+te.hashCode(this.bits)}toString(){let t="";for(let i=0,l=this.size;i<l;i++)(i&7)===0&&(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new oe(this.size,this.bits.slice())}}var xe;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(xe||(xe={}));var se=xe;class R extends w{static getFormatInstance(){return new R}}R.kind="FormatException";var W;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})(W||(W={}));class L{constructor(t,i,l,...u){this.valueIdentifier=t,this.name=l,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=u,L.VALUE_IDENTIFIER_TO_ECI.set(t,this),L.NAME_TO_ECI.set(l,this);const f=this.values;for(let m=0,p=f.length;m!==p;m++){const v=f[m];L.VALUES_TO_ECI.set(v,this)}for(const m of u)L.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new R("incorect value");const i=L.VALUES_TO_ECI.get(t);if(i===void 0)throw new R("incorect value");return i}static getCharacterSetECIByName(t){const i=L.NAME_TO_ECI.get(t);if(i===void 0)throw new R("incorect value");return i}equals(t){if(!(t instanceof L))return!1;const i=t;return this.getName()===i.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(W.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(W.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(W.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(W.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(W.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(W.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(W.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(W.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(W.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(W.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(W.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(W.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(W.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(W.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(W.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(W.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(W.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(W.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(W.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(W.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(W.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(W.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(W.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(W.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(W.Big5,28,"Big5"),L.GB18030=new L(W.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(W.EUC_KR,30,"EUC_KR","EUC-KR");class he extends w{}he.kind="UnsupportedOperationException";class re{static decode(t,i){const l=this.encodingName(i);return this.customDecoder?this.customDecoder(t,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(t,l):new TextDecoder(l).decode(t)}static shouldDecodeOnFallback(t){return!re.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const l=this.encodingName(i);return this.customEncoder?this.customEncoder(t,l):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof L?t:L.getCharacterSetECIByName(t)}static decodeFallback(t,i){const l=this.encodingCharacterSet(i);if(re.isDecodeFallbackSupported(l)){let u="";for(let f=0,m=t.length;f<m;f++){let p=t[f].toString(16);p.length<2&&(p="0"+p),u+="%"+p}return decodeURIComponent(u)}if(l.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new he(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(L.UTF8)||t.equals(L.ISO8859_1)||t.equals(L.ASCII)}static encodeFallback(t){const l=btoa(unescape(encodeURIComponent(t))).split(""),u=[];for(let f=0;f<l.length;f++)u.push(l[f].charCodeAt(0));return new Uint8Array(u)}}class ue{static castAsNonUtf8Char(t,i=null){const l=i?i.getName():this.ISO88591;return re.decode(new Uint8Array([t]),l)}static guessEncoding(t,i){if(i!=null&&i.get(se.CHARACTER_SET)!==void 0)return i.get(se.CHARACTER_SET).toString();const l=t.length;let u=!0,f=!0,m=!0,p=0,v=0,A=0,N=0,D=0,j=0,F=0,Y=0,J=0,le=0,we=0;const Le=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let Be=0;Be<l&&(u||f||m);Be++){const Re=t[Be]&255;m&&(p>0?(Re&128)===0?m=!1:p--:(Re&128)!==0&&((Re&64)===0?m=!1:(p++,(Re&32)===0?v++:(p++,(Re&16)===0?A++:(p++,(Re&8)===0?N++:m=!1))))),u&&(Re>127&&Re<160?u=!1:Re>159&&(Re<192||Re===215||Re===247)&&we++),f&&(D>0?Re<64||Re===127||Re>252?f=!1:D--:Re===128||Re===160||Re>239?f=!1:Re>160&&Re<224?(j++,Y=0,F++,F>J&&(J=F)):Re>127?(D++,F=0,Y++,Y>le&&(le=Y)):(F=0,Y=0))}return m&&p>0&&(m=!1),f&&D>0&&(f=!1),m&&(Le||v+A+N>0)?ue.UTF8:f&&(ue.ASSUME_SHIFT_JIS||J>=3||le>=3)?ue.SHIFT_JIS:u&&f?J===2&&j===2||we*10>=l?ue.SHIFT_JIS:ue.ISO88591:u?ue.ISO88591:f?ue.SHIFT_JIS:m?ue.UTF8:ue.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let l=-1;function u(m,p,v,A,N,D){if(m==="%%")return"%";if(i[++l]===void 0)return;m=A?parseInt(A.substr(1)):void 0;let j=N?parseInt(N.substr(1)):void 0,F;switch(D){case"s":F=i[l];break;case"c":F=i[l][0];break;case"f":F=parseFloat(i[l]).toFixed(m);break;case"p":F=parseFloat(i[l]).toPrecision(m);break;case"e":F=parseFloat(i[l]).toExponential(m);break;case"x":F=parseInt(i[l]).toString(j||16);break;case"d":F=parseFloat(parseInt(i[l],j||10).toPrecision(m)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(j);let Y=parseInt(v),J=v&&v[0]+""=="0"?"0":" ";for(;F.length<Y;)F=p!==void 0?F+J:J+F;return F}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(f,u)}static getBytes(t,i){return re.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}ue.SHIFT_JIS=L.SJIS.getName(),ue.GB2312="GB2312",ue.ISO88591=L.ISO8859_1.getName(),ue.EUC_JP="EUC_JP",ue.UTF8=L.UTF8.getName(),ue.PLATFORM_DEFAULT_ENCODING=ue.UTF8,ue.ASSUME_SHIFT_JIS=!1;class Ee{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=ue.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,l){for(let u=i;i<i+l;u++)this.append(t[u]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class Oe{constructor(t,i,l,u){if(this.width=t,this.height=i,this.rowSize=l,this.bits=u,i==null&&(i=t),this.height=i,t<1||i<1)throw new S("Both dimensions must be greater than 0");l==null&&(l=Math.floor((t+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,l=t[0].length,u=new Oe(l,i);for(let f=0;f<i;f++){const m=t[f];for(let p=0;p<l;p++)m[p]&&u.set(p,f)}return u}static parseFromString(t,i,l){if(t===null)throw new S("stringRepresentation cannot be null");const u=new Array(t.length);let f=0,m=0,p=-1,v=0,A=0;for(;A<t.length;)if(t.charAt(A)===`
`||t.charAt(A)==="\r"){if(f>m){if(p===-1)p=f-m;else if(f-m!==p)throw new S("row lengths do not match");m=f,v++}A++}else if(t.substring(A,A+i.length)===i)A+=i.length,u[f]=!0,f++;else if(t.substring(A,A+l.length)===l)A+=l.length,u[f]=!1,f++;else throw new S("illegal character encountered: "+t.substring(A));if(f>m){if(p===-1)p=f-m;else if(f-m!==p)throw new S("row lengths do not match");v++}const N=new Oe(p,v);for(let D=0;D<f;D++)u[D]&&N.set(Math.floor(D%p),Math.floor(D/p));return N}get(t,i){const l=i*this.rowSize+Math.floor(t/32);return(this.bits[l]>>>(t&31)&1)!==0}set(t,i){const l=i*this.rowSize+Math.floor(t/32);this.bits[l]|=1<<(t&31)&4294967295}unset(t,i){const l=i*this.rowSize+Math.floor(t/32);this.bits[l]&=~(1<<(t&31)&4294967295)}flip(t,i){const l=i*this.rowSize+Math.floor(t/32);this.bits[l]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new S("input matrix dimensions do not match");const i=new oe(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let f=0,m=this.height;f<m;f++){const p=f*l,v=t.getRow(f,i).getBitArray();for(let A=0;A<l;A++)u[p+A]^=v[A]}}clear(){const t=this.bits,i=t.length;for(let l=0;l<i;l++)t[l]=0}setRegion(t,i,l,u){if(i<0||t<0)throw new S("Left and top must be nonnegative");if(u<1||l<1)throw new S("Height and width must be at least 1");const f=t+l,m=i+u;if(m>this.height||f>this.width)throw new S("The region must fit inside the matrix");const p=this.rowSize,v=this.bits;for(let A=i;A<m;A++){const N=A*p;for(let D=t;D<f;D++)v[N+Math.floor(D/32)]|=1<<(D&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new oe(this.width):i.clear();const l=this.rowSize,u=this.bits,f=t*l;for(let m=0;m<l;m++)i.setBulk(m*32,u[f+m]);return i}setRow(t,i){z.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let l=new oe(t),u=new oe(t);for(let f=0,m=Math.floor((i+1)/2);f<m;f++)l=this.getRow(f,l),u=this.getRow(i-1-f,u),l.reverse(),u.reverse(),this.setRow(f,u),this.setRow(i-1-f,l)}getEnclosingRectangle(){const t=this.width,i=this.height,l=this.rowSize,u=this.bits;let f=t,m=i,p=-1,v=-1;for(let A=0;A<i;A++)for(let N=0;N<l;N++){const D=u[A*l+N];if(D!==0){if(A<m&&(m=A),A>v&&(v=A),N*32<f){let j=0;for(;(D<<31-j&4294967295)===0;)j++;N*32+j<f&&(f=N*32+j)}if(N*32+31>p){let j=31;for(;!(D>>>j);)j--;N*32+j>p&&(p=N*32+j)}}}return p<f||v<m?null:Int32Array.from([f,m,p-f+1,v-m+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let l=0;for(;l<i.length&&i[l]===0;)l++;if(l===i.length)return null;const u=l/t;let f=l%t*32;const m=i[l];let p=0;for(;(m<<31-p&4294967295)===0;)p++;return f+=p,Int32Array.from([f,u])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let l=i.length-1;for(;l>=0&&i[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/t);let f=Math.floor(l%t)*32;const m=i[l];let p=31;for(;!(m>>>p);)p--;return f+=p,Int32Array.from([f,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Oe))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&te.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+te.hashCode(this.bits),t}toString(t="X ",i="  ",l=`
`){return this.buildToString(t,i,l)}buildToString(t,i,l){let u=new Ee;for(let f=0,m=this.height;f<m;f++){for(let p=0,v=this.width;p<v;p++)u.append(this.get(p,f)?t:i);u.append(l)}return u.toString()}clone(){return new Oe(this.width,this.height,this.rowSize,this.bits.slice())}}class K extends w{static getNotFoundInstance(){return new K}}K.kind="NotFoundException";class ne extends U{constructor(t){super(t),this.luminances=ne.EMPTY,this.buckets=new Int32Array(ne.LUMINANCE_BUCKETS)}getBlackRow(t,i){const l=this.getLuminanceSource(),u=l.getWidth();i==null||i.getSize()<u?i=new oe(u):i.clear(),this.initArrays(u);const f=l.getRow(t,this.luminances),m=this.buckets;for(let v=0;v<u;v++)m[(f[v]&255)>>ne.LUMINANCE_SHIFT]++;const p=ne.estimateBlackPoint(m);if(u<3)for(let v=0;v<u;v++)(f[v]&255)<p&&i.set(v);else{let v=f[0]&255,A=f[1]&255;for(let N=1;N<u-1;N++){const D=f[N+1]&255;(A*4-v-D)/2<p&&i.set(N),v=A,A=D}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),l=t.getHeight(),u=new Oe(i,l);this.initArrays(i);const f=this.buckets;for(let v=1;v<5;v++){const A=Math.floor(l*v/5),N=t.getRow(A,this.luminances),D=Math.floor(i*4/5);for(let j=Math.floor(i/5);j<D;j++){const F=N[j]&255;f[F>>ne.LUMINANCE_SHIFT]++}}const m=ne.estimateBlackPoint(f),p=t.getMatrix();for(let v=0;v<l;v++){const A=v*i;for(let N=0;N<i;N++)(p[A+N]&255)<m&&u.set(N,v)}return u}createBinarizer(t){return new ne(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let l=0;l<ne.LUMINANCE_BUCKETS;l++)i[l]=0}static estimateBlackPoint(t){const i=t.length;let l=0,u=0,f=0;for(let N=0;N<i;N++)t[N]>f&&(u=N,f=t[N]),t[N]>l&&(l=t[N]);let m=0,p=0;for(let N=0;N<i;N++){const D=N-u,j=t[N]*D*D;j>p&&(m=N,p=j)}if(u>m){const N=u;u=m,m=N}if(m-u<=i/16)throw new K;let v=m-1,A=-1;for(let N=m-1;N>u;N--){const D=N-u,j=D*D*(m-N)*(l-t[N]);j>A&&(v=N,A=j)}return v<<ne.LUMINANCE_SHIFT}}ne.LUMINANCE_BITS=5,ne.LUMINANCE_SHIFT=8-ne.LUMINANCE_BITS,ne.LUMINANCE_BUCKETS=1<<ne.LUMINANCE_BITS,ne.EMPTY=Uint8ClampedArray.from([0]);class Q extends ne{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),l=t.getHeight();if(i>=Q.MINIMUM_DIMENSION&&l>=Q.MINIMUM_DIMENSION){const u=t.getMatrix();let f=i>>Q.BLOCK_SIZE_POWER;(i&Q.BLOCK_SIZE_MASK)!==0&&f++;let m=l>>Q.BLOCK_SIZE_POWER;(l&Q.BLOCK_SIZE_MASK)!==0&&m++;const p=Q.calculateBlackPoints(u,f,m,i,l),v=new Oe(i,l);Q.calculateThresholdForBlock(u,f,m,i,l,p,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new Q(t)}static calculateThresholdForBlock(t,i,l,u,f,m,p){const v=f-Q.BLOCK_SIZE,A=u-Q.BLOCK_SIZE;for(let N=0;N<l;N++){let D=N<<Q.BLOCK_SIZE_POWER;D>v&&(D=v);const j=Q.cap(N,2,l-3);for(let F=0;F<i;F++){let Y=F<<Q.BLOCK_SIZE_POWER;Y>A&&(Y=A);const J=Q.cap(F,2,i-3);let le=0;for(let Le=-2;Le<=2;Le++){const Be=m[j+Le];le+=Be[J-2]+Be[J-1]+Be[J]+Be[J+1]+Be[J+2]}const we=le/25;Q.thresholdBlock(t,Y,D,we,u,p)}}}static cap(t,i,l){return t<i?i:t>l?l:t}static thresholdBlock(t,i,l,u,f,m){for(let p=0,v=l*f+i;p<Q.BLOCK_SIZE;p++,v+=f)for(let A=0;A<Q.BLOCK_SIZE;A++)(t[v+A]&255)<=u&&m.set(i+A,l+p)}static calculateBlackPoints(t,i,l,u,f){const m=f-Q.BLOCK_SIZE,p=u-Q.BLOCK_SIZE,v=new Array(l);for(let A=0;A<l;A++){v[A]=new Int32Array(i);let N=A<<Q.BLOCK_SIZE_POWER;N>m&&(N=m);for(let D=0;D<i;D++){let j=D<<Q.BLOCK_SIZE_POWER;j>p&&(j=p);let F=0,Y=255,J=0;for(let we=0,Le=N*u+j;we<Q.BLOCK_SIZE;we++,Le+=u){for(let Be=0;Be<Q.BLOCK_SIZE;Be++){const Re=t[Le+Be]&255;F+=Re,Re<Y&&(Y=Re),Re>J&&(J=Re)}if(J-Y>Q.MIN_DYNAMIC_RANGE)for(we++,Le+=u;we<Q.BLOCK_SIZE;we++,Le+=u)for(let Be=0;Be<Q.BLOCK_SIZE;Be++)F+=t[Le+Be]&255}let le=F>>Q.BLOCK_SIZE_POWER*2;if(J-Y<=Q.MIN_DYNAMIC_RANGE&&(le=Y/2,A>0&&D>0)){const we=(v[A-1][D]+2*v[A][D-1]+v[A-1][D-1])/4;Y<we&&(le=we)}v[A][D]=le}}return v}}Q.BLOCK_SIZE_POWER=3,Q.BLOCK_SIZE=1<<Q.BLOCK_SIZE_POWER,Q.BLOCK_SIZE_MASK=Q.BLOCK_SIZE-1,Q.MINIMUM_DIMENSION=Q.BLOCK_SIZE*5,Q.MIN_DYNAMIC_RANGE=24;class fe{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,l,u){throw new he("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new he("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new he("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new Ee;for(let l=0;l<this.height;l++){const u=this.getRow(l,t);for(let f=0;f<this.width;f++){const m=u[f]&255;let p;m<64?p="#":m<128?p="+":m<192?p=".":p=" ",i.append(p)}i.append(`
`)}return i.toString()}}class Ne extends fe{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const l=this.delegate.getRow(t,i),u=this.getWidth();for(let f=0;f<u;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(i);for(let u=0;u<i;u++)l[u]=255-(t[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,l,u){return new Ne(this.delegate.crop(t,i,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ne(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ne(this.delegate.rotateCounterClockwise45())}}class Fe extends fe{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=Fe.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return Fe.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,l){const u=new Uint8ClampedArray(i*l);for(let f=0,m=0,p=t.length;f<p;f+=4,m++){let v;if(t[f+3]===0)v=255;else{const N=t[f],D=t[f+1],j=t[f+2];v=306*N+601*D+117*j+512>>10}u[m]=v}return u}getRow(t,i){if(t<0||t>=this.getHeight())throw new S("Requested row is outside the image: "+t);const l=this.getWidth(),u=t*l;return i===null?i=this.buffer.slice(u,u+l):(i.length<l&&(i=new Uint8ClampedArray(l)),i.set(this.buffer.slice(u,u+l))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,l,u){return super.crop(t,i,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),l=i.getContext("2d"),u=t*Fe.DEGREE_TO_RADIANS,f=this.canvas.width,m=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(u))*f+Math.abs(Math.sin(u))*m),v=Math.ceil(Math.abs(Math.sin(u))*f+Math.abs(Math.cos(u))*m);return i.width=p,i.height=v,l.translate(p/2,v/2),l.rotate(u),l.drawImage(this.canvas,f/-2,m/-2),this.buffer=Fe.makeBufferFromCanvasImageData(i),this}invert(){return new Ne(this)}}Fe.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(t,i,l){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var pe=(globalThis||du||self||window||void 0)&&(globalThis||du||self||window||void 0).__awaiter||function(I,t,i,l){function u(f){return f instanceof i?f:new i(function(m){m(f)})}return new(i||(i=Promise))(function(f,m){function p(N){try{A(l.next(N))}catch(D){m(D)}}function v(N){try{A(l.throw(N))}catch(D){m(D)}}function A(N){N.done?f(N.value):u(N.value).then(p,v)}A((l=l.apply(I,t||[])).next())})};class Ie{constructor(t,i=500,l){this.reader=t,this.timeBetweenScansMillis=i,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return pe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const l of t){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const f=l.deviceId||l.id,m=l.label||`Video device ${i.length+1}`,p=l.groupId,v={deviceId:f,label:m,kind:u,groupId:p};i.push(v)}return i})}getVideoInputDevices(){return pe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new X(i.deviceId,i.label))})}findDeviceById(t){return pe(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(l=>l.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return pe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return pe(this,void 0,void 0,function*(){this.reset();let l;t?l={deviceId:{exact:t}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,i)})}decodeOnceFromConstraints(t,i){return pe(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(l,i)})}decodeOnceFromStream(t,i){return pe(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(t,i,l){return pe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,l)})}decodeFromVideoDevice(t,i,l){return pe(this,void 0,void 0,function*(){let u;t?u={deviceId:{exact:t}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeFromConstraints(f,i,l)})}decodeFromConstraints(t,i,l){return pe(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(u,i,l)})}decodeFromStream(t,i,l){return pe(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return pe(this,void 0,void 0,function*(){const l=this.prepareVideoElement(i);return this.addVideoSource(l,t),this.videoElement=l,this.stream=t,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(t){return new Promise((i,l)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return pe(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const l=document.getElementById(t);if(!l)throw new T(`element with id '${t}' not found`);if(l.nodeName.toLowerCase()!==i.toLowerCase())throw new T(`element with id '${t}' must be an ${i} element`);return l}decodeFromImage(t,i){if(!t&&!i)throw new T("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new T("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,l){if(t===void 0&&i===void 0)throw new T("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,l):this.decodeFromVideoElementContinuously(t,l)}decodeFromImageElement(t){if(!t)throw new T("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let l;return this.isImageLoaded(i)?l=this.decodeOnce(i,!1,!0):l=this._decodeOnLoadImage(i),l}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const l=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(l,i)}_decodeFromVideoElementSetup(t){if(!t)throw new T("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new T("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const l=this._decodeOnLoadImage(i);return i.src=t,l}decodeFromVideoUrl(t){if(!t)throw new T("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElement(i);return i.src=t,l}decodeFromVideoUrlContinuously(t,i){if(!t)throw new T("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,i);return l.src=t,u}_decodeOnLoadImage(t){return new Promise((i,l)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,l),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return pe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return pe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,l=!0){this._stopAsyncDecode=!1;const u=(f,m)=>{if(this._stopAsyncDecode){m(new K("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(t);f(p)}catch(p){const v=i&&p instanceof K,N=(p instanceof B||p instanceof R)&&l;if(v||N)return setTimeout(u,this._timeBetweenDecodingAttempts,f,m);m(p)}};return new Promise((f,m)=>u(f,m))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(t);i(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){i(null,u);const f=u instanceof B||u instanceof R,m=u instanceof K;(f||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,l){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,l=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),l=new Fe(i),u=new Q(l);return new M(u)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let l,u;return typeof t<"u"&&(t instanceof HTMLVideoElement?(l=t.videoWidth,u=t.videoHeight):t instanceof HTMLImageElement&&(l=t.naturalWidth||t.width,u=t.naturalHeight||t.height)),i.style.width=l+"px",i.style.height=u+"px",i.width=l,i.height=u,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Pe{constructor(t,i,l=i==null?0:8*i.length,u,f,m=z.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=l,this.resultPoints=u,this.format=f,this.timestamp=m,this.text=t,this.rawBytes=i,l==null?this.numBits=i==null?0:8*i.length:this.numBits=l,this.resultPoints=u,this.format=f,this.resultMetadata=null,m==null?this.timestamp=z.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const l=new Array(i.length+t.length);z.arraycopy(i,0,l,0,i.length),z.arraycopy(t,0,l,i.length,t.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var et;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(et||(et={}));var je=et,Et;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Et||(Et={}));var wt=Et;class Wt{constructor(t,i,l,u,f=-1,m=-1){this.rawBytes=t,this.text=i,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=m,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Nr{exp(t){return this.expTable[t]}log(t){if(t===0)throw new S;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class Tn{constructor(t,i){if(i.length===0)throw new S;this.field=t;const l=i.length;if(l>1&&i[0]===0){let u=1;for(;u<l&&i[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),z.arraycopy(i,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let l;if(t===1){l=0;for(let m=0,p=i.length;m!==p;m++){const v=i[m];l=Nr.addOrSubtract(l,v)}return l}l=i[0];const u=i.length,f=this.field;for(let m=1;m<u;m++)l=Nr.addOrSubtract(f.multiply(t,l),i[m]);return l}addOrSubtract(t){if(!this.field.equals(t.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,l=t.coefficients;if(i.length>l.length){const m=i;i=l,l=m}let u=new Int32Array(l.length);const f=l.length-i.length;z.arraycopy(l,0,u,0,f);for(let m=f;m<l.length;m++)u[m]=Nr.addOrSubtract(i[m-f],l[m]);return new Tn(this.field,u)}multiply(t){if(!this.field.equals(t.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,l=i.length,u=t.coefficients,f=u.length,m=new Int32Array(l+f-1),p=this.field;for(let v=0;v<l;v++){const A=i[v];for(let N=0;N<f;N++)m[v+N]=Nr.addOrSubtract(m[v+N],p.multiply(A,u[N]))}return new Tn(p,m)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,l=this.field,u=new Int32Array(i),f=this.coefficients;for(let m=0;m<i;m++)u[m]=l.multiply(f[m],t);return new Tn(l,u)}multiplyByMonomial(t,i){if(t<0)throw new S;if(i===0)return this.field.getZero();const l=this.coefficients,u=l.length,f=new Int32Array(u+t),m=this.field;for(let p=0;p<u;p++)f[p]=m.multiply(l[p],i);return new Tn(m,f)}divide(t){if(!this.field.equals(t.field))throw new S("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new S("Divide by 0");const i=this.field;let l=i.getZero(),u=this;const f=t.getCoefficient(t.getDegree()),m=i.inverse(f);for(;u.getDegree()>=t.getDegree()&&!u.isZero();){const p=u.getDegree()-t.getDegree(),v=i.multiply(u.getCoefficient(u.getDegree()),m),A=t.multiplyByMonomial(p,v),N=i.buildMonomial(p,v);l=l.addOrSubtract(N),u=u.addOrSubtract(A)}return[l,u]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let l=this.getCoefficient(i);if(l!==0){if(l<0?(t+=" - ",l=-l):t.length>0&&(t+=" + "),i===0||l!==1){const u=this.field.log(l);u===0?t+="1":u===1?t+="a":(t+="a^",t+=u)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class un extends w{}un.kind="ArithmeticException";class xt extends Nr{constructor(t,i,l){super(),this.primitive=t,this.size=i,this.generatorBase=l;const u=new Int32Array(i);let f=1;for(let p=0;p<i;p++)u[p]=f,f*=2,f>=i&&(f^=t,f&=i-1);this.expTable=u;const m=new Int32Array(i);for(let p=0;p<i-1;p++)m[u[p]]=p;this.logTable=m,this.zero=new Tn(this,Int32Array.from([0])),this.one=new Tn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new S;if(i===0)return this.zero;const l=new Int32Array(t+1);return l[0]=i,new Tn(this,l)}inverse(t){if(t===0)throw new un;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+G.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}xt.AZTEC_DATA_12=new xt(4201,4096,1),xt.AZTEC_DATA_10=new xt(1033,1024,1),xt.AZTEC_DATA_6=new xt(67,64,1),xt.AZTEC_PARAM=new xt(19,16,1),xt.QR_CODE_FIELD_256=new xt(285,256,0),xt.DATA_MATRIX_FIELD_256=new xt(301,256,1),xt.AZTEC_DATA_8=xt.DATA_MATRIX_FIELD_256,xt.MAXICODE_FIELD_64=xt.AZTEC_DATA_6;class Kn extends w{}Kn.kind="ReedSolomonException";class ir extends w{}ir.kind="IllegalStateException";class Zn{constructor(t){this.field=t}decode(t,i){const l=this.field,u=new Tn(l,t),f=new Int32Array(i);let m=!0;for(let F=0;F<i;F++){const Y=u.evaluateAt(l.exp(F+l.getGeneratorBase()));f[f.length-1-F]=Y,Y!==0&&(m=!1)}if(m)return;const p=new Tn(l,f),v=this.runEuclideanAlgorithm(l.buildMonomial(i,1),p,i),A=v[0],N=v[1],D=this.findErrorLocations(A),j=this.findErrorMagnitudes(N,D);for(let F=0;F<D.length;F++){const Y=t.length-1-l.log(D[F]);if(Y<0)throw new Kn("Bad error location");t[Y]=xt.addOrSubtract(t[Y],j[F])}}runEuclideanAlgorithm(t,i,l){if(t.getDegree()<i.getDegree()){const F=t;t=i,i=F}const u=this.field;let f=t,m=i,p=u.getZero(),v=u.getOne();for(;m.getDegree()>=(l/2|0);){let F=f,Y=p;if(f=m,p=v,f.isZero())throw new Kn("r_{i-1} was zero");m=F;let J=u.getZero();const le=f.getCoefficient(f.getDegree()),we=u.inverse(le);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){const Le=m.getDegree()-f.getDegree(),Be=u.multiply(m.getCoefficient(m.getDegree()),we);J=J.addOrSubtract(u.buildMonomial(Le,Be)),m=m.addOrSubtract(f.multiplyByMonomial(Le,Be))}if(v=J.multiply(p).addOrSubtract(Y),m.getDegree()>=f.getDegree())throw new ir("Division algorithm failed to reduce polynomial?")}const A=v.getCoefficient(0);if(A===0)throw new Kn("sigmaTilde(0) was zero");const N=u.inverse(A),D=v.multiplyScalar(N),j=m.multiplyScalar(N);return[D,j]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const l=new Int32Array(i);let u=0;const f=this.field;for(let m=1;m<f.getSize()&&u<i;m++)t.evaluateAt(m)===0&&(l[u]=f.inverse(m),u++);if(u!==i)throw new Kn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(t,i){const l=i.length,u=new Int32Array(l),f=this.field;for(let m=0;m<l;m++){const p=f.inverse(i[m]);let v=1;for(let A=0;A<l;A++)if(m!==A){const N=f.multiply(i[A],p),D=(N&1)===0?N|1:N&-2;v=f.multiply(v,D)}u[m]=f.multiply(t.evaluateAt(p),f.inverse(v)),f.getGeneratorBase()!==0&&(u[m]=f.multiply(u[m],p))}return u}}var Nn;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})(Nn||(Nn={}));class Ut{decode(t){this.ddata=t;let i=t.getBits(),l=this.extractBits(i),u=this.correctBits(l),f=Ut.convertBoolArrayToByteArray(u),m=Ut.getEncodedData(u),p=new Wt(f,m,null,null);return p.setNumBits(u.length),p}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,l=Nn.UPPER,u=Nn.UPPER,f="",m=0;for(;m<i;)if(u===Nn.BINARY){if(i-m<5)break;let p=Ut.readCode(t,m,5);if(m+=5,p===0){if(i-m<11)break;p=Ut.readCode(t,m,11)+31,m+=11}for(let v=0;v<p;v++){if(i-m<8){m=i;break}const A=Ut.readCode(t,m,8);f+=ue.castAsNonUtf8Char(A),m+=8}u=l}else{let p=u===Nn.DIGIT?4:5;if(i-m<p)break;let v=Ut.readCode(t,m,p);m+=p;let A=Ut.getCharacter(u,v);A.startsWith("CTRL_")?(l=u,u=Ut.getTable(A.charAt(5)),A.charAt(6)==="L"&&(l=u)):(f+=A,u=l)}return f}static getTable(t){switch(t){case"L":return Nn.LOWER;case"P":return Nn.PUNCT;case"M":return Nn.MIXED;case"D":return Nn.DIGIT;case"B":return Nn.BINARY;case"U":default:return Nn.UPPER}}static getCharacter(t,i){switch(t){case Nn.UPPER:return Ut.UPPER_TABLE[i];case Nn.LOWER:return Ut.LOWER_TABLE[i];case Nn.MIXED:return Ut.MIXED_TABLE[i];case Nn.PUNCT:return Ut.PUNCT_TABLE[i];case Nn.DIGIT:return Ut.DIGIT_TABLE[i];default:throw new ir("Bad table")}}correctBits(t){let i,l;this.ddata.getNbLayers()<=2?(l=6,i=xt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,i=xt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,i=xt.AZTEC_DATA_10):(l=12,i=xt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=t.length/l;if(f<u)throw new R;let m=t.length%l,p=new Int32Array(f);for(let j=0;j<f;j++,m+=l)p[j]=Ut.readCode(t,m,l);try{new Zn(i).decode(p,f-u)}catch(j){throw new R(j)}let v=(1<<l)-1,A=0;for(let j=0;j<u;j++){let F=p[j];if(F===0||F===v)throw new R;(F===1||F===v-1)&&A++}let N=new Array(u*l-A),D=0;for(let j=0;j<u;j++){let F=p[j];if(F===1||F===v-1)N.fill(F>1,D,D+l-1),D+=l-1;else for(let Y=l-1;Y>=0;--Y)N[D++]=(F&1<<Y)!==0}return N}extractBits(t){let i=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(i?11:14)+l*4,f=new Int32Array(u),m=new Array(this.totalBitsInLayer(l,i));if(i)for(let p=0;p<f.length;p++)f[p]=p;else{let p=u+1+2*G.truncDivision(G.truncDivision(u,2)-1,15),v=u/2,A=G.truncDivision(p,2);for(let N=0;N<v;N++){let D=N+G.truncDivision(N,15);f[v-N-1]=A-D-1,f[v+N]=A+D+1}}for(let p=0,v=0;p<l;p++){let A=(l-p)*4+(i?9:12),N=p*2,D=u-1-N;for(let j=0;j<A;j++){let F=j*2;for(let Y=0;Y<2;Y++)m[v+F+Y]=t.get(f[N+Y],f[N+j]),m[v+2*A+F+Y]=t.get(f[N+j],f[D-Y]),m[v+4*A+F+Y]=t.get(f[D-Y],f[D-j]),m[v+6*A+F+Y]=t.get(f[D-j],f[N+Y])}v+=A*8}return m}static readCode(t,i,l){let u=0;for(let f=i;f<i+l;f++)u<<=1,t[f]&&(u|=1);return u}static readByte(t,i){let l=t.length-i;return l>=8?Ut.readCode(t,i,8):Ut.readCode(t,i,l)<<8-l}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let l=0;l<i.length;l++)i[l]=Ut.readByte(t,8*l);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}Ut.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ut.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ut.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ut.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ut.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class bt{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,l,u){const f=t-l,m=i-u;return Math.sqrt(f*f+m*m)}static sum(t){let i=0;for(let l=0,u=t.length;l!==u;l++){const f=t[l];i+=f}return i}}class yi{static floatToIntBits(t){return t}}yi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ge{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Ge){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*yi.floatToIntBits(this.x)+yi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),l=this.distance(t[1],t[2]),u=this.distance(t[0],t[2]);let f,m,p;if(l>=i&&l>=u?(m=t[0],f=t[1],p=t[2]):u>=l&&u>=i?(m=t[1],f=t[0],p=t[2]):(m=t[2],f=t[0],p=t[1]),this.crossProductZ(f,m,p)<0){const v=f;f=p,p=v}t[0]=f,t[1]=m,t[2]=p}static distance(t,i){return bt.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,l){const u=i.x,f=i.y;return(l.x-u)*(t.y-f)-(l.y-f)*(t.x-u)}}class oa{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class js extends oa{constructor(t,i,l,u,f){super(t,i),this.compact=l,this.nbDatablocks=u,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ft{constructor(t,i,l,u){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Ft.INIT_SIZE),l==null&&(l=t.getWidth()/2|0),u==null&&(u=t.getHeight()/2|0);const f=i/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new K}detect(){let t=this.leftInit,i=this.rightInit,l=this.upInit,u=this.downInit,f=!1,m=!0,p=!1,v=!1,A=!1,N=!1,D=!1;const j=this.width,F=this.height;for(;m;){m=!1;let Y=!0;for(;(Y||!v)&&i<j;)Y=this.containsBlackPoint(l,u,i,!1),Y?(i++,m=!0,v=!0):v||i++;if(i>=j){f=!0;break}let J=!0;for(;(J||!A)&&u<F;)J=this.containsBlackPoint(t,i,u,!0),J?(u++,m=!0,A=!0):A||u++;if(u>=F){f=!0;break}let le=!0;for(;(le||!N)&&t>=0;)le=this.containsBlackPoint(l,u,t,!1),le?(t--,m=!0,N=!0):N||t--;if(t<0){f=!0;break}let we=!0;for(;(we||!D)&&l>=0;)we=this.containsBlackPoint(t,i,l,!0),we?(l--,m=!0,D=!0):D||l--;if(l<0){f=!0;break}m&&(p=!0)}if(!f&&p){const Y=i-t;let J=null;for(let Be=1;J===null&&Be<Y;Be++)J=this.getBlackPointOnSegment(t,u-Be,t+Be,u);if(J==null)throw new K;let le=null;for(let Be=1;le===null&&Be<Y;Be++)le=this.getBlackPointOnSegment(t,l+Be,t+Be,l);if(le==null)throw new K;let we=null;for(let Be=1;we===null&&Be<Y;Be++)we=this.getBlackPointOnSegment(i,l+Be,i-Be,l);if(we==null)throw new K;let Le=null;for(let Be=1;Le===null&&Be<Y;Be++)Le=this.getBlackPointOnSegment(i,u-Be,i-Be,u);if(Le==null)throw new K;return this.centerEdges(Le,J,we,le)}else throw new K}getBlackPointOnSegment(t,i,l,u){const f=bt.round(bt.distance(t,i,l,u)),m=(l-t)/f,p=(u-i)/f,v=this.image;for(let A=0;A<f;A++){const N=bt.round(t+A*m),D=bt.round(i+A*p);if(v.get(N,D))return new Ge(N,D)}return null}centerEdges(t,i,l,u){const f=t.getX(),m=t.getY(),p=i.getX(),v=i.getY(),A=l.getX(),N=l.getY(),D=u.getX(),j=u.getY(),F=Ft.CORR;return f<this.width/2?[new Ge(D-F,j+F),new Ge(p+F,v+F),new Ge(A-F,N-F),new Ge(f+F,m-F)]:[new Ge(D+F,j+F),new Ge(p+F,v-F),new Ge(A-F,N+F),new Ge(f-F,m-F)]}containsBlackPoint(t,i,l,u){const f=this.image;if(u){for(let m=t;m<=i;m++)if(f.get(m,l))return!0}else for(let m=t;m<=i;m++)if(f.get(l,m))return!0;return!1}}Ft.INIT_SIZE=10,Ft.CORR=1;class li{static checkAndNudgePoints(t,i){const l=t.getWidth(),u=t.getHeight();let f=!0;for(let m=0;m<i.length&&f;m+=2){const p=Math.floor(i[m]),v=Math.floor(i[m+1]);if(p<-1||p>l||v<-1||v>u)throw new K;f=!1,p===-1?(i[m]=0,f=!0):p===l&&(i[m]=l-1,f=!0),v===-1?(i[m+1]=0,f=!0):v===u&&(i[m+1]=u-1,f=!0)}f=!0;for(let m=i.length-2;m>=0&&f;m-=2){const p=Math.floor(i[m]),v=Math.floor(i[m+1]);if(p<-1||p>l||v<-1||v>u)throw new K;f=!1,p===-1?(i[m]=0,f=!0):p===l&&(i[m]=l-1,f=!0),v===-1?(i[m+1]=0,f=!0):v===u&&(i[m+1]=u-1,f=!0)}}}class Qn{constructor(t,i,l,u,f,m,p,v,A){this.a11=t,this.a21=i,this.a31=l,this.a12=u,this.a22=f,this.a32=m,this.a13=p,this.a23=v,this.a33=A}static quadrilateralToQuadrilateral(t,i,l,u,f,m,p,v,A,N,D,j,F,Y,J,le){const we=Qn.quadrilateralToSquare(t,i,l,u,f,m,p,v);return Qn.squareToQuadrilateral(A,N,D,j,F,Y,J,le).times(we)}transformPoints(t){const i=t.length,l=this.a11,u=this.a12,f=this.a13,m=this.a21,p=this.a22,v=this.a23,A=this.a31,N=this.a32,D=this.a33;for(let j=0;j<i;j+=2){const F=t[j],Y=t[j+1],J=f*F+v*Y+D;t[j]=(l*F+m*Y+A)/J,t[j+1]=(u*F+p*Y+N)/J}}transformPointsWithValues(t,i){const l=this.a11,u=this.a12,f=this.a13,m=this.a21,p=this.a22,v=this.a23,A=this.a31,N=this.a32,D=this.a33,j=t.length;for(let F=0;F<j;F++){const Y=t[F],J=i[F],le=f*Y+v*J+D;t[F]=(l*Y+m*J+A)/le,i[F]=(u*Y+p*J+N)/le}}static squareToQuadrilateral(t,i,l,u,f,m,p,v){const A=t-l+f-p,N=i-u+m-v;if(A===0&&N===0)return new Qn(l-t,f-l,t,u-i,m-u,i,0,0,1);{const D=l-f,j=p-f,F=u-m,Y=v-m,J=D*Y-j*F,le=(A*Y-j*N)/J,we=(D*N-A*F)/J;return new Qn(l-t+le*l,p-t+we*p,t,u-i+le*u,v-i+we*v,i,le,we,1)}}static quadrilateralToSquare(t,i,l,u,f,m,p,v){return Qn.squareToQuadrilateral(t,i,l,u,f,m,p,v).buildAdjoint()}buildAdjoint(){return new Qn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Qn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Mi extends li{sampleGrid(t,i,l,u,f,m,p,v,A,N,D,j,F,Y,J,le,we,Le,Be){const Re=Qn.quadrilateralToQuadrilateral(u,f,m,p,v,A,N,D,j,F,Y,J,le,we,Le,Be);return this.sampleGridWithTransform(t,i,l,Re)}sampleGridWithTransform(t,i,l,u){if(i<=0||l<=0)throw new K;const f=new Oe(i,l),m=new Float32Array(2*i);for(let p=0;p<l;p++){const v=m.length,A=p+.5;for(let N=0;N<v;N+=2)m[N]=N/2+.5,m[N+1]=A;u.transformPoints(m),li.checkAndNudgePoints(t,m);try{for(let N=0;N<v;N+=2)t.get(Math.floor(m[N]),Math.floor(m[N+1]))&&f.set(N/2,p)}catch{throw new K}}return f}}class bn{static setGridSampler(t){bn.gridSampler=t}static getInstance(){return bn.gridSampler}}bn.gridSampler=new Mi;class tn{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new Ge(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ca{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),l=this.getBullsEyeCorners(i);if(t){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new js(u,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new K;let i=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(l,i);let u=0;for(let m=0;m<4;m++){let p=l[(this.shift+m)%4];this.compact?(u<<=7,u+=p>>1&127):(u<<=10,u+=(p>>2&992)+(p>>1&31))}let f=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(t,i){let l=0;t.forEach((u,f,m)=>{let p=(u>>i-2<<1)+(u&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(G.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new K}getCorrectedParameterData(t,i){let l,u;i?(l=7,u=2):(l=10,u=4);let f=l-u,m=new Int32Array(l);for(let v=l-1;v>=0;--v)m[v]=t&15,t>>=4;try{new Zn(xt.AZTEC_PARAM).decode(m,f)}catch{throw new K}let p=0;for(let v=0;v<u;v++)p=(p<<4)+m[v];return p}getBullsEyeCorners(t){let i=t,l=t,u=t,f=t,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let D=this.getFirstDifferent(i,m,1,-1),j=this.getFirstDifferent(l,m,1,1),F=this.getFirstDifferent(u,m,-1,1),Y=this.getFirstDifferent(f,m,-1,-1);if(this.nbCenterLayers>2){let J=this.distancePoint(Y,D)*this.nbCenterLayers/(this.distancePoint(f,i)*(this.nbCenterLayers+2));if(J<.75||J>1.25||!this.isWhiteOrBlackRectangle(D,j,F,Y))break}i=D,l=j,u=F,f=Y,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new K;this.compact=this.nbCenterLayers===5;let p=new Ge(i.getX()+.5,i.getY()-.5),v=new Ge(l.getX()+.5,l.getY()+.5),A=new Ge(u.getX()-.5,u.getY()+.5),N=new Ge(f.getX()-.5,f.getY()-.5);return this.expandSquare([p,v,A,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,l,u;try{let p=new Ft(this.image).detect();t=p[0],i=p[1],l=p[2],u=p[3]}catch{let v=this.image.getWidth()/2,A=this.image.getHeight()/2;t=this.getFirstDifferent(new tn(v+7,A-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new tn(v+7,A+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new tn(v-7,A+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new tn(v-7,A-7),!1,-1,-1).toResultPoint()}let f=bt.round((t.getX()+u.getX()+i.getX()+l.getX())/4),m=bt.round((t.getY()+u.getY()+i.getY()+l.getY())/4);try{let p=new Ft(this.image,15,f,m).detect();t=p[0],i=p[1],l=p[2],u=p[3]}catch{t=this.getFirstDifferent(new tn(f+7,m-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new tn(f+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new tn(f-7,m+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new tn(f-7,m-7),!1,-1,-1).toResultPoint()}return f=bt.round((t.getX()+u.getX()+i.getX()+l.getX())/4),m=bt.round((t.getY()+u.getY()+i.getY()+l.getY())/4),new tn(f,m)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,l,u,f){let m=bn.getInstance(),p=this.getDimension(),v=p/2-this.nbCenterLayers,A=p/2+this.nbCenterLayers;return m.sampleGrid(t,p,p,v,v,A,v,A,A,v,A,i.getX(),i.getY(),l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY())}sampleLine(t,i,l){let u=0,f=this.distanceResultPoint(t,i),m=f/l,p=t.getX(),v=t.getY(),A=m*(i.getX()-t.getX())/f,N=m*(i.getY()-t.getY())/f;for(let D=0;D<l;D++)this.image.get(bt.round(p+D*A),bt.round(v+D*N))&&(u|=1<<l-D-1);return u}isWhiteOrBlackRectangle(t,i,l,u){let f=3;t=new tn(t.getX()-f,t.getY()+f),i=new tn(i.getX()-f,i.getY()-f),l=new tn(l.getX()+f,l.getY()-f),u=new tn(u.getX()+f,u.getY()+f);let m=this.getColor(u,t);if(m===0)return!1;let p=this.getColor(t,i);return p!==m||(p=this.getColor(i,l),p!==m)?!1:(p=this.getColor(l,u),p===m)}getColor(t,i){let l=this.distancePoint(t,i),u=(i.getX()-t.getX())/l,f=(i.getY()-t.getY())/l,m=0,p=t.getX(),v=t.getY(),A=this.image.get(t.getX(),t.getY()),N=Math.ceil(l);for(let j=0;j<N;j++)p+=u,v+=f,this.image.get(bt.round(p),bt.round(v))!==A&&m++;let D=m/l;return D>.1&&D<.9?0:D<=.1===A?1:-1}getFirstDifferent(t,i,l,u){let f=t.getX()+l,m=t.getY()+u;for(;this.isValid(f,m)&&this.image.get(f,m)===i;)f+=l,m+=u;for(f-=l,m-=u;this.isValid(f,m)&&this.image.get(f,m)===i;)f+=l;for(f-=l;this.isValid(f,m)&&this.image.get(f,m)===i;)m+=u;return m-=u,new tn(f,m)}expandSquare(t,i,l){let u=l/(2*i),f=t[0].getX()-t[2].getX(),m=t[0].getY()-t[2].getY(),p=(t[0].getX()+t[2].getX())/2,v=(t[0].getY()+t[2].getY())/2,A=new Ge(p+u*f,v+u*m),N=new Ge(p-u*f,v-u*m);f=t[1].getX()-t[3].getX(),m=t[1].getY()-t[3].getY(),p=(t[1].getX()+t[3].getX())/2,v=(t[1].getY()+t[3].getY())/2;let D=new Ge(p+u*f,v+u*m),j=new Ge(p-u*f,v-u*m);return[A,D,N,j]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=bt.round(t.getX()),l=bt.round(t.getY());return this.isValid(i,l)}distancePoint(t,i){return bt.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return bt.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(G.truncDivision(this.nbLayers-4,8)+1)+15}}class ua{decode(t,i=null){let l=null,u=new ca(t.getBlackMatrix()),f=null,m=null;try{let N=u.detectMirror(!1);f=N.getPoints(),this.reportFoundResultPoints(i,f),m=new Ut().decode(N)}catch(N){l=N}if(m==null)try{let N=u.detectMirror(!0);f=N.getPoints(),this.reportFoundResultPoints(i,f),m=new Ut().decode(N)}catch(N){throw l??N}let p=new Pe(m.getText(),m.getRawBytes(),m.getNumBits(),f,je.AZTEC,z.currentTimeMillis()),v=m.getByteSegments();v!=null&&p.putMetadata(wt.BYTE_SEGMENTS,v);let A=m.getECLevel();return A!=null&&p.putMetadata(wt.ERROR_CORRECTION_LEVEL,A),p}reportFoundResultPoints(t,i){if(t!=null){let l=t.get(se.NEED_RESULT_POINT_CALLBACK);l!=null&&i.forEach((u,f,m)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class is extends Ie{constructor(t=500){super(new ua,t)}}class Qt{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(se.TRY_HARDER)===!0&&t.isRotateSupported()){const f=t.rotateCounterClockwise(),m=this.doDecode(f,i),p=m.getResultMetadata();let v=270;p!==null&&p.get(wt.ORIENTATION)===!0&&(v=v+p.get(wt.ORIENTATION)%360),m.putMetadata(wt.ORIENTATION,v);const A=m.getResultPoints();if(A!==null){const N=f.getHeight();for(let D=0;D<A.length;D++)A[D]=new Ge(N-A[D].getY()-1,A[D].getX())}return m}else throw new K}}reset(){}doDecode(t,i){const l=t.getWidth(),u=t.getHeight();let f=new oe(l);const m=i&&i.get(se.TRY_HARDER)===!0,p=Math.max(1,u>>(m?8:5));let v;m?v=u:v=15;const A=Math.trunc(u/2);for(let N=0;N<v;N++){const D=Math.trunc((N+1)/2),j=(N&1)===0,F=A+p*(j?D:-D);if(F<0||F>=u)break;try{f=t.getBlackRow(F,f)}catch{continue}for(let Y=0;Y<2;Y++){if(Y===1&&(f.reverse(),i&&i.get(se.NEED_RESULT_POINT_CALLBACK)===!0)){const J=new Map;i.forEach((le,we)=>J.set(we,le)),J.delete(se.NEED_RESULT_POINT_CALLBACK),i=J}try{const J=this.decodeRow(F,f,i);if(Y===1){J.putMetadata(wt.ORIENTATION,180);const le=J.getResultPoints();le!==null&&(le[0]=new Ge(l-le[0].getX()-1,le[0].getY()),le[1]=new Ge(l-le[1].getX()-1,le[1].getY()))}return J}catch{}}}throw new K}static recordPattern(t,i,l){const u=l.length;for(let A=0;A<u;A++)l[A]=0;const f=t.getSize();if(i>=f)throw new K;let m=!t.get(i),p=0,v=i;for(;v<f;){if(t.get(v)!==m)l[p]++;else{if(++p===u)break;l[p]=1,m=!m}v++}if(!(p===u||p===u-1&&v===f))throw new K}static recordPatternInReverse(t,i,l){let u=l.length,f=t.get(i);for(;i>0&&u>=0;)t.get(--i)!==f&&(u--,f=!f);if(u>=0)throw new K;Qt.recordPattern(t,i+1,l)}static patternMatchVariance(t,i,l){const u=t.length;let f=0,m=0;for(let A=0;A<u;A++)f+=t[A],m+=i[A];if(f<m)return Number.POSITIVE_INFINITY;const p=f/m;l*=p;let v=0;for(let A=0;A<u;A++){const N=t[A],D=i[A]*p,j=N>D?N-D:D-N;if(j>l)return Number.POSITIVE_INFINITY;v+=j}return v/f}}class Me extends Qt{static findStartPattern(t){const i=t.getSize(),l=t.getNextSet(0);let u=0,f=Int32Array.from([0,0,0,0,0,0]),m=l,p=!1;const v=6;for(let A=l;A<i;A++)if(t.get(A)!==p)f[u]++;else{if(u===v-1){let N=Me.MAX_AVG_VARIANCE,D=-1;for(let j=Me.CODE_START_A;j<=Me.CODE_START_C;j++){const F=Qt.patternMatchVariance(f,Me.CODE_PATTERNS[j],Me.MAX_INDIVIDUAL_VARIANCE);F<N&&(N=F,D=j)}if(D>=0&&t.isRange(Math.max(0,m-(A-m)/2),m,!1))return Int32Array.from([m,A,D]);m+=f[0]+f[1],f=f.slice(2,f.length-1),f[u-1]=0,f[u]=0,u--}else u++;f[u]=1,p=!p}throw new K}static decodeCode(t,i,l){Qt.recordPattern(t,l,i);let u=Me.MAX_AVG_VARIANCE,f=-1;for(let m=0;m<Me.CODE_PATTERNS.length;m++){const p=Me.CODE_PATTERNS[m],v=this.patternMatchVariance(i,p,Me.MAX_INDIVIDUAL_VARIANCE);v<u&&(u=v,f=m)}if(f>=0)return f;throw new K}decodeRow(t,i,l){const u=l&&l.get(se.ASSUME_GS1)===!0,f=Me.findStartPattern(i),m=f[2];let p=0;const v=new Uint8Array(20);v[p++]=m;let A;switch(m){case Me.CODE_START_A:A=Me.CODE_CODE_A;break;case Me.CODE_START_B:A=Me.CODE_CODE_B;break;case Me.CODE_START_C:A=Me.CODE_CODE_C;break;default:throw new R}let N=!1,D=!1,j="",F=f[0],Y=f[1];const J=Int32Array.from([0,0,0,0,0,0]);let le=0,we=0,Le=m,Be=0,Re=!0,vt=!1,ht=!1;for(;!N;){const zi=D;switch(D=!1,le=we,we=Me.decodeCode(i,J,Y),v[p++]=we,we!==Me.CODE_STOP&&(Re=!0),we!==Me.CODE_STOP&&(Be++,Le+=Be*we),F=Y,Y+=J.reduce((uc,Yl)=>uc+Yl,0),we){case Me.CODE_START_A:case Me.CODE_START_B:case Me.CODE_START_C:throw new R}switch(A){case Me.CODE_CODE_A:if(we<64)ht===vt?j+=String.fromCharCode(32+we):j+=String.fromCharCode(32+we+128),ht=!1;else if(we<96)ht===vt?j+=String.fromCharCode(we-64):j+=String.fromCharCode(we+64),ht=!1;else switch(we!==Me.CODE_STOP&&(Re=!1),we){case Me.CODE_FNC_1:u&&(j.length===0?j+="]C1":j+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_A:!vt&&ht?(vt=!0,ht=!1):vt&&ht?(vt=!1,ht=!1):ht=!0;break;case Me.CODE_SHIFT:D=!0,A=Me.CODE_CODE_B;break;case Me.CODE_CODE_B:A=Me.CODE_CODE_B;break;case Me.CODE_CODE_C:A=Me.CODE_CODE_C;break;case Me.CODE_STOP:N=!0;break}break;case Me.CODE_CODE_B:if(we<96)ht===vt?j+=String.fromCharCode(32+we):j+=String.fromCharCode(32+we+128),ht=!1;else switch(we!==Me.CODE_STOP&&(Re=!1),we){case Me.CODE_FNC_1:u&&(j.length===0?j+="]C1":j+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_B:!vt&&ht?(vt=!0,ht=!1):vt&&ht?(vt=!1,ht=!1):ht=!0;break;case Me.CODE_SHIFT:D=!0,A=Me.CODE_CODE_A;break;case Me.CODE_CODE_A:A=Me.CODE_CODE_A;break;case Me.CODE_CODE_C:A=Me.CODE_CODE_C;break;case Me.CODE_STOP:N=!0;break}break;case Me.CODE_CODE_C:if(we<100)we<10&&(j+="0"),j+=we;else switch(we!==Me.CODE_STOP&&(Re=!1),we){case Me.CODE_FNC_1:u&&(j.length===0?j+="]C1":j+="");break;case Me.CODE_CODE_A:A=Me.CODE_CODE_A;break;case Me.CODE_CODE_B:A=Me.CODE_CODE_B;break;case Me.CODE_STOP:N=!0;break}break}zi&&(A=A===Me.CODE_CODE_A?Me.CODE_CODE_B:Me.CODE_CODE_A)}const En=Y-F;if(Y=i.getNextUnset(Y),!i.isRange(Y,Math.min(i.getSize(),Y+(Y-F)/2),!1))throw new K;if(Le-=Be*le,Le%103!==le)throw new B;const Er=j.length;if(Er===0)throw new K;Er>0&&Re&&(A===Me.CODE_CODE_C?j=j.substring(0,Er-2):j=j.substring(0,Er-1));const Jn=(f[1]+f[0])/2,Yt=F+En/2,qn=v.length,mr=new Uint8Array(qn);for(let zi=0;zi<qn;zi++)mr[zi]=v[zi];const Aa=[new Ge(Jn,t),new Ge(Yt,t)];return new Pe(j,mr,0,Aa,je.CODE_128,new Date().getTime())}}Me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Me.MAX_AVG_VARIANCE=.25,Me.MAX_INDIVIDUAL_VARIANCE=.7,Me.CODE_SHIFT=98,Me.CODE_CODE_C=99,Me.CODE_CODE_B=100,Me.CODE_CODE_A=101,Me.CODE_FNC_1=102,Me.CODE_FNC_2=97,Me.CODE_FNC_3=96,Me.CODE_FNC_4_A=101,Me.CODE_FNC_4_B=100,Me.CODE_START_A=103,Me.CODE_START_B=104,Me.CODE_START_C=105,Me.CODE_STOP=106;class zt extends Qt{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let f=zt.findAsteriskPattern(i,u),m=i.getNextSet(f[1]),p=i.getSize(),v,A;do{zt.recordPattern(i,m,u);let J=zt.toNarrowWidePattern(u);if(J<0)throw new K;v=zt.patternToChar(J),this.decodeRowResult+=v,A=m;for(let le of u)m+=le;m=i.getNextSet(m)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let J of u)N+=J;let D=m-A-N;if(m!==p&&D*2<N)throw new K;if(this.usingCheckDigit){let J=this.decodeRowResult.length-1,le=0;for(let we=0;we<J;we++)le+=zt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(we));if(this.decodeRowResult.charAt(J)!==zt.ALPHABET_STRING.charAt(le%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,J)}if(this.decodeRowResult.length===0)throw new K;let j;this.extendedMode?j=zt.decodeExtended(this.decodeRowResult):j=this.decodeRowResult;let F=(f[1]+f[0])/2,Y=A+N/2;return new Pe(j,null,0,[new Ge(F,t),new Ge(Y,t)],je.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let l=t.getSize(),u=t.getNextSet(0),f=0,m=u,p=!1,v=i.length;for(let A=u;A<l;A++)if(t.get(A)!==p)i[f]++;else{if(f===v-1){if(this.toNarrowWidePattern(i)===zt.ASTERISK_ENCODING&&t.isRange(Math.max(0,m-Math.floor((A-m)/2)),m,!1))return[m,A];m+=i[0]+i[1],i.copyWithin(0,2,2+f-1),i[f-1]=0,i[f]=0,f--}else f++;i[f]=1,p=!p}throw new K}static toNarrowWidePattern(t){let i=t.length,l=0,u;do{let f=2147483647;for(let v of t)v<f&&v>l&&(f=v);l=f,u=0;let m=0,p=0;for(let v=0;v<i;v++){let A=t[v];A>l&&(p|=1<<i-1-v,u++,m+=A)}if(u===3){for(let v=0;v<i&&u>0;v++){let A=t[v];if(A>l&&(u--,A*2>=m))return-1}return p}}while(u>3);return-1}static patternToChar(t){for(let i=0;i<zt.CHARACTER_ENCODINGS.length;i++)if(zt.CHARACTER_ENCODINGS[i]===t)return zt.ALPHABET_STRING.charAt(i);if(t===zt.ASTERISK_ENCODING)return"*";throw new K}static decodeExtended(t){let i=t.length,l="";for(let u=0;u<i;u++){let f=t.charAt(u);if(f==="+"||f==="$"||f==="%"||f==="/"){let m=t.charAt(u+1),p="\0";switch(f){case"+":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)+32);else throw new R;break;case"$":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)-64);else throw new R;break;case"%":if(m>="A"&&m<="E")p=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")p=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")p=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")p="\0";else if(m==="V")p="@";else if(m==="W")p="`";else if(m==="X"||m==="Y"||m==="Z")p="";else throw new R;break;case"/":if(m>="A"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")p=":";else throw new R;break}l+=p,u++}else l+=f}return l}}zt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",zt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],zt.ASTERISK_ENCODING=148;class dt extends Qt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,l){let u=this.decodeStart(i),f=this.decodeEnd(i),m=new Ee;dt.decodeMiddle(i,u[1],f[0],m);let p=m.toString(),v=null;l!=null&&(v=l.get(se.ALLOWED_LENGTHS)),v==null&&(v=dt.DEFAULT_ALLOWED_LENGTHS);let A=p.length,N=!1,D=0;for(let Y of v){if(A===Y){N=!0;break}Y>D&&(D=Y)}if(!N&&A>D&&(N=!0),!N)throw new R;const j=[new Ge(u[1],t),new Ge(f[0],t)];return new Pe(p,null,0,j,je.ITF,new Date().getTime())}static decodeMiddle(t,i,l,u){let f=new Int32Array(10),m=new Int32Array(5),p=new Int32Array(5);for(f.fill(0),m.fill(0),p.fill(0);i<l;){Qt.recordPattern(t,i,f);for(let A=0;A<5;A++){let N=2*A;m[A]=f[N],p[A]=f[N+1]}let v=dt.decodeDigit(m);u.append(v.toString()),v=this.decodeDigit(p),u.append(v.toString()),f.forEach(function(A){i+=A})}}decodeStart(t){let i=dt.skipWhiteSpace(t),l=dt.findGuardPattern(t,i,dt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(t,l[0]),l}validateQuietZone(t,i){let l=this.narrowLineWidth*10;l=l<i?l:i;for(let u=i-1;l>0&&u>=0&&!t.get(u);u--)l--;if(l!==0)throw new K}static skipWhiteSpace(t){const i=t.getSize(),l=t.getNextSet(0);if(l===i)throw new K;return l}decodeEnd(t){t.reverse();try{let i=dt.skipWhiteSpace(t),l;try{l=dt.findGuardPattern(t,i,dt.END_PATTERN_REVERSED[0])}catch(f){f instanceof K&&(l=dt.findGuardPattern(t,i,dt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,l[0]);let u=l[0];return l[0]=t.getSize()-l[1],l[1]=t.getSize()-u,l}finally{t.reverse()}}static findGuardPattern(t,i,l){let u=l.length,f=new Int32Array(u),m=t.getSize(),p=!1,v=0,A=i;f.fill(0);for(let N=i;N<m;N++)if(t.get(N)!==p)f[v]++;else{if(v===u-1){if(Qt.patternMatchVariance(f,l,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE)return[A,N];A+=f[0]+f[1],z.arraycopy(f,2,f,0,v-1),f[v-1]=0,f[v]=0,v--}else v++;f[v]=1,p=!p}throw new K}static decodeDigit(t){let i=dt.MAX_AVG_VARIANCE,l=-1,u=dt.PATTERNS.length;for(let f=0;f<u;f++){let m=dt.PATTERNS[f],p=Qt.patternMatchVariance(t,m,dt.MAX_INDIVIDUAL_VARIANCE);p<i?(i=p,l=f):p===i&&(l=-1)}if(l>=0)return l%10;throw new K}}dt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],dt.MAX_AVG_VARIANCE=.38,dt.MAX_INDIVIDUAL_VARIANCE=.5,dt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],dt.START_PATTERN=Int32Array.from([1,1,1,1]),dt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class nn extends Qt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,l,u=0,f=Int32Array.from([0,0,0]);for(;!i;){f=Int32Array.from([0,0,0]),l=nn.findGuardPattern(t,u,!1,this.START_END_PATTERN,f);let m=l[0];u=l[1];let p=m-(u-m);p>=0&&(i=t.isRange(p,m,!1))}return l}static checkChecksum(t){return nn.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let l=parseInt(t.charAt(i-1),10);return nn.getStandardUPCEANChecksum(t.substring(0,i-1))===l}static getStandardUPCEANChecksum(t){let i=t.length,l=0;for(let u=i-1;u>=0;u-=2){let f=t.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new R;l+=f}l*=3;for(let u=i-2;u>=0;u-=2){let f=t.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new R;l+=f}return(1e3-l)%10}static decodeEnd(t,i){return nn.findGuardPattern(t,i,!1,nn.START_END_PATTERN,new Int32Array(nn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,l,u){return this.findGuardPattern(t,i,l,u,new Int32Array(u.length))}static findGuardPattern(t,i,l,u,f){let m=t.getSize();i=l?t.getNextUnset(i):t.getNextSet(i);let p=0,v=i,A=u.length,N=l;for(let D=i;D<m;D++)if(t.get(D)!==N)f[p]++;else{if(p===A-1){if(Qt.patternMatchVariance(f,u,nn.MAX_INDIVIDUAL_VARIANCE)<nn.MAX_AVG_VARIANCE)return Int32Array.from([v,D]);v+=f[0]+f[1];let j=f.slice(2,f.length-1);for(let F=0;F<p-1;F++)f[F]=j[F];f[p-1]=0,f[p]=0,p--}else p++;f[p]=1,N=!N}throw new K}static decodeDigit(t,i,l,u){this.recordPattern(t,l,i);let f=this.MAX_AVG_VARIANCE,m=-1,p=u.length;for(let v=0;v<p;v++){let A=u[v],N=Qt.patternMatchVariance(i,A,nn.MAX_INDIVIDUAL_VARIANCE);N<f&&(f=N,m=v)}if(m>=0)return m;throw new K}}nn.MAX_AVG_VARIANCE=.48,nn.MAX_INDIVIDUAL_VARIANCE=.7,nn.START_END_PATTERN=Int32Array.from([1,1,1]),nn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),nn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),nn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Bi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(i,l,u),m=u.toString(),p=Bi.parseExtensionString(m),v=[new Ge((l[0]+l[1])/2,t),new Ge(f,t)],A=new Pe(m,null,0,v,je.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&A.putAllMetadata(p),A}decodeMiddle(t,i,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=t.getSize(),m=i[1],p=0;for(let A=0;A<5&&m<f;A++){let N=nn.decodeDigit(t,u,m,nn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let D of u)m+=D;N>=10&&(p|=1<<4-A),A!==4&&(m=t.getNextSet(m),m=t.getNextUnset(m))}if(l.length!==5)throw new K;let v=this.determineCheckDigit(p);if(Bi.extensionChecksum(l.toString())!==v)throw new K;return m}static extensionChecksum(t){let i=t.length,l=0;for(let u=i-2;u>=0;u-=2)l+=t.charAt(u).charCodeAt(0)-48;l*=3;for(let u=i-1;u>=0;u-=2)l+=t.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new K}static parseExtensionString(t){if(t.length!==5)return null;let i=Bi.parseExtension5String(t);return i==null?null:new Map([[wt.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let l=parseInt(t.substring(1)),u=(l/100).toString(),f=l%100,m=f<10?"0"+f:f.toString();return i+u+"."+m}}class fa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(i,l,u),m=u.toString(),p=fa.parseExtensionString(m),v=[new Ge((l[0]+l[1])/2,t),new Ge(f,t)],A=new Pe(m,null,0,v,je.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&A.putAllMetadata(p),A}decodeMiddle(t,i,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=t.getSize(),m=i[1],p=0;for(let v=0;v<2&&m<f;v++){let A=nn.decodeDigit(t,u,m,nn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let N of u)m+=N;A>=10&&(p|=1<<1-v),v!==1&&(m=t.getNextSet(m),m=t.getNextUnset(m))}if(l.length!==2)throw new K;if(parseInt(l.toString())%4!==p)throw new K;return m}static parseExtensionString(t){return t.length!==2?null:new Map([[wt.ISSUE_NUMBER,parseInt(t)]])}}class qr{static decodeRow(t,i,l){let u=nn.findGuardPattern(i,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Bi().decodeRow(t,i,u)}catch{return new fa().decodeRow(t,i,u)}}}qr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class _t extends nn{constructor(){super(),this.decodeRowStringBuffer="",_t.L_AND_G_PATTERNS=_t.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=_t.L_PATTERNS[t-10],l=new Int32Array(i.length);for(let u=0;u<i.length;u++)l[u]=i[i.length-u-1];_t.L_AND_G_PATTERNS[t]=l}}decodeRow(t,i,l){let u=_t.findStartGuardPattern(i),f=l==null?null:l.get(se.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Re=new Ge((u[0]+u[1])/2,t);f.foundPossibleResultPoint(Re)}let m=this.decodeMiddle(i,u,this.decodeRowStringBuffer),p=m.rowOffset,v=m.resultString;if(f!=null){const Re=new Ge(p,t);f.foundPossibleResultPoint(Re)}let A=this.decodeEnd(i,p);if(f!=null){const Re=new Ge((A[0]+A[1])/2,t);f.foundPossibleResultPoint(Re)}let N=A[1],D=N+(N-A[0]);if(D>=i.getSize()||!i.isRange(N,D,!1))throw new K;let j=v.toString();if(j.length<8)throw new R;if(!_t.checkChecksum(j))throw new B;let F=(u[1]+u[0])/2,Y=(A[1]+A[0])/2,J=this.getBarcodeFormat(),le=[new Ge(F,t),new Ge(Y,t)],we=new Pe(j,null,0,le,J,new Date().getTime()),Le=0;try{let Re=qr.decodeRow(t,i,A[1]);we.putMetadata(wt.UPC_EAN_EXTENSION,Re.getText()),we.putAllMetadata(Re.getResultMetadata()),we.addResultPoints(Re.getResultPoints()),Le=Re.getText().length}catch{}let Be=l==null?null:l.get(se.ALLOWED_EAN_EXTENSIONS);if(Be!=null){let Re=!1;for(let vt in Be)if(Le.toString()===vt){Re=!0;break}if(!Re)throw new K}return we}decodeEnd(t,i){return _t.findGuardPattern(t,i,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return _t.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let l=parseInt(t.charAt(i-1),10);return _t.getStandardUPCEANChecksum(t.substring(0,i-1))===l}static getStandardUPCEANChecksum(t){let i=t.length,l=0;for(let u=i-1;u>=0;u-=2){let f=t.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new R;l+=f}l*=3;for(let u=i-2;u>=0;u-=2){let f=t.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new R;l+=f}return(1e3-l)%10}}class ar extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=t.getSize(),m=i[1],p=0;for(let A=0;A<6&&m<f;A++){let N=_t.decodeDigit(t,u,m,_t.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let D of u)m+=D;N>=10&&(p|=1<<5-A)}l=ar.determineFirstDigit(l,p),m=_t.findGuardPattern(t,m,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&m<f;A++){let N=_t.decodeDigit(t,u,m,_t.L_PATTERNS);l+=String.fromCharCode(48+N);for(let D of u)m+=D}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return je.EAN_13}static determineFirstDigit(t,i){for(let l=0;l<10;l++)if(i===this.FIRST_DIGIT_ENCODINGS[l])return t=String.fromCharCode(48+l)+t,t;throw new K}}ar.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Xr extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=t.getSize(),m=i[1];for(let v=0;v<4&&m<f;v++){let A=_t.decodeDigit(t,u,m,_t.L_PATTERNS);l+=String.fromCharCode(48+A);for(let N of u)m+=N}m=_t.findGuardPattern(t,m,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&m<f;v++){let A=_t.decodeDigit(t,u,m,_t.L_PATTERNS);l+=String.fromCharCode(48+A);for(let N of u)m+=N}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return je.EAN_8}}class wi extends _t{constructor(){super(...arguments),this.ean13Reader=new ar}getBarcodeFormat(){return je.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,l))}decodeMiddle(t,i,l){return this.ean13Reader.decodeMiddle(t,i,l)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let l=new Pe(i.substring(1),null,null,t.getResultPoints(),je.UPC_A);return t.getResultMetadata()!=null&&l.putAllMetadata(t.getResultMetadata()),l}else throw new K}reset(){this.ean13Reader.reset()}}class Hn extends _t{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,l){const u=this.decodeMiddleCounters.map(A=>A);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const f=t.getSize();let m=i[1],p=0;for(let A=0;A<6&&m<f;A++){const N=Hn.decodeDigit(t,u,m,Hn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let D of u)m+=D;N>=10&&(p|=1<<5-A)}let v=Hn.determineNumSysAndCheckDigit(l,p);return{rowOffset:m,resultString:v}}decodeEnd(t,i){return Hn.findGuardPatternWithoutCounters(t,i,!0,Hn.MIDDLE_END_PATTERN)}checkChecksum(t){return _t.checkChecksum(Hn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let f=String.fromCharCode(48+l),m=String.fromCharCode(48+u);return f+t+m}throw K.getNotFoundInstance()}getBarcodeFormat(){return je.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new Ee;l.append(t.charAt(0));let u=i[5];switch(u){case 0:case 1:case 2:l.appendChars(i,0,2),l.append(u),l.append("0000"),l.appendChars(i,2,3);break;case 3:l.appendChars(i,0,3),l.append("00000"),l.appendChars(i,3,2);break;case 4:l.appendChars(i,0,4),l.append("00000"),l.append(i[4]);break;default:l.appendChars(i,0,5),l.append("0000"),l.append(u);break}return t.length>=8&&l.append(t.charAt(7)),l.toString()}}Hn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Hn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ha extends Qt{constructor(t){super();let i=t==null?null:t.get(se.POSSIBLE_FORMATS),l=[];c(i)?(l.push(new ar),l.push(new wi),l.push(new Xr),l.push(new Hn)):(i.indexOf(je.EAN_13)>-1&&l.push(new ar),i.indexOf(je.UPC_A)>-1&&l.push(new wi),i.indexOf(je.EAN_8)>-1&&l.push(new Xr),i.indexOf(je.UPC_E)>-1&&l.push(new Hn)),this.readers=l}decodeRow(t,i,l){for(let u of this.readers)try{const f=u.decodeRow(t,i,l),m=f.getBarcodeFormat()===je.EAN_13&&f.getText().charAt(0)==="0",p=l==null?null:l.get(se.POSSIBLE_FORMATS),v=p==null||p.includes(je.UPC_A);if(m&&v){const A=f.getRawBytes(),N=new Pe(f.getText().substring(1),A,A?A.length:null,f.getResultPoints(),je.UPC_A);return N.putAllMetadata(f.getResultMetadata()),N}return f}catch{}throw new K}reset(){for(let t of this.readers)t.reset()}}class xn extends Qt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let l=0;l<i.length;l++)if(Qt.patternMatchVariance(t,i[l],xn.MAX_INDIVIDUAL_VARIANCE)<xn.MAX_AVG_VARIANCE)return l;throw new K}static count(t){return bt.sum(new Int32Array(t))}static increment(t,i){let l=0,u=i[0];for(let f=1;f<t.length;f++)i[f]>u&&(u=i[f],l=f);t[l]++}static decrement(t,i){let l=0,u=i[0];for(let f=1;f<t.length;f++)i[f]<u&&(u=i[f],l=f);t[l]--}static isFinderPattern(t){let i=t[0]+t[1],l=i+t[2]+t[3],u=i/l;if(u>=xn.MIN_FINDER_PATTERN_RATIO&&u<=xn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let p of t)p>m&&(m=p),p<f&&(f=p);return m<10*f}return!1}}xn.MAX_AVG_VARIANCE=.2,xn.MAX_INDIVIDUAL_VARIANCE=.45,xn.MIN_FINDER_PATTERN_RATIO=9.5/12,xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class fr{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof fr))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Or{constructor(t,i,l,u,f){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Ge(l,f)),this.resultPoints.push(new Ge(u,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Or))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class yr{constructor(){}static getRSSvalue(t,i,l){let u=0;for(let v of t)u+=v;let f=0,m=0,p=t.length;for(let v=0;v<p-1;v++){let A;for(A=1,m|=1<<v;A<t[v];A++,m&=~(1<<v)){let N=yr.combins(u-A-1,p-v-2);if(l&&m===0&&u-A-(p-v-1)>=p-v-1&&(N-=yr.combins(u-A-(p-v),p-v-2)),p-v-1>1){let D=0;for(let j=u-A-(p-v-2);j>i;j--)D+=yr.combins(u-A-j-1,p-v-3);N-=D*(p-1-v)}else u-A>i&&N--;f+=N}u-=A}return f}static combins(t,i){let l,u;t-i>i?(u=i,l=t-i):(u=t-i,l=i);let f=1,m=1;for(let p=t;p>l;p--)f*=p,m<=u&&(f/=m,m++);for(;m<=u;)f/=m,m++;return f}}class ks{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let l=12*i,u=new oe(l),f=0,p=t[0].getRightChar().getValue();for(let v=11;v>=0;--v)(p&1<<v)!=0&&u.set(f),f++;for(let v=1;v<t.length;++v){let A=t[v],N=A.getLeftChar().getValue();for(let D=11;D>=0;--D)(N&1<<D)!=0&&u.set(f),f++;if(A.getRightChar()!=null){let D=A.getRightChar().getValue();for(let j=11;j>=0;--j)(D&1<<j)!=0&&u.set(f),f++}}return u}}class V{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ie{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class de extends ie{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===de.FNC1}}de.FNC1="$";class De extends ie{constructor(t,i,l){super(t),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ke extends ie{constructor(t,i,l){if(super(t),i<0||i>10||l<0||l>10)throw new R;this.firstDigit=i,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ke.FNC1}isSecondDigitFNC1(){return this.secondDigit===ke.FNC1}isAnyFNC1(){return this.firstDigit===ke.FNC1||this.secondDigit===ke.FNC1}}ke.FNC1=10;class _e{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new K;let i=t.substring(0,2);for(let f of _e.TWO_DIGIT_DATA_LENGTH)if(f[0]===i)return f[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(2,f[2],t):_e.processFixedAI(2,f[1],t);if(t.length<3)throw new K;let l=t.substring(0,3);for(let f of _e.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(3,f[2],t):_e.processFixedAI(3,f[1],t);for(let f of _e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(4,f[2],t):_e.processFixedAI(4,f[1],t);if(t.length<4)throw new K;let u=t.substring(0,4);for(let f of _e.FOUR_DIGIT_DATA_LENGTH)if(f[0]===u)return f[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(4,f[2],t):_e.processFixedAI(4,f[1],t);throw new K}static processFixedAI(t,i,l){if(l.length<t)throw new K;let u=l.substring(0,t);if(l.length<t+i)throw new K;let f=l.substring(t,t+i),m=l.substring(t+i),p="("+u+")"+f,v=_e.parseFieldsInGeneralPurpose(m);return v==null?p:p+v}static processVariableAI(t,i,l){let u=l.substring(0,t),f;l.length<t+i?f=l.length:f=t+i;let m=l.substring(t,f),p=l.substring(f),v="("+u+")"+m,A=_e.parseFieldsInGeneralPurpose(p);return A==null?v:v+A}}_e.VARIABLE_LENGTH=[],_e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",_e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",_e.VARIABLE_LENGTH,20],["22",_e.VARIABLE_LENGTH,29],["30",_e.VARIABLE_LENGTH,8],["37",_e.VARIABLE_LENGTH,8],["90",_e.VARIABLE_LENGTH,30],["91",_e.VARIABLE_LENGTH,30],["92",_e.VARIABLE_LENGTH,30],["93",_e.VARIABLE_LENGTH,30],["94",_e.VARIABLE_LENGTH,30],["95",_e.VARIABLE_LENGTH,30],["96",_e.VARIABLE_LENGTH,30],["97",_e.VARIABLE_LENGTH,3],["98",_e.VARIABLE_LENGTH,30],["99",_e.VARIABLE_LENGTH,30]],_e.THREE_DIGIT_DATA_LENGTH=[["240",_e.VARIABLE_LENGTH,30],["241",_e.VARIABLE_LENGTH,30],["242",_e.VARIABLE_LENGTH,6],["250",_e.VARIABLE_LENGTH,30],["251",_e.VARIABLE_LENGTH,30],["253",_e.VARIABLE_LENGTH,17],["254",_e.VARIABLE_LENGTH,20],["400",_e.VARIABLE_LENGTH,30],["401",_e.VARIABLE_LENGTH,30],["402",17],["403",_e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",_e.VARIABLE_LENGTH,20],["421",_e.VARIABLE_LENGTH,15],["422",3],["423",_e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],_e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",_e.VARIABLE_LENGTH,15],["391",_e.VARIABLE_LENGTH,18],["392",_e.VARIABLE_LENGTH,15],["393",_e.VARIABLE_LENGTH,18],["703",_e.VARIABLE_LENGTH,30]],_e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",_e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",_e.VARIABLE_LENGTH,20],["8003",_e.VARIABLE_LENGTH,30],["8004",_e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",_e.VARIABLE_LENGTH,30],["8008",_e.VARIABLE_LENGTH,12],["8018",18],["8020",_e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",_e.VARIABLE_LENGTH,70],["8200",_e.VARIABLE_LENGTH,70]];class He{constructor(t){this.buffer=new Ee,this.information=t}decodeAllCodes(t,i){let l=i,u=null;do{let f=this.decodeGeneralPurposeField(l,u),m=_e.parseFieldsInGeneralPurpose(f.getNewString());if(m!=null&&t.append(m),f.isRemaining()?u=""+f.getRemainingValue():u=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(t,4);return f===0?new ke(this.information.getSize(),ke.FNC1,ke.FNC1):new ke(this.information.getSize(),f-1,ke.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),l=(i-8)/11,u=(i-8)%11;return new ke(t+7,l,u)}extractNumericValueFromBitArray(t,i){return He.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,l){let u=0;for(let f=0;f<l;++f)t.get(i+f)&&(u|=1<<l-f-1);return u}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new De(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new De(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let l=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(l!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new De(this.current.getPosition(),this.buffer.toString()):i=new De(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new V(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new De(this.current.getPosition(),this.buffer.toString());return new V(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new V(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new De(this.current.getPosition(),this.buffer.toString());return new V(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new V(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new De(this.current.getPosition(),this.buffer.toString());return new V(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new V(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(t,7);if(l>=64&&l<116)return!0;if(t+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(t,8);return u>=232&&u<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new de(t+5,de.FNC1);if(i>=5&&i<15)return new de(t+5,"0"+(i-5));let l=this.extractNumericValueFromBitArray(t,7);if(l>=64&&l<90)return new de(t+7,""+(l+1));if(l>=90&&l<116)return new de(t+7,""+(l+7));let u=this.extractNumericValueFromBitArray(t,8),f;switch(u){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new R}return new de(t+8,f)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(t,6);return l>=16&&l<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new de(t+5,de.FNC1);if(i>=5&&i<15)return new de(t+5,"0"+(i-5));let l=this.extractNumericValueFromBitArray(t,6);if(l>=32&&l<58)return new de(t+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new ir("Decoding invalid alphanumeric value: "+l)}return new de(t+6,u)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class ze{constructor(t){this.information=t,this.generalDecoder=new He(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ue extends ze{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let l=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,l)}encodeCompressedGtinWithoutAI(t,i,l){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*u,10);f/100===0&&t.append("0"),f/10===0&&t.append("0"),t.append(f)}Ue.appendCheckDigit(t,l)}static appendCheckDigit(t,i){let l=0;for(let u=0;u<13;u++){let f=t.charAt(u+i).charCodeAt(0)-48;l+=(u&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),t.append(l)}}Ue.GTIN_SIZE=40;class qe extends Ue{constructor(t){super(t)}parseInformation(){let t=new Ee;t.append("(01)");let i=t.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(qe.HEADER_SIZE,4);return t.append(l),this.encodeCompressedGtinWithoutAI(t,qe.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,qe.HEADER_SIZE+44)}}qe.HEADER_SIZE=4;class Ke extends ze{constructor(t){super(t)}parseInformation(){let t=new Ee;return this.getGeneralDecoder().decodeAllCodes(t,Ke.HEADER_SIZE)}}Ke.HEADER_SIZE=5;class Qe extends Ue{constructor(t){super(t)}encodeCompressedWeight(t,i,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i,l);this.addWeightCode(t,u);let f=this.checkWeight(u),m=1e5;for(let p=0;p<5;++p)f/m===0&&t.append("0"),m/=10;t.append(f)}}class ut extends Qe{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=ut.HEADER_SIZE+Qe.GTIN_SIZE+ut.WEIGHT_SIZE)throw new K;let t=new Ee;return this.encodeCompressedGtin(t,ut.HEADER_SIZE),this.encodeCompressedWeight(t,ut.HEADER_SIZE+Qe.GTIN_SIZE,ut.WEIGHT_SIZE),t.toString()}}ut.HEADER_SIZE=5,ut.WEIGHT_SIZE=15;class Ht extends ut{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class rn extends ut{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class kt extends Ue{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<kt.HEADER_SIZE+Ue.GTIN_SIZE)throw new K;let t=new Ee;this.encodeCompressedGtin(t,kt.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(kt.HEADER_SIZE+Ue.GTIN_SIZE,kt.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(kt.HEADER_SIZE+Ue.GTIN_SIZE+kt.LAST_DIGIT_SIZE,null);return t.append(l.getNewString()),t.toString()}}kt.HEADER_SIZE=8,kt.LAST_DIGIT_SIZE=2;class ct extends Ue{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<ct.HEADER_SIZE+Ue.GTIN_SIZE)throw new K;let t=new Ee;this.encodeCompressedGtin(t,ct.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(ct.HEADER_SIZE+Ue.GTIN_SIZE,ct.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(ct.HEADER_SIZE+Ue.GTIN_SIZE+ct.LAST_DIGIT_SIZE,ct.FIRST_THREE_DIGITS_SIZE);l/100==0&&t.append("0"),l/10==0&&t.append("0"),t.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(ct.HEADER_SIZE+Ue.GTIN_SIZE+ct.LAST_DIGIT_SIZE+ct.FIRST_THREE_DIGITS_SIZE,null);return t.append(u.getNewString()),t.toString()}}ct.HEADER_SIZE=8,ct.LAST_DIGIT_SIZE=2,ct.FIRST_THREE_DIGITS_SIZE=10;class tt extends Qe{constructor(t,i,l){super(t),this.dateCode=l,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new K;let t=new Ee;return this.encodeCompressedGtin(t,tt.HEADER_SIZE),this.encodeCompressedWeight(t,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(t,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(i,tt.DATE_SIZE);if(l==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let u=l%32;l/=32;let f=l%12+1;l/=12;let m=l;m/10==0&&t.append("0"),t.append(m),f/10==0&&t.append("0"),t.append(f),u/10==0&&t.append("0"),t.append(u)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;function sr(I){try{if(I.get(1))return new qe(I);if(!I.get(2))return new Ke(I);switch(He.extractNumericValueFromBitArray(I,1,4)){case 4:return new Ht(I);case 5:return new rn(I)}switch(He.extractNumericValueFromBitArray(I,1,5)){case 12:return new kt(I);case 13:return new ct(I)}switch(He.extractNumericValueFromBitArray(I,1,7)){case 56:return new tt(I,"310","11");case 57:return new tt(I,"320","11");case 58:return new tt(I,"310","13");case 59:return new tt(I,"320","13");case 60:return new tt(I,"310","15");case 61:return new tt(I,"320","15");case 62:return new tt(I,"310","17");case 63:return new tt(I,"320","17")}}catch(t){throw console.log(t),new ir("unknown decoder: "+I)}}class On{constructor(t,i,l,u){this.leftchar=t,this.rightchar=i,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof On?On.equalsOrNull(t.leftchar,i.leftchar)&&On.equalsOrNull(t.rightchar,i.rightchar)&&On.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:On.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Vt{constructor(t,i,l){this.pairs=t,this.rowNumber=i,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof Vt?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let l;return t.forEach((u,f)=>{i.forEach(m=>{u.getLeftChar().getValue()===m.getLeftChar().getValue()&&u.getRightChar().getValue()===m.getRightChar().getValue()&&u.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ce extends xn{constructor(t){super(...arguments),this.pairs=new Array(Ce.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,l){this.pairs.length=0,this.startFromEven=!1;try{return Ce.constructResult(this.decodeRow2pairs(t,i))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Ce.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(f){if(f instanceof K){if(!this.pairs.length)throw new K;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(t,!1),u){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new K}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let l=i;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let m of t)this.pairs.push(m.getPairs());if(this.pairs.push(u.getPairs()),!Ce.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(t);f.push(u);try{return this.checkRows(f,l+1)}catch(m){this.verbose&&console.log(m)}}throw new K}static isValidSequence(t){for(let i of Ce.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let l=!0;for(let u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!=i[u]){l=!1;break}if(l)return!0}return!1}storeRow(t,i){let l=0,u=!1,f=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>t){f=m.isEquivalent(this.pairs);break}u=m.isEquivalent(this.pairs),l++}f||u||Ce.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Vt(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let l of i)if(l.getPairs().length!==t.length){for(let u of l.getPairs())for(let f of t)if(On.equals(u,f))break}}static isPartialRow(t,i){for(let l of i){let u=!0;for(let f of t){let m=!1;for(let p of l.getPairs())if(f.equals(p)){m=!0;break}if(!m){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=ks.buildBitArray(t),u=sr(i).parseInformation(),f=t[0].getFinderPattern().getResultPoints(),m=t[t.length-1].getFinderPattern().getResultPoints(),p=[f[0],f[1],m[0],m[1]];return new Pe(u,null,null,p,je.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),l=t.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),f=2;for(let p=1;p<this.pairs.size();++p){let v=this.pairs.get(p);u+=v.getLeftChar().getChecksumPortion(),f++;let A=v.getRightChar();A!=null&&(u+=A.getChecksumPortion(),f++)}return u%=211,211*(f-4)+u==i.getValue()}static getNextSecondBar(t,i){let l;return t.get(i)?(l=t.getNextUnset(i),l=t.getNextSet(l)):(l=t.getNextSet(i),l=t.getNextUnset(l)),l}retrieveNextPair(t,i,l){let u=i.length%2==0;this.startFromEven&&(u=!u);let f,m=!0,p=-1;do this.findNextPair(t,i,p),f=this.parseFoundFinderPattern(t,l,u),f==null?p=Ce.getNextSecondBar(t,this.startEnd[0]):m=!1;while(m);let v=this.decodeDataCharacter(t,f,u,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new K;let A;try{A=this.decodeDataCharacter(t,f,u,!1)}catch(N){A=null,this.verbose&&console.log(N)}return new On(v,A,f,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=t.getSize(),m;l>=0?m=l:this.isEmptyPair(i)?m=0:m=i[i.length-1].getFinderPattern().getStartEnd()[1];let p=i.length%2!=0;this.startFromEven&&(p=!p);let v=!1;for(;m<f&&(v=!t.get(m),!!v);)m++;let A=0,N=m;for(let D=m;D<f;D++)if(t.get(D)!=v)u[A]++;else{if(A==3){if(p&&Ce.reverseCounters(u),Ce.isFinderPattern(u)){this.startEnd[0]=N,this.startEnd[1]=D;return}p&&Ce.reverseCounters(u),N+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,A--}else A++;u[A]=1,v=!v}throw new K}static reverseCounters(t){let i=t.length;for(let l=0;l<i/2;++l){let u=t[l];t[l]=t[i-l-1],t[i-l-1]=u}}parseFoundFinderPattern(t,i,l){let u,f,m;if(l){let A=this.startEnd[0]-1;for(;A>=0&&!t.get(A);)A--;A++,u=this.startEnd[0]-A,f=A,m=this.startEnd[1]}else f=this.startEnd[0],m=t.getNextUnset(this.startEnd[1]+1),u=m-this.startEnd[1];let p=this.getDecodeFinderCounters();z.arraycopy(p,0,p,1,p.length-1),p[0]=u;let v;try{v=this.parseFinderValue(p,Ce.FINDER_PATTERNS)}catch{return null}return new Or(v,[f,m],f,m,i)}decodeDataCharacter(t,i,l,u){let f=this.getDataCharacterCounters();for(let Yt=0;Yt<f.length;Yt++)f[Yt]=0;if(u)Ce.recordPatternInReverse(t,i.getStartEnd()[0],f);else{Ce.recordPattern(t,i.getStartEnd()[1],f);for(let Yt=0,qn=f.length-1;Yt<qn;Yt++,qn--){let mr=f[Yt];f[Yt]=f[qn],f[qn]=mr}}let m=17,p=bt.sum(new Int32Array(f))/m,v=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(p-v)/v>.3)throw new K;let A=this.getOddCounts(),N=this.getEvenCounts(),D=this.getOddRoundingErrors(),j=this.getEvenRoundingErrors();for(let Yt=0;Yt<f.length;Yt++){let qn=1*f[Yt]/p,mr=qn+.5;if(mr<1){if(qn<.3)throw new K;mr=1}else if(mr>8){if(qn>8.7)throw new K;mr=8}let Aa=Yt/2;(Yt&1)==0?(A[Aa]=mr,D[Aa]=qn-mr):(N[Aa]=mr,j[Aa]=qn-mr)}this.adjustOddEvenCounts(m);let F=4*i.getValue()+(l?0:2)+(u?0:1)-1,Y=0,J=0;for(let Yt=A.length-1;Yt>=0;Yt--){if(Ce.isNotA1left(i,l,u)){let qn=Ce.WEIGHTS[F][2*Yt];J+=A[Yt]*qn}Y+=A[Yt]}let le=0;for(let Yt=N.length-1;Yt>=0;Yt--)if(Ce.isNotA1left(i,l,u)){let qn=Ce.WEIGHTS[F][2*Yt+1];le+=N[Yt]*qn}let we=J+le;if((Y&1)!=0||Y>13||Y<4)throw new K;let Le=(13-Y)/2,Be=Ce.SYMBOL_WIDEST[Le],Re=9-Be,vt=yr.getRSSvalue(A,Be,!0),ht=yr.getRSSvalue(N,Re,!1),En=Ce.EVEN_TOTAL_SUBSET[Le],Er=Ce.GSUM[Le],Jn=vt*En+ht+Er;return new fr(Jn,we)}static isNotA1left(t,i,l){return!(t.getValue()==0&&i&&l)}adjustOddEvenCounts(t){let i=bt.sum(new Int32Array(this.getOddCounts())),l=bt.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1;i>13?f=!0:i<4&&(u=!0);let m=!1,p=!1;l>13?p=!0:l<4&&(m=!0);let v=i+l-t,A=(i&1)==1,N=(l&1)==0;if(v==1)if(A){if(N)throw new K;f=!0}else{if(!N)throw new K;p=!0}else if(v==-1)if(A){if(N)throw new K;u=!0}else{if(!N)throw new K;m=!0}else if(v==0){if(A){if(!N)throw new K;i<l?(u=!0,p=!0):(f=!0,m=!0)}else if(N)throw new K}else throw new K;if(u){if(f)throw new K;Ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(p)throw new K;Ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ce.SYMBOL_WIDEST=[7,5,4,3,1],Ce.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ce.GSUM=[0,348,1388,2948,3988],Ce.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ce.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ce.FINDER_PAT_A=0,Ce.FINDER_PAT_B=1,Ce.FINDER_PAT_C=2,Ce.FINDER_PAT_D=3,Ce.FINDER_PAT_E=4,Ce.FINDER_PAT_F=5,Ce.FINDER_PATTERN_SEQUENCES=[[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_C,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_C],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F]],Ce.MAX_PAIRS=11;class da extends fr{constructor(t,i,l){super(t,i),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Rt extends xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,l){const u=this.decodePair(i,!1,t,l);Rt.addOrTally(this.possibleLeftPairs,u),i.reverse();let f=this.decodePair(i,!0,t,l);Rt.addOrTally(this.possibleRightPairs,f),i.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Rt.checkChecksum(m,p))return Rt.constructResult(m,p)}throw new K}static addOrTally(t,i){if(i==null)return;let l=!1;for(let u of t)if(u.getValue()===i.getValue()){u.incrementCount(),l=!0;break}l||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let l=4537077*t.getValue()+i.getValue(),u=new String(l).toString(),f=new Ee;for(let A=13-u.length;A>0;A--)f.append("0");f.append(u);let m=0;for(let A=0;A<13;A++){let N=f.charAt(A).charCodeAt(0)-48;m+=(A&1)===0?3*N:N}m=10-m%10,m===10&&(m=0),f.append(m.toString());let p=t.getFinderPattern().getResultPoints(),v=i.getFinderPattern().getResultPoints();return new Pe(f.toString(),null,0,[p[0],p[1],v[0],v[1]],je.RSS_14,new Date().getTime())}static checkChecksum(t,i){let l=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,u=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(t,i,l,u){try{let f=this.findFinderPattern(t,i),m=this.parseFoundFinderPattern(t,l,i,f),p=u==null?null:u.get(se.NEED_RESULT_POINT_CALLBACK);if(p!=null){let N=(f[0]+f[1])/2;i&&(N=t.getSize()-1-N),p.foundPossibleResultPoint(new Ge(N,l))}let v=this.decodeDataCharacter(t,m,!0),A=this.decodeDataCharacter(t,m,!1);return new da(1597*v.getValue()+A.getValue(),v.getChecksumPortion()+4*A.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(t,i,l){let u=this.getDataCharacterCounters();for(let le=0;le<u.length;le++)u[le]=0;if(l)Qt.recordPatternInReverse(t,i.getStartEnd()[0],u);else{Qt.recordPattern(t,i.getStartEnd()[1]+1,u);for(let le=0,we=u.length-1;le<we;le++,we--){let Le=u[le];u[le]=u[we],u[we]=Le}}let f=l?16:15,m=bt.sum(new Int32Array(u))/f,p=this.getOddCounts(),v=this.getEvenCounts(),A=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let le=0;le<u.length;le++){let we=u[le]/m,Le=Math.floor(we+.5);Le<1?Le=1:Le>8&&(Le=8);let Be=Math.floor(le/2);(le&1)===0?(p[Be]=Le,A[Be]=we-Le):(v[Be]=Le,N[Be]=we-Le)}this.adjustOddEvenCounts(l,f);let D=0,j=0;for(let le=p.length-1;le>=0;le--)j*=9,j+=p[le],D+=p[le];let F=0,Y=0;for(let le=v.length-1;le>=0;le--)F*=9,F+=v[le],Y+=v[le];let J=j+3*F;if(l){if((D&1)!==0||D>12||D<4)throw new K;let le=(12-D)/2,we=Rt.OUTSIDE_ODD_WIDEST[le],Le=9-we,Be=yr.getRSSvalue(p,we,!1),Re=yr.getRSSvalue(v,Le,!0),vt=Rt.OUTSIDE_EVEN_TOTAL_SUBSET[le],ht=Rt.OUTSIDE_GSUM[le];return new fr(Be*vt+Re+ht,J)}else{if((Y&1)!==0||Y>10||Y<4)throw new K;let le=(10-Y)/2,we=Rt.INSIDE_ODD_WIDEST[le],Le=9-we,Be=yr.getRSSvalue(p,we,!0),Re=yr.getRSSvalue(v,Le,!1),vt=Rt.INSIDE_ODD_TOTAL_SUBSET[le],ht=Rt.INSIDE_GSUM[le];return new fr(Re*vt+Be+ht,J)}}findFinderPattern(t,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=t.getSize(),f=!1,m=0;for(;m<u&&(f=!t.get(m),i!==f);)m++;let p=0,v=m;for(let A=m;A<u;A++)if(t.get(A)!==f)l[p]++;else{if(p===3){if(xn.isFinderPattern(l))return[v,A];v+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,f=!f}throw new K}parseFoundFinderPattern(t,i,l,u){let f=t.get(u[0]),m=u[0]-1;for(;m>=0&&f!==t.get(m);)m--;m++;const p=u[0]-m,v=this.getDecodeFinderCounters(),A=new Int32Array(v.length);z.arraycopy(v,0,A,1,v.length-1),A[0]=p;const N=this.parseFinderValue(A,Rt.FINDER_PATTERNS);let D=m,j=u[1];return l&&(D=t.getSize()-1-D,j=t.getSize()-1-j),new Or(N,[m,u[1]],D,j,i)}adjustOddEvenCounts(t,i){let l=bt.sum(new Int32Array(this.getOddCounts())),u=bt.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1,p=!1,v=!1;t?(l>12?m=!0:l<4&&(f=!0),u>12?v=!0:u<4&&(p=!0)):(l>11?m=!0:l<5&&(f=!0),u>10?v=!0:u<4&&(p=!0));let A=l+u-i,N=(l&1)===(t?1:0),D=(u&1)===1;if(A===1)if(N){if(D)throw new K;m=!0}else{if(!D)throw new K;v=!0}else if(A===-1)if(N){if(D)throw new K;f=!0}else{if(!D)throw new K;p=!0}else if(A===0){if(N){if(!D)throw new K;l<u?(f=!0,v=!0):(m=!0,p=!0)}else if(D)throw new K}else throw new K;if(f){if(m)throw new K;xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(v)throw new K;xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Rt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Rt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Rt.OUTSIDE_GSUM=[0,161,961,2015,2715],Rt.INSIDE_GSUM=[0,336,1036,1516],Rt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Rt.INSIDE_ODD_WIDEST=[2,4,6,8],Rt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Rn extends Qt{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const l=t?t.get(se.POSSIBLE_FORMATS):null,u=t&&t.get(se.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(je.EAN_13)||l.includes(je.UPC_A)||l.includes(je.EAN_8)||l.includes(je.UPC_E))&&this.readers.push(new ha(t)),l.includes(je.CODE_39)&&this.readers.push(new zt(u)),l.includes(je.CODE_128)&&this.readers.push(new Me),l.includes(je.ITF)&&this.readers.push(new dt),l.includes(je.RSS_14)&&this.readers.push(new Rt),l.includes(je.RSS_EXPANDED)&&this.readers.push(new Ce(this.verbose))):(this.readers.push(new ha(t)),this.readers.push(new zt),this.readers.push(new ha(t)),this.readers.push(new Me),this.readers.push(new dt),this.readers.push(new Rt),this.readers.push(new Ce(this.verbose)))}decodeRow(t,i,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(t,i,l)}catch{}throw new K}reset(){this.readers.forEach(t=>t.reset())}}class ga extends Ie{constructor(t=500,i){super(new Rn(i),t,i)}}class St{constructor(t,i,l){this.ecCodewords=t,this.ecBlocks=[i],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ve{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class it{constructor(t,i,l,u,f,m){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=f,this.ecBlocks=m;let p=0;const v=m.getECCodewords(),A=m.getECBlocks();for(let N of A)p+=N.getCount()*(N.getDataCodewords()+v);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if((t&1)!==0||(i&1)!==0)throw new R;for(let l of it.VERSIONS)if(l.symbolSizeRows===t&&l.symbolSizeColumns===i)return l;throw new R}toString(){return""+this.versionNumber}static buildVersions(){return[new it(1,10,10,8,8,new St(5,new Ve(1,3))),new it(2,12,12,10,10,new St(7,new Ve(1,5))),new it(3,14,14,12,12,new St(10,new Ve(1,8))),new it(4,16,16,14,14,new St(12,new Ve(1,12))),new it(5,18,18,16,16,new St(14,new Ve(1,18))),new it(6,20,20,18,18,new St(18,new Ve(1,22))),new it(7,22,22,20,20,new St(20,new Ve(1,30))),new it(8,24,24,22,22,new St(24,new Ve(1,36))),new it(9,26,26,24,24,new St(28,new Ve(1,44))),new it(10,32,32,14,14,new St(36,new Ve(1,62))),new it(11,36,36,16,16,new St(42,new Ve(1,86))),new it(12,40,40,18,18,new St(48,new Ve(1,114))),new it(13,44,44,20,20,new St(56,new Ve(1,144))),new it(14,48,48,22,22,new St(68,new Ve(1,174))),new it(15,52,52,24,24,new St(42,new Ve(2,102))),new it(16,64,64,14,14,new St(56,new Ve(2,140))),new it(17,72,72,16,16,new St(36,new Ve(4,92))),new it(18,80,80,18,18,new St(48,new Ve(4,114))),new it(19,88,88,20,20,new St(56,new Ve(4,144))),new it(20,96,96,22,22,new St(68,new Ve(4,174))),new it(21,104,104,24,24,new St(56,new Ve(6,136))),new it(22,120,120,18,18,new St(68,new Ve(6,175))),new it(23,132,132,20,20,new St(62,new Ve(8,163))),new it(24,144,144,22,22,new St(62,new Ve(8,156),new Ve(2,155))),new it(25,8,18,6,16,new St(7,new Ve(1,5))),new it(26,8,32,6,14,new St(11,new Ve(1,10))),new it(27,12,26,10,24,new St(14,new Ve(1,16))),new it(28,12,36,10,16,new St(18,new Ve(1,22))),new it(29,16,36,14,16,new St(24,new Ve(1,32))),new it(30,16,48,14,22,new St(28,new Ve(1,49)))]}}it.VERSIONS=it.buildVersions();class hr{constructor(t){const i=t.getHeight();if(i<8||i>144||(i&1)!==0)throw new R;this.version=hr.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Oe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),l=t.getWidth();return it.getVersionForDimensions(i,l)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,l=4,u=0;const f=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let p=!1,v=!1,A=!1,N=!1;do if(l===f&&u===0&&!p)t[i++]=this.readCorner1(f,m)&255,l-=2,u+=2,p=!0;else if(l===f-2&&u===0&&(m&3)!==0&&!v)t[i++]=this.readCorner2(f,m)&255,l-=2,u+=2,v=!0;else if(l===f+4&&u===2&&(m&7)===0&&!A)t[i++]=this.readCorner3(f,m)&255,l-=2,u+=2,A=!0;else if(l===f-2&&u===0&&(m&7)===4&&!N)t[i++]=this.readCorner4(f,m)&255,l-=2,u+=2,N=!0;else{do l<f&&u>=0&&!this.readMappingMatrix.get(u,l)&&(t[i++]=this.readUtah(l,u,f,m)&255),l-=2,u+=2;while(l>=0&&u<m);l+=1,u+=3;do l>=0&&u<m&&!this.readMappingMatrix.get(u,l)&&(t[i++]=this.readUtah(l,u,f,m)&255),l+=2,u-=2;while(l<f&&u>=0);l+=3,u+=1}while(l<f||u<m);if(i!==this.version.getTotalCodewords())throw new R;return t}readModule(t,i,l,u){return t<0&&(t+=l,i+=4-(l+4&7)),i<0&&(i+=u,t+=4-(u+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,l,u){let f=0;return this.readModule(t-2,i-2,l,u)&&(f|=1),f<<=1,this.readModule(t-2,i-1,l,u)&&(f|=1),f<<=1,this.readModule(t-1,i-2,l,u)&&(f|=1),f<<=1,this.readModule(t-1,i-1,l,u)&&(f|=1),f<<=1,this.readModule(t-1,i,l,u)&&(f|=1),f<<=1,this.readModule(t,i-2,l,u)&&(f|=1),f<<=1,this.readModule(t,i-1,l,u)&&(f|=1),f<<=1,this.readModule(t,i,l,u)&&(f|=1),f}readCorner1(t,i){let l=0;return this.readModule(t-1,0,t,i)&&(l|=1),l<<=1,this.readModule(t-1,1,t,i)&&(l|=1),l<<=1,this.readModule(t-1,2,t,i)&&(l|=1),l<<=1,this.readModule(0,i-2,t,i)&&(l|=1),l<<=1,this.readModule(0,i-1,t,i)&&(l|=1),l<<=1,this.readModule(1,i-1,t,i)&&(l|=1),l<<=1,this.readModule(2,i-1,t,i)&&(l|=1),l<<=1,this.readModule(3,i-1,t,i)&&(l|=1),l}readCorner2(t,i){let l=0;return this.readModule(t-3,0,t,i)&&(l|=1),l<<=1,this.readModule(t-2,0,t,i)&&(l|=1),l<<=1,this.readModule(t-1,0,t,i)&&(l|=1),l<<=1,this.readModule(0,i-4,t,i)&&(l|=1),l<<=1,this.readModule(0,i-3,t,i)&&(l|=1),l<<=1,this.readModule(0,i-2,t,i)&&(l|=1),l<<=1,this.readModule(0,i-1,t,i)&&(l|=1),l<<=1,this.readModule(1,i-1,t,i)&&(l|=1),l}readCorner3(t,i){let l=0;return this.readModule(t-1,0,t,i)&&(l|=1),l<<=1,this.readModule(t-1,i-1,t,i)&&(l|=1),l<<=1,this.readModule(0,i-3,t,i)&&(l|=1),l<<=1,this.readModule(0,i-2,t,i)&&(l|=1),l<<=1,this.readModule(0,i-1,t,i)&&(l|=1),l<<=1,this.readModule(1,i-3,t,i)&&(l|=1),l<<=1,this.readModule(1,i-2,t,i)&&(l|=1),l<<=1,this.readModule(1,i-1,t,i)&&(l|=1),l}readCorner4(t,i){let l=0;return this.readModule(t-3,0,t,i)&&(l|=1),l<<=1,this.readModule(t-2,0,t,i)&&(l|=1),l<<=1,this.readModule(t-1,0,t,i)&&(l|=1),l<<=1,this.readModule(0,i-2,t,i)&&(l|=1),l<<=1,this.readModule(0,i-1,t,i)&&(l|=1),l<<=1,this.readModule(1,i-1,t,i)&&(l|=1),l<<=1,this.readModule(2,i-1,t,i)&&(l|=1),l<<=1,this.readModule(3,i-1,t,i)&&(l|=1),l}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new S("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),m=i/u|0,p=l/f|0,v=m*u,A=p*f,N=new Oe(A,v);for(let D=0;D<m;++D){const j=D*u;for(let F=0;F<p;++F){const Y=F*f;for(let J=0;J<u;++J){const le=D*(u+2)+1+J,we=j+J;for(let Le=0;Le<f;++Le){const Be=F*(f+2)+1+Le;if(t.get(Be,le)){const Re=Y+Le;N.set(Re,we)}}}}}return N}}class lr{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const l=i.getECBlocks();let u=0;const f=l.getECBlocks();for(let J of f)u+=J.getCount();const m=new Array(u);let p=0;for(let J of f)for(let le=0;le<J.getCount();le++){const we=J.getDataCodewords(),Le=l.getECCodewords()+we;m[p++]=new lr(we,new Uint8Array(Le))}const A=m[0].codewords.length-l.getECCodewords(),N=A-1;let D=0;for(let J=0;J<N;J++)for(let le=0;le<p;le++)m[le].codewords[J]=t[D++];const j=i.getVersionNumber()===24,F=j?8:p;for(let J=0;J<F;J++)m[J].codewords[A-1]=t[D++];const Y=m[0].codewords.length;for(let J=A;J<Y;J++)for(let le=0;le<p;le++){const we=j?(le+8)%p:le,Le=j&&we>7?J-1:J;m[we].codewords[Le]=t[D++]}if(D!==t.length)throw new S;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class It{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new S(""+t);let i=0,l=this.bitOffset,u=this.byteOffset;const f=this.bytes;if(l>0){const m=8-l,p=t<m?t:m,v=m-p,A=255>>8-p<<v;i=(f[u]&A)>>v,t-=p,l+=p,l===8&&(l=0,u++)}if(t>0){for(;t>=8;)i=i<<8|f[u]&255,u++,t-=8;if(t>0){const m=8-t,p=255>>m<<m;i=i<<t|(f[u]&p)>>m,l+=t}}return this.bitOffset=l,this.byteOffset=u,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Tt;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(Tt||(Tt={}));class wr{static decode(t){const i=new It(t),l=new Ee,u=new Ee,f=new Array;let m=Tt.ASCII_ENCODE;do if(m===Tt.ASCII_ENCODE)m=this.decodeAsciiSegment(i,l,u);else{switch(m){case Tt.C40_ENCODE:this.decodeC40Segment(i,l);break;case Tt.TEXT_ENCODE:this.decodeTextSegment(i,l);break;case Tt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,l);break;case Tt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,l);break;case Tt.BASE256_ENCODE:this.decodeBase256Segment(i,l,f);break;default:throw new R}m=Tt.ASCII_ENCODE}while(m!==Tt.PAD_ENCODE&&i.available()>0);return u.length()>0&&l.append(u.toString()),new Wt(t,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(t,i,l){let u=!1;do{let f=t.readBits(8);if(f===0)throw new R;if(f<=128)return u&&(f+=128),i.append(String.fromCharCode(f-1)),Tt.ASCII_ENCODE;if(f===129)return Tt.PAD_ENCODE;if(f<=229){const m=f-130;m<10&&i.append("0"),i.append(""+m)}else switch(f){case 230:return Tt.C40_ENCODE;case 231:return Tt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:i.append("[)>05"),l.insert(0,"");break;case 237:i.append("[)>06"),l.insert(0,"");break;case 238:return Tt.ANSIX12_ENCODE;case 239:return Tt.TEXT_ENCODE;case 240:return Tt.EDIFACT_ENCODE;case 241:break;default:if(f!==254||t.available()!==0)throw new R;break}}while(t.available()>0);return Tt.ASCII_ENCODE}static decodeC40Segment(t,i){let l=!1;const u=[];let f=0;do{if(t.available()===8)return;const m=t.readBits(8);if(m===254)return;this.parseTwoBytes(m,t.readBits(8),u);for(let p=0;p<3;p++){const v=u[p];switch(f){case 0:if(v<3)f=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[v];l?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):i.append(A)}else throw new R;break;case 1:l?(i.append(String.fromCharCode(v+128)),l=!1):i.append(String.fromCharCode(v)),f=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[v];l?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):i.append(A)}else switch(v){case 27:i.append("");break;case 30:l=!0;break;default:throw new R}f=0;break;case 3:l?(i.append(String.fromCharCode(v+224)),l=!1):i.append(String.fromCharCode(v+96)),f=0;break;default:throw new R}}}while(t.available()>0)}static decodeTextSegment(t,i){let l=!1,u=[],f=0;do{if(t.available()===8)return;const m=t.readBits(8);if(m===254)return;this.parseTwoBytes(m,t.readBits(8),u);for(let p=0;p<3;p++){const v=u[p];switch(f){case 0:if(v<3)f=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[v];l?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):i.append(A)}else throw new R;break;case 1:l?(i.append(String.fromCharCode(v+128)),l=!1):i.append(String.fromCharCode(v)),f=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[v];l?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):i.append(A)}else switch(v){case 27:i.append("");break;case 30:l=!0;break;default:throw new R}f=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[v];l?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):i.append(A),f=0}else throw new R;break;default:throw new R}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const l=[];do{if(t.available()===8)return;const u=t.readBits(8);if(u===254)return;this.parseTwoBytes(u,t.readBits(8),l);for(let f=0;f<3;f++){const m=l[f];switch(m){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(m<14)i.append(String.fromCharCode(m+44));else if(m<40)i.append(String.fromCharCode(m+51));else throw new R;break}}}while(t.available()>0)}static parseTwoBytes(t,i,l){let u=(t<<8)+i-1,f=Math.floor(u/1600);l[0]=f,u-=f*1600,f=Math.floor(u/40),l[1]=f,l[2]=u-f*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let l=0;l<4;l++){let u=t.readBits(6);if(u===31){const f=8-t.getBitOffset();f!==8&&t.readBits(f);return}(u&32)===0&&(u|=64),i.append(String.fromCharCode(u))}}while(t.available()>0)}static decodeBase256Segment(t,i,l){let u=1+t.getByteOffset();const f=this.unrandomize255State(t.readBits(8),u++);let m;if(f===0?m=t.available()/8|0:f<250?m=f:m=250*(f-249)+this.unrandomize255State(t.readBits(8),u++),m<0)throw new R;const p=new Uint8Array(m);for(let v=0;v<m;v++){if(t.available()<8)throw new R;p[v]=this.unrandomize255State(t.readBits(8),u++)}l.push(p);try{i.append(re.decode(p,ue.ISO88591))}catch(v){throw new ir("Platform does not support required encoding: "+v.message)}}static unrandomize255State(t,i){const l=149*i%255+1,u=t-l;return u>=0?u:u+256}}wr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],wr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],wr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],wr.TEXT_SHIFT2_SET_CHARS=wr.C40_SHIFT2_SET_CHARS,wr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ll{constructor(){this.rsDecoder=new Zn(xt.DATA_MATRIX_FIELD_256)}decode(t){const i=new hr(t),l=i.getVersion(),u=i.readCodewords(),f=lr.getDataBlocks(u,l);let m=0;for(let A of f)m+=A.getNumDataCodewords();const p=new Uint8Array(m),v=f.length;for(let A=0;A<v;A++){const N=f[A],D=N.getCodewords(),j=N.getNumDataCodewords();this.correctErrors(D,j);for(let F=0;F<j;F++)p[F*v+A]=D[F]}return wr.decode(p)}correctErrors(t,i){const l=new Int32Array(t);try{this.rsDecoder.decode(l,t.length-i)}catch{throw new B}for(let u=0;u<i;u++)t[u]=l[u]}}class fn{constructor(t){this.image=t,this.rectangleDetector=new Ft(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new K;i=this.shiftToModuleCenter(i);const l=i[0],u=i[1],f=i[2],m=i[3];let p=this.transitionsBetween(l,m)+1,v=this.transitionsBetween(f,m)+1;(p&1)===1&&(p+=1),(v&1)===1&&(v+=1),4*p<7*v&&4*v<7*p&&(p=v=Math.max(p,v));let A=fn.sampleGrid(this.image,l,u,f,m,p,v);return new oa(A,[l,u,f,m])}static shiftPoint(t,i,l){let u=(i.getX()-t.getX())/(l+1),f=(i.getY()-t.getY())/(l+1);return new Ge(t.getX()+u,t.getY()+f)}static moveAway(t,i,l){let u=t.getX(),f=t.getY();return u<i?u-=1:u+=1,f<l?f-=1:f+=1,new Ge(u,f)}detectSolid1(t){let i=t[0],l=t[1],u=t[3],f=t[2],m=this.transitionsBetween(i,l),p=this.transitionsBetween(l,u),v=this.transitionsBetween(u,f),A=this.transitionsBetween(f,i),N=m,D=[f,i,l,u];return N>p&&(N=p,D[0]=i,D[1]=l,D[2]=u,D[3]=f),N>v&&(N=v,D[0]=l,D[1]=u,D[2]=f,D[3]=i),N>A&&(D[0]=u,D[1]=f,D[2]=i,D[3]=l),D}detectSolid2(t){let i=t[0],l=t[1],u=t[2],f=t[3],m=this.transitionsBetween(i,f),p=fn.shiftPoint(l,u,(m+1)*4),v=fn.shiftPoint(u,l,(m+1)*4),A=this.transitionsBetween(p,i),N=this.transitionsBetween(v,f);return A<N?(t[0]=i,t[1]=l,t[2]=u,t[3]=f):(t[0]=l,t[1]=u,t[2]=f,t[3]=i),t}correctTopRight(t){let i=t[0],l=t[1],u=t[2],f=t[3],m=this.transitionsBetween(i,f),p=this.transitionsBetween(l,f),v=fn.shiftPoint(i,l,(p+1)*4),A=fn.shiftPoint(u,l,(m+1)*4);m=this.transitionsBetween(v,f),p=this.transitionsBetween(A,f);let N=new Ge(f.getX()+(u.getX()-l.getX())/(m+1),f.getY()+(u.getY()-l.getY())/(m+1)),D=new Ge(f.getX()+(i.getX()-l.getX())/(p+1),f.getY()+(i.getY()-l.getY())/(p+1));if(!this.isValid(N))return this.isValid(D)?D:null;if(!this.isValid(D))return N;let j=this.transitionsBetween(v,N)+this.transitionsBetween(A,N),F=this.transitionsBetween(v,D)+this.transitionsBetween(A,D);return j>F?N:D}shiftToModuleCenter(t){let i=t[0],l=t[1],u=t[2],f=t[3],m=this.transitionsBetween(i,f)+1,p=this.transitionsBetween(u,f)+1,v=fn.shiftPoint(i,l,p*4),A=fn.shiftPoint(u,l,m*4);m=this.transitionsBetween(v,f)+1,p=this.transitionsBetween(A,f)+1,(m&1)===1&&(m+=1),(p&1)===1&&(p+=1);let N=(i.getX()+l.getX()+u.getX()+f.getX())/4,D=(i.getY()+l.getY()+u.getY()+f.getY())/4;i=fn.moveAway(i,N,D),l=fn.moveAway(l,N,D),u=fn.moveAway(u,N,D),f=fn.moveAway(f,N,D);let j,F;return v=fn.shiftPoint(i,l,p*4),v=fn.shiftPoint(v,f,m*4),j=fn.shiftPoint(l,i,p*4),j=fn.shiftPoint(j,u,m*4),A=fn.shiftPoint(u,f,p*4),A=fn.shiftPoint(A,l,m*4),F=fn.shiftPoint(f,u,p*4),F=fn.shiftPoint(F,i,m*4),[v,j,A,F]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,l,u,f,m,p){return bn.getInstance().sampleGrid(t,m,p,.5,.5,m-.5,.5,m-.5,p-.5,.5,p-.5,i.getX(),i.getY(),f.getX(),f.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(t,i){let l=Math.trunc(t.getX()),u=Math.trunc(t.getY()),f=Math.trunc(i.getX()),m=Math.trunc(i.getY()),p=Math.abs(m-u)>Math.abs(f-l);if(p){let J=l;l=u,u=J,J=f,f=m,m=J}let v=Math.abs(f-l),A=Math.abs(m-u),N=-v/2,D=u<m?1:-1,j=l<f?1:-1,F=0,Y=this.image.get(p?u:l,p?l:u);for(let J=l,le=u;J!==f;J+=j){let we=this.image.get(p?le:J,p?J:le);if(we!==Y&&(F++,Y=we),N+=A,N>0){if(le===m)break;le+=D,N-=v}}return F}}class oi{constructor(){this.decoder=new Ll}decode(t,i=null){let l,u;if(i!=null&&i.has(se.PURE_BARCODE)){const A=oi.extractPureBits(t.getBlackMatrix());l=this.decoder.decode(A),u=oi.NO_POINTS}else{const A=new fn(t.getBlackMatrix()).detect();l=this.decoder.decode(A.getBits()),u=A.getPoints()}const f=l.getRawBytes(),m=new Pe(l.getText(),f,8*f.length,u,je.DATA_MATRIX,z.currentTimeMillis()),p=l.getByteSegments();p!=null&&m.putMetadata(wt.BYTE_SEGMENTS,p);const v=l.getECLevel();return v!=null&&m.putMetadata(wt.ERROR_CORRECTION_LEVEL,v),m}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),l=t.getBottomRightOnBit();if(i==null||l==null)throw new K;const u=this.moduleSize(i,t);let f=i[1];const m=l[1];let p=i[0];const A=(l[0]-p+1)/u,N=(m-f+1)/u;if(A<=0||N<=0)throw new K;const D=u/2;f+=D,p+=D;const j=new Oe(A,N);for(let F=0;F<N;F++){const Y=f+F*u;for(let J=0;J<A;J++)t.get(p+J*u,Y)&&j.set(J,F)}return j}static moduleSize(t,i){const l=i.getWidth();let u=t[0];const f=t[1];for(;u<l&&i.get(u,f);)u++;if(u===l)throw new K;const m=u-t[0];if(m===0)throw new K;return m}}oi.NO_POINTS=[];class Ls extends Ie{constructor(t=500){super(new oi,t)}}var ma;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(ma||(ma={}));class At{constructor(t,i,l){this.value=t,this.stringValue=i,this.bits=l,At.FOR_BITS.set(l,this),At.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return At.L;case"M":return At.M;case"Q":return At.Q;case"H":return At.H;default:throw new T(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof At))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=At.FOR_BITS.size)throw new S;return At.FOR_BITS.get(t)}}At.FOR_BITS=new Map,At.FOR_VALUE=new Map,At.L=new At(ma.L,"L",1),At.M=new At(ma.M,"M",0),At.Q=new At(ma.Q,"Q",3),At.H=new At(ma.H,"H",2);class jn{constructor(t){this.errorCorrectionLevel=At.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return G.bitCount(t^i)}static decodeFormatInformation(t,i){const l=jn.doDecodeFormatInformation(t,i);return l!==null?l:jn.doDecodeFormatInformation(t^jn.FORMAT_INFO_MASK_QR,i^jn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let l=Number.MAX_SAFE_INTEGER,u=0;for(const f of jn.FORMAT_INFO_DECODE_LOOKUP){const m=f[0];if(m===t||m===i)return new jn(f[1]);let p=jn.numBitsDiffering(t,m);p<l&&(u=f[1],l=p),t!==i&&(p=jn.numBitsDiffering(i,m),p<l&&(u=f[1],l=p))}return l<=3?new jn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof jn))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}jn.FORMAT_INFO_MASK_QR=21522,jn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ce{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const l of i)t+=l.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class P{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(t,i,...l){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=l;let u=0;const f=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const p of m)u+=p.getCount()*(p.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new R;try{return this.getVersionForNumber((t-17)/4)}catch{throw new R}}static getVersionForNumber(t){if(t<1||t>40)throw new S;return Ze.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Ze.VERSION_DECODE_INFO.length;u++){const f=Ze.VERSION_DECODE_INFO[u];if(f===t)return Ze.getVersionForNumber(u+7);const m=jn.numBitsDiffering(t,f);m<i&&(l=u+7,i=m)}return i<=3?Ze.getVersionForNumber(l):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new Oe(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const f=this.alignmentPatternCenters[u]-2;for(let m=0;m<l;m++)u===0&&(m===0||m===l-1)||u===l-1&&m===0||i.setRegion(this.alignmentPatternCenters[m]-2,f,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}Ze.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ze.VERSIONS=[new Ze(1,new Int32Array(0),new ce(7,new P(1,19)),new ce(10,new P(1,16)),new ce(13,new P(1,13)),new ce(17,new P(1,9))),new Ze(2,Int32Array.from([6,18]),new ce(10,new P(1,34)),new ce(16,new P(1,28)),new ce(22,new P(1,22)),new ce(28,new P(1,16))),new Ze(3,Int32Array.from([6,22]),new ce(15,new P(1,55)),new ce(26,new P(1,44)),new ce(18,new P(2,17)),new ce(22,new P(2,13))),new Ze(4,Int32Array.from([6,26]),new ce(20,new P(1,80)),new ce(18,new P(2,32)),new ce(26,new P(2,24)),new ce(16,new P(4,9))),new Ze(5,Int32Array.from([6,30]),new ce(26,new P(1,108)),new ce(24,new P(2,43)),new ce(18,new P(2,15),new P(2,16)),new ce(22,new P(2,11),new P(2,12))),new Ze(6,Int32Array.from([6,34]),new ce(18,new P(2,68)),new ce(16,new P(4,27)),new ce(24,new P(4,19)),new ce(28,new P(4,15))),new Ze(7,Int32Array.from([6,22,38]),new ce(20,new P(2,78)),new ce(18,new P(4,31)),new ce(18,new P(2,14),new P(4,15)),new ce(26,new P(4,13),new P(1,14))),new Ze(8,Int32Array.from([6,24,42]),new ce(24,new P(2,97)),new ce(22,new P(2,38),new P(2,39)),new ce(22,new P(4,18),new P(2,19)),new ce(26,new P(4,14),new P(2,15))),new Ze(9,Int32Array.from([6,26,46]),new ce(30,new P(2,116)),new ce(22,new P(3,36),new P(2,37)),new ce(20,new P(4,16),new P(4,17)),new ce(24,new P(4,12),new P(4,13))),new Ze(10,Int32Array.from([6,28,50]),new ce(18,new P(2,68),new P(2,69)),new ce(26,new P(4,43),new P(1,44)),new ce(24,new P(6,19),new P(2,20)),new ce(28,new P(6,15),new P(2,16))),new Ze(11,Int32Array.from([6,30,54]),new ce(20,new P(4,81)),new ce(30,new P(1,50),new P(4,51)),new ce(28,new P(4,22),new P(4,23)),new ce(24,new P(3,12),new P(8,13))),new Ze(12,Int32Array.from([6,32,58]),new ce(24,new P(2,92),new P(2,93)),new ce(22,new P(6,36),new P(2,37)),new ce(26,new P(4,20),new P(6,21)),new ce(28,new P(7,14),new P(4,15))),new Ze(13,Int32Array.from([6,34,62]),new ce(26,new P(4,107)),new ce(22,new P(8,37),new P(1,38)),new ce(24,new P(8,20),new P(4,21)),new ce(22,new P(12,11),new P(4,12))),new Ze(14,Int32Array.from([6,26,46,66]),new ce(30,new P(3,115),new P(1,116)),new ce(24,new P(4,40),new P(5,41)),new ce(20,new P(11,16),new P(5,17)),new ce(24,new P(11,12),new P(5,13))),new Ze(15,Int32Array.from([6,26,48,70]),new ce(22,new P(5,87),new P(1,88)),new ce(24,new P(5,41),new P(5,42)),new ce(30,new P(5,24),new P(7,25)),new ce(24,new P(11,12),new P(7,13))),new Ze(16,Int32Array.from([6,26,50,74]),new ce(24,new P(5,98),new P(1,99)),new ce(28,new P(7,45),new P(3,46)),new ce(24,new P(15,19),new P(2,20)),new ce(30,new P(3,15),new P(13,16))),new Ze(17,Int32Array.from([6,30,54,78]),new ce(28,new P(1,107),new P(5,108)),new ce(28,new P(10,46),new P(1,47)),new ce(28,new P(1,22),new P(15,23)),new ce(28,new P(2,14),new P(17,15))),new Ze(18,Int32Array.from([6,30,56,82]),new ce(30,new P(5,120),new P(1,121)),new ce(26,new P(9,43),new P(4,44)),new ce(28,new P(17,22),new P(1,23)),new ce(28,new P(2,14),new P(19,15))),new Ze(19,Int32Array.from([6,30,58,86]),new ce(28,new P(3,113),new P(4,114)),new ce(26,new P(3,44),new P(11,45)),new ce(26,new P(17,21),new P(4,22)),new ce(26,new P(9,13),new P(16,14))),new Ze(20,Int32Array.from([6,34,62,90]),new ce(28,new P(3,107),new P(5,108)),new ce(26,new P(3,41),new P(13,42)),new ce(30,new P(15,24),new P(5,25)),new ce(28,new P(15,15),new P(10,16))),new Ze(21,Int32Array.from([6,28,50,72,94]),new ce(28,new P(4,116),new P(4,117)),new ce(26,new P(17,42)),new ce(28,new P(17,22),new P(6,23)),new ce(30,new P(19,16),new P(6,17))),new Ze(22,Int32Array.from([6,26,50,74,98]),new ce(28,new P(2,111),new P(7,112)),new ce(28,new P(17,46)),new ce(30,new P(7,24),new P(16,25)),new ce(24,new P(34,13))),new Ze(23,Int32Array.from([6,30,54,78,102]),new ce(30,new P(4,121),new P(5,122)),new ce(28,new P(4,47),new P(14,48)),new ce(30,new P(11,24),new P(14,25)),new ce(30,new P(16,15),new P(14,16))),new Ze(24,Int32Array.from([6,28,54,80,106]),new ce(30,new P(6,117),new P(4,118)),new ce(28,new P(6,45),new P(14,46)),new ce(30,new P(11,24),new P(16,25)),new ce(30,new P(30,16),new P(2,17))),new Ze(25,Int32Array.from([6,32,58,84,110]),new ce(26,new P(8,106),new P(4,107)),new ce(28,new P(8,47),new P(13,48)),new ce(30,new P(7,24),new P(22,25)),new ce(30,new P(22,15),new P(13,16))),new Ze(26,Int32Array.from([6,30,58,86,114]),new ce(28,new P(10,114),new P(2,115)),new ce(28,new P(19,46),new P(4,47)),new ce(28,new P(28,22),new P(6,23)),new ce(30,new P(33,16),new P(4,17))),new Ze(27,Int32Array.from([6,34,62,90,118]),new ce(30,new P(8,122),new P(4,123)),new ce(28,new P(22,45),new P(3,46)),new ce(30,new P(8,23),new P(26,24)),new ce(30,new P(12,15),new P(28,16))),new Ze(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new P(3,117),new P(10,118)),new ce(28,new P(3,45),new P(23,46)),new ce(30,new P(4,24),new P(31,25)),new ce(30,new P(11,15),new P(31,16))),new Ze(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new P(7,116),new P(7,117)),new ce(28,new P(21,45),new P(7,46)),new ce(30,new P(1,23),new P(37,24)),new ce(30,new P(19,15),new P(26,16))),new Ze(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new P(5,115),new P(10,116)),new ce(28,new P(19,47),new P(10,48)),new ce(30,new P(15,24),new P(25,25)),new ce(30,new P(23,15),new P(25,16))),new Ze(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new P(13,115),new P(3,116)),new ce(28,new P(2,46),new P(29,47)),new ce(30,new P(42,24),new P(1,25)),new ce(30,new P(23,15),new P(28,16))),new Ze(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new P(17,115)),new ce(28,new P(10,46),new P(23,47)),new ce(30,new P(10,24),new P(35,25)),new ce(30,new P(19,15),new P(35,16))),new Ze(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new P(17,115),new P(1,116)),new ce(28,new P(14,46),new P(21,47)),new ce(30,new P(29,24),new P(19,25)),new ce(30,new P(11,15),new P(46,16))),new Ze(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new P(13,115),new P(6,116)),new ce(28,new P(14,46),new P(23,47)),new ce(30,new P(44,24),new P(7,25)),new ce(30,new P(59,16),new P(1,17))),new Ze(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new P(12,121),new P(7,122)),new ce(28,new P(12,47),new P(26,48)),new ce(30,new P(39,24),new P(14,25)),new ce(30,new P(22,15),new P(41,16))),new Ze(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new P(6,121),new P(14,122)),new ce(28,new P(6,47),new P(34,48)),new ce(30,new P(46,24),new P(10,25)),new ce(30,new P(2,15),new P(64,16))),new Ze(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new P(17,122),new P(4,123)),new ce(28,new P(29,46),new P(14,47)),new ce(30,new P(49,24),new P(10,25)),new ce(30,new P(24,15),new P(46,16))),new Ze(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new P(4,122),new P(18,123)),new ce(28,new P(13,46),new P(32,47)),new ce(30,new P(48,24),new P(14,25)),new ce(30,new P(42,15),new P(32,16))),new Ze(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new P(20,117),new P(4,118)),new ce(28,new P(40,47),new P(7,48)),new ce(30,new P(43,24),new P(22,25)),new ce(30,new P(10,15),new P(67,16))),new Ze(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new P(19,118),new P(6,119)),new ce(28,new P(18,47),new P(31,48)),new ce(30,new P(34,24),new P(34,25)),new ce(30,new P(20,15),new P(61,16)))];var In;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(In||(In={}));class dr{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let l=0;l<i;l++)for(let u=0;u<i;u++)this.isMasked(l,u)&&t.flip(u,l)}}dr.values=new Map([[In.DATA_MASK_000,new dr(In.DATA_MASK_000,(I,t)=>(I+t&1)===0)],[In.DATA_MASK_001,new dr(In.DATA_MASK_001,(I,t)=>(I&1)===0)],[In.DATA_MASK_010,new dr(In.DATA_MASK_010,(I,t)=>t%3===0)],[In.DATA_MASK_011,new dr(In.DATA_MASK_011,(I,t)=>(I+t)%3===0)],[In.DATA_MASK_100,new dr(In.DATA_MASK_100,(I,t)=>(Math.floor(I/2)+Math.floor(t/3)&1)===0)],[In.DATA_MASK_101,new dr(In.DATA_MASK_101,(I,t)=>I*t%6===0)],[In.DATA_MASK_110,new dr(In.DATA_MASK_110,(I,t)=>I*t%6<3)],[In.DATA_MASK_111,new dr(In.DATA_MASK_111,(I,t)=>(I+t+I*t%3&1)===0)]]);class xa{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new R;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let f=0;f<6;f++)t=this.copyBit(f,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let f=5;f>=0;f--)t=this.copyBit(8,f,t);const i=this.bitMatrix.getHeight();let l=0;const u=i-7;for(let f=i-1;f>=u;f--)l=this.copyBit(8,f,l);for(let f=i-8;f<i;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=jn.decodeFormatInformation(t,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return Ze.getVersionForNumber(i);let l=0;const u=t-11;for(let m=5;m>=0;m--)for(let p=t-9;p>=u;p--)l=this.copyBit(p,m,l);let f=Ze.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===t)return this.parsedVersion=f,f;l=0;for(let m=5;m>=0;m--)for(let p=t-9;p>=u;p--)l=this.copyBit(m,p,l);if(f=Ze.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===t)return this.parsedVersion=f,f;throw new R}copyBit(t,i,l){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?l<<1|1:l<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),l=dr.values.get(t.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const f=i.buildFunctionPattern();let m=!0;const p=new Uint8Array(i.getTotalCodewords());let v=0,A=0,N=0;for(let D=u-1;D>0;D-=2){D===6&&D--;for(let j=0;j<u;j++){const F=m?u-1-j:j;for(let Y=0;Y<2;Y++)f.get(D-Y,F)||(N++,A<<=1,this.bitMatrix.get(D-Y,F)&&(A|=1),N===8&&(p[v++]=A,N=0,A=0))}m=!m}if(v!==i.getTotalCodewords())throw new R;return p}remask(){if(this.parsedFormatInfo===null)return;const t=dr.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,l=t.getWidth();i<l;i++)for(let u=i+1,f=t.getHeight();u<f;u++)t.get(i,u)!==t.get(u,i)&&(t.flip(u,i),t.flip(i,u))}}class Pl{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,l){if(t.length!==i.getTotalCodewords())throw new S;const u=i.getECBlocksForLevel(l);let f=0;const m=u.getECBlocks();for(const Y of m)f+=Y.getCount();const p=new Array(f);let v=0;for(const Y of m)for(let J=0;J<Y.getCount();J++){const le=Y.getDataCodewords(),we=u.getECCodewordsPerBlock()+le;p[v++]=new Pl(le,new Uint8Array(we))}const A=p[0].codewords.length;let N=p.length-1;for(;N>=0&&p[N].codewords.length!==A;)N--;N++;const D=A-u.getECCodewordsPerBlock();let j=0;for(let Y=0;Y<D;Y++)for(let J=0;J<v;J++)p[J].codewords[Y]=t[j++];for(let Y=N;Y<v;Y++)p[Y].codewords[D]=t[j++];const F=p[0].codewords.length;for(let Y=D;Y<F;Y++)for(let J=0;J<v;J++){const le=J<N?Y:Y+1;p[J].codewords[le]=t[j++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var gr;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(gr||(gr={}));class nt{constructor(t,i,l,u){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=l,this.bits=u,nt.FOR_BITS.set(u,this),nt.FOR_VALUE.set(t,this)}static forBits(t){const i=nt.FOR_BITS.get(t);if(i===void 0)throw new S;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let l;return i<=9?l=0:i<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof nt))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}nt.FOR_BITS=new Map,nt.FOR_VALUE=new Map,nt.TERMINATOR=new nt(gr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),nt.NUMERIC=new nt(gr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),nt.ALPHANUMERIC=new nt(gr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),nt.STRUCTURED_APPEND=new nt(gr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),nt.BYTE=new nt(gr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),nt.ECI=new nt(gr.ECI,"ECI",Int32Array.from([0,0,0]),7),nt.KANJI=new nt(gr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),nt.FNC1_FIRST_POSITION=new nt(gr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),nt.FNC1_SECOND_POSITION=new nt(gr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),nt.HANZI=new nt(gr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class an{static decode(t,i,l,u){const f=new It(t);let m=new Ee;const p=new Array;let v=-1,A=-1;try{let N=null,D=!1,j;do{if(f.available()<4)j=nt.TERMINATOR;else{const F=f.readBits(4);j=nt.forBits(F)}switch(j){case nt.TERMINATOR:break;case nt.FNC1_FIRST_POSITION:case nt.FNC1_SECOND_POSITION:D=!0;break;case nt.STRUCTURED_APPEND:if(f.available()<16)throw new R;v=f.readBits(8),A=f.readBits(8);break;case nt.ECI:const F=an.parseECIValue(f);if(N=L.getCharacterSetECIByValue(F),N===null)throw new R;break;case nt.HANZI:const Y=f.readBits(4),J=f.readBits(j.getCharacterCountBits(i));Y===an.GB2312_SUBSET&&an.decodeHanziSegment(f,m,J);break;default:const le=f.readBits(j.getCharacterCountBits(i));switch(j){case nt.NUMERIC:an.decodeNumericSegment(f,m,le);break;case nt.ALPHANUMERIC:an.decodeAlphanumericSegment(f,m,le,D);break;case nt.BYTE:an.decodeByteSegment(f,m,le,N,p,u);break;case nt.KANJI:an.decodeKanjiSegment(f,m,le);break;default:throw new R}break}}while(j!==nt.TERMINATOR)}catch{throw new R}return new Wt(t,m.toString(),p.length===0?null:p,l===null?null:l.toString(),v,A)}static decodeHanziSegment(t,i,l){if(l*13>t.available())throw new R;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const m=t.readBits(13);let p=m/96<<8&4294967295|m%96;p<959?p+=41377:p+=42657,u[f]=p>>8&255,u[f+1]=p&255,f+=2,l--}try{i.append(re.decode(u,ue.GB2312))}catch(m){throw new R(m)}}static decodeKanjiSegment(t,i,l){if(l*13>t.available())throw new R;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const m=t.readBits(13);let p=m/192<<8&4294967295|m%192;p<7936?p+=33088:p+=49472,u[f]=p>>8,u[f+1]=p,f+=2,l--}try{i.append(re.decode(u,ue.SHIFT_JIS))}catch(m){throw new R(m)}}static decodeByteSegment(t,i,l,u,f,m){if(8*l>t.available())throw new R;const p=new Uint8Array(l);for(let A=0;A<l;A++)p[A]=t.readBits(8);let v;u===null?v=ue.guessEncoding(p,m):v=u.getName();try{i.append(re.decode(p,v))}catch(A){throw new R(A)}f.push(p)}static toAlphaNumericChar(t){if(t>=an.ALPHANUMERIC_CHARS.length)throw new R;return an.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,l,u){const f=i.length();for(;l>1;){if(t.available()<11)throw new R;const m=t.readBits(11);i.append(an.toAlphaNumericChar(Math.floor(m/45))),i.append(an.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(t.available()<6)throw new R;i.append(an.toAlphaNumericChar(t.readBits(6)))}if(u)for(let m=f;m<i.length();m++)i.charAt(m)==="%"&&(m<i.length()-1&&i.charAt(m+1)==="%"?i.deleteCharAt(m+1):i.setCharAt(m,""))}static decodeNumericSegment(t,i,l){for(;l>=3;){if(t.available()<10)throw new R;const u=t.readBits(10);if(u>=1e3)throw new R;i.append(an.toAlphaNumericChar(Math.floor(u/100))),i.append(an.toAlphaNumericChar(Math.floor(u/10)%10)),i.append(an.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(t.available()<7)throw new R;const u=t.readBits(7);if(u>=100)throw new R;i.append(an.toAlphaNumericChar(Math.floor(u/10))),i.append(an.toAlphaNumericChar(u%10))}else if(l===1){if(t.available()<4)throw new R;const u=t.readBits(4);if(u>=10)throw new R;i.append(an.toAlphaNumericChar(u))}}static parseECIValue(t){const i=t.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const l=t.readBits(8);return(i&63)<<8&4294967295|l}if((i&224)===192){const l=t.readBits(16);return(i&31)<<16&4294967295|l}throw new R}}an.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",an.GB2312_SUBSET=1;class $o{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class $u{constructor(){this.rsDecoder=new Zn(xt.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(Oe.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const l=new xa(t);let u=null;try{return this.decodeBitMatrixParser(l,i)}catch(f){u=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,i);return f.setOther(new $o(!0)),f}catch(f){throw u!==null?u:f}}decodeBitMatrixParser(t,i){const l=t.readVersion(),u=t.readFormatInformation().getErrorCorrectionLevel(),f=t.readCodewords(),m=Pl.getDataBlocks(f,l,u);let p=0;for(const N of m)p+=N.getNumDataCodewords();const v=new Uint8Array(p);let A=0;for(const N of m){const D=N.getCodewords(),j=N.getNumDataCodewords();this.correctErrors(D,j);for(let F=0;F<j;F++)v[A++]=D[F]}return an.decode(v,l,u,i)}correctErrors(t,i){const l=new Int32Array(t);try{this.rsDecoder.decode(l,t.length-i)}catch{throw new B}for(let u=0;u<i;u++)t[u]=l[u]}}class pa extends Ge{constructor(t,i,l){super(t,i),this.estimatedModuleSize=l}aboutEquals(t,i,l){if(Math.abs(i-this.getY())<=t&&Math.abs(l-this.getX())<=t){const u=Math.abs(t-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(t,i,l){const u=(this.getX()+i)/2,f=(this.getY()+t)/2,m=(this.estimatedModuleSize+l)/2;return new pa(u,f,m)}}class br{constructor(t,i,l,u,f,m,p){this.image=t,this.startX=i,this.startY=l,this.width=u,this.height=f,this.moduleSize=m,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,l=this.width,u=t+l,f=this.startY+i/2,m=new Int32Array(3),p=this.image;for(let v=0;v<i;v++){const A=f+((v&1)===0?Math.floor((v+1)/2):-Math.floor((v+1)/2));m[0]=0,m[1]=0,m[2]=0;let N=t;for(;N<u&&!p.get(N,A);)N++;let D=0;for(;N<u;){if(p.get(N,A))if(D===1)m[1]++;else if(D===2){if(this.foundPatternCross(m)){const j=this.handlePossibleCenter(m,A,N);if(j!==null)return j}m[0]=m[2],m[1]=1,m[2]=0,D=1}else m[++D]++;else D===1&&D++,m[D]++;N++}if(this.foundPatternCross(m)){const j=this.handlePossibleCenter(m,A,u);if(j!==null)return j}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new K}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,l=i/2;for(let u=0;u<3;u++)if(Math.abs(i-t[u])>=l)return!1;return!0}crossCheckVertical(t,i,l,u){const f=this.image,m=f.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let v=t;for(;v>=0&&f.get(i,v)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&!f.get(i,v)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=t+1;v<m&&f.get(i,v)&&p[1]<=l;)p[1]++,v++;if(v===m||p[1]>l)return NaN;for(;v<m&&!f.get(i,v)&&p[2]<=l;)p[2]++,v++;if(p[2]>l)return NaN;const A=p[0]+p[1]+p[2];return 5*Math.abs(A-u)>=2*u?NaN:this.foundPatternCross(p)?br.centerFromEnd(p,v):NaN}handlePossibleCenter(t,i,l){const u=t[0]+t[1]+t[2],f=br.centerFromEnd(t,l),m=this.crossCheckVertical(i,f,2*t[1],u);if(!isNaN(m)){const p=(t[0]+t[1]+t[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(p,m,f))return A.combineEstimate(m,f,p);const v=new pa(f,m,p);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class as extends Ge{constructor(t,i,l,u){super(t,i),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,l){if(Math.abs(i-this.getY())<=t&&Math.abs(l-this.getX())<=t){const u=Math.abs(t-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(t,i,l){const u=this.count+1,f=(this.count*this.getX()+i)/u,m=(this.count*this.getY()+t)/u,p=(this.count*this.estimatedModuleSize+l)/u;return new as(f,m,p,u)}}class Ul{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class hn{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(se.TRY_HARDER)!==void 0,l=t!=null&&t.get(se.PURE_BARCODE)!==void 0,u=this.image,f=u.getHeight(),m=u.getWidth();let p=Math.floor(3*f/(4*hn.MAX_MODULES));(p<hn.MIN_SKIP||i)&&(p=hn.MIN_SKIP);let v=!1;const A=new Int32Array(5);for(let D=p-1;D<f&&!v;D+=p){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let j=0;for(let F=0;F<m;F++)if(u.get(F,D))(j&1)===1&&j++,A[j]++;else if((j&1)===0)if(j===4)if(hn.foundPatternCross(A)){if(this.handlePossibleCenter(A,D,F,l)===!0)if(p=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const J=this.findRowSkip();J>A[2]&&(D+=J-A[2]-p,F=m-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,j=3;continue}j=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,j=3;else A[++j]++;else A[j]++;hn.foundPatternCross(A)&&this.handlePossibleCenter(A,D,m,l)===!0&&(p=A[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return Ge.orderBestPatterns(N),new Ul(N)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let f=0;f<5;f++){const m=t[f];if(m===0)return!1;i+=m}if(i<7)return!1;const l=i/7,u=l/2;return Math.abs(l-t[0])<u&&Math.abs(l-t[1])<u&&Math.abs(3*l-t[2])<3*u&&Math.abs(l-t[3])<u&&Math.abs(l-t[4])<u}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,l,u){const f=this.getCrossCheckStateCount();let m=0;const p=this.image;for(;t>=m&&i>=m&&p.get(i-m,t-m);)f[2]++,m++;if(t<m||i<m)return!1;for(;t>=m&&i>=m&&!p.get(i-m,t-m)&&f[1]<=l;)f[1]++,m++;if(t<m||i<m||f[1]>l)return!1;for(;t>=m&&i>=m&&p.get(i-m,t-m)&&f[0]<=l;)f[0]++,m++;if(f[0]>l)return!1;const v=p.getHeight(),A=p.getWidth();for(m=1;t+m<v&&i+m<A&&p.get(i+m,t+m);)f[2]++,m++;if(t+m>=v||i+m>=A)return!1;for(;t+m<v&&i+m<A&&!p.get(i+m,t+m)&&f[3]<l;)f[3]++,m++;if(t+m>=v||i+m>=A||f[3]>=l)return!1;for(;t+m<v&&i+m<A&&p.get(i+m,t+m)&&f[4]<l;)f[4]++,m++;if(f[4]>=l)return!1;const N=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(N-u)<2*u&&hn.foundPatternCross(f)}crossCheckVertical(t,i,l,u){const f=this.image,m=f.getHeight(),p=this.getCrossCheckStateCount();let v=t;for(;v>=0&&f.get(i,v);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!f.get(i,v)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&f.get(i,v)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=t+1;v<m&&f.get(i,v);)p[2]++,v++;if(v===m)return NaN;for(;v<m&&!f.get(i,v)&&p[3]<l;)p[3]++,v++;if(v===m||p[3]>=l)return NaN;for(;v<m&&f.get(i,v)&&p[4]<l;)p[4]++,v++;if(p[4]>=l)return NaN;const A=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(A-u)>=2*u?NaN:hn.foundPatternCross(p)?hn.centerFromEnd(p,v):NaN}crossCheckHorizontal(t,i,l,u){const f=this.image,m=f.getWidth(),p=this.getCrossCheckStateCount();let v=t;for(;v>=0&&f.get(v,i);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!f.get(v,i)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&f.get(v,i)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=t+1;v<m&&f.get(v,i);)p[2]++,v++;if(v===m)return NaN;for(;v<m&&!f.get(v,i)&&p[3]<l;)p[3]++,v++;if(v===m||p[3]>=l)return NaN;for(;v<m&&f.get(v,i)&&p[4]<l;)p[4]++,v++;if(p[4]>=l)return NaN;const A=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(A-u)>=u?NaN:hn.foundPatternCross(p)?hn.centerFromEnd(p,v):NaN}handlePossibleCenter(t,i,l,u){const f=t[0]+t[1]+t[2]+t[3]+t[4];let m=hn.centerFromEnd(t,l),p=this.crossCheckVertical(i,Math.floor(m),t[2],f);if(!isNaN(p)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(p),t[2],f),!isNaN(m)&&(!u||this.crossCheckDiagonal(Math.floor(p),Math.floor(m),t[2],f)))){const v=f/7;let A=!1;const N=this.possibleCenters;for(let D=0,j=N.length;D<j;D++){const F=N[D];if(F.aboutEquals(v,p,m)){N[D]=F.combineEstimate(p,m,v),A=!0;break}}if(!A){const D=new as(m,p,v);N.push(D),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(D)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const l of this.possibleCenters)if(l.getCount()>=hn.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=hn.CENTER_QUORUM&&(t++,i+=m.getEstimatedModuleSize());if(t<3)return!1;const u=i/l;let f=0;for(const m of this.possibleCenters)f+=Math.abs(m.getEstimatedModuleSize()-u);return f<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new K;const i=this.possibleCenters;let l;if(t>3){let u=0,f=0;for(const v of this.possibleCenters){const A=v.getEstimatedModuleSize();u+=A,f+=A*A}l=u/t;let m=Math.sqrt(f/t-l*l);i.sort((v,A)=>{const N=Math.abs(A.getEstimatedModuleSize()-l),D=Math.abs(v.getEstimatedModuleSize()-l);return N<D?-1:N>D?1:0});const p=Math.max(.2*l,m);for(let v=0;v<i.length&&i.length>3;v++){const A=i[v];Math.abs(A.getEstimatedModuleSize()-l)>p&&(i.splice(v,1),v--)}}if(i.length>3){let u=0;for(const f of i)u+=f.getEstimatedModuleSize();l=u/i.length,i.sort((f,m)=>{if(m.getCount()===f.getCount()){const p=Math.abs(m.getEstimatedModuleSize()-l),v=Math.abs(f.getEstimatedModuleSize()-l);return p<v?1:p>v?-1:0}else return m.getCount()-f.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}hn.CENTER_QUORUM=2,hn.MIN_SKIP=3,hn.MAX_MODULES=57;class Yr{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(se.NEED_RESULT_POINT_CALLBACK);const l=new hn(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(l)}processFinderPatternInfo(t){const i=t.getTopLeft(),l=t.getTopRight(),u=t.getBottomLeft(),f=this.calculateModuleSize(i,l,u);if(f<1)throw new K("No pattern found in proccess finder.");const m=Yr.computeDimension(i,l,u,f),p=Ze.getProvisionalVersionForDimension(m),v=p.getDimensionForVersion()-7;let A=null;if(p.getAlignmentPatternCenters().length>0){const F=l.getX()-i.getX()+u.getX(),Y=l.getY()-i.getY()+u.getY(),J=1-3/v,le=Math.floor(i.getX()+J*(F-i.getX())),we=Math.floor(i.getY()+J*(Y-i.getY()));for(let Le=4;Le<=16;Le<<=1)try{A=this.findAlignmentInRegion(f,le,we,Le);break}catch(Be){if(!(Be instanceof K))throw Be}}const N=Yr.createTransform(i,l,u,A,m),D=Yr.sampleGrid(this.image,N,m);let j;return A===null?j=[u,i,l]:j=[u,i,l,A],new oa(D,j)}static createTransform(t,i,l,u,f){const m=f-3.5;let p,v,A,N;return u!==null?(p=u.getX(),v=u.getY(),A=m-3,N=A):(p=i.getX()-t.getX()+l.getX(),v=i.getY()-t.getY()+l.getY(),A=m,N=m),Qn.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,A,N,3.5,m,t.getX(),t.getY(),i.getX(),i.getY(),p,v,l.getX(),l.getY())}static sampleGrid(t,i,l){return bn.getInstance().sampleGridWithTransform(t,l,l,i)}static computeDimension(t,i,l,u){const f=bt.round(Ge.distance(t,i)/u),m=bt.round(Ge.distance(t,l)/u);let p=Math.floor((f+m)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new K("Dimensions could be not found.")}return p}calculateModuleSize(t,i,l){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,l))/2}calculateModuleSizeOneWay(t,i){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,l,u){let f=this.sizeOfBlackWhiteBlackRun(t,i,l,u),m=1,p=t-(l-t);p<0?(m=t/(t-p),p=0):p>=this.image.getWidth()&&(m=(this.image.getWidth()-1-t)/(p-t),p=this.image.getWidth()-1);let v=Math.floor(i-(u-i)*m);return m=1,v<0?(m=i/(i-v),v=0):v>=this.image.getHeight()&&(m=(this.image.getHeight()-1-i)/(v-i),v=this.image.getHeight()-1),p=Math.floor(t+(p-t)*m),f+=this.sizeOfBlackWhiteBlackRun(t,i,p,v),f-1}sizeOfBlackWhiteBlackRun(t,i,l,u){const f=Math.abs(u-i)>Math.abs(l-t);if(f){let F=t;t=i,i=F,F=l,l=u,u=F}const m=Math.abs(l-t),p=Math.abs(u-i);let v=-m/2;const A=t<l?1:-1,N=i<u?1:-1;let D=0;const j=l+A;for(let F=t,Y=i;F!==j;F+=A){const J=f?Y:F,le=f?F:Y;if(D===1===this.image.get(J,le)){if(D===2)return bt.distance(F,Y,t,i);D++}if(v+=p,v>0){if(Y===u)break;Y+=N,v-=m}}return D===2?bt.distance(l+A,u,t,i):NaN}findAlignmentInRegion(t,i,l,u){const f=Math.floor(u*t),m=Math.max(0,i-f),p=Math.min(this.image.getWidth()-1,i+f);if(p-m<t*3)throw new K("Alignment top exceeds estimated module size.");const v=Math.max(0,l-f),A=Math.min(this.image.getHeight()-1,l+f);if(A-v<t*3)throw new K("Alignment bottom exceeds estimated module size.");return new br(this.image,m,v,p-m,A-v,t,this.resultPointCallback).find()}}class ci{constructor(){this.decoder=new $u}getDecoder(){return this.decoder}decode(t,i){let l,u;if(i!=null&&i.get(se.PURE_BARCODE)!==void 0){const v=ci.extractPureBits(t.getBlackMatrix());l=this.decoder.decodeBitMatrix(v,i),u=ci.NO_POINTS}else{const v=new Yr(t.getBlackMatrix()).detect(i);l=this.decoder.decodeBitMatrix(v.getBits(),i),u=v.getPoints()}l.getOther()instanceof $o&&l.getOther().applyMirroredCorrection(u);const f=new Pe(l.getText(),l.getRawBytes(),void 0,u,je.QR_CODE,void 0),m=l.getByteSegments();m!==null&&f.putMetadata(wt.BYTE_SEGMENTS,m);const p=l.getECLevel();return p!==null&&f.putMetadata(wt.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(f.putMetadata(wt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(wt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),l=t.getBottomRightOnBit();if(i===null||l===null)throw new K;const u=this.moduleSize(i,t);let f=i[1],m=l[1],p=i[0],v=l[0];if(p>=v||f>=m)throw new K;if(m-f!==v-p&&(v=p+(m-f),v>=t.getWidth()))throw new K;const A=Math.round((v-p+1)/u),N=Math.round((m-f+1)/u);if(A<=0||N<=0)throw new K;if(N!==A)throw new K;const D=Math.floor(u/2);f+=D,p+=D;const j=p+Math.floor((A-1)*u)-v;if(j>0){if(j>D)throw new K;p-=j}const F=f+Math.floor((N-1)*u)-m;if(F>0){if(F>D)throw new K;f-=F}const Y=new Oe(A,N);for(let J=0;J<N;J++){const le=f+Math.floor(J*u);for(let we=0;we<A;we++)t.get(p+Math.floor(we*u),le)&&Y.set(we,J)}return Y}static moduleSize(t,i){const l=i.getHeight(),u=i.getWidth();let f=t[0],m=t[1],p=!0,v=0;for(;f<u&&m<l;){if(p!==i.get(f,m)){if(++v===5)break;p=!p}f++,m++}if(f===u||m===l)throw new K;return(f-t[0])/7}}ci.NO_POINTS=new Array;class at{PDF417Common(){}static getBitCountSum(t){return bt.sum(t)}static toIntArray(t){if(t==null||!t.length)return at.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let l=0;for(const u of t)i[l++]=u;return i}static getCodeword(t){const i=te.binarySearch(at.SYMBOL_TABLE,t&262143);return i<0?-1:(at.CODEWORD_TABLE[i]-1)%at.NUMBER_OF_CODEWORDS}}at.NUMBER_OF_CODEWORDS=929,at.MAX_CODEWORDS_IN_BARCODE=at.NUMBER_OF_CODEWORDS-1,at.MIN_ROWS_IN_BARCODE=3,at.MAX_ROWS_IN_BARCODE=90,at.MODULES_IN_CODEWORD=17,at.MODULES_IN_STOP_PATTERN=18,at.BARS_IN_MODULE=8,at.EMPTY_INT_ARRAY=new Int32Array([]),at.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),at.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ec{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class ft{static detectMultiple(t,i,l){let u=t.getBlackMatrix(),f=ft.detect(l,u);return f.length||(u=u.clone(),u.rotate180(),f=ft.detect(l,u)),new ec(u,f)}static detect(t,i){const l=new Array;let u=0,f=0,m=!1;for(;u<i.getHeight();){const p=ft.findVertices(i,u,f);if(p[0]==null&&p[3]==null){if(!m)break;m=!1,f=0;for(const v of l)v[1]!=null&&(u=Math.trunc(Math.max(u,v[1].getY()))),v[3]!=null&&(u=Math.max(u,Math.trunc(v[3].getY())));u+=ft.ROW_STEP;continue}if(m=!0,l.push(p),!t)break;p[2]!=null?(f=Math.trunc(p[2].getX()),u=Math.trunc(p[2].getY())):(f=Math.trunc(p[4].getX()),u=Math.trunc(p[4].getY()))}return l}static findVertices(t,i,l){const u=t.getHeight(),f=t.getWidth(),m=new Array(8);return ft.copyToResult(m,ft.findRowsWithPattern(t,u,f,i,l,ft.START_PATTERN),ft.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),i=Math.trunc(m[4].getY())),ft.copyToResult(m,ft.findRowsWithPattern(t,u,f,i,l,ft.STOP_PATTERN),ft.INDEXES_STOP_PATTERN),m}static copyToResult(t,i,l){for(let u=0;u<l.length;u++)t[l[u]]=i[u]}static findRowsWithPattern(t,i,l,u,f,m){const p=new Array(4);let v=!1;const A=new Int32Array(m.length);for(;u<i;u+=ft.ROW_STEP){let D=ft.findGuardPattern(t,f,u,l,!1,m,A);if(D!=null){for(;u>0;){const j=ft.findGuardPattern(t,f,--u,l,!1,m,A);if(j!=null)D=j;else{u++;break}}p[0]=new Ge(D[0],u),p[1]=new Ge(D[1],u),v=!0;break}}let N=u+1;if(v){let D=0,j=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;N<i;N++){const F=ft.findGuardPattern(t,j[0],N,l,!1,m,A);if(F!=null&&Math.abs(j[0]-F[0])<ft.MAX_PATTERN_DRIFT&&Math.abs(j[1]-F[1])<ft.MAX_PATTERN_DRIFT)j=F,D=0;else{if(D>ft.SKIPPED_ROW_COUNT_MAX)break;D++}}N-=D+1,p[2]=new Ge(j[0],N),p[3]=new Ge(j[1],N)}return N-u<ft.BARCODE_MIN_HEIGHT&&te.fill(p,null),p}static findGuardPattern(t,i,l,u,f,m,p){te.fillWithin(p,0,p.length,0);let v=i,A=0;for(;t.get(v,l)&&v>0&&A++<ft.MAX_PIXEL_DRIFT;)v--;let N=v,D=0,j=m.length;for(let F=f;N<u;N++)if(t.get(N,l)!==F)p[D]++;else{if(D===j-1){if(ft.patternMatchVariance(p,m,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return new Int32Array([v,N]);v+=p[0]+p[1],z.arraycopy(p,2,p,0,D-1),p[D-1]=0,p[D]=0,D--}else D++;p[D]=1,F=!F}return D===j-1&&ft.patternMatchVariance(p,m,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE?new Int32Array([v,N-1]):null}static patternMatchVariance(t,i,l){let u=t.length,f=0,m=0;for(let A=0;A<u;A++)f+=t[A],m+=i[A];if(f<m)return 1/0;let p=f/m;l*=p;let v=0;for(let A=0;A<u;A++){let N=t[A],D=i[A]*p,j=N>D?N-D:D-N;if(j>l)return 1/0;v+=j}return v/f}}ft.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ft.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ft.MAX_AVG_VARIANCE=.42,ft.MAX_INDIVIDUAL_VARIANCE=.8,ft.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ft.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ft.MAX_PIXEL_DRIFT=3,ft.MAX_PATTERN_DRIFT=5,ft.SKIPPED_ROW_COUNT_MAX=25,ft.ROW_STEP=5,ft.BARCODE_MIN_HEIGHT=10;class sn{constructor(t,i){if(i.length===0)throw new S;this.field=t;let l=i.length;if(l>1&&i[0]===0){let u=1;for(;u<l&&i[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),z.arraycopy(i,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let u=0;for(let f of this.coefficients)u=this.field.add(u,f);return u}let i=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)i=this.field.add(this.field.multiply(t,i),this.coefficients[u]);return i}add(t){if(!this.field.equals(t.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,l=t.coefficients;if(i.length>l.length){let m=i;i=l,l=m}let u=new Int32Array(l.length),f=l.length-i.length;z.arraycopy(l,0,u,0,f);for(let m=f;m<l.length;m++)u[m]=this.field.add(i[m-f],l[m]);return new sn(this.field,u)}subtract(t){if(!this.field.equals(t.field))throw new S("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof sn?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new sn(this.field,new Int32Array([0]));let i=this.coefficients,l=i.length,u=t.coefficients,f=u.length,m=new Int32Array(l+f-1);for(let p=0;p<l;p++){let v=i[p];for(let A=0;A<f;A++)m[p+A]=this.field.add(m[p+A],this.field.multiply(v,u[A]))}return new sn(this.field,m)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let l=0;l<t;l++)i[l]=this.field.subtract(0,this.coefficients[l]);return new sn(this.field,i)}multiplyScalar(t){if(t===0)return new sn(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,l=new Int32Array(i);for(let u=0;u<i;u++)l[u]=this.field.multiply(this.coefficients[u],t);return new sn(this.field,l)}multiplyByMonomial(t,i){if(t<0)throw new S;if(i===0)return new sn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+t);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],i);return new sn(this.field,u)}toString(){let t=new Ee;for(let i=this.getDegree();i>=0;i--){let l=this.getCoefficient(i);l!==0&&(l<0?(t.append(" - "),l=-l):t.length()>0&&t.append(" + "),(i===0||l!==1)&&t.append(l),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class Fl{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new S;return this.logTable[t]}inverse(t){if(t===0)throw new un;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class ji extends Fl{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let l=1;for(let u=0;u<t;u++)this.expTable[u]=l,l=l*i%t;for(let u=0;u<t-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new sn(this,new Int32Array([0])),this.one=new sn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new S;if(i===0)return this.zero;let l=new Int32Array(t+1);return l[0]=i,new sn(this,l)}}ji.PDF417_GF=new ji(at.NUMBER_OF_CODEWORDS,3);class ui{constructor(){this.field=ji.PDF417_GF}decode(t,i,l){let u=new sn(this.field,t),f=new Int32Array(i),m=!1;for(let Y=i;Y>0;Y--){let J=u.evaluateAt(this.field.exp(Y));f[i-Y]=J,J!==0&&(m=!0)}if(!m)return 0;let p=this.field.getOne();if(l!=null)for(const Y of l){let J=this.field.exp(t.length-1-Y),le=new sn(this.field,new Int32Array([this.field.subtract(0,J),1]));p=p.multiply(le)}let v=new sn(this.field,f),A=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),v,i),N=A[0],D=A[1],j=this.findErrorLocations(N),F=this.findErrorMagnitudes(D,N,j);for(let Y=0;Y<j.length;Y++){let J=t.length-1-this.field.log(j[Y]);if(J<0)throw B.getChecksumInstance();t[J]=this.field.subtract(t[J],F[Y])}return j.length}runEuclideanAlgorithm(t,i,l){if(t.getDegree()<i.getDegree()){let j=t;t=i,i=j}let u=t,f=i,m=this.field.getZero(),p=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let j=u,F=m;if(u=f,m=p,u.isZero())throw B.getChecksumInstance();f=j;let Y=this.field.getZero(),J=u.getCoefficient(u.getDegree()),le=this.field.inverse(J);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){let we=f.getDegree()-u.getDegree(),Le=this.field.multiply(f.getCoefficient(f.getDegree()),le);Y=Y.add(this.field.buildMonomial(we,Le)),f=f.subtract(u.multiplyByMonomial(we,Le))}p=Y.multiply(m).subtract(F).negative()}let v=p.getCoefficient(0);if(v===0)throw B.getChecksumInstance();let A=this.field.inverse(v),N=p.multiply(A),D=f.multiply(A);return[N,D]}findErrorLocations(t){let i=t.getDegree(),l=new Int32Array(i),u=0;for(let f=1;f<this.field.getSize()&&u<i;f++)t.evaluateAt(f)===0&&(l[u]=this.field.inverse(f),u++);if(u!==i)throw B.getChecksumInstance();return l}findErrorMagnitudes(t,i,l){let u=i.getDegree(),f=new Int32Array(u);for(let A=1;A<=u;A++)f[u-A]=this.field.multiply(A,i.getCoefficient(A));let m=new sn(this.field,f),p=l.length,v=new Int32Array(p);for(let A=0;A<p;A++){let N=this.field.inverse(l[A]),D=this.field.subtract(0,t.evaluateAt(N)),j=this.field.inverse(m.evaluateAt(N));v[A]=this.field.multiply(D,j)}return v}}class fi{constructor(t,i,l,u,f){t instanceof fi?this.constructor_2(t):this.constructor_1(t,i,l,u,f)}constructor_1(t,i,l,u,f){const m=i==null||l==null,p=u==null||f==null;if(m&&p)throw new K;m?(i=new Ge(0,u.getY()),l=new Ge(0,f.getY())):p&&(u=new Ge(t.getWidth()-1,i.getY()),f=new Ge(t.getWidth()-1,l.getY())),this.image=t,this.topLeft=i,this.bottomLeft=l,this.topRight=u,this.bottomRight=f,this.minX=Math.trunc(Math.min(i.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),f.getX())),this.minY=Math.trunc(Math.min(i.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new fi(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,l){let u=this.topLeft,f=this.bottomLeft,m=this.topRight,p=this.bottomRight;if(t>0){let v=l?this.topLeft:this.topRight,A=Math.trunc(v.getY()-t);A<0&&(A=0);let N=new Ge(v.getX(),A);l?u=N:m=N}if(i>0){let v=l?this.bottomLeft:this.bottomRight,A=Math.trunc(v.getY()+i);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let N=new Ge(v.getX(),A);l?f=N:p=N}return new fi(this.image,u,f,m,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ps{constructor(t,i,l,u){this.columnCount=t,this.errorCorrectionLevel=u,this.rowCountUpperPart=i,this.rowCountLowerPart=l,this.rowCount=i+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ya{constructor(){this.buffer=""}static form(t,i){let l=-1;function u(m,p,v,A,N,D){if(m==="%%")return"%";if(i[++l]===void 0)return;m=A?parseInt(A.substr(1)):void 0;let j=N?parseInt(N.substr(1)):void 0,F;switch(D){case"s":F=i[l];break;case"c":F=i[l][0];break;case"f":F=parseFloat(i[l]).toFixed(m);break;case"p":F=parseFloat(i[l]).toPrecision(m);break;case"e":F=parseFloat(i[l]).toExponential(m);break;case"x":F=parseInt(i[l]).toString(j||16);break;case"d":F=parseFloat(parseInt(i[l],j||10).toPrecision(m)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(j);let Y=parseInt(v),J=v&&v[0]+""=="0"?"0":" ";for(;F.length<Y;)F=p!==void 0?F+J:J+F;return F}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(f,u)}format(t,...i){this.buffer+=ya.form(t,i)}toString(){return this.buffer}}class bi{constructor(t){this.boundingBox=new fi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let l=1;l<bi.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(t)-l;if(u>=0&&(i=this.codewords[u],i!=null)||(u=this.imageRowToCodewordIndex(t)+l,u<this.codewords.length&&(i=this.codewords[u],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new ya;let i=0;for(const l of this.codewords){if(l==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}return t.toString()}}bi.MAX_NEARBY_DISTANCE=5;class vi{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[l,u]of this.values.entries()){const f={getKey:()=>l,getValue:()=>u};f.getValue()>t?(t=f.getValue(),i=[],i.push(f.getKey())):f.getValue()===t&&i.push(f.getKey())}return at.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class zl extends bi{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=-1,A=1,N=0;for(let D=m;D<p;D++){if(i[D]==null)continue;let j=i[D],F=j.getRowNumber()-v;if(F===0)N++;else if(F===1)A=Math.max(A,N),N=1,v=j.getRowNumber();else if(F<0||j.getRowNumber()>=t.getRowCount()||F>D)i[D]=null;else{let Y;A>2?Y=(A-2)*F:Y=F;let J=Y>=D;for(let le=1;le<=Y&&!J;le++)J=i[D-le]!=null;J?i[D]=null:(v=j.getRowNumber(),N=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=i.length)continue;i[u]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.getCodewords(),v=-1;for(let A=f;A<m;A++){if(p[A]==null)continue;let N=p[A];N.setRowNumberAsRowIndicatorColumn();let D=N.getRowNumber()-v;D===0||(D===1?v=N.getRowNumber():N.getRowNumber()>=t.getRowCount()?p[A]=null:v=N.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new vi,l=new vi,u=new vi,f=new vi;for(let p of t){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let v=p.getValue()%30,A=p.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:l.setValue(v*3+1);break;case 1:f.setValue(v/3),u.setValue(v%3);break;case 2:i.setValue(v+1);break}}if(i.getValue().length===0||l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||i.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<at.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>at.MAX_ROWS_IN_BARCODE)return null;let m=new Ps(i.getValue()[0],l.getValue()[0],u.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(t,m),m}removeIncorrectCodewords(t,i){for(let l=0;l<t.length;l++){let u=t[l];if(t[l]==null)continue;let f=u.getValue()%30,m=u.getRowNumber();if(m>i.getRowCount()){t[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:f*3+1!==i.getRowCountUpperPart()&&(t[l]=null);break;case 1:(Math.trunc(f/3)!==i.getErrorCorrectionLevel()||f%3!==i.getRowCountLowerPart())&&(t[l]=null);break;case 2:f+1!==i.getColumnCount()&&(t[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class kn{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=at.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let l=this.detectionResultColumns[i].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(i,u,l))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<t.length;l++)if(t[l]!=null&&i[l]!=null&&t[l].getRowNumber()===i[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let f=this.detectionResultColumns[u].getCodewords()[l];f!=null&&(f.setRowNumber(t[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++){if(i[l]==null)continue;let u=i[l].getRowNumber(),f=0;for(let m=this.barcodeColumnCount+1;m>0&&f<this.ADJUST_ROW_NUMBER_SKIP;m--){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(f=kn.adjustRowNumberIfValid(u,f,p),p.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let l=0;l<i.length;l++){if(i[l]==null)continue;let u=i[l].getRowNumber(),f=0;for(let m=1;m<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;m++){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(f=kn.adjustRowNumberIfValid(u,f,p),p.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(t)?(l.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,l){if(!this.detectionResultColumns[t-1])return;let u=l[i],f=this.detectionResultColumns[t-1].getCodewords(),m=f;this.detectionResultColumns[t+1]!=null&&(m=this.detectionResultColumns[t+1].getCodewords());let p=new Array(14);p[2]=f[i],p[3]=m[i],i>0&&(p[0]=l[i-1],p[4]=f[i-1],p[5]=m[i-1]),i>1&&(p[8]=l[i-2],p[10]=f[i-2],p[11]=m[i-2]),i<l.length-1&&(p[1]=l[i+1],p[6]=f[i+1],p[7]=m[i+1]),i<l.length-2&&(p[9]=l[i+2],p[12]=f[i+2],p[13]=m[i+2]);for(let v of p)if(kn.adjustRowNumber(u,v))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new ya;for(let l=0;l<t.getCodewords().length;l++){i.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){i.format("    |   ");continue}let f=this.detectionResultColumns[u].getCodewords()[l];if(f==null){i.format("    |   ");continue}i.format(" %3d|%3d",f.getRowNumber(),f.getValue())}i.format("%n")}return i.toString()}}class Rr{constructor(t,i,l,u){this.rowNumber=Rr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Rr.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Rr.BARCODE_ROW_UNKNOWN=-1;class Vn{static initialize(){for(let t=0;t<at.SYMBOL_TABLE.length;t++){let i=at.SYMBOL_TABLE[t],l=i&1;for(let u=0;u<at.BARS_IN_MODULE;u++){let f=0;for(;(i&1)===l;)f+=1,i>>=1;l=i&1,Vn.RATIOS_TABLE[t]||(Vn.RATIOS_TABLE[t]=new Array(at.BARS_IN_MODULE)),Vn.RATIOS_TABLE[t][at.BARS_IN_MODULE-u-1]=Math.fround(f/at.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=Vn.getDecodedCodewordValue(Vn.sampleBitCounts(t));return i!==-1?i:Vn.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=bt.sum(t),l=new Int32Array(at.BARS_IN_MODULE),u=0,f=0;for(let m=0;m<at.MODULES_IN_CODEWORD;m++){let p=i/(2*at.MODULES_IN_CODEWORD)+m*i/at.MODULES_IN_CODEWORD;f+t[u]<=p&&(f+=t[u],u++),l[u]++}return l}static getDecodedCodewordValue(t){let i=Vn.getBitValue(t);return at.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let l=0;l<t.length;l++)for(let u=0;u<t[l];u++)i=i<<1|(l%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=bt.sum(t),l=new Array(at.BARS_IN_MODULE);if(i>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(t[m]/i);let u=yi.MAX_VALUE,f=-1;this.bSymbolTableReady||Vn.initialize();for(let m=0;m<Vn.RATIOS_TABLE.length;m++){let p=0,v=Vn.RATIOS_TABLE[m];for(let A=0;A<at.BARS_IN_MODULE;A++){let N=Math.fround(v[A]-l[A]);if(p+=Math.fround(N*N),p>=u)break}p<u&&(u=p,f=at.SYMBOL_TABLE[m])}return f}}Vn.bSymbolTableReady=!1,Vn.RATIOS_TABLE=new Array(at.SYMBOL_TABLE.length).map(I=>new Array(at.BARS_IN_MODULE));class wa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class tc{static parseLong(t,i=void 0){return parseInt(t,i)}}class Us extends w{}Us.kind="NullPointerException";class Hl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,l){if(t==null)throw new Us;if(i<0||i>t.length||l<0||i+l>t.length||i+l<0)throw new H;if(l===0)return;for(let u=0;u<l;u++)this.write(t[i+u])}flush(){}close(){}}class ss extends w{}class Fs extends Hl{constructor(t=32){if(super(),this.count=0,t<0)throw new S("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let l=this.buf.length<<1;if(l-t<0&&(l=t),l<0){if(t<0)throw new ss;l=G.MAX_VALUE}this.buf=te.copyOfUint8Array(this.buf,l)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,l){if(i<0||i>t.length||l<0||i+l-t.length>0)throw new H;this.ensureCapacity(this.count+l),z.arraycopy(t,i,this.buf,this.count,l),this.count+=l}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return te.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Gt;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Gt||(Gt={}));function nc(){if(typeof window<"u")return window.BigInt||null;if(typeof du<"u")return du.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let zs;function Ei(I){if(typeof zs>"u"&&(zs=nc()),zs===null)throw new Error("BigInt is not supported!");return zs(I)}function Vl(){let I=[];I[0]=Ei(1);let t=Ei(900);I[1]=t;for(let i=2;i<16;i++)I[i]=I[i-1]*t;return I}class be{static decode(t,i){let l=new Ee(""),u=L.ISO8859_1;l.enableDecoding(u);let f=1,m=t[f++],p=new wa;for(;f<t[0];){switch(m){case be.TEXT_COMPACTION_MODE_LATCH:f=be.textCompaction(t,f,l);break;case be.BYTE_COMPACTION_MODE_LATCH:case be.BYTE_COMPACTION_MODE_LATCH_6:f=be.byteCompaction(m,t,u,f,l);break;case be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(t[f++]);break;case be.NUMERIC_COMPACTION_MODE_LATCH:f=be.numericCompaction(t,f,l);break;case be.ECI_CHARSET:L.getCharacterSetECIByValue(t[f++]);break;case be.ECI_GENERAL_PURPOSE:f+=2;break;case be.ECI_USER_DEFINED:f++;break;case be.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=be.decodeMacroBlock(t,f,p);break;case be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case be.MACRO_PDF417_TERMINATOR:throw new R;default:f--,f=be.textCompaction(t,f,l);break}if(f<t.length)m=t[f++];else throw R.getFormatInstance()}if(l.length()===0)throw R.getFormatInstance();let v=new Wt(null,l.toString(),null,i);return v.setOther(p),v}static decodeMacroBlock(t,i,l){if(i+be.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw R.getFormatInstance();let u=new Int32Array(be.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<be.NUMBER_OF_SEQUENCE_CODEWORDS;p++,i++)u[p]=t[i];l.setSegmentIndex(G.parseInt(be.decodeBase900toBase10(u,be.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new Ee;i=be.textCompaction(t,i,f),l.setFileId(f.toString());let m=-1;for(t[i]===be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=i+1);i<t[0];)switch(t[i]){case be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case be.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new Ee;i=be.textCompaction(t,i+1,p),l.setFileName(p.toString());break;case be.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new Ee;i=be.textCompaction(t,i+1,v),l.setSender(v.toString());break;case be.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new Ee;i=be.textCompaction(t,i+1,A),l.setAddressee(A.toString());break;case be.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new Ee;i=be.numericCompaction(t,i+1,N),l.setSegmentCount(G.parseInt(N.toString()));break;case be.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let D=new Ee;i=be.numericCompaction(t,i+1,D),l.setTimestamp(tc.parseLong(D.toString()));break;case be.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let j=new Ee;i=be.numericCompaction(t,i+1,j),l.setChecksum(G.parseInt(j.toString()));break;case be.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let F=new Ee;i=be.numericCompaction(t,i+1,F),l.setFileSize(tc.parseLong(F.toString()));break;default:throw R.getFormatInstance()}break;case be.MACRO_PDF417_TERMINATOR:i++,l.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(m!==-1){let p=i-m;l.isLastSegment()&&p--,l.setOptionalData(te.copyOfRange(t,m,m+p))}return i}static textCompaction(t,i,l){let u=new Int32Array((t[0]-i)*2),f=new Int32Array((t[0]-i)*2),m=0,p=!1;for(;i<t[0]&&!p;){let v=t[i++];if(v<be.TEXT_COMPACTION_MODE_LATCH)u[m]=v/30,u[m+1]=v%30,m+=2;else switch(v){case be.TEXT_COMPACTION_MODE_LATCH:u[m++]=be.TEXT_COMPACTION_MODE_LATCH;break;case be.BYTE_COMPACTION_MODE_LATCH:case be.BYTE_COMPACTION_MODE_LATCH_6:case be.NUMERIC_COMPACTION_MODE_LATCH:case be.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case be.MACRO_PDF417_TERMINATOR:i--,p=!0;break;case be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[m]=be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=t[i++],f[m]=v,m++;break}}return be.decodeTextCompaction(u,f,m,l),i}static decodeTextCompaction(t,i,l,u){let f=Gt.ALPHA,m=Gt.ALPHA,p=0;for(;p<l;){let v=t[p],A="";switch(f){case Gt.ALPHA:if(v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case be.LL:f=Gt.LOWER;break;case be.ML:f=Gt.MIXED;break;case be.PS:m=f,f=Gt.PUNCT_SHIFT;break;case be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p]);break;case be.TEXT_COMPACTION_MODE_LATCH:f=Gt.ALPHA;break}break;case Gt.LOWER:if(v<26)A=String.fromCharCode(97+v);else switch(v){case 26:A=" ";break;case be.AS:m=f,f=Gt.ALPHA_SHIFT;break;case be.ML:f=Gt.MIXED;break;case be.PS:m=f,f=Gt.PUNCT_SHIFT;break;case be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p]);break;case be.TEXT_COMPACTION_MODE_LATCH:f=Gt.ALPHA;break}break;case Gt.MIXED:if(v<be.PL)A=be.MIXED_CHARS[v];else switch(v){case be.PL:f=Gt.PUNCT;break;case 26:A=" ";break;case be.LL:f=Gt.LOWER;break;case be.AL:f=Gt.ALPHA;break;case be.PS:m=f,f=Gt.PUNCT_SHIFT;break;case be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p]);break;case be.TEXT_COMPACTION_MODE_LATCH:f=Gt.ALPHA;break}break;case Gt.PUNCT:if(v<be.PAL)A=be.PUNCT_CHARS[v];else switch(v){case be.PAL:f=Gt.ALPHA;break;case be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p]);break;case be.TEXT_COMPACTION_MODE_LATCH:f=Gt.ALPHA;break}break;case Gt.ALPHA_SHIFT:if(f=m,v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case be.TEXT_COMPACTION_MODE_LATCH:f=Gt.ALPHA;break}break;case Gt.PUNCT_SHIFT:if(f=m,v<be.PAL)A=be.PUNCT_CHARS[v];else switch(v){case be.PAL:f=Gt.ALPHA;break;case be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p]);break;case be.TEXT_COMPACTION_MODE_LATCH:f=Gt.ALPHA;break}break}A!==""&&u.append(A),p++}}static byteCompaction(t,i,l,u,f){let m=new Fs,p=0,v=0,A=!1;switch(t){case be.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),D=i[u++];for(;u<i[0]&&!A;)switch(N[p++]=D,v=900*v+D,D=i[u++],D){case be.TEXT_COMPACTION_MODE_LATCH:case be.BYTE_COMPACTION_MODE_LATCH:case be.NUMERIC_COMPACTION_MODE_LATCH:case be.BYTE_COMPACTION_MODE_LATCH_6:case be.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case be.MACRO_PDF417_TERMINATOR:u--,A=!0;break;default:if(p%5===0&&p>0){for(let j=0;j<6;++j)m.write(Number(Ei(v)>>Ei(8*(5-j))));v=0,p=0}break}u===i[0]&&D<be.TEXT_COMPACTION_MODE_LATCH&&(N[p++]=D);for(let j=0;j<p;j++)m.write(N[j]);break;case be.BYTE_COMPACTION_MODE_LATCH_6:for(;u<i[0]&&!A;){let j=i[u++];if(j<be.TEXT_COMPACTION_MODE_LATCH)p++,v=900*v+j;else switch(j){case be.TEXT_COMPACTION_MODE_LATCH:case be.BYTE_COMPACTION_MODE_LATCH:case be.NUMERIC_COMPACTION_MODE_LATCH:case be.BYTE_COMPACTION_MODE_LATCH_6:case be.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case be.MACRO_PDF417_TERMINATOR:u--,A=!0;break}if(p%5===0&&p>0){for(let F=0;F<6;++F)m.write(Number(Ei(v)>>Ei(8*(5-F))));v=0,p=0}}break}return f.append(re.decode(m.toByteArray(),l)),u}static numericCompaction(t,i,l){let u=0,f=!1,m=new Int32Array(be.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!f;){let p=t[i++];if(i===t[0]&&(f=!0),p<be.TEXT_COMPACTION_MODE_LATCH)m[u]=p,u++;else switch(p){case be.TEXT_COMPACTION_MODE_LATCH:case be.BYTE_COMPACTION_MODE_LATCH:case be.BYTE_COMPACTION_MODE_LATCH_6:case be.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case be.MACRO_PDF417_TERMINATOR:i--,f=!0;break}(u%be.MAX_NUMERIC_CODEWORDS===0||p===be.NUMERIC_COMPACTION_MODE_LATCH||f)&&u>0&&(l.append(be.decodeBase900toBase10(m,u)),u=0)}return i}static decodeBase900toBase10(t,i){let l=Ei(0);for(let f=0;f<i;f++)l+=be.EXP900[i-f-1]*Ei(t[f]);let u=l.toString();if(u.charAt(0)!=="1")throw new R;return u.substring(1)}}be.TEXT_COMPACTION_MODE_LATCH=900,be.BYTE_COMPACTION_MODE_LATCH=901,be.NUMERIC_COMPACTION_MODE_LATCH=902,be.BYTE_COMPACTION_MODE_LATCH_6=924,be.ECI_USER_DEFINED=925,be.ECI_GENERAL_PURPOSE=926,be.ECI_CHARSET=927,be.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,be.MACRO_PDF417_TERMINATOR=922,be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,be.MAX_NUMERIC_CODEWORDS=15,be.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,be.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,be.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,be.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,be.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,be.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,be.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,be.PL=25,be.LL=27,be.AS=27,be.ML=28,be.AL=28,be.PS=29,be.PAL=29,be.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,be.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",be.EXP900=nc()?Vl():[],be.NUMBER_OF_SEQUENCE_CODEWORDS=2;class pt{constructor(){}static decode(t,i,l,u,f,m,p){let v=new fi(t,i,l,u,f),A=null,N=null,D;for(let Y=!0;;Y=!1){if(i!=null&&(A=pt.getRowIndicatorColumn(t,v,i,!0,m,p)),u!=null&&(N=pt.getRowIndicatorColumn(t,v,u,!1,m,p)),D=pt.merge(A,N),D==null)throw K.getNotFoundInstance();let J=D.getBoundingBox();if(Y&&J!=null&&(J.getMinY()<v.getMinY()||J.getMaxY()>v.getMaxY()))v=J;else break}D.setBoundingBox(v);let j=D.getBarcodeColumnCount()+1;D.setDetectionResultColumn(0,A),D.setDetectionResultColumn(j,N);let F=A!=null;for(let Y=1;Y<=j;Y++){let J=F?Y:j-Y;if(D.getDetectionResultColumn(J)!==void 0)continue;let le;J===0||J===j?le=new zl(v,J===0):le=new bi(v),D.setDetectionResultColumn(J,le);let we=-1,Le=we;for(let Be=v.getMinY();Be<=v.getMaxY();Be++){if(we=pt.getStartColumn(D,J,Be,F),we<0||we>v.getMaxX()){if(Le===-1)continue;we=Le}let Re=pt.detectCodeword(t,v.getMinX(),v.getMaxX(),F,we,Be,m,p);Re!=null&&(le.setCodeword(Be,Re),Le=we,m=Math.min(m,Re.getWidth()),p=Math.max(p,Re.getWidth()))}}return pt.createDecoderResult(D)}static merge(t,i){if(t==null&&i==null)return null;let l=pt.getBarcodeMetadata(t,i);if(l==null)return null;let u=fi.merge(pt.adjustBoundingBox(t),pt.adjustBoundingBox(i));return new kn(l,u)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let l=pt.getMax(i),u=0;for(let p of i)if(u+=l-p,p>0)break;let f=t.getCodewords();for(let p=0;u>0&&f[p]==null;p++)u--;let m=0;for(let p=i.length-1;p>=0&&(m+=l-i[p],!(i[p]>0));p--);for(let p=f.length-1;m>0&&f[p]==null;p--)m--;return t.getBoundingBox().addMissingRows(u,m,t.isLeft())}static getMax(t){let i=-1;for(let l of t)i=Math.max(i,l);return i}static getBarcodeMetadata(t,i){let l;if(t==null||(l=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let u;return i==null||(u=i.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(t,i,l,u,f,m){let p=new zl(i,u);for(let v=0;v<2;v++){let A=v===0?1:-1,N=Math.trunc(Math.trunc(l.getX()));for(let D=Math.trunc(Math.trunc(l.getY()));D<=i.getMaxY()&&D>=i.getMinY();D+=A){let j=pt.detectCodeword(t,0,t.getWidth(),u,N,D,f,m);j!=null&&(p.setCodeword(D,j),u?N=j.getStartX():N=j.getEndX())}}return p}static adjustCodewordCount(t,i){let l=i[0][1],u=l.getValue(),f=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-pt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(u.length===0){if(f<1||f>at.MAX_CODEWORDS_IN_BARCODE)throw K.getNotFoundInstance();l.setValue(f)}else u[0]!==f&&l.setValue(f)}static createDecoderResult(t){let i=pt.createBarcodeMatrix(t);pt.adjustCodewordCount(t,i);let l=new Array,u=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),f=[],m=new Array;for(let v=0;v<t.getBarcodeRowCount();v++)for(let A=0;A<t.getBarcodeColumnCount();A++){let N=i[v][A+1].getValue(),D=v*t.getBarcodeColumnCount()+A;N.length===0?l.push(D):N.length===1?u[D]=N[0]:(m.push(D),f.push(N))}let p=new Array(f.length);for(let v=0;v<p.length;v++)p[v]=f[v];return pt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),u,at.toIntArray(l),at.toIntArray(m),p)}static createDecoderResultFromAmbiguousValues(t,i,l,u,f){let m=new Int32Array(u.length),p=100;for(;p-- >0;){for(let v=0;v<m.length;v++)i[u[v]]=f[v][m[v]];try{return pt.decodeCodewords(i,t,l)}catch(v){if(!(v instanceof B))throw v}if(m.length===0)throw B.getChecksumInstance();for(let v=0;v<m.length;v++)if(m[v]<f[v].length-1){m[v]++;break}else if(m[v]=0,v===m.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let u=0;u<i.length;u++)for(let f=0;f<i[u].length;f++)i[u][f]=new vi;let l=0;for(let u of t.getDetectionResultColumns()){if(u!=null){for(let f of u.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=0){if(m>=i.length)continue;i[m][l].setValue(f.getValue())}}}l++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,l,u){let f=u?1:-1,m=null;if(pt.isValidBarcodeColumn(t,i-f)&&(m=t.getDetectionResultColumn(i-f).getCodeword(l)),m!=null)return u?m.getEndX():m.getStartX();if(m=t.getDetectionResultColumn(i).getCodewordNearby(l),m!=null)return u?m.getStartX():m.getEndX();if(pt.isValidBarcodeColumn(t,i-f)&&(m=t.getDetectionResultColumn(i-f).getCodewordNearby(l)),m!=null)return u?m.getEndX():m.getStartX();let p=0;for(;pt.isValidBarcodeColumn(t,i-f);){i-=f;for(let v of t.getDetectionResultColumn(i).getCodewords())if(v!=null)return(u?v.getEndX():v.getStartX())+f*p*(v.getEndX()-v.getStartX());p++}return u?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,l,u,f,m,p,v){f=pt.adjustCodewordStartColumn(t,i,l,u,f,m);let A=pt.getModuleBitCount(t,i,l,u,f,m);if(A==null)return null;let N,D=bt.sum(A);if(u)N=f+D;else{for(let Y=0;Y<A.length/2;Y++){let J=A[Y];A[Y]=A[A.length-1-Y],A[A.length-1-Y]=J}N=f,f=N-D}if(!pt.checkCodewordSkew(D,p,v))return null;let j=Vn.getDecodedValue(A),F=at.getCodeword(j);return F===-1?null:new Rr(f,N,pt.getCodewordBucketNumber(j),F)}static getModuleBitCount(t,i,l,u,f,m){let p=f,v=new Int32Array(8),A=0,N=u?1:-1,D=u;for(;(u?p<l:p>=i)&&A<v.length;)t.get(p,m)===D?(v[A]++,p+=N):(A++,D=!D);return A===v.length||p===(u?l:i)&&A===v.length-1?v:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,l,u,f,m){let p=f,v=u?-1:1;for(let A=0;A<2;A++){for(;(u?p>=i:p<l)&&u===t.get(p,m);){if(Math.abs(f-p)>pt.CODEWORD_SKEW_SIZE)return f;p+=v}v=-v,u=!u}return p}static checkCodewordSkew(t,i,l){return i-pt.CODEWORD_SKEW_SIZE<=t&&t<=l+pt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,l){if(t.length===0)throw R.getFormatInstance();let u=1<<i+1,f=pt.correctErrors(t,l,u);pt.verifyCodewordCount(t,u);let m=be.decode(t,""+i);return m.setErrorsCorrected(f),m.setErasures(l.length),m}static correctErrors(t,i,l){if(i!=null&&i.length>l/2+pt.MAX_ERRORS||l<0||l>pt.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return pt.errorCorrection.decode(t,l,i)}static verifyCodewordCount(t,i){if(t.length<4)throw R.getFormatInstance();let l=t[0];if(l>t.length)throw R.getFormatInstance();if(l===0)if(i<t.length)t[0]=t.length-i;else throw R.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),l=0,u=i.length-1;for(;!((t&1)!==l&&(l=t&1,u--,u<0));)i[u]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return pt.getCodewordBucketNumber(pt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new ya;for(let l=0;l<t.length;l++){i.format("Row %2d: ",l);for(let u=0;u<t[l].length;u++){let f=t[l][u];f.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}i.format("%n")}return i.toString()}}pt.CODEWORD_SKEW_SIZE=2,pt.MAX_ERRORS=3,pt.MAX_EC_CODEWORDS=512,pt.errorCorrection=new ui;class Gn{decode(t,i=null){let l=Gn.decode(t,i,!1);if(l==null||l.length===0||l[0]==null)throw K.getNotFoundInstance();return l[0]}decodeMultiple(t,i=null){try{return Gn.decode(t,i,!0)}catch(l){throw l instanceof R||l instanceof B?K.getNotFoundInstance():l}}static decode(t,i,l){const u=new Array,f=ft.detectMultiple(t,i,l);for(const m of f.getPoints()){const p=pt.decode(f.getBits(),m[4],m[5],m[6],m[7],Gn.getMinCodewordWidth(m),Gn.getMaxCodewordWidth(m)),v=new Pe(p.getText(),p.getRawBytes(),void 0,m,je.PDF_417);v.putMetadata(wt.ERROR_CORRECTION_LEVEL,p.getECLevel());const A=p.getOther();A!=null&&v.putMetadata(wt.PDF417_EXTRA_METADATA,A),u.push(v)}return u.map(m=>m)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?G.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(Gn.getMaxWidth(t[0],t[4]),Gn.getMaxWidth(t[6],t[2])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN),Math.max(Gn.getMaxWidth(t[1],t[5]),Gn.getMaxWidth(t[7],t[3])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(Gn.getMinWidth(t[0],t[4]),Gn.getMinWidth(t[6],t[2])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN),Math.min(Gn.getMinWidth(t[1],t[5]),Gn.getMinWidth(t[7],t[3])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN)))}reset(){}}class Hs extends w{}Hs.kind="ReaderException";class rc{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!c(t)&&t.get(se.TRY_HARDER)===!0,l=c(t)?null:t.get(se.POSSIBLE_FORMATS),u=new Array;if(!c(l)){const f=l.some(m=>m===je.UPC_A||m===je.UPC_E||m===je.EAN_13||m===je.EAN_8||m===je.CODABAR||m===je.CODE_39||m===je.CODE_93||m===je.CODE_128||m===je.ITF||m===je.RSS_14||m===je.RSS_EXPANDED);f&&!i&&u.push(new Rn(t,this.verbose)),l.includes(je.QR_CODE)&&u.push(new ci),l.includes(je.DATA_MATRIX)&&u.push(new oi),l.includes(je.AZTEC)&&u.push(new ua),l.includes(je.PDF_417)&&u.push(new Gn),f&&i&&u.push(new Rn(t,this.verbose))}u.length===0&&(i||u.push(new Rn(t,this.verbose)),u.push(new ci),u.push(new oi),u.push(new ua),u.push(new Gn),i&&u.push(new Rn(t,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new Hs("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(l){if(l instanceof Hs)continue}throw new K("No MultiFormat Readers were able to detect the code.")}}class ic extends Ie{constructor(t=null,i=500){const l=new rc;l.setHints(t),super(l,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class ef extends Ie{constructor(t=500){super(new Gn,t)}}class tf extends Ie{constructor(t=500){super(new ci,t)}}var Gl;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(Gl||(Gl={}));var Dn=Gl;class ls{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Tn(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let l=i[i.length-1];const u=this.field;for(let f=i.length;f<=t;f++){const m=l.multiply(new Tn(u,Int32Array.from([1,u.exp(f-1+u.getGeneratorBase())])));i.push(m),l=m}}return i[t]}encode(t,i){if(i===0)throw new S("No error correction bytes");const l=t.length-i;if(l<=0)throw new S("No data bytes provided");const u=this.buildGenerator(i),f=new Int32Array(l);z.arraycopy(t,0,f,0,l);let m=new Tn(this.field,f);m=m.multiplyByMonomial(i,1);const v=m.divide(u)[1].getCoefficients(),A=i-v.length;for(let N=0;N<A;N++)t[l+N]=0;z.arraycopy(v,0,t,l+A,v.length)}}class pn{constructor(){}static applyMaskPenaltyRule1(t){return pn.applyMaskPenaltyRule1Internal(t,!0)+pn.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const l=t.getArray(),u=t.getWidth(),f=t.getHeight();for(let m=0;m<f-1;m++){const p=l[m];for(let v=0;v<u-1;v++){const A=p[v];A===p[v+1]&&A===l[m+1][v]&&A===l[m+1][v+1]&&i++}}return pn.N2*i}static applyMaskPenaltyRule3(t){let i=0;const l=t.getArray(),u=t.getWidth(),f=t.getHeight();for(let m=0;m<f;m++)for(let p=0;p<u;p++){const v=l[m];p+6<u&&v[p]===1&&v[p+1]===0&&v[p+2]===1&&v[p+3]===1&&v[p+4]===1&&v[p+5]===0&&v[p+6]===1&&(pn.isWhiteHorizontal(v,p-4,p)||pn.isWhiteHorizontal(v,p+7,p+11))&&i++,m+6<f&&l[m][p]===1&&l[m+1][p]===0&&l[m+2][p]===1&&l[m+3][p]===1&&l[m+4][p]===1&&l[m+5][p]===0&&l[m+6][p]===1&&(pn.isWhiteVertical(l,p,m-4,m)||pn.isWhiteVertical(l,p,m+7,m+11))&&i++}return i*pn.N3}static isWhiteHorizontal(t,i,l){i=Math.max(i,0),l=Math.min(l,t.length);for(let u=i;u<l;u++)if(t[u]===1)return!1;return!0}static isWhiteVertical(t,i,l,u){l=Math.max(l,0),u=Math.min(u,t.length);for(let f=l;f<u;f++)if(t[f][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const l=t.getArray(),u=t.getWidth(),f=t.getHeight();for(let v=0;v<f;v++){const A=l[v];for(let N=0;N<u;N++)A[N]===1&&i++}const m=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-m)*10/m)*pn.N4}static getDataMaskBit(t,i,l){let u,f;switch(t){case 0:u=l+i&1;break;case 1:u=l&1;break;case 2:u=i%3;break;case 3:u=(l+i)%3;break;case 4:u=Math.floor(l/2)+Math.floor(i/3)&1;break;case 5:f=l*i,u=(f&1)+f%3;break;case 6:f=l*i,u=(f&1)+f%3&1;break;case 7:f=l*i,u=f%3+(l+i&1)&1;break;default:throw new S("Invalid mask pattern: "+t)}return u===0}static applyMaskPenaltyRule1Internal(t,i){let l=0;const u=i?t.getHeight():t.getWidth(),f=i?t.getWidth():t.getHeight(),m=t.getArray();for(let p=0;p<u;p++){let v=0,A=-1;for(let N=0;N<f;N++){const D=i?m[p][N]:m[N][p];D===A?v++:(v>=5&&(l+=pn.N1+(v-5)),v=1,A=D)}v>=5&&(l+=pn.N1+(v-5))}return l}}pn.N1=3,pn.N2=3,pn.N3=40,pn.N4=10;class Vs{constructor(t,i){this.width=t,this.height=i;const l=new Array(i);for(let u=0;u!==i;u++)l[u]=new Uint8Array(t);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,l){this.bytes[i][t]=l}setBoolean(t,i,l){this.bytes[i][t]=l?1:0}clear(t){for(const i of this.bytes)te.fill(i,t)}equals(t){if(!(t instanceof Vs))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l],m=i.bytes[l];for(let p=0,v=this.width;p<v;++p)if(f[p]!==m[p])return!1}return!0}toString(){const t=new Ee;for(let i=0,l=this.height;i<l;++i){const u=this.bytes[i];for(let f=0,m=this.width;f<m;++f)switch(u[f]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class ki{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new Ee;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<ki.NUM_MASK_PATTERNS}}ki.NUM_MASK_PATTERNS=8;class Xt extends w{}Xt.kind="WriterException";class st{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,l,u,f){st.clearMatrix(f),st.embedBasicPatterns(l,f),st.embedTypeInfo(i,u,f),st.maybeEmbedVersionInfo(l,f),st.embedDataBits(t,u,f)}static embedBasicPatterns(t,i){st.embedPositionDetectionPatternsAndSeparators(i),st.embedDarkDotAtLeftBottomCorner(i),st.maybeEmbedPositionAdjustmentPatterns(t,i),st.embedTimingPatterns(i)}static embedTypeInfo(t,i,l){const u=new oe;st.makeTypeInfoBits(t,i,u);for(let f=0,m=u.getSize();f<m;++f){const p=u.get(u.getSize()-1-f),v=st.TYPE_INFO_COORDINATES[f],A=v[0],N=v[1];if(l.setBoolean(A,N,p),f<8){const D=l.getWidth()-f-1;l.setBoolean(D,8,p)}else{const j=l.getHeight()-7+(f-8);l.setBoolean(8,j,p)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const l=new oe;st.makeVersionInfoBits(t,l);let u=17;for(let f=0;f<6;++f)for(let m=0;m<3;++m){const p=l.get(u);u--,i.setBoolean(f,i.getHeight()-11+m,p),i.setBoolean(i.getHeight()-11+m,f,p)}}static embedDataBits(t,i,l){let u=0,f=-1,m=l.getWidth()-1,p=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);p>=0&&p<l.getHeight();){for(let v=0;v<2;++v){const A=m-v;if(!st.isEmpty(l.get(A,p)))continue;let N;u<t.getSize()?(N=t.get(u),++u):N=!1,i!==255&&pn.getDataMaskBit(i,A,p)&&(N=!N),l.setBoolean(A,p,N)}p+=f}f=-f,p+=f,m-=2}if(u!==t.getSize())throw new Xt("Not all bits consumed: "+u+"/"+t.getSize())}static findMSBSet(t){return 32-G.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new S("0 polynomial");const l=st.findMSBSet(i);for(t<<=l-1;st.findMSBSet(t)>=l;)t^=i<<st.findMSBSet(t)-l;return t}static makeTypeInfoBits(t,i,l){if(!ki.isValidMaskPattern(i))throw new Xt("Invalid mask pattern");const u=t.getBits()<<3|i;l.appendBits(u,5);const f=st.calculateBCHCode(u,st.TYPE_INFO_POLY);l.appendBits(f,10);const m=new oe;if(m.appendBits(st.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Xt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const l=st.calculateBCHCode(t.getVersionNumber(),st.VERSION_INFO_POLY);if(i.appendBits(l,12),i.getSize()!==18)throw new Xt("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const l=(i+1)%2;st.isEmpty(t.get(i,6))&&t.setNumber(i,6,l),st.isEmpty(t.get(6,i))&&t.setNumber(6,i,l)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new Xt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,l){for(let u=0;u<8;++u){if(!st.isEmpty(l.get(t+u,i)))throw new Xt;l.setNumber(t+u,i,0)}}static embedVerticalSeparationPattern(t,i,l){for(let u=0;u<7;++u){if(!st.isEmpty(l.get(t,i+u)))throw new Xt;l.setNumber(t,i+u,0)}}static embedPositionAdjustmentPattern(t,i,l){for(let u=0;u<5;++u){const f=st.POSITION_ADJUSTMENT_PATTERN[u];for(let m=0;m<5;++m)l.setNumber(t+m,i+u,f[m])}}static embedPositionDetectionPattern(t,i,l){for(let u=0;u<7;++u){const f=st.POSITION_DETECTION_PATTERN[u];for(let m=0;m<7;++m)l.setNumber(t+m,i+u,f[m])}}static embedPositionDetectionPatternsAndSeparators(t){const i=st.POSITION_DETECTION_PATTERN[0].length;st.embedPositionDetectionPattern(0,0,t),st.embedPositionDetectionPattern(t.getWidth()-i,0,t),st.embedPositionDetectionPattern(0,t.getWidth()-i,t);const l=8;st.embedHorizontalSeparationPattern(0,l-1,t),st.embedHorizontalSeparationPattern(t.getWidth()-l,l-1,t),st.embedHorizontalSeparationPattern(0,t.getWidth()-l,t);const u=7;st.embedVerticalSeparationPattern(u,0,t),st.embedVerticalSeparationPattern(t.getHeight()-u-1,0,t),st.embedVerticalSeparationPattern(u,t.getHeight()-u,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const l=t.getVersionNumber()-1,u=st.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,m=u.length;f!==m;f++){const p=u[f];if(p>=0)for(let v=0;v!==m;v++){const A=u[v];A>=0&&st.isEmpty(i.get(A,p))&&st.embedPositionAdjustmentPattern(A-2,p-2,i)}}}}st.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),st.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),st.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),st.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),st.VERSION_INFO_POLY=7973,st.TYPE_INFO_POLY=1335,st.TYPE_INFO_MASK_PATTERN=21522;class nf{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ln{constructor(){}static calculateMaskPenalty(t){return pn.applyMaskPenaltyRule1(t)+pn.applyMaskPenaltyRule2(t)+pn.applyMaskPenaltyRule3(t)+pn.applyMaskPenaltyRule4(t)}static encode(t,i,l=null){let u=ln.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(Dn.CHARACTER_SET)!==void 0;f&&(u=l.get(Dn.CHARACTER_SET).toString());const m=this.chooseMode(t,u),p=new oe;if(m===nt.BYTE&&(f||ln.DEFAULT_BYTE_MODE_ENCODING!==u)){const Be=L.getCharacterSetECIByName(u);Be!==void 0&&this.appendECI(Be,p)}this.appendModeInfo(m,p);const v=new oe;this.appendBytes(t,m,v,u);let A;if(l!==null&&l.get(Dn.QR_VERSION)!==void 0){const Be=Number.parseInt(l.get(Dn.QR_VERSION).toString(),10);A=Ze.getVersionForNumber(Be);const Re=this.calculateBitsNeeded(m,p,v,A);if(!this.willFit(Re,A,i))throw new Xt("Data too big for requested version")}else A=this.recommendVersion(i,m,p,v);const N=new oe;N.appendBitArray(p);const D=m===nt.BYTE?v.getSizeInBytes():t.length;this.appendLengthInfo(D,A,m,N),N.appendBitArray(v);const j=A.getECBlocksForLevel(i),F=A.getTotalCodewords()-j.getTotalECCodewords();this.terminateBits(F,N);const Y=this.interleaveWithECBytes(N,A.getTotalCodewords(),F,j.getNumBlocks()),J=new ki;J.setECLevel(i),J.setMode(m),J.setVersion(A);const le=A.getDimensionForVersion(),we=new Vs(le,le),Le=this.chooseMaskPattern(Y,i,A,we);return J.setMaskPattern(Le),st.buildMatrix(Y,i,A,Le,we),J.setMatrix(we),J}static recommendVersion(t,i,l,u){const f=this.calculateBitsNeeded(i,l,u,Ze.getVersionForNumber(1)),m=this.chooseVersion(f,t),p=this.calculateBitsNeeded(i,l,u,m);return this.chooseVersion(p,t)}static calculateBitsNeeded(t,i,l,u){return i.getSize()+t.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(t){return t<ln.ALPHANUMERIC_TABLE.length?ln.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(L.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return nt.KANJI;let l=!1,u=!1;for(let f=0,m=t.length;f<m;++f){const p=t.charAt(f);if(ln.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)u=!0;else return nt.BYTE}return u?nt.ALPHANUMERIC:l?nt.NUMERIC:nt.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=re.encode(t,L.SJIS)}catch{return!1}const l=i.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const f=i[u]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(t,i,l,u){let f=Number.MAX_SAFE_INTEGER,m=-1;for(let p=0;p<ki.NUM_MASK_PATTERNS;p++){st.buildMatrix(t,i,l,p,u);let v=this.calculateMaskPenalty(u);v<f&&(f=v,m=p)}return m}static chooseVersion(t,i){for(let l=1;l<=40;l++){const u=Ze.getVersionForNumber(l);if(ln.willFit(t,u,i))return u}throw new Xt("Data too big")}static willFit(t,i,l){const u=i.getTotalCodewords(),m=i.getECBlocksForLevel(l).getTotalECCodewords(),p=u-m,v=(t+7)/8;return p>=v}static terminateBits(t,i){const l=t*8;if(i.getSize()>l)throw new Xt("data bits cannot fit in the QR Code"+i.getSize()+" > "+l);for(let m=0;m<4&&i.getSize()<l;++m)i.appendBit(!1);const u=i.getSize()&7;if(u>0)for(let m=u;m<8;m++)i.appendBit(!1);const f=t-i.getSizeInBytes();for(let m=0;m<f;++m)i.appendBits((m&1)===0?236:17,8);if(i.getSize()!==l)throw new Xt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,l,u,f,m){if(u>=l)throw new Xt("Block ID too large");const p=t%l,v=l-p,A=Math.floor(t/l),N=A+1,D=Math.floor(i/l),j=D+1,F=A-D,Y=N-j;if(F!==Y)throw new Xt("EC bytes mismatch");if(l!==v+p)throw new Xt("RS blocks mismatch");if(t!==(D+F)*v+(j+Y)*p)throw new Xt("Total bytes mismatch");u<v?(f[0]=D,m[0]=F):(f[0]=j,m[0]=Y)}static interleaveWithECBytes(t,i,l,u){if(t.getSizeInBytes()!==l)throw new Xt("Number of bits and data bytes does not match");let f=0,m=0,p=0;const v=new Array;for(let N=0;N<u;++N){const D=new Int32Array(1),j=new Int32Array(1);ln.getNumDataBytesAndNumECBytesForBlockID(i,l,u,N,D,j);const F=D[0],Y=new Uint8Array(F);t.toBytes(8*f,Y,0,F);const J=ln.generateECBytes(Y,j[0]);v.push(new nf(Y,J)),m=Math.max(m,F),p=Math.max(p,J.length),f+=D[0]}if(l!==f)throw new Xt("Data bytes does not match offset");const A=new oe;for(let N=0;N<m;++N)for(const D of v){const j=D.getDataBytes();N<j.length&&A.appendBits(j[N],8)}for(let N=0;N<p;++N)for(const D of v){const j=D.getErrorCorrectionBytes();N<j.length&&A.appendBits(j[N],8)}if(i!==A.getSizeInBytes())throw new Xt("Interleaving error: "+i+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(t,i){const l=t.length,u=new Int32Array(l+i);for(let m=0;m<l;m++)u[m]=t[m]&255;new ls(xt.QR_CODE_FIELD_256).encode(u,i);const f=new Uint8Array(i);for(let m=0;m<i;m++)f[m]=u[l+m];return f}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,l,u){const f=l.getCharacterCountBits(i);if(t>=1<<f)throw new Xt(t+" is bigger than "+((1<<f)-1));u.appendBits(t,f)}static appendBytes(t,i,l,u){switch(i){case nt.NUMERIC:ln.appendNumericBytes(t,l);break;case nt.ALPHANUMERIC:ln.appendAlphanumericBytes(t,l);break;case nt.BYTE:ln.append8BitBytes(t,l,u);break;case nt.KANJI:ln.appendKanjiBytes(t,l);break;default:throw new Xt("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=ln.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const l=t.length;let u=0;for(;u<l;){const f=ln.getDigit(t.charAt(u));if(u+2<l){const m=ln.getDigit(t.charAt(u+1)),p=ln.getDigit(t.charAt(u+2));i.appendBits(f*100+m*10+p,10),u+=3}else if(u+1<l){const m=ln.getDigit(t.charAt(u+1));i.appendBits(f*10+m,7),u+=2}else i.appendBits(f,4),u++}}static appendAlphanumericBytes(t,i){const l=t.length;let u=0;for(;u<l;){const f=ln.getAlphanumericCode(t.charCodeAt(u));if(f===-1)throw new Xt;if(u+1<l){const m=ln.getAlphanumericCode(t.charCodeAt(u+1));if(m===-1)throw new Xt;i.appendBits(f*45+m,11),u+=2}else i.appendBits(f,6),u++}}static append8BitBytes(t,i,l){let u;try{u=re.encode(t,l)}catch(f){throw new Xt(f)}for(let f=0,m=u.length;f!==m;f++){const p=u[f];i.appendBits(p,8)}}static appendKanjiBytes(t,i){let l;try{l=re.encode(t,L.SJIS)}catch(f){throw new Xt(f)}const u=l.length;for(let f=0;f<u;f+=2){const m=l[f]&255,p=l[f+1]&255,v=m<<8&4294967295|p;let A=-1;if(v>=33088&&v<=40956?A=v-33088:v>=57408&&v<=60351&&(A=v-49472),A===-1)throw new Xt("Invalid byte sequence");const N=(A>>8)*192+(A&255);i.appendBits(N,13)}}static appendECI(t,i){i.appendBits(nt.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}ln.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ln.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class Li{write(t,i,l,u=null){if(t.length===0)throw new S("Found empty contents");if(i<0||l<0)throw new S("Requested dimensions are too small: "+i+"x"+l);let f=At.L,m=Li.QUIET_ZONE_SIZE;u!==null&&(u.get(Dn.ERROR_CORRECTION)!==void 0&&(f=At.fromString(u.get(Dn.ERROR_CORRECTION).toString())),u.get(Dn.MARGIN)!==void 0&&(m=Number.parseInt(u.get(Dn.MARGIN).toString(),10)));const p=ln.encode(t,f,u);return this.renderResult(p,i,l,m)}writeToDom(t,i,l,u,f=null){typeof t=="string"&&(t=document.querySelector(t));const m=this.write(i,l,u,f);t&&t.appendChild(m)}renderResult(t,i,l,u){const f=t.getMatrix();if(f===null)throw new ir;const m=f.getWidth(),p=f.getHeight(),v=m+u*2,A=p+u*2,N=Math.max(i,v),D=Math.max(l,A),j=Math.min(Math.floor(N/v),Math.floor(D/A)),F=Math.floor((N-m*j)/2),Y=Math.floor((D-p*j)/2),J=this.createSVGElement(N,D);for(let le=0,we=Y;le<p;le++,we+=j)for(let Le=0,Be=F;Le<m;Le++,Be+=j)if(f.get(Le,le)===1){const Re=this.createSvgRectElement(Be,we,j,j);J.appendChild(Re)}return J}createSVGElement(t,i){const l=document.createElementNS(Li.SVG_NS,"svg");return l.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width",i.toString()),l}createSvgRectElement(t,i,l,u){const f=document.createElementNS(Li.SVG_NS,"rect");return f.setAttributeNS(null,"x",t.toString()),f.setAttributeNS(null,"y",i.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}Li.QUIET_ZONE_SIZE=4,Li.SVG_NS="http://www.w3.org/2000/svg";class ba{encode(t,i,l,u,f){if(t.length===0)throw new S("Found empty contents");if(i!==je.QR_CODE)throw new S("Can only encode QR_CODE, but got "+i);if(l<0||u<0)throw new S(`Requested dimensions are too small: ${l}x${u}`);let m=At.L,p=ba.QUIET_ZONE_SIZE;f!==null&&(f.get(Dn.ERROR_CORRECTION)!==void 0&&(m=At.fromString(f.get(Dn.ERROR_CORRECTION).toString())),f.get(Dn.MARGIN)!==void 0&&(p=Number.parseInt(f.get(Dn.MARGIN).toString(),10)));const v=ln.encode(t,m,f);return ba.renderResult(v,l,u,p)}static renderResult(t,i,l,u){const f=t.getMatrix();if(f===null)throw new ir;const m=f.getWidth(),p=f.getHeight(),v=m+u*2,A=p+u*2,N=Math.max(i,v),D=Math.max(l,A),j=Math.min(Math.floor(N/v),Math.floor(D/A)),F=Math.floor((N-m*j)/2),Y=Math.floor((D-p*j)/2),J=new Oe(N,D);for(let le=0,we=Y;le<p;le++,we+=j)for(let Le=0,Be=F;Le<m;Le++,Be+=j)f.get(Le,le)===1&&J.setRegion(Be,we,j,j);return J}}ba.QUIET_ZONE_SIZE=4;class rf{encode(t,i,l,u,f){let m;switch(i){case je.QR_CODE:m=new ba;break;default:throw new S("No encoder available for format "+i)}return m.encode(t,i,l,u,f)}}class Wr extends fe{constructor(t,i,l,u,f,m,p,v){if(super(m,p),this.yuvData=t,this.dataWidth=i,this.dataHeight=l,this.left=u,this.top=f,u+m>i||f+p>l)throw new S("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(m,p)}getRow(t,i){if(t<0||t>=this.getHeight())throw new S("Requested row is outside the image: "+t);const l=this.getWidth();(i==null||i.length<l)&&(i=new Uint8ClampedArray(l));const u=(t+this.top)*this.dataWidth+this.left;return z.arraycopy(this.yuvData,u,i,0,l),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const l=t*i,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return z.arraycopy(this.yuvData,f,u,0,l),u;for(let m=0;m<i;m++){const p=m*t;z.arraycopy(this.yuvData,f,u,p,t),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(t,i,l,u){return new Wr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,l,u,!1)}renderThumbnail(){const t=this.getWidth()/Wr.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Wr.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(t*i),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let m=0;m<i;m++){const p=m*t;for(let v=0;v<t;v++){const A=u[f+v*Wr.THUMBNAIL_SCALE_FACTOR]&255;l[p+v]=4278190080|A*65793}f+=this.dataWidth*Wr.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Wr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Wr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const l=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<i;u++,f+=this.dataWidth){const m=f+t/2;for(let p=f,v=f+t-1;p<m;p++,v--){const A=l[p];l[p]=l[v],l[v]=A}}}invert(){return new Ne(this)}}Wr.THUMBNAIL_SCALE_FACTOR=2;class ql extends fe{constructor(t,i,l,u,f,m,p){if(super(i,l),this.dataWidth=u,this.dataHeight=f,this.left=m,this.top=p,t.BYTES_PER_ELEMENT===4){const v=i*l,A=new Uint8ClampedArray(v);for(let N=0;N<v;N++){const D=t[N],j=D>>16&255,F=D>>7&510,Y=D&255;A[N]=(j+F+Y)/4&255}this.luminances=A}else this.luminances=t;if(u===void 0&&(this.dataWidth=i),f===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+l>this.dataHeight)throw new S("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new S("Requested row is outside the image: "+t);const l=this.getWidth();(i==null||i.length<l)&&(i=new Uint8ClampedArray(l));const u=(t+this.top)*this.dataWidth+this.left;return z.arraycopy(this.luminances,u,i,0,l),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const l=t*i,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return z.arraycopy(this.luminances,f,u,0,l),u;for(let m=0;m<i;m++){const p=m*t;z.arraycopy(this.luminances,f,u,p,t),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(t,i,l,u){return new ql(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new Ne(this)}}class ac extends L{static forName(t){return this.getCharacterSetECIByName(t)}}class os{}os.ISO_8859_1=L.ISO8859_1;class va{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class sc{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class lc{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Pi extends lc{constructor(t,i,l){super(t),this.value=i,this.bitCount=l}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new Pi(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Pi(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+G.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Gs extends Pi{constructor(t,i,l){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=l}appendTo(t,i){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):l===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+l],8)}addBinaryShift(t,i){return new Gs(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function oc(I,t,i){return new Gs(I,t,i)}function Ea(I,t,i){return new Pi(I,t,i)}const _a=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_i=0,qs=1,vr=2,Xl=3,Ir=4,cs=new Pi(null,0,0),Ui=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function af(I){for(let t of I)te.fill(t,-1);return I[_i][Ir]=0,I[qs][Ir]=0,I[qs][_i]=28,I[Xl][Ir]=0,I[vr][Ir]=0,I[vr][_i]=15,I}const us=af(te.createInt32Array(6,6));class Dr{constructor(t,i,l,u){this.token=t,this.mode=i,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let l=this.bitCount,u=this.token;if(t!==this.mode){let m=Ui[this.mode][t];u=Ea(u,m&65535,m>>16),l+=m>>16}let f=t===vr?4:5;return u=Ea(u,i,f),new Dr(u,t,0,l+f)}shiftAndAppend(t,i){let l=this.token,u=this.mode===vr?4:5;return l=Ea(l,us[this.mode][t],u),l=Ea(l,i,5),new Dr(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(t){let i=this.token,l=this.mode,u=this.bitCount;if(this.mode===Ir||this.mode===vr){let p=Ui[l][_i];i=Ea(i,p&65535,p>>16),u+=p>>16,l=_i}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Dr(i,l,this.binaryShiftByteCount+1,u+f);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(t+1)),m}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=oc(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Dr(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(Ui[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=Dr.calculateBinaryShiftCost(t)-Dr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let u=this.endBinaryShift(t.length).token;u!==null;u=u.getPrevious())i.unshift(u);let l=new oe;for(const u of i)u.appendTo(l,t);return l}toString(){return ue.format("%s bits=%d bytes=%d",_a[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Dr.INITIAL_STATE=new Dr(cs,_i,0,0);function cc(I){const t=ue.getCharCode(" "),i=ue.getCharCode("."),l=ue.getCharCode(",");I[_i][t]=1;const u=ue.getCharCode("Z"),f=ue.getCharCode("A");for(let j=f;j<=u;j++)I[_i][j]=j-f+2;I[qs][t]=1;const m=ue.getCharCode("z"),p=ue.getCharCode("a");for(let j=p;j<=m;j++)I[qs][j]=j-p+2;I[vr][t]=1;const v=ue.getCharCode("9"),A=ue.getCharCode("0");for(let j=A;j<=v;j++)I[vr][j]=j-A+2;I[vr][l]=12,I[vr][i]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let j=0;j<N.length;j++)I[Xl][ue.getCharCode(N[j])]=j;const D=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let j=0;j<D.length;j++)ue.getCharCode(D[j])>0&&(I[Ir][ue.getCharCode(D[j])]=j);return I}const fs=cc(te.createInt32Array(5,256));class Fi{constructor(t){this.text=t}encode(){const t=ue.getCharCode(" "),i=ue.getCharCode(`
`);let l=sc.singletonList(Dr.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let m,p=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case ue.getCharCode("\r"):m=p===i?2:0;break;case ue.getCharCode("."):m=p===t?3:0;break;case ue.getCharCode(","):m=p===t?4:0;break;case ue.getCharCode(":"):m=p===t?5:0;break;default:m=0}m>0?(l=Fi.updateStateListForPair(l,f,m),f++):l=this.updateStateListForChar(l,f)}return sc.min(l,(f,m)=>f.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const l=[];for(let u of t)this.updateStateForChar(u,i,l);return Fi.simplifyStates(l)}updateStateForChar(t,i,l){let u=this.text[i]&255,f=fs[t.getMode()][u]>0,m=null;for(let p=0;p<=Ir;p++){let v=fs[p][u];if(v>0){if(m==null&&(m=t.endBinaryShift(i)),!f||p===t.getMode()||p===vr){const A=m.latchAndAppend(p,v);l.push(A)}if(!f&&us[t.getMode()][p]>=0){const A=m.shiftAndAppend(p,v);l.push(A)}}}if(t.getBinaryShiftByteCount()>0||fs[t.getMode()][u]===0){let p=t.addBinaryShiftChar(i);l.push(p)}}static updateStateListForPair(t,i,l){const u=[];for(let f of t)this.updateStateForPair(f,i,l,u);return this.simplifyStates(u)}static updateStateForPair(t,i,l,u){let f=t.endBinaryShift(i);if(u.push(f.latchAndAppend(Ir,l)),t.getMode()!==Ir&&u.push(f.shiftAndAppend(Ir,l)),l===3||l===4){let m=f.latchAndAppend(vr,16-l).latchAndAppend(vr,1);u.push(m)}if(t.getBinaryShiftByteCount()>0){let m=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);u.push(m)}}static simplifyStates(t){let i=[];for(const l of t){let u=!0;for(const f of i){if(f.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(f)&&(i=i.filter(m=>m!==f))}u&&i.push(l)}return i}}class Dt{constructor(){}static encodeBytes(t){return Dt.encode(t,Dt.DEFAULT_EC_PERCENT,Dt.DEFAULT_AZTEC_LAYERS)}static encode(t,i,l){let u=new Fi(t).encode(),f=G.truncDivision(u.getSize()*i,100)+11,m=u.getSize()+f,p,v,A,N,D;if(l!==Dt.DEFAULT_AZTEC_LAYERS){if(p=l<0,v=Math.abs(l),v>(p?Dt.MAX_NB_BITS_COMPACT:Dt.MAX_NB_BITS))throw new S(ue.format("Illegal value %s for layers",l));A=Dt.totalBitsInLayer(v,p),N=Dt.WORD_SIZE[v];let Re=A-A%N;if(D=Dt.stuffBits(u,N),D.getSize()+f>Re)throw new S("Data to large for user specified layer");if(p&&D.getSize()>N*64)throw new S("Data to large for user specified layer")}else{N=0,D=null;for(let Re=0;;Re++){if(Re>Dt.MAX_NB_BITS)throw new S("Data too large for an Aztec code");if(p=Re<=3,v=p?Re+1:Re,A=Dt.totalBitsInLayer(v,p),m>A)continue;(D==null||N!==Dt.WORD_SIZE[v])&&(N=Dt.WORD_SIZE[v],D=Dt.stuffBits(u,N));let vt=A-A%N;if(!(p&&D.getSize()>N*64)&&D.getSize()+f<=vt)break}}let j=Dt.generateCheckWords(D,A,N),F=D.getSize()/N,Y=Dt.generateModeMessage(p,v,F),J=(p?11:14)+v*4,le=new Int32Array(J),we;if(p){we=J;for(let Re=0;Re<le.length;Re++)le[Re]=Re}else{we=J+1+2*G.truncDivision(G.truncDivision(J,2)-1,15);let Re=G.truncDivision(J,2),vt=G.truncDivision(we,2);for(let ht=0;ht<Re;ht++){let En=ht+G.truncDivision(ht,15);le[Re-ht-1]=vt-En-1,le[Re+ht]=vt+En+1}}let Le=new Oe(we);for(let Re=0,vt=0;Re<v;Re++){let ht=(v-Re)*4+(p?9:12);for(let En=0;En<ht;En++){let Er=En*2;for(let Jn=0;Jn<2;Jn++)j.get(vt+Er+Jn)&&Le.set(le[Re*2+Jn],le[Re*2+En]),j.get(vt+ht*2+Er+Jn)&&Le.set(le[Re*2+En],le[J-1-Re*2-Jn]),j.get(vt+ht*4+Er+Jn)&&Le.set(le[J-1-Re*2-Jn],le[J-1-Re*2-En]),j.get(vt+ht*6+Er+Jn)&&Le.set(le[J-1-Re*2-En],le[Re*2+Jn])}vt+=ht*8}if(Dt.drawModeMessage(Le,p,we,Y),p)Dt.drawBullsEye(Le,G.truncDivision(we,2),5);else{Dt.drawBullsEye(Le,G.truncDivision(we,2),7);for(let Re=0,vt=0;Re<G.truncDivision(J,2)-1;Re+=15,vt+=16)for(let ht=G.truncDivision(we,2)&1;ht<we;ht+=2)Le.set(G.truncDivision(we,2)-vt,ht),Le.set(G.truncDivision(we,2)+vt,ht),Le.set(ht,G.truncDivision(we,2)-vt),Le.set(ht,G.truncDivision(we,2)+vt)}let Be=new va;return Be.setCompact(p),Be.setSize(we),Be.setLayers(v),Be.setCodeWords(F),Be.setMatrix(Le),Be}static drawBullsEye(t,i,l){for(let u=0;u<l;u+=2)for(let f=i-u;f<=i+u;f++)t.set(f,i-u),t.set(f,i+u),t.set(i-u,f),t.set(i+u,f);t.set(i-l,i-l),t.set(i-l+1,i-l),t.set(i-l,i-l+1),t.set(i+l,i-l),t.set(i+l,i-l+1),t.set(i+l,i+l-1)}static generateModeMessage(t,i,l){let u=new oe;return t?(u.appendBits(i-1,2),u.appendBits(l-1,6),u=Dt.generateCheckWords(u,28,4)):(u.appendBits(i-1,5),u.appendBits(l-1,11),u=Dt.generateCheckWords(u,40,4)),u}static drawModeMessage(t,i,l,u){let f=G.truncDivision(l,2);if(i)for(let m=0;m<7;m++){let p=f-3+m;u.get(m)&&t.set(p,f-5),u.get(m+7)&&t.set(f+5,p),u.get(20-m)&&t.set(p,f+5),u.get(27-m)&&t.set(f-5,p)}else for(let m=0;m<10;m++){let p=f-5+m+G.truncDivision(m,5);u.get(m)&&t.set(p,f-7),u.get(m+10)&&t.set(f+7,p),u.get(29-m)&&t.set(p,f+7),u.get(39-m)&&t.set(f-7,p)}}static generateCheckWords(t,i,l){let u=t.getSize()/l,f=new ls(Dt.getGF(l)),m=G.truncDivision(i,l),p=Dt.bitsToWords(t,l,m);f.encode(p,m-u);let v=i%l,A=new oe;A.appendBits(0,v);for(const N of Array.from(p))A.appendBits(N,l);return A}static bitsToWords(t,i,l){let u=new Int32Array(l),f,m;for(f=0,m=t.getSize()/i;f<m;f++){let p=0;for(let v=0;v<i;v++)p|=t.get(f*i+v)?1<<i-v-1:0;u[f]=p}return u}static getGF(t){switch(t){case 4:return xt.AZTEC_PARAM;case 6:return xt.AZTEC_DATA_6;case 8:return xt.AZTEC_DATA_8;case 10:return xt.AZTEC_DATA_10;case 12:return xt.AZTEC_DATA_12;default:throw new S("Unsupported word size "+t)}}static stuffBits(t,i){let l=new oe,u=t.getSize(),f=(1<<i)-2;for(let m=0;m<u;m+=i){let p=0;for(let v=0;v<i;v++)(m+v>=u||t.get(m+v))&&(p|=1<<i-1-v);(p&f)===f?(l.appendBits(p&f,i),m--):(p&f)===0?(l.appendBits(p|1,i),m--):l.appendBits(p,i)}return l}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}Dt.DEFAULT_EC_PERCENT=33,Dt.DEFAULT_AZTEC_LAYERS=0,Dt.MAX_NB_BITS=32,Dt.MAX_NB_BITS_COMPACT=4,Dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class hs{encode(t,i,l,u){return this.encodeWithHints(t,i,l,u,null)}encodeWithHints(t,i,l,u,f){let m=os.ISO_8859_1,p=Dt.DEFAULT_EC_PERCENT,v=Dt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Dn.CHARACTER_SET)&&(m=ac.forName(f.get(Dn.CHARACTER_SET).toString())),f.has(Dn.ERROR_CORRECTION)&&(p=G.parseInt(f.get(Dn.ERROR_CORRECTION).toString())),f.has(Dn.AZTEC_LAYERS)&&(v=G.parseInt(f.get(Dn.AZTEC_LAYERS).toString()))),hs.encodeLayers(t,i,l,u,m,p,v)}static encodeLayers(t,i,l,u,f,m,p){if(i!==je.AZTEC)throw new S("Can only encode AZTEC, but got "+i);let v=Dt.encode(ue.getBytes(t,f),m,p);return hs.renderResult(v,l,u)}static renderResult(t,i,l){let u=t.getMatrix();if(u==null)throw new ir;let f=u.getWidth(),m=u.getHeight(),p=Math.max(i,f),v=Math.max(l,m),A=Math.min(p/f,v/m),N=(p-f*A)/2,D=(v-m*A)/2,j=new Oe(p,v);for(let F=0,Y=D;F<m;F++,Y+=A)for(let J=0,le=N;J<f;J++,le+=A)u.get(J,F)&&j.setRegion(le,Y,A,A);return j}}a.AbstractExpandedDecoder=ze,a.ArgumentException=T,a.ArithmeticException=un,a.AztecCode=va,a.AztecCodeReader=ua,a.AztecCodeWriter=hs,a.AztecDecoder=Ut,a.AztecDetector=ca,a.AztecDetectorResult=js,a.AztecEncoder=Dt,a.AztecHighLevelEncoder=Fi,a.AztecPoint=tn,a.BarcodeFormat=je,a.Binarizer=U,a.BinaryBitmap=M,a.BitArray=oe,a.BitMatrix=Oe,a.BitSource=It,a.BrowserAztecCodeReader=is,a.BrowserBarcodeReader=ga,a.BrowserCodeReader=Ie,a.BrowserDatamatrixCodeReader=Ls,a.BrowserMultiFormatReader=ic,a.BrowserPDF417Reader=ef,a.BrowserQRCodeReader=tf,a.BrowserQRCodeSvgWriter=Li,a.CharacterSetECI=L,a.ChecksumException=B,a.Code128Reader=Me,a.Code39Reader=zt,a.DataMatrixDecodedBitStreamParser=wr,a.DataMatrixReader=oi,a.DecodeHintType=se,a.DecoderResult=Wt,a.DefaultGridSampler=Mi,a.DetectorResult=oa,a.EAN13Reader=ar,a.EncodeHintType=Dn,a.Exception=w,a.FormatException=R,a.GenericGF=xt,a.GenericGFPoly=Tn,a.GlobalHistogramBinarizer=ne,a.GridSampler=li,a.GridSamplerInstance=bn,a.HTMLCanvasElementLuminanceSource=Fe,a.HybridBinarizer=Q,a.ITFReader=dt,a.IllegalArgumentException=S,a.IllegalStateException=ir,a.InvertedLuminanceSource=Ne,a.LuminanceSource=fe,a.MathUtils=bt,a.MultiFormatOneDReader=Rn,a.MultiFormatReader=rc,a.MultiFormatWriter=rf,a.NotFoundException=K,a.OneDReader=Qt,a.PDF417DecodedBitStreamParser=be,a.PDF417DecoderErrorCorrection=ui,a.PDF417Reader=Gn,a.PDF417ResultMetadata=wa,a.PerspectiveTransform=Qn,a.PlanarYUVLuminanceSource=Wr,a.QRCodeByteMatrix=Vs,a.QRCodeDataMask=dr,a.QRCodeDecodedBitStreamParser=an,a.QRCodeDecoderErrorCorrectionLevel=At,a.QRCodeDecoderFormatInformation=jn,a.QRCodeEncoder=ln,a.QRCodeEncoderQRCode=ki,a.QRCodeMaskUtil=pn,a.QRCodeMatrixUtil=st,a.QRCodeMode=nt,a.QRCodeReader=ci,a.QRCodeVersion=Ze,a.QRCodeWriter=ba,a.RGBLuminanceSource=ql,a.RSS14Reader=Rt,a.RSSExpandedReader=Ce,a.ReaderException=Hs,a.ReedSolomonDecoder=Zn,a.ReedSolomonEncoder=ls,a.ReedSolomonException=Kn,a.Result=Pe,a.ResultMetadataType=wt,a.ResultPoint=Ge,a.StringUtils=ue,a.UnsupportedOperationException=he,a.VideoInputDevice=X,a.WhiteRectangleDetector=Ft,a.WriterException=Xt,a.ZXingArrays=te,a.ZXingCharset=ac,a.ZXingInteger=G,a.ZXingStandardCharsets=os,a.ZXingStringBuilder=Ee,a.ZXingStringEncoding=re,a.ZXingSystem=z,a.createAbstractExpandedDecoder=sr,Object.defineProperty(a,"__esModule",{value:!0})}))})(jo,jo.exports)),jo.exports}var mn=ZE();const QE=Vu(mn),JE=Pd({__proto__:null,default:QE},[mn]);var S2=(function(){function s(r,a,c){if(this.formatMap=new Map([[Xe.QR_CODE,mn.BarcodeFormat.QR_CODE],[Xe.AZTEC,mn.BarcodeFormat.AZTEC],[Xe.CODABAR,mn.BarcodeFormat.CODABAR],[Xe.CODE_39,mn.BarcodeFormat.CODE_39],[Xe.CODE_93,mn.BarcodeFormat.CODE_93],[Xe.CODE_128,mn.BarcodeFormat.CODE_128],[Xe.DATA_MATRIX,mn.BarcodeFormat.DATA_MATRIX],[Xe.MAXICODE,mn.BarcodeFormat.MAXICODE],[Xe.ITF,mn.BarcodeFormat.ITF],[Xe.EAN_13,mn.BarcodeFormat.EAN_13],[Xe.EAN_8,mn.BarcodeFormat.EAN_8],[Xe.PDF_417,mn.BarcodeFormat.PDF_417],[Xe.RSS_14,mn.BarcodeFormat.RSS_14],[Xe.RSS_EXPANDED,mn.BarcodeFormat.RSS_EXPANDED],[Xe.UPC_A,mn.BarcodeFormat.UPC_A],[Xe.UPC_E,mn.BarcodeFormat.UPC_E],[Xe.UPC_EAN_EXTENSION,mn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!JE)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=a,this.logger=c;var d=this.createZXingFormats(r),g=new Map;g.set(mn.DecodeHintType.POSSIBLE_FORMATS,d),g.set(mn.DecodeHintType.TRY_HARDER,!1),this.hints=g}return s.prototype.decodeAsync=function(r){var a=this;return new Promise(function(c,d){try{c(a.decode(r))}catch(g){d(g)}})},s.prototype.decode=function(r){var a=new mn.MultiFormatReader(this.verbose,this.hints),c=new mn.HTMLCanvasElementLuminanceSource(r),d=new mn.BinaryBitmap(new mn.HybridBinarizer(c)),g=a.decode(d);return{text:g.text,format:gp.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},s.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(a,c,d){r.set(a,c)}),r},s.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},s.prototype.createZXingFormats=function(r){for(var a=[],c=0,d=r;c<d.length;c++){var g=d[c];this.formatMap.has(g)?a.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return a},s.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},s})(),$E=function(s,r,a,c){function d(g){return g instanceof a?g:new a(function(x){x(g)})}return new(a||(a=Promise))(function(g,x){function b(T){try{w(c.next(T))}catch(S){x(S)}}function _(T){try{w(c.throw(T))}catch(S){x(S)}}function w(T){T.done?g(T.value):d(T.value).then(b,_)}w((c=c.apply(s,r||[])).next())})},e_=function(s,r){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,d,g,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(T){return _([w,T])}}function _(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,d&&(g=w[0]&2?d.return:w[0]?d.throw||((g=d.return)&&g.call(d),0):d.next)&&!(g=g.call(d,w[1])).done)return g;switch(d=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,d=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){a.label=w[1];break}if(w[0]===6&&a.label<g[1]){a.label=g[1],g=w;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(w);break}g[2]&&a.ops.pop(),a.trys.pop();continue}w=r.call(s,a)}catch(T){w=[6,T],d=0}finally{c=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},T2=(function(){function s(r,a,c){if(this.formatMap=new Map([[Xe.QR_CODE,"qr_code"],[Xe.AZTEC,"aztec"],[Xe.CODABAR,"codabar"],[Xe.CODE_39,"code_39"],[Xe.CODE_93,"code_93"],[Xe.CODE_128,"code_128"],[Xe.DATA_MATRIX,"data_matrix"],[Xe.ITF,"itf"],[Xe.EAN_13,"ean_13"],[Xe.EAN_8,"ean_8"],[Xe.PDF_417,"pdf417"],[Xe.UPC_A,"upc_a"],[Xe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!s.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=a,this.logger=c;var d=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(d),!this.detector)throw"BarcodeDetector detector not supported"}return s.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},s.prototype.decodeAsync=function(r){return $E(this,void 0,void 0,function(){var a,c;return e_(this,function(d){switch(d.label){case 0:return[4,this.detector.detect(r)];case 1:if(a=d.sent(),!a||a.length===0)throw"No barcode or QR code detected.";return c=this.selectLargestBarcode(a),[2,{text:c.rawValue,format:gp.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}]}})})},s.prototype.selectLargestBarcode=function(r){for(var a=null,c=0,d=0,g=r;d<g.length;d++){var x=g[d],b=x.boundingBox.width*x.boundingBox.height;b>c&&(c=b,a=x)}if(!a)throw"No largest barcode found";return a},s.prototype.createBarcodeDetectorFormats=function(r){for(var a=[],c=0,d=r;c<d.length;c++){var g=d[c];this.formatMap.has(g)?a.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:a}},s.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},s.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(a,c,d){r.set(a,c)}),r},s.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},s})(),N2=function(s,r,a,c){function d(g){return g instanceof a?g:new a(function(x){x(g)})}return new(a||(a=Promise))(function(g,x){function b(T){try{w(c.next(T))}catch(S){x(S)}}function _(T){try{w(c.throw(T))}catch(S){x(S)}}function w(T){T.done?g(T.value):d(T.value).then(b,_)}w((c=c.apply(s,r||[])).next())})},O2=function(s,r){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,d,g,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(T){return _([w,T])}}function _(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,d&&(g=w[0]&2?d.return:w[0]?d.throw||((g=d.return)&&g.call(d),0):d.next)&&!(g=g.call(d,w[1])).done)return g;switch(d=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,d=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){a.label=w[1];break}if(w[0]===6&&a.label<g[1]){a.label=g[1],g=w;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(w);break}g[2]&&a.ops.pop(),a.trys.pop();continue}w=r.call(s,a)}catch(T){w=[6,T],d=0}finally{c=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},t_=(function(){function s(r,a,c,d){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=c,a&&T2.isSupported()?(this.primaryDecoder=new T2(r,c,d),this.secondaryDecoder=new S2(r,c,d)):this.primaryDecoder=new S2(r,c,d)}return s.prototype.decodeAsync=function(r){return N2(this,void 0,void 0,function(){var a;return O2(this,function(c){switch(c.label){case 0:a=performance.now(),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,c.sent()];case 3:return this.possiblyLogPerformance(a),[7];case 4:return[2]}})})},s.prototype.decodeRobustlyAsync=function(r){return N2(this,void 0,void 0,function(){var a,c;return O2(this,function(d){switch(d.label){case 0:a=performance.now(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,d.sent()];case 3:if(c=d.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw c;case 4:return this.possiblyLogPerformance(a),[7];case 5:return[2]}})})},s.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},s.prototype.possiblyLogPerformance=function(r){if(this.verbose){var a=performance.now()-r;this.executionResults.push(a),this.executions++,this.possiblyFlushPerformanceReport()}},s.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,a=0,c=this.executionResults;a<c.length;a++){var d=c[a];r+=d}var g=r/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},s})(),i0=(function(){var s=function(r,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(c[g]=d[g])},s(r,a)};return function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(r,a);function c(){this.constructor=r}r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}})(),zu=function(s,r,a,c){function d(g){return g instanceof a?g:new a(function(x){x(g)})}return new(a||(a=Promise))(function(g,x){function b(T){try{w(c.next(T))}catch(S){x(S)}}function _(T){try{w(c.throw(T))}catch(S){x(S)}}function w(T){T.done?g(T.value):d(T.value).then(b,_)}w((c=c.apply(s,r||[])).next())})},Hu=function(s,r){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,d,g,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(T){return _([w,T])}}function _(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,d&&(g=w[0]&2?d.return:w[0]?d.throw||((g=d.return)&&g.call(d),0):d.next)&&!(g=g.call(d,w[1])).done)return g;switch(d=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,d=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){a.label=w[1];break}if(w[0]===6&&a.label<g[1]){a.label=g[1],g=w;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(w);break}g[2]&&a.ops.pop(),a.trys.pop();continue}w=r.call(s,a)}catch(T){w=[6,T],d=0}finally{c=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},xp=(function(){function s(r,a){this.name=r,this.track=a}return s.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},s.prototype.apply=function(r){var a={};a[this.name]=r;var c={advanced:[a]};return this.track.applyConstraints(c)},s.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var a=r[this.name];return a}return null},s})(),n_=(function(s){i0(r,s);function r(a,c){return s.call(this,a,c)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(a){var c={};c[this.name]=a;var d={advanced:[c]};return this.track.applyConstraints(d)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),c=a[this.name];return{min:c.min,max:c.max,step:c.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r})(xp),r_=(function(s){i0(r,s);function r(a){return s.call(this,"zoom",a)||this}return r})(n_),i_=(function(s){i0(r,s);function r(a){return s.call(this,"torch",a)||this}return r})(xp),a_=(function(){function s(r){this.track=r}return s.prototype.zoomFeature=function(){return new r_(this.track)},s.prototype.torchFeature=function(){return new i_(this.track)},s})(),s_=(function(){function s(r,a,c){this.isClosed=!1,this.parentElement=r,this.mediaStream=a,this.callbacks=c,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return s.prototype.createVideoElement=function(r){var a=document.createElement("video");return a.style.width="".concat(r,"px"),a.style.display="block",a.muted=!0,a.setAttribute("muted","true"),a.playsInline=!0,a},s.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var a=function(){var c=r.surface.clientWidth,d=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(c,d),r.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.srcObject=this.mediaStream,this.surface.play()},s.create=function(r,a,c,d){return zu(this,void 0,void 0,function(){var g,x;return Hu(this,function(b){switch(b.label){case 0:return g=new s(r,a,d),c.aspectRatio?(x={aspectRatio:c.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:b.sent(),b.label=2;case 2:return g.setupSurface(),[2,g]}})})},s.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},s.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},s.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},s.prototype.resume=function(r){this.failIfClosed();var a=this,c=function(){setTimeout(r,200),a.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.play()},s.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},s.prototype.getSurface=function(){return this.failIfClosed(),this.surface},s.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},s.prototype.applyVideoConstraints=function(r){return zu(this,void 0,void 0,function(){return Hu(this,function(a){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},s.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(a,c){var d=r.mediaStream.getVideoTracks(),g=d.length,x=0;r.mediaStream.getVideoTracks().forEach(function(b){r.mediaStream.removeTrack(b),b.stop(),++x,x>=g&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),a())})})},s.prototype.getCapabilities=function(){return new a_(this.getFirstTrackOrFail())},s})(),l_=(function(){function s(r){this.mediaStream=r}return s.prototype.render=function(r,a,c){return zu(this,void 0,void 0,function(){return Hu(this,function(d){return[2,s_.create(r,this.mediaStream,a,c)]})})},s.create=function(r){return zu(this,void 0,void 0,function(){var a,c;return Hu(this,function(d){switch(d.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return a={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(a)];case 1:return c=d.sent(),[2,new s(c)]}})})},s})(),R2=function(s,r,a,c){function d(g){return g instanceof a?g:new a(function(x){x(g)})}return new(a||(a=Promise))(function(g,x){function b(T){try{w(c.next(T))}catch(S){x(S)}}function _(T){try{w(c.throw(T))}catch(S){x(S)}}function w(T){T.done?g(T.value):d(T.value).then(b,_)}w((c=c.apply(s,r||[])).next())})},I2=function(s,r){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,d,g,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(T){return _([w,T])}}function _(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,d&&(g=w[0]&2?d.return:w[0]?d.throw||((g=d.return)&&g.call(d),0):d.next)&&!(g=g.call(d,w[1])).done)return g;switch(d=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,d=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){a.label=w[1];break}if(w[0]===6&&a.label<g[1]){a.label=g[1],g=w;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(w);break}g[2]&&a.ops.pop(),a.trys.pop();continue}w=r.call(s,a)}catch(T){w=[6,T],d=0}finally{c=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},o_=(function(){function s(){}return s.failIfNotSupported=function(){return R2(this,void 0,void 0,function(){return I2(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new s]})})},s.prototype.create=function(r){return R2(this,void 0,void 0,function(){return I2(this,function(a){return[2,l_.create(r)]})})},s})(),c_=function(s,r,a,c){function d(g){return g instanceof a?g:new a(function(x){x(g)})}return new(a||(a=Promise))(function(g,x){function b(T){try{w(c.next(T))}catch(S){x(S)}}function _(T){try{w(c.throw(T))}catch(S){x(S)}}function w(T){T.done?g(T.value):d(T.value).then(b,_)}w((c=c.apply(s,r||[])).next())})},u_=function(s,r){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,d,g,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(T){return _([w,T])}}function _(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,d&&(g=w[0]&2?d.return:w[0]?d.throw||((g=d.return)&&g.call(d),0):d.next)&&!(g=g.call(d,w[1])).done)return g;switch(d=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,d=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){a.label=w[1];break}if(w[0]===6&&a.label<g[1]){a.label=g[1],g=w;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(w);break}g[2]&&a.ops.pop(),a.trys.pop();continue}w=r.call(s,a)}catch(T){w=[6,T],d=0}finally{c=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},f_=(function(){function s(){}return s.retrieve=function(){if(navigator.mediaDevices)return s.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?s.getCamerasFromMediaStreamTrack():s.rejectWithError()},s.rejectWithError=function(){var r=Ol.unableToQuerySupportedDevices();return s.isHttpsOrLocalhost()||(r=Ol.insecureContextCameraQueryError()),Promise.reject(r)},s.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},s.getCamerasFromMediaDevices=function(){return c_(this,void 0,void 0,function(){var r,a,c,d,g,x,b;return u_(this,function(_){switch(_.label){case 0:return r=function(w){for(var T=w.getVideoTracks(),S=0,M=T;S<M.length;S++){var B=M[S];B.enabled=!1,B.stop(),w.removeTrack(B)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return a=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(c=_.sent(),d=[],g=0,x=c;g<x.length;g++)b=x[g],b.kind==="videoinput"&&d.push({id:b.deviceId,label:b.label});return r(a),[2,d]}})})},s.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,a){var c=function(g){for(var x=[],b=0,_=g;b<_.length;b++){var w=_[b];w.kind==="video"&&x.push({id:w.id,label:w.label})}r(x)},d=MediaStreamTrack;d.getSources(c)})},s})(),Cn;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED"})(Cn||(Cn={}));var h_=(function(){function s(){this.state=Cn.NOT_STARTED,this.onGoingTransactionNewState=Cn.UNKNOWN}return s.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},s.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},s.prototype.execute=function(){if(this.onGoingTransactionNewState===Cn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Cn.UNKNOWN,this.directTransition(r)},s.prototype.cancel=function(){if(this.onGoingTransactionNewState===Cn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Cn.UNKNOWN},s.prototype.getState=function(){return this.state},s.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Cn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},s.prototype.validateTransition=function(r){switch(this.state){case Cn.UNKNOWN:throw"Transition from unknown is not allowed";case Cn.NOT_STARTED:this.failIfNewStateIs(r,[Cn.PAUSED]);break;case Cn.SCANNING:break;case Cn.PAUSED:break}},s.prototype.failIfNewStateIs=function(r,a){for(var c=0,d=a;c<d.length;c++){var g=d[c];if(r===g)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},s})(),d_=(function(){function s(r){this.stateManager=r}return s.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},s.prototype.directTransition=function(r){this.stateManager.directTransition(r)},s.prototype.getState=function(){return this.stateManager.getState()},s.prototype.canScanFile=function(){return this.stateManager.getState()===Cn.NOT_STARTED},s.prototype.isScanning=function(){return this.stateManager.getState()!==Cn.NOT_STARTED},s.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Cn.SCANNING},s.prototype.isPaused=function(){return this.stateManager.getState()===Cn.PAUSED},s})(),g_=(function(){function s(){}return s.create=function(){return new d_(new h_)},s})(),m_=(function(){var s=function(r,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(c[g]=d[g])},s(r,a)};return function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(r,a);function c(){this.constructor=r}r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}})(),Fr=(function(s){m_(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r})(XE),x_=(function(){function s(r,a){this.logger=a,this.fps=Fr.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=Fr.DEFAULT_DISABLE_FLIP}return s.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?mp.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},s.prototype.isShadedBoxEnabled=function(){return!ia(this.qrbox)},s.create=function(r,a){return new s(r,a)},s})(),D2=(function(){function s(r,a){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var c;typeof a=="boolean"?this.verbose=a===!0:a&&(c=a,this.verbose=c.verbose===!0,c.experimentalFeatures),this.logger=new WE(this.verbose),this.qrcode=new t_(this.getSupportedFormats(a),this.getUseBarCodeDetectorIfSupported(c),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=g_.create()}return s.prototype.start=function(r,a,c,d){var g=this;if(!r)throw"cameraIdOrConfig is required";if(!c||typeof c!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;d?x=d:x=this.verbose?this.logger.log:function(){};var b=x_.create(a,this.logger);this.clearElement();var _=!1;b.videoConstraints&&(b.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=_,T=document.getElementById(this.elementId);T.clientWidth?T.clientWidth:Fr.DEFAULT_WIDTH,T.style.position="relative",this.shouldScan=!0,this.element=T;var S=this,M=this.stateManagerProxy.startTransition(Cn.SCANNING);return new Promise(function(B,U){var z=w?b.videoConstraints:S.createVideoConstraints(r);if(!z){M.cancel(),U("videoConstraints should be defined");return}var H={};(!w||b.aspectRatio)&&(H.aspectRatio=b.aspectRatio);var $={onRenderSurfaceReady:function(te,G){S.setupUi(te,G,b),S.isScanning=!0,S.foreverScan(b,c,x)}};o_.failIfNotSupported().then(function(te){te.create(z).then(function(G){return G.render(g.element,H,$).then(function(oe){S.renderedCamera=oe,M.execute(),B(null)}).catch(function(oe){M.cancel(),U(oe)})}).catch(function(G){M.cancel(),U(Ol.errorGettingUserMedia(G))})}).catch(function(te){M.cancel(),U(Ol.cameraStreamingNotSupported())})})},s.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Cn.PAUSED),this.showPausedState(),(ia(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},s.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,a=function(){r.stateManagerProxy.directTransition(Cn.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){a();return}this.renderedCamera.resume(function(){a()})},s.prototype.getState=function(){return this.stateManagerProxy.getState()},s.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var a=this.stateManagerProxy.startTransition(Cn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var c=function(){if(r.element){var g=document.getElementById(Fr.SHADED_REGION_ELEMENT_ID);g&&r.element.removeChild(g)}},d=this;return this.renderedCamera.close().then(function(){return d.renderedCamera=null,d.element&&(d.element.removeChild(d.canvasElement),d.canvasElement=null),c(),d.qrRegion&&(d.qrRegion=null),d.context&&(d.context=null),a.execute(),d.hidePausedState(),d.isScanning=!1,Promise.resolve()})},s.prototype.scanFile=function(r,a){return this.scanFileV2(r,a).then(function(c){return c.decodedText})},s.prototype.scanFileV2=function(r,a){var c=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ia(a)&&(a=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(d,g){c.possiblyCloseLastScanImageFile(),c.clearElement(),c.lastScanImageFile=URL.createObjectURL(r);var x=new Image;x.onload=function(){var b=x.width,_=x.height,w=document.getElementById(c.elementId),T=w.clientWidth?w.clientWidth:Fr.DEFAULT_WIDTH,S=Math.max(w.clientHeight?w.clientHeight:_,Fr.FILE_SCAN_MIN_HEIGHT),M=c.computeCanvasDrawConfig(b,_,T,S);if(a){var B=c.createCanvasElement(T,S,"qr-canvas-visible");B.style.display="inline-block",w.appendChild(B);var U=B.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=T,U.canvas.height=S,U.drawImage(x,0,0,b,_,M.x,M.y,M.width,M.height)}var z=Fr.FILE_SCAN_HIDDEN_CANVAS_PADDING,H=Math.max(x.width,M.width),$=Math.max(x.height,M.height),te=H+2*z,G=$+2*z,oe=c.createCanvasElement(te,G);w.appendChild(oe);var xe=oe.getContext("2d");if(!xe)throw"Unable to get 2d context from canvas";xe.canvas.width=te,xe.canvas.height=G,xe.drawImage(x,0,0,b,_,z,z,H,$);try{c.qrcode.decodeRobustlyAsync(oe).then(function(se){d(A2.createFromQrcodeResult(se))}).catch(g)}catch(se){g("QR code parse error, error = ".concat(se))}},x.onerror=g,x.onabort=g,x.onstalled=g,x.onsuspend=g,x.src=URL.createObjectURL(r)})},s.prototype.clear=function(){this.clearElement()},s.getCameras=function(){return f_.retrieve()},s.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},s.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},s.prototype.applyVideoConstraints=function(r){if(r){if(!mp.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},s.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},s.prototype.getSupportedFormats=function(r){var a=[Xe.QR_CODE,Xe.AZTEC,Xe.CODABAR,Xe.CODE_39,Xe.CODE_93,Xe.CODE_128,Xe.DATA_MATRIX,Xe.MAXICODE,Xe.ITF,Xe.EAN_13,Xe.EAN_8,Xe.PDF_417,Xe.RSS_14,Xe.RSS_EXPANDED,Xe.UPC_A,Xe.UPC_E,Xe.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return a;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var c=[],d=0,g=r.formatsToSupport;d<g.length;d++){var x=g[d];qE(x)?c.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(c.length===0)throw"None of formatsToSupport match supported values.";return c},s.prototype.getUseBarCodeDetectorIfSupported=function(r){if(ia(r))return!0;if(!ia(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if(ia(r.experimentalFeatures))return!0;var a=r.experimentalFeatures;return ia(a.useBarCodeDetectorIfSupported)?!0:a.useBarCodeDetectorIfSupported!==!1},s.prototype.validateQrboxSize=function(r,a,c){var d=this,g=c.qrbox;this.validateQrboxConfig(g);var x=this.toQrdimensions(r,a,g),b=function(w){if(w<Fr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Fr.MIN_QR_BOX_SIZE,"px.")},_=function(w){return w>r&&(d.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=r),w};b(x.width),b(x.height),x.width=_(x.width)},s.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},s.prototype.toQrdimensions=function(r,a,c){if(typeof c=="number")return{width:c,height:c};if(typeof c=="function")try{return c(r,a)}catch(d){throw new Error("qrbox config was passed as a function but it failed with unknown error"+d)}return c},s.prototype.setupUi=function(r,a,c){c.isShadedBoxEnabled()&&this.validateQrboxSize(r,a,c);var d=ia(c.qrbox)?{width:r,height:a}:c.qrbox;this.validateQrboxConfig(d);var g=this.toQrdimensions(r,a,d);g.height>a&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=c.isShadedBoxEnabled()&&g.height<=a,b={x:0,y:0,width:r,height:a},_=x?this.getShadedRegionBounds(r,a,g):b,w=this.createCanvasElement(_.width,_.height),T={willReadFrequently:!0},S=w.getContext("2d",T);S.canvas.width=_.width,S.canvas.height=_.height,this.element.append(w),x&&this.possiblyInsertShadingElement(this.element,r,a,g),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=S,this.canvasElement=w},s.prototype.createScannerPausedUiElement=function(r){var a=document.createElement("div");a.innerText=Ol.scannerPaused(),a.style.display="none",a.style.position="absolute",a.style.top="0px",a.style.zIndex="1",a.style.background="rgba(9, 9, 9, 0.46)",a.style.color="#FFECEC",a.style.textAlign="center",a.style.width="100%",r.appendChild(a),this.scannerPausedUiElement=a},s.prototype.scanContext=function(r,a){var c=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(d){return r(d.text,A2.createFromQrcodeResult(d)),c.possiblyUpdateShaders(!0),!0}).catch(function(d){c.possiblyUpdateShaders(!1);var g=Ol.codeParseError(d);return a(g,YE.createFrom(g)),!1})},s.prototype.foreverScan=function(r,a,c){var d=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),x=g.videoWidth/g.clientWidth,b=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*x,w=this.qrRegion.height*b,T=this.qrRegion.x*x,S=this.qrRegion.y*b;this.context.drawImage(g,T,S,_,w,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){d.foreverScanTimeout=setTimeout(function(){d.foreverScan(r,a,c)},d.getTimeoutFps(r.fps))};this.scanContext(a,c).then(function(B){!B&&r.disableFlip!==!0?(d.context.translate(d.context.canvas.width,0),d.context.scale(-1,1),d.scanContext(a,c).finally(function(){M()})):M()}).catch(function(B){d.logger.logError("Error happend while scanning context",B),M()})}},s.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var a="facingMode",c="deviceId",d={user:!0,environment:!0},g="exact",x=function(U){if(U in d)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(U,"'")},b=Object.keys(r);if(b.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(b.length," keys");var _=Object.keys(r)[0];if(_!==a&&_!==c)throw"Only '".concat(a,"' and '").concat(c,"' ")+" are supported for 'cameraIdOrConfig'";if(_===a){var w=r.facingMode;if(typeof w=="string"){if(x(w))return{facingMode:w}}else if(typeof w=="object")if(g in w){if(x(w["".concat(g)]))return{facingMode:{exact:w["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var T=typeof w;throw"Invalid type of 'facingMode' = ".concat(T)}}else{var S=r.deviceId;if(typeof S=="string")return{deviceId:S};if(typeof S=="object"){if(g in S)return{deviceId:{exact:S["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var M=typeof S;throw"Invalid type of 'deviceId' = ".concat(M)}}}var B=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(B)},s.prototype.computeCanvasDrawConfig=function(r,a,c,d){if(r<=c&&a<=d){var g=(c-r)/2,x=(d-a)/2;return{x:g,y:x,width:r,height:a}}else{var b=r,_=a;return r>c&&(a=c/r*a,r=c),a>d&&(r=d/a*r,a=d),this.logger.log("Image downsampled from "+"".concat(b,"X").concat(_)+" to ".concat(r,"X").concat(a,".")),this.computeCanvasDrawConfig(r,a,c,d)}},s.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},s.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(a){a.style.backgroundColor=r?Fr.BORDER_SHADER_MATCH_COLOR:Fr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},s.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},s.prototype.createCanvasElement=function(r,a,c){var d=r,g=a,x=document.createElement("canvas");return x.style.width="".concat(d,"px"),x.style.height="".concat(g,"px"),x.style.display="none",x.id=ia(c)?"qr-canvas":c,x},s.prototype.getShadedRegionBounds=function(r,a,c){if(c.width>r||c.height>a)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-c.width)/2,y:(a-c.height)/2,width:c.width,height:c.height}},s.prototype.possiblyInsertShadingElement=function(r,a,c,d){if(!(a-d.width<1||c-d.height<1)){var g=document.createElement("div");g.style.position="absolute";var x=(a-d.width)/2,b=(c-d.height)/2;if(g.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(Fr.SHADED_REGION_ELEMENT_ID),a-d.width<11||c-d.height<11)this.hasBorderShaders=!1;else{var _=5,w=40;this.insertShaderBorders(g,w,_,-_,null,0,!0),this.insertShaderBorders(g,w,_,-_,null,0,!1),this.insertShaderBorders(g,w,_,null,-_,0,!0),this.insertShaderBorders(g,w,_,null,-_,0,!1),this.insertShaderBorders(g,_,w+_,-_,null,-_,!0),this.insertShaderBorders(g,_,w+_,null,-_,-_,!0),this.insertShaderBorders(g,_,w+_,-_,null,-_,!1),this.insertShaderBorders(g,_,w+_,null,-_,-_,!1),this.hasBorderShaders=!0}r.append(g)}},s.prototype.insertShaderBorders=function(r,a,c,d,g,x,b){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=Fr.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(a,"px"),_.style.height="".concat(c,"px"),d!==null&&(_.style.top="".concat(d,"px")),g!==null&&(_.style.bottom="".concat(g,"px")),b?_.style.left="".concat(x,"px"):_.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),r.appendChild(_)},s.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},s.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},s.prototype.getTimeoutFps=function(r){return 1e3/r},s})(),M2;(function(s){s[s.STATUS_DEFAULT=0]="STATUS_DEFAULT",s[s.STATUS_SUCCESS=1]="STATUS_SUCCESS",s[s.STATUS_WARNING=2]="STATUS_WARNING",s[s.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(M2||(M2={}));const p_=s=>C.jsx("svg",{height:"200px",width:"200px",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",fill:"#000000",...s,children:C.jsxs("g",{children:[C.jsx("path",{style:{fill:"#c0bfbc"},d:"M512,256C512,114.617,397.383,0,256,0S0,114.617,0,256s114.617,256,256,256S512,397.383,512,256"}),C.jsx("path",{style:{fill:"#ffffff"},d:"M329.056,97.103H182.942l-24.346,61.793h-56.196c-12.676,0-22.952,10.275-22.952,22.952v174.407 c0,12.879,10.452,23.331,23.34,23.331H409.22c12.888,0,23.331-10.452,23.331-23.331V181.848c0-12.676-10.275-22.952-22.952-22.952 h-56.188L329.056,97.103z"}),C.jsxs("g",{children:[C.jsx("path",{style:{fill:"#9a9996"},d:"M326.621,256c0-39-31.62-70.621-70.621-70.621S185.379,217,185.379,256S217,326.621,256,326.621 S326.621,295,326.621,256"}),C.jsx("path",{style:{fill:"#9a9996"},d:"M406.069,203.034c0-9.754-7.901-17.655-17.655-17.655s-17.655,7.901-17.655,17.655 c0,9.754,7.901,17.655,17.655,17.655S406.069,212.789,406.069,203.034"})]}),C.jsx("polygon",{style:{fill:"#ffffff"},points:"80.621,442.707 68.191,430.172 431.87,69.786 444.299,82.321"})]})});function y_(){const[s,r]=Z.useState(null),[a,c]=Z.useState(!0),[d,g]=Z.useState(null),[x,b]=Z.useState(!1),_=Z.useRef(null),w=Z.useRef(null),{user:T,isAdmin:S}=Di(),M=la(),B="http://localhost:5173".replace(/\/$/,""),U=()=>{const xe=document.getElementById("qr-reader");if(!xe)throw new Error("L'lment qr-reader n'a pas t trouv dans le DOM");return xe},z=async()=>{if(w.current&&w.current.isScanning)try{await w.current.stop(),w.current.clear()}catch(xe){console.error("Erreur lors de l'arrt du scanner:",xe)}},H=Z.useCallback(xe=>{try{const R=new URL(xe).pathname.split("/").filter(Boolean),W=R.findIndex(L=>L==="chat");if(W!==-1&&R[W+1])return R[W+1];if(B&&!xe.startsWith(B))return null}catch{}return null},[B]),$=Z.useCallback(async xe=>{if(r(xe),c(!1),await z(),S&&T){const se=H(xe);se&&M(`/artworks/${se}/edit`)}},[H,S,M,T]);Z.useEffect(()=>()=>{w.current&&w.current.isScanning&&w.current.stop().catch(console.error)},[]),Z.useEffect(()=>{a&&!s&&(async()=>{try{await new Promise(he=>setTimeout(he,50)),U(),w.current||(w.current=new D2("qr-reader"));const se=w.current;if(se.isScanning)return;const R={fps:10,qrbox:{width:250,height:250},aspectRatio:1},W=async he=>{console.log("QR Code dtect:",he),await $(he)},L=()=>{};await se.start({facingMode:"environment"},R,W,L),console.log("Scanner dmarr avec succs")}catch(se){console.error("Erreur lors du dmarrage du scanner:",se),c(!1);const R=se.toString();R.includes("NotAllowedError")||R.includes("Permission denied")?g("Accs  la camra refus. Veuillez autoriser l'accs  la camra."):R.includes("NotFoundError")||R.includes("NotReadableError")?g("Aucune camra dtecte ou camra dj utilise par une autre application."):R.includes("OverconstrainedError")?g("Camra arrire non disponible. Essayez de redmarrer le scanner."):g("Erreur : "+R)}})()},[$,a,s]);const te=()=>{g(null),c(!0)},G=()=>{r(null),g(null),c(!0)},oe=async xe=>{const se=xe.target.files?.[0];if(se){b(!0),g(null);try{await z(),U(),w.current||(w.current=new D2("qr-reader"));const R=await w.current.scanFile(se,!0),W=typeof R=="string"?R:R?.text;if(W)await $(W);else throw new Error("Aucun QR code dtect")}catch(R){console.error("Erreur lors de la lecture du fichier:",R),g("Impossible de lire ce fichier. Assurez-vous que l'image contient un QR code net.")}finally{b(!1),xe.target.value=""}}};return C.jsx("div",{className:"min-h-screen from-orange-100 to-orange-100 py-8 px-4",children:C.jsxs("div",{className:"max-w-4xl mx-auto",children:[C.jsx("div",{className:"mb-6",children:C.jsxs(Ri,{to:"/",className:"flex items-center gap-20 text-orange-600 hover:text-orange-700 font-medium",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),"Scanner QR Code"]})}),C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6",children:[d&&C.jsxs("div",{className:"mb-4 p-4 bg-red-50 text-gray-700 rounded-lg",children:[C.jsx("div",{className:"w-max mx-auto",children:C.jsx(p_,{})}),C.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center my-3",children:[C.jsx("span",{className:"text-sm text-center",children:d}),C.jsx("button",{onClick:te,className:"w-min py-2 px-3 text-red-700 hover:text-red-600 font-semibold rounded",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6 hover:cursor-pointer",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})})})]})]}),!a&&!s&&!d&&C.jsxs("div",{className:"mb-6 p-6 bg-orange-50 border-2 border-orange-300 rounded-lg",children:[C.jsx("p",{className:"text-orange-800 mb-4 text-center text-md sm:text-lg",children:"Cliquez sur le bouton ci-dessous pour activer la camra."}),C.jsxs("button",{onClick:te,className:"flex flex-col items-center gap-3 w-full sm:w-max mx-auto py-3 px-4 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg transition shadow-md hover:shadow-lg uppercase",children:[C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-40",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"})]}),"Dmarrer le scanner"]})]}),C.jsx("div",{className:"mb-6 p-6 bg-orange-50 border border-dashed border-orange-300 rounded-lg",children:C.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[C.jsxs("div",{children:[C.jsx("p",{className:"text-orange-900 font-semibold",children:"Importer une image de QR code"}),C.jsx("p",{className:"text-sm text-gray-700",children:"Slectionnez une image depuis votre appareil pour la scanner, pratique sur ordinateur ou si la camra n'est pas disponible."})]}),C.jsxs("label",{htmlFor:"qr-upload",className:"inline-flex items-center gap-2 py-2 px-4 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg cursor-pointer transition shadow-md hover:shadow-lg",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 9 12 4.5 7.5 9M12 4.5V15"})}),x?"Analyse...":"Choisir une image"]}),C.jsx("input",{id:"qr-upload",type:"file",accept:"image/*",className:"hidden",onChange:oe,disabled:x})]})}),C.jsxs("div",{className:"mb-6",children:[C.jsx("div",{id:"qr-reader",ref:_,className:`w-full max-w-md mx-auto rounded-xl overflow-hidden border-4 border-orange-500 shadow-lg ${a?"":"hidden"}`}),a&&!s&&C.jsxs(C.Fragment,{children:[C.jsx("p",{className:"text-center text-gray-600 mt-4 text-md",children:"Positionnez le QR code devant la camra"}),C.jsxs("button",{onClick:async()=>{await z(),c(!1)},className:"flex items-center gap-3 mx-auto mt-4 py-2 px-4 bg-red-500 hover:bg-red-400 text-white font-semibold rounded-lg transition",children:[C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 0 1 9 14.437V9.564Z"})]}),"Arrter le scanner"]})]})]}),s&&C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"p-6 bg-linear-to-r from-green-100 to-emerald-100 border-2 border-green-400 rounded-lg shadow-md",children:[C.jsxs("p",{className:"font-bold text-green-800 mb-3 text-lg flex items-center",children:[C.jsx("span",{className:"text-2xl mr-2",children:""})," QR Code scann avec succs !"]}),C.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-300 shadow-inner",children:[C.jsx("p",{className:"text-sm text-gray-600 mb-2 font-semibold",children:"Contenu :"}),C.jsx("p",{className:"font-mono text-sm break-all text-gray-800",children:s})]})]}),C.jsxs("div",{className:"space-y-3",children:[(s.startsWith("http://")||s.startsWith("https://"))&&C.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 px-4 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg text-center transition shadow-md hover:shadow-lg",children:"Ouvrir le lien dans un nouvel onglet"}),C.jsx("button",{onClick:G,className:"w-full py-3 px-4 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg transition shadow-md hover:shadow-lg",children:"Scanner un autre QR Code"})]})]})]}),C.jsxs("div",{className:"mt-6 p-6 bg-white rounded-lg shadow-lg",children:[C.jsx("h3",{className:"font-bold text-orange-900 mb-3 text-lg",children:" Conseils d'utilisation"}),C.jsxs("ul",{className:"text-sm text-gray-700 space-y-2",children:[C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-orange-600 mr-2",children:""}),C.jsx("span",{children:"Autorisez l'accs  la camra dans les paramtres du navigateur"})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-orange-600 mr-2",children:""}),C.jsx("span",{children:"Maintenez le QR code stable devant la camra"})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-orange-600 mr-2",children:""}),C.jsx("span",{children:"Assurez-vous d'avoir un bon clairage"})]})]})]})]})})}const kl=function(s,r){let d=s;const g=ko[r];let x=null,b=0,_=null;const w=[],T={},S=function(R,W){b=d*4+17,x=(function(L){const he=new Array(L);for(let re=0;re<L;re+=1){he[re]=new Array(L);for(let ue=0;ue<L;ue+=1)he[re][ue]=null}return he})(b),M(0,0),M(b-7,0),M(0,b-7),z(),U(),$(R,W),d>=7&&H(R),_==null&&(_=oe(d,g,w)),te(_,W)},M=function(R,W){for(let L=-1;L<=7;L+=1)if(!(R+L<=-1||b<=R+L))for(let he=-1;he<=7;he+=1)W+he<=-1||b<=W+he||(0<=L&&L<=6&&(he==0||he==6)||0<=he&&he<=6&&(L==0||L==6)||2<=L&&L<=4&&2<=he&&he<=4?x[R+L][W+he]=!0:x[R+L][W+he]=!1)},B=function(){let R=0,W=0;for(let L=0;L<8;L+=1){S(!0,L);const he=Ka.getLostPoint(T);(L==0||R>he)&&(R=he,W=L)}return W},U=function(){for(let R=8;R<b-8;R+=1)x[R][6]==null&&(x[R][6]=R%2==0);for(let R=8;R<b-8;R+=1)x[6][R]==null&&(x[6][R]=R%2==0)},z=function(){const R=Ka.getPatternPosition(d);for(let W=0;W<R.length;W+=1)for(let L=0;L<R.length;L+=1){const he=R[W],re=R[L];if(x[he][re]==null)for(let ue=-2;ue<=2;ue+=1)for(let Ee=-2;Ee<=2;Ee+=1)ue==-2||ue==2||Ee==-2||Ee==2||ue==0&&Ee==0?x[he+ue][re+Ee]=!0:x[he+ue][re+Ee]=!1}},H=function(R){const W=Ka.getBCHTypeNumber(d);for(let L=0;L<18;L+=1){const he=!R&&(W>>L&1)==1;x[Math.floor(L/3)][L%3+b-8-3]=he}for(let L=0;L<18;L+=1){const he=!R&&(W>>L&1)==1;x[L%3+b-8-3][Math.floor(L/3)]=he}},$=function(R,W){const L=g<<3|W,he=Ka.getBCHTypeInfo(L);for(let re=0;re<15;re+=1){const ue=!R&&(he>>re&1)==1;re<6?x[re][8]=ue:re<8?x[re+1][8]=ue:x[b-15+re][8]=ue}for(let re=0;re<15;re+=1){const ue=!R&&(he>>re&1)==1;re<8?x[8][b-re-1]=ue:re<9?x[8][15-re-1+1]=ue:x[8][15-re-1]=ue}x[b-8][8]=!R},te=function(R,W){let L=-1,he=b-1,re=7,ue=0;const Ee=Ka.getMaskFunction(W);for(let Oe=b-1;Oe>0;Oe-=2)for(Oe==6&&(Oe-=1);;){for(let K=0;K<2;K+=1)if(x[he][Oe-K]==null){let ne=!1;ue<R.length&&(ne=(R[ue]>>>re&1)==1),Ee(he,Oe-K)&&(ne=!ne),x[he][Oe-K]=ne,re-=1,re==-1&&(ue+=1,re=7)}if(he+=L,he<0||b<=he){he-=L,L=-L;break}}},G=function(R,W){let L=0,he=0,re=0;const ue=new Array(W.length),Ee=new Array(W.length);for(let Q=0;Q<W.length;Q+=1){const fe=W[Q].dataCount,Ne=W[Q].totalCount-fe;he=Math.max(he,fe),re=Math.max(re,Ne),ue[Q]=new Array(fe);for(let Ie=0;Ie<ue[Q].length;Ie+=1)ue[Q][Ie]=255&R.getBuffer()[Ie+L];L+=fe;const Fe=Ka.getErrorCorrectPolynomial(Ne),pe=Wo(ue[Q],Fe.getLength()-1).mod(Fe);Ee[Q]=new Array(Fe.getLength()-1);for(let Ie=0;Ie<Ee[Q].length;Ie+=1){const Pe=Ie+pe.getLength()-Ee[Q].length;Ee[Q][Ie]=Pe>=0?pe.getAt(Pe):0}}let Oe=0;for(let Q=0;Q<W.length;Q+=1)Oe+=W[Q].totalCount;const K=new Array(Oe);let ne=0;for(let Q=0;Q<he;Q+=1)for(let fe=0;fe<W.length;fe+=1)Q<ue[fe].length&&(K[ne]=ue[fe][Q],ne+=1);for(let Q=0;Q<re;Q+=1)for(let fe=0;fe<W.length;fe+=1)Q<Ee[fe].length&&(K[ne]=Ee[fe][Q],ne+=1);return K},oe=function(R,W,L){const he=B2.getRSBlocks(R,W),re=j2();for(let Ee=0;Ee<L.length;Ee+=1){const Oe=L[Ee];re.put(Oe.getMode(),4),re.put(Oe.getLength(),Ka.getLengthInBits(Oe.getMode(),R)),Oe.write(re)}let ue=0;for(let Ee=0;Ee<he.length;Ee+=1)ue+=he[Ee].dataCount;if(re.getLengthInBits()>ue*8)throw"code length overflow. ("+re.getLengthInBits()+">"+ue*8+")";for(re.getLengthInBits()+4<=ue*8&&re.put(0,4);re.getLengthInBits()%8!=0;)re.putBit(!1);for(;!(re.getLengthInBits()>=ue*8||(re.put(236,8),re.getLengthInBits()>=ue*8));)re.put(17,8);return G(re,he)};T.addData=function(R,W){W=W||"Byte";let L=null;switch(W){case"Numeric":L=w_(R);break;case"Alphanumeric":L=b_(R);break;case"Byte":L=v_(R);break;case"Kanji":L=E_(R);break;default:throw"mode:"+W}w.push(L),_=null},T.isDark=function(R,W){if(R<0||b<=R||W<0||b<=W)throw R+","+W;return x[R][W]},T.getModuleCount=function(){return b},T.make=function(){if(d<1){let R=1;for(;R<40;R++){const W=B2.getRSBlocks(R,g),L=j2();for(let re=0;re<w.length;re++){const ue=w[re];L.put(ue.getMode(),4),L.put(ue.getLength(),Ka.getLengthInBits(ue.getMode(),R)),ue.write(L)}let he=0;for(let re=0;re<W.length;re++)he+=W[re].dataCount;if(L.getLengthInBits()<=he*8)break}d=R}S(!1,B())},T.createTableTag=function(R,W){R=R||2,W=typeof W>"u"?R*4:W;let L="";L+='<table style="',L+=" border-width: 0px; border-style: none;",L+=" border-collapse: collapse;",L+=" padding: 0px; margin: "+W+"px;",L+='">',L+="<tbody>";for(let he=0;he<T.getModuleCount();he+=1){L+="<tr>";for(let re=0;re<T.getModuleCount();re+=1)L+='<td style="',L+=" border-width: 0px; border-style: none;",L+=" border-collapse: collapse;",L+=" padding: 0px; margin: 0px;",L+=" width: "+R+"px;",L+=" height: "+R+"px;",L+=" background-color: ",L+=T.isDark(he,re)?"#000000":"#ffffff",L+=";",L+='"/>';L+="</tr>"}return L+="</tbody>",L+="</table>",L},T.createSvgTag=function(R,W,L,he){let re={};typeof arguments[0]=="object"&&(re=arguments[0],R=re.cellSize,W=re.margin,L=re.alt,he=re.title),R=R||2,W=typeof W>"u"?R*4:W,L=typeof L=="string"?{text:L}:L||{},L.text=L.text||null,L.id=L.text?L.id||"qrcode-description":null,he=typeof he=="string"?{text:he}:he||{},he.text=he.text||null,he.id=he.text?he.id||"qrcode-title":null;const ue=T.getModuleCount()*R+W*2;let Ee,Oe,K,ne,Q="",fe;for(fe="l"+R+",0 0,"+R+" -"+R+",0 0,-"+R+"z ",Q+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',Q+=re.scalable?"":' width="'+ue+'px" height="'+ue+'px"',Q+=' viewBox="0 0 '+ue+" "+ue+'" ',Q+=' preserveAspectRatio="xMinYMin meet"',Q+=he.text||L.text?' role="img" aria-labelledby="'+xe([he.id,L.id].join(" ").trim())+'"':"",Q+=">",Q+=he.text?'<title id="'+xe(he.id)+'">'+xe(he.text)+"</title>":"",Q+=L.text?'<description id="'+xe(L.id)+'">'+xe(L.text)+"</description>":"",Q+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',Q+='<path d="',K=0;K<T.getModuleCount();K+=1)for(ne=K*R+W,Ee=0;Ee<T.getModuleCount();Ee+=1)T.isDark(K,Ee)&&(Oe=Ee*R+W,Q+="M"+Oe+","+ne+fe);return Q+='" stroke="transparent" fill="black"/>',Q+="</svg>",Q},T.createDataURL=function(R,W){R=R||2,W=typeof W>"u"?R*4:W;const L=T.getModuleCount()*R+W*2,he=W,re=L-W;return S_(L,L,function(ue,Ee){if(he<=ue&&ue<re&&he<=Ee&&Ee<re){const Oe=Math.floor((ue-he)/R),K=Math.floor((Ee-he)/R);return T.isDark(K,Oe)?0:1}else return 1})},T.createImgTag=function(R,W,L){R=R||2,W=typeof W>"u"?R*4:W;const he=T.getModuleCount()*R+W*2;let re="";return re+="<img",re+=' src="',re+=T.createDataURL(R,W),re+='"',re+=' width="',re+=he,re+='"',re+=' height="',re+=he,re+='"',L&&(re+=' alt="',re+=xe(L),re+='"'),re+="/>",re};const xe=function(R){let W="";for(let L=0;L<R.length;L+=1){const he=R.charAt(L);switch(he){case"<":W+="&lt;";break;case">":W+="&gt;";break;case"&":W+="&amp;";break;case'"':W+="&quot;";break;default:W+=he;break}}return W},se=function(R){R=typeof R>"u"?2:R;const L=T.getModuleCount()*1+R*2,he=R,re=L-R;let ue,Ee,Oe,K,ne;const Q={"":""," ":""," ":"","  ":" "},fe={"":""," ":""," ":" ","  ":" "};let Ne="";for(ue=0;ue<L;ue+=2){for(Oe=Math.floor((ue-he)/1),K=Math.floor((ue+1-he)/1),Ee=0;Ee<L;Ee+=1)ne="",he<=Ee&&Ee<re&&he<=ue&&ue<re&&T.isDark(Oe,Math.floor((Ee-he)/1))&&(ne=" "),he<=Ee&&Ee<re&&he<=ue+1&&ue+1<re&&T.isDark(K,Math.floor((Ee-he)/1))?ne+=" ":ne+="",Ne+=R<1&&ue+1>=re?fe[ne]:Q[ne];Ne+=`
`}return L%2&&R>0?Ne.substring(0,Ne.length-L-1)+Array(L+1).join(""):Ne.substring(0,Ne.length-1)};return T.createASCII=function(R,W){if(R=R||1,R<2)return se(W);R-=1,W=typeof W>"u"?R*2:W;const L=T.getModuleCount()*R+W*2,he=W,re=L-W;let ue,Ee,Oe,K;const ne=Array(R+1).join(""),Q=Array(R+1).join("  ");let fe="",Ne="";for(ue=0;ue<L;ue+=1){for(Oe=Math.floor((ue-he)/R),Ne="",Ee=0;Ee<L;Ee+=1)K=1,he<=Ee&&Ee<re&&he<=ue&&ue<re&&T.isDark(Oe,Math.floor((Ee-he)/R))&&(K=0),Ne+=K?ne:Q;for(Oe=0;Oe<R;Oe+=1)fe+=Ne+`
`}return fe.substring(0,fe.length-1)},T.renderTo2dContext=function(R,W){W=W||2;const L=T.getModuleCount();for(let he=0;he<L;he++)for(let re=0;re<L;re++)R.fillStyle=T.isDark(he,re)?"black":"white",R.fillRect(re*W,he*W,W,W)},T};kl.stringToBytes=function(s){const r=[];for(let a=0;a<s.length;a+=1){const c=s.charCodeAt(a);r.push(c&255)}return r};kl.createStringToBytes=function(s,r){const a=(function(){const d=A_(s),g=function(){const _=d.read();if(_==-1)throw"eof";return _};let x=0;const b={};for(;;){const _=d.read();if(_==-1)break;const w=g(),T=g(),S=g(),M=String.fromCharCode(_<<8|w),B=T<<8|S;b[M]=B,x+=1}if(x!=r)throw x+" != "+r;return b})(),c=63;return function(d){const g=[];for(let x=0;x<d.length;x+=1){const b=d.charCodeAt(x);if(b<128)g.push(b);else{const _=a[d.charAt(x)];typeof _=="number"?(_&255)==_?g.push(_):(g.push(_>>>8),g.push(_&255)):g.push(c)}}return g}};const ur={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},ko={L:1,M:0,Q:3,H:2},Wa={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Ka=(function(){const s=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=1335,a=7973,c=21522,d={},g=function(x){let b=0;for(;x!=0;)b+=1,x>>>=1;return b};return d.getBCHTypeInfo=function(x){let b=x<<10;for(;g(b)-g(r)>=0;)b^=r<<g(b)-g(r);return(x<<10|b)^c},d.getBCHTypeNumber=function(x){let b=x<<12;for(;g(b)-g(a)>=0;)b^=a<<g(b)-g(a);return x<<12|b},d.getPatternPosition=function(x){return s[x-1]},d.getMaskFunction=function(x){switch(x){case Wa.PATTERN000:return function(b,_){return(b+_)%2==0};case Wa.PATTERN001:return function(b,_){return b%2==0};case Wa.PATTERN010:return function(b,_){return _%3==0};case Wa.PATTERN011:return function(b,_){return(b+_)%3==0};case Wa.PATTERN100:return function(b,_){return(Math.floor(b/2)+Math.floor(_/3))%2==0};case Wa.PATTERN101:return function(b,_){return b*_%2+b*_%3==0};case Wa.PATTERN110:return function(b,_){return(b*_%2+b*_%3)%2==0};case Wa.PATTERN111:return function(b,_){return(b*_%3+(b+_)%2)%2==0};default:throw"bad maskPattern:"+x}},d.getErrorCorrectPolynomial=function(x){let b=Wo([1],0);for(let _=0;_<x;_+=1)b=b.multiply(Wo([1,Za.gexp(_)],0));return b},d.getLengthInBits=function(x,b){if(1<=b&&b<10)switch(x){case ur.MODE_NUMBER:return 10;case ur.MODE_ALPHA_NUM:return 9;case ur.MODE_8BIT_BYTE:return 8;case ur.MODE_KANJI:return 8;default:throw"mode:"+x}else if(b<27)switch(x){case ur.MODE_NUMBER:return 12;case ur.MODE_ALPHA_NUM:return 11;case ur.MODE_8BIT_BYTE:return 16;case ur.MODE_KANJI:return 10;default:throw"mode:"+x}else if(b<41)switch(x){case ur.MODE_NUMBER:return 14;case ur.MODE_ALPHA_NUM:return 13;case ur.MODE_8BIT_BYTE:return 16;case ur.MODE_KANJI:return 12;default:throw"mode:"+x}else throw"type:"+b},d.getLostPoint=function(x){const b=x.getModuleCount();let _=0;for(let S=0;S<b;S+=1)for(let M=0;M<b;M+=1){let B=0;const U=x.isDark(S,M);for(let z=-1;z<=1;z+=1)if(!(S+z<0||b<=S+z))for(let H=-1;H<=1;H+=1)M+H<0||b<=M+H||z==0&&H==0||U==x.isDark(S+z,M+H)&&(B+=1);B>5&&(_+=3+B-5)}for(let S=0;S<b-1;S+=1)for(let M=0;M<b-1;M+=1){let B=0;x.isDark(S,M)&&(B+=1),x.isDark(S+1,M)&&(B+=1),x.isDark(S,M+1)&&(B+=1),x.isDark(S+1,M+1)&&(B+=1),(B==0||B==4)&&(_+=3)}for(let S=0;S<b;S+=1)for(let M=0;M<b-6;M+=1)x.isDark(S,M)&&!x.isDark(S,M+1)&&x.isDark(S,M+2)&&x.isDark(S,M+3)&&x.isDark(S,M+4)&&!x.isDark(S,M+5)&&x.isDark(S,M+6)&&(_+=40);for(let S=0;S<b;S+=1)for(let M=0;M<b-6;M+=1)x.isDark(M,S)&&!x.isDark(M+1,S)&&x.isDark(M+2,S)&&x.isDark(M+3,S)&&x.isDark(M+4,S)&&!x.isDark(M+5,S)&&x.isDark(M+6,S)&&(_+=40);let w=0;for(let S=0;S<b;S+=1)for(let M=0;M<b;M+=1)x.isDark(M,S)&&(w+=1);const T=Math.abs(100*w/b/b-50)/5;return _+=T*10,_},d})(),Za=(function(){const s=new Array(256),r=new Array(256);for(let c=0;c<8;c+=1)s[c]=1<<c;for(let c=8;c<256;c+=1)s[c]=s[c-4]^s[c-5]^s[c-6]^s[c-8];for(let c=0;c<255;c+=1)r[s[c]]=c;const a={};return a.glog=function(c){if(c<1)throw"glog("+c+")";return r[c]},a.gexp=function(c){for(;c<0;)c+=255;for(;c>=256;)c-=255;return s[c]},a})(),Wo=function(s,r){if(typeof s.length>"u")throw s.length+"/"+r;const a=(function(){let d=0;for(;d<s.length&&s[d]==0;)d+=1;const g=new Array(s.length-d+r);for(let x=0;x<s.length-d;x+=1)g[x]=s[x+d];return g})(),c={};return c.getAt=function(d){return a[d]},c.getLength=function(){return a.length},c.multiply=function(d){const g=new Array(c.getLength()+d.getLength()-1);for(let x=0;x<c.getLength();x+=1)for(let b=0;b<d.getLength();b+=1)g[x+b]^=Za.gexp(Za.glog(c.getAt(x))+Za.glog(d.getAt(b)));return Wo(g,0)},c.mod=function(d){if(c.getLength()-d.getLength()<0)return c;const g=Za.glog(c.getAt(0))-Za.glog(d.getAt(0)),x=new Array(c.getLength());for(let b=0;b<c.getLength();b+=1)x[b]=c.getAt(b);for(let b=0;b<d.getLength();b+=1)x[b]^=Za.gexp(Za.glog(d.getAt(b))+g);return Wo(x,0).mod(d)},c},B2=(function(){const s=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r=function(d,g){const x={};return x.totalCount=d,x.dataCount=g,x},a={},c=function(d,g){switch(g){case ko.L:return s[(d-1)*4+0];case ko.M:return s[(d-1)*4+1];case ko.Q:return s[(d-1)*4+2];case ko.H:return s[(d-1)*4+3];default:return}};return a.getRSBlocks=function(d,g){const x=c(d,g);if(typeof x>"u")throw"bad rs block @ typeNumber:"+d+"/errorCorrectionLevel:"+g;const b=x.length/3,_=[];for(let w=0;w<b;w+=1){const T=x[w*3+0],S=x[w*3+1],M=x[w*3+2];for(let B=0;B<T;B+=1)_.push(r(S,M))}return _},a})(),j2=function(){const s=[];let r=0;const a={};return a.getBuffer=function(){return s},a.getAt=function(c){const d=Math.floor(c/8);return(s[d]>>>7-c%8&1)==1},a.put=function(c,d){for(let g=0;g<d;g+=1)a.putBit((c>>>d-g-1&1)==1)},a.getLengthInBits=function(){return r},a.putBit=function(c){const d=Math.floor(r/8);s.length<=d&&s.push(0),c&&(s[d]|=128>>>r%8),r+=1},a},w_=function(s){const r=ur.MODE_NUMBER,a=s,c={};c.getMode=function(){return r},c.getLength=function(x){return a.length},c.write=function(x){const b=a;let _=0;for(;_+2<b.length;)x.put(d(b.substring(_,_+3)),10),_+=3;_<b.length&&(b.length-_==1?x.put(d(b.substring(_,_+1)),4):b.length-_==2&&x.put(d(b.substring(_,_+2)),7))};const d=function(x){let b=0;for(let _=0;_<x.length;_+=1)b=b*10+g(x.charAt(_));return b},g=function(x){if("0"<=x&&x<="9")return x.charCodeAt(0)-48;throw"illegal char :"+x};return c},b_=function(s){const r=ur.MODE_ALPHA_NUM,a=s,c={};c.getMode=function(){return r},c.getLength=function(g){return a.length},c.write=function(g){const x=a;let b=0;for(;b+1<x.length;)g.put(d(x.charAt(b))*45+d(x.charAt(b+1)),11),b+=2;b<x.length&&g.put(d(x.charAt(b)),6)};const d=function(g){if("0"<=g&&g<="9")return g.charCodeAt(0)-48;if("A"<=g&&g<="Z")return g.charCodeAt(0)-65+10;switch(g){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+g}};return c},v_=function(s){const r=ur.MODE_8BIT_BYTE,a=kl.stringToBytes(s),c={};return c.getMode=function(){return r},c.getLength=function(d){return a.length},c.write=function(d){for(let g=0;g<a.length;g+=1)d.put(a[g],8)},c},E_=function(s){const r=ur.MODE_KANJI,a=kl.stringToBytes;(function(g,x){const b=a(g);if(b.length!=2||(b[0]<<8|b[1])!=x)throw"sjis not supported."})("",38726);const c=a(s),d={};return d.getMode=function(){return r},d.getLength=function(g){return~~(c.length/2)},d.write=function(g){const x=c;let b=0;for(;b+1<x.length;){let _=(255&x[b])<<8|255&x[b+1];if(33088<=_&&_<=40956)_-=33088;else if(57408<=_&&_<=60351)_-=49472;else throw"illegal char at "+(b+1)+"/"+_;_=(_>>>8&255)*192+(_&255),g.put(_,13),b+=2}if(b<x.length)throw"illegal char at "+(b+1)},d},pp=function(){const s=[],r={};return r.writeByte=function(a){s.push(a&255)},r.writeShort=function(a){r.writeByte(a),r.writeByte(a>>>8)},r.writeBytes=function(a,c,d){c=c||0,d=d||a.length;for(let g=0;g<d;g+=1)r.writeByte(a[g+c])},r.writeString=function(a){for(let c=0;c<a.length;c+=1)r.writeByte(a.charCodeAt(c))},r.toByteArray=function(){return s},r.toString=function(){let a="";a+="[";for(let c=0;c<s.length;c+=1)c>0&&(a+=","),a+=s[c];return a+="]",a},r},__=function(){let s=0,r=0,a=0,c="";const d={},g=function(b){c+=String.fromCharCode(x(b&63))},x=function(b){if(b<0)throw"n:"+b;if(b<26)return 65+b;if(b<52)return 97+(b-26);if(b<62)return 48+(b-52);if(b==62)return 43;if(b==63)return 47;throw"n:"+b};return d.writeByte=function(b){for(s=s<<8|b&255,r+=8,a+=1;r>=6;)g(s>>>r-6),r-=6},d.flush=function(){if(r>0&&(g(s<<6-r),s=0,r=0),a%3!=0){const b=3-a%3;for(let _=0;_<b;_+=1)c+="="}},d.toString=function(){return c},d},A_=function(s){const r=s;let a=0,c=0,d=0;const g={};g.read=function(){for(;d<8;){if(a>=r.length){if(d==0)return-1;throw"unexpected end of file./"+d}const _=r.charAt(a);if(a+=1,_=="=")return d=0,-1;if(_.match(/^\s$/))continue;c=c<<6|x(_.charCodeAt(0)),d+=6}const b=c>>>d-8&255;return d-=8,b};const x=function(b){if(65<=b&&b<=90)return b-65;if(97<=b&&b<=122)return b-97+26;if(48<=b&&b<=57)return b-48+52;if(b==43)return 62;if(b==47)return 63;throw"c:"+b};return g},C_=function(s,r){const a=s,c=r,d=new Array(s*r),g={};g.setPixel=function(w,T,S){d[T*a+w]=S},g.write=function(w){w.writeString("GIF87a"),w.writeShort(a),w.writeShort(c),w.writeByte(128),w.writeByte(0),w.writeByte(0),w.writeByte(0),w.writeByte(0),w.writeByte(0),w.writeByte(255),w.writeByte(255),w.writeByte(255),w.writeString(","),w.writeShort(0),w.writeShort(0),w.writeShort(a),w.writeShort(c),w.writeByte(0);const T=2,S=b(T);w.writeByte(T);let M=0;for(;S.length-M>255;)w.writeByte(255),w.writeBytes(S,M,255),M+=255;w.writeByte(S.length-M),w.writeBytes(S,M,S.length-M),w.writeByte(0),w.writeString(";")};const x=function(w){const T=w;let S=0,M=0;const B={};return B.write=function(U,z){if(U>>>z)throw"length over";for(;S+z>=8;)T.writeByte(255&(U<<S|M)),z-=8-S,U>>>=8-S,M=0,S=0;M=U<<S|M,S=S+z},B.flush=function(){S>0&&T.writeByte(M)},B},b=function(w){const T=1<<w,S=(1<<w)+1;let M=w+1;const B=_();for(let te=0;te<T;te+=1)B.add(String.fromCharCode(te));B.add(String.fromCharCode(T)),B.add(String.fromCharCode(S));const U=pp(),z=x(U);z.write(T,M);let H=0,$=String.fromCharCode(d[H]);for(H+=1;H<d.length;){const te=String.fromCharCode(d[H]);H+=1,B.contains($+te)?$=$+te:(z.write(B.indexOf($),M),B.size()<4095&&(B.size()==1<<M&&(M+=1),B.add($+te)),$=te)}return z.write(B.indexOf($),M),z.write(S,M),z.flush(),U.toByteArray()},_=function(){const w={};let T=0;const S={};return S.add=function(M){if(S.contains(M))throw"dup key:"+M;w[M]=T,T+=1},S.size=function(){return T},S.indexOf=function(M){return w[M]},S.contains=function(M){return typeof w[M]<"u"},S};return g},S_=function(s,r,a){const c=C_(s,r);for(let b=0;b<r;b+=1)for(let _=0;_<s;_+=1)c.setPixel(_,b,a(_,b));const d=pp();c.write(d);const g=__(),x=d.toByteArray();for(let b=0;b<x.length;b+=1)g.writeByte(x[b]);return g.flush(),"data:image/gif;base64,"+g};kl.stringToBytes;class T_ extends sa.Component{canvasRef=sa.createRef();static defaultProps={value:"https://reactjs.org/",ecLevel:"M",enableCORS:!1,size:150,quietZone:10,bgColor:"#FFFFFF",fgColor:"#000000",logoOpacity:1,qrStyle:"squares",eyeRadius:[0,0,0],logoPaddingStyle:"square",logoPaddingRadius:0};download(r,a){if(this.canvasRef.current){let c;switch(r){case"jpg":c="image/jpeg";break;case"webp":c="image/webp";break;case"png":default:c="image/png";break}const d=this.canvasRef.current.toDataURL(c,1),g=document.createElement("a");g.download=a??"react-qrcode-logo",g.href=d,g.click()}}utf16to8(r){let a="",c,d;const g=r.length;for(c=0;c<g;c++)d=r.charCodeAt(c),d>=1&&d<=127?a+=r.charAt(c):d>2047?(a+=String.fromCharCode(224|d>>12&15),a+=String.fromCharCode(128|d>>6&63),a+=String.fromCharCode(128|d>>0&63)):(a+=String.fromCharCode(192|d>>6&31),a+=String.fromCharCode(128|d>>0&63));return a}drawRoundedSquare(r,a,c,d,g,x,b,_){_.lineWidth=r,_.fillStyle=g,_.strokeStyle=g,c+=r/2,a+=r/2,d-=r,Array.isArray(x)||(x=[x,x,x,x]),x=x.map(B=>(B=Math.min(B,d/2),B<0?0:B));const w=x[0]||0,T=x[1]||0,S=x[2]||0,M=x[3]||0;_.beginPath(),_.moveTo(a+w,c),_.lineTo(a+d-T,c),T&&_.quadraticCurveTo(a+d,c,a+d,c+T),_.lineTo(a+d,c+d-S),S&&_.quadraticCurveTo(a+d,c+d,a+d-S,c+d),_.lineTo(a+M,c+d),M&&_.quadraticCurveTo(a,c+d,a,c+d-M),_.lineTo(a,c+w),w&&_.quadraticCurveTo(a,c,a+w,c),_.closePath(),_.stroke(),b&&_.fill()}drawPositioningPattern(r,a,c,d,g,x,b=[0,0,0,0]){const _=Math.ceil(a);let w,T;typeof b!="number"&&!Array.isArray(b)?(w=b.outer||0,T=b.inner||0):(w=b,T=w);let S,M;typeof x!="string"?(S=x.outer,M=x.inner):(S=x,M=x);let B=d*a+c,U=g*a+c,z=a*7;this.drawRoundedSquare(_,U,B,z,S,w,!1,r),z=a*3,B+=a*2,U+=a*2,this.drawRoundedSquare(_,U,B,z,M,T,!0,r)}isInPositioninZone(r,a,c){return c.some(d=>r>=d.row&&r<=d.row+7&&a>=d.col&&a<=d.col+7)}removeCoordinateBehindLogo(r,a,c,d,g,x,b,_,w,T,S=0,M="square"){if(!r||!T)return!1;const U=Math.ceil(S/_)*_,z=x+w,H=b+w,$=Math.round(c*_)+w,te=Math.round(a*_)+w,G=Math.ceil((c+1)*_)-Math.floor(c*_),oe=Math.ceil((a+1)*_)-Math.floor(a*_),xe=$+G,se=te+oe;if(M==="square"){const R=z-U,W=z+d+U,L=H-U,he=H+g+U,re=$<W&&xe>R,ue=te<he&&se>L;return re&&ue}if(M==="circle"){const R=z+d/2,W=H+g/2,L=Math.max(d,g)/2+U,he=Math.max($,Math.min(R,xe)),re=Math.max(te,Math.min(W,se)),ue=R-he,Ee=W-re;return ue*ue+Ee*Ee<L*L}return!1}constructor(r){super(r)}shouldComponentUpdate(r){return!Lo(this.props,r)}componentDidMount(){this.update()}componentDidUpdate(){this.update()}update(){const{value:r,ecLevel:a,enableCORS:c,bgColor:d,fgColor:g,logoImage:x,logoOpacity:b,logoOnLoad:_,removeQrCodeBehindLogo:w,qrStyle:T,eyeRadius:S,eyeColor:M,logoPaddingStyle:B,logoPaddingRadius:U}=this.props,z=+this.props.size,H=+this.props.quietZone,$=this.props.logoWidth?+this.props.logoWidth:0,te=this.props.logoHeight?+this.props.logoHeight:0,G=this.props.logoPadding?+this.props.logoPadding:0,oe=kl(0,a);oe.addData(this.utf16to8(r)),oe.make();const xe=this.canvasRef?.current,se=xe.getContext("2d"),R=z+2*H,W=oe.getModuleCount(),L=z/W,he=window.devicePixelRatio||1,re=$||z*.2,ue=te||re,Ee=(z-re)/2,Oe=(z-ue)/2;xe.height=xe.width=R*he,se.scale(he,he),se.fillStyle=d,se.fillRect(0,0,R,R);const K=H,ne=[{row:0,col:0},{row:0,col:W-7},{row:W-7,col:0}];if(se.strokeStyle=g,T==="dots"){se.fillStyle=g;const Q=L/2;for(let fe=0;fe<W;fe++)for(let Ne=0;Ne<W;Ne++)oe.isDark(fe,Ne)&&!this.isInPositioninZone(fe,Ne,ne)&&!this.removeCoordinateBehindLogo(w??!1,fe,Ne,re,ue,Ee,Oe,L,K,x,G,B)&&(se.beginPath(),se.arc(Math.round(Ne*L)+Q+K,Math.round(fe*L)+Q+K,Q/100*75,0,2*Math.PI,!1),se.closePath(),se.fill())}else if(T==="fluid"){const Q=Math.ceil(L/2);for(let fe=0;fe<W;fe++)for(let Ne=0;Ne<W;Ne++)if(oe.isDark(fe,Ne)&&!this.isInPositioninZone(fe,Ne,ne)&&!this.removeCoordinateBehindLogo(w??!1,fe,Ne,re,ue,Ee,Oe,L,K,x,G,B)){let Fe=[!1,!1,!1,!1];fe>0&&!oe.isDark(fe-1,Ne)&&Ne>0&&!oe.isDark(fe,Ne-1)&&(Fe[0]=!0),fe>0&&!oe.isDark(fe-1,Ne)&&Ne<W-1&&!oe.isDark(fe,Ne+1)&&(Fe[1]=!0),fe<W-1&&!oe.isDark(fe+1,Ne)&&Ne<W-1&&!oe.isDark(fe,Ne+1)&&(Fe[2]=!0),fe<W-1&&!oe.isDark(fe+1,Ne)&&Ne>0&&!oe.isDark(fe,Ne-1)&&(Fe[3]=!0);const X=Math.ceil((Ne+1)*L)-Math.floor(Ne*L),pe=Math.ceil((fe+1)*L)-Math.floor(fe*L);se.fillStyle=g,se.beginPath(),se.arc(Math.round(Ne*L)+Q+K,Math.round(fe*L)+Q+K,Q,0,2*Math.PI,!1),se.closePath(),se.fill(),Fe[0]||se.fillRect(Math.round(Ne*L)+K,Math.round(fe*L)+K,X/2,pe/2),Fe[1]||se.fillRect(Math.round(Ne*L)+K+Math.floor(X/2),Math.round(fe*L)+K,X/2,pe/2),Fe[2]||se.fillRect(Math.round(Ne*L)+K+Math.floor(X/2),Math.round(fe*L)+K+Math.floor(pe/2),X/2,pe/2),Fe[3]||se.fillRect(Math.round(Ne*L)+K,Math.round(fe*L)+K+Math.floor(pe/2),X/2,pe/2)}}else for(let Q=0;Q<W;Q++)for(let fe=0;fe<W;fe++)if(oe.isDark(Q,fe)&&!this.isInPositioninZone(Q,fe,ne)&&!this.removeCoordinateBehindLogo(w??!1,Q,fe,re,ue,Ee,Oe,L,K,x,G,B)){se.fillStyle=g;const Ne=Math.ceil((fe+1)*L)-Math.floor(fe*L),Fe=Math.ceil((Q+1)*L)-Math.floor(Q*L);se.fillRect(Math.round(fe*L)+K,Math.round(Q*L)+K,Ne,Fe)}for(let Q=0;Q<3;Q++){const{row:fe,col:Ne}=ne[Q];let Fe=S,X;Array.isArray(Fe)&&(Fe=Fe[Q]),typeof Fe=="number"&&(Fe=[Fe,Fe,Fe,Fe]),M?Array.isArray(M)?X=M[Q]:X=M:X=g,this.drawPositioningPattern(se,L,K,fe,Ne,X,Fe)}if(x){const Q=new Image;c&&(Q.crossOrigin="Anonymous"),Q.onload=fe=>{if(se.save(),G){se.beginPath(),se.strokeStyle=d,se.fillStyle=d;const Ne=re+2*G,Fe=ue+2*G,X=Ee+K-G,pe=Oe+K-G;if(B==="circle"){const Ie=X+Ne/2,Pe=pe+Fe/2;se.ellipse(Ie,Pe,Ne/2,Fe/2,0,0,2*Math.PI),se.stroke(),se.fill()}else se.roundRect(X,pe,Ne,Fe,U),se.stroke(),se.fill()}se.globalAlpha=b,se.drawImage(Q,Ee+K,Oe+K,re,ue),se.restore(),_&&_(fe)},Q.src=x}}render(){const r=+this.props.size+2*+this.props.quietZone;return sa.createElement("canvas",{id:this.props.id??"react-qrcode-logo",height:r,width:r,style:{height:r+"px",width:r+"px",...this.props.style},ref:this.canvasRef})}}function Lo(s,r,a=new WeakMap){if(Object.is(s,r))return!0;if(typeof s!=typeof r||s==null||r==null)return!1;if(typeof s=="function"||typeof r=="function")return s===r;if(typeof s=="object"&&typeof r=="object"){if(a.has(s)&&a.get(s)===r)return!0;a.set(s,r)}if(s instanceof Date&&r instanceof Date)return s.getTime()===r.getTime();if(Array.isArray(s)&&Array.isArray(r)){if(s.length!==r.length)return!1;for(let c=0;c<s.length;c++)if(!Lo(s[c],r[c],a))return!1;return!0}if(s instanceof Set&&r instanceof Set){if(s.size!==r.size)return!1;for(const c of s)if(![...r].some(d=>Lo(c,d,a)))return!1;return!0}if(s instanceof Map&&r instanceof Map){if(s.size!==r.size)return!1;for(const[c,d]of s)if(!r.has(c)||!Lo(d,r.get(c),a))return!1;return!0}if(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null){const c=Object.keys(s),d=Object.keys(r);if(c.length!==d.length)return!1;for(const g of c)if(!d.includes(g)||!Lo(s[g],r[g],a))return!1;return!0}try{return JSON.stringify(s)===JSON.stringify(r)}catch{return!1}}function N_(s){const a={...{ecLevel:"M",enableCORS:!1,size:512,quietZone:10,bgColor:"#FFFFFF",fgColor:"#000000",logoImage:"",logoWidth:30,logoHeight:30,logoOpacity:1,qrStyle:"squares",eyeRadius:30},...s.options};return C.jsx(T_,{value:s.url,...a})}const yp="http://localhost:3000/api";console.log(yp);const O_=async()=>{const{data:s,error:r}=await Gr.auth.getSession();if(r)throw r;return s.session?.access_token||null},xd=async(s,{method:r="GET",body:a,token:c}={})=>{const d=c||await O_();if(!d)throw new Error("Authentication required");const g=await fetch(`${yp}${s}`,{method:r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:a?JSON.stringify(a):void 0}),b=g.headers.get("content-type")?.includes("application/json")?await g.json().catch(()=>null):null;if(!g.ok){const _=b?.message||b?.error||g.statusText;throw new Error(_)}return b},k2={name:""},pd="qr-codes";function R_(){const{session:s}=Di(),[r,a]=Z.useState(k2),[c,d]=Z.useState(null),[g,x]=Z.useState(""),[b,_]=Z.useState(null),[w,T]=Z.useState(!1),[S,M]=Z.useState(""),B=()=>{a(k2),d(null),x(""),_(null)},U=oe=>`artworks/${oe}.png`,z=async(oe,xe)=>{await xd(`/artworks/${oe}`,{method:"DELETE",token:xe}),await Gr.storage.from(pd).remove([U(oe)])},H=async()=>{M("");try{b?.id&&await z(b.id,s?.access_token),B()}catch(oe){M(`Impossible de supprimer l'uvre nouvellement cre : ${oe.message}`)}},$=async oe=>{oe.preventDefault(),M("");const xe=s?.access_token;if(!xe){M("Authentification requise pour crer un QR code.");return}const se=r.name.trim();if(!se){M("Le nom de lartwork est obligatoire.");return}T(!0);try{b?.id&&await z(b.id,xe);const R=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,W=await xd("/artworks",{method:"POST",token:xe,body:{name:se,qr_code:R}}),he=`${"http://localhost:5173".replace(/\/$/,"")}/chat/${W.id}`;_(W),x(he),d({ecLevel:"M",enableCORS:!1,size:300,quietZone:10,bgColor:"#FFFFFF",fgColor:"#000000",logoImage:"",logoWidth:40,logoHeight:40,qrStyle:"squares",logoOpacity:"1,320"});const re=await te(),ue=await new Promise((fe,Ne)=>re.toBlob(Fe=>Fe?fe(Fe):Ne(new Error("chec de la gnration de limage")),"image/png")),Ee=U(W.id),{error:Oe}=await Gr.storage.from(pd).upload(Ee,ue,{upsert:!0,contentType:"image/png"});if(Oe)throw Oe;const{data:K}=Gr.storage.from(pd).getPublicUrl(Ee),ne=K?.publicUrl,Q=await xd(`/artworks/${W.id}`,{method:"PATCH",token:xe,body:{qr_code:ne||""}});_(Q)}catch(R){M(R.message??"Une erreur est survenue lors de la cration du QR code.")}finally{T(!1)}},te=async()=>{for(let oe=0;oe<10;oe+=1){const xe=document.getElementById("react-qrcode-logo");if(xe)return xe;await new Promise(se=>setTimeout(se,100))}throw new Error("Impossible de rcuprer le canvas du QR code.")},G=()=>{const oe=document.getElementById("react-qrcode-logo");if(oe){const xe=oe.toDataURL("image/png").replace("image/png","image/octet-stream"),se=document.createElement("a");se.href=xe,se.download=`${b?.name||"qrcode"}.png`,document.body.appendChild(se),se.click(),document.body.removeChild(se)}};return C.jsx("div",{className:"min-h-screen  py-8 px-4",children:C.jsxs("div",{className:"max-w-3xl mx-auto",children:[C.jsx("div",{className:"mb-6",children:C.jsxs(Ri,{to:"/",className:"flex items-center gap-20 text-orange-600 hover:text-orange-700 font-medium",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6",children:C.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),"Gnrer QR Code"]})}),C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6",children:[C.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Saisissez le nom de l'oeuvre. ",C.jsx("br",{}),C.jsx("i",{children:"Ce nom pourra tre modifi plus tard."})]}),C.jsxs("form",{className:"space-y-4",onSubmit:$,children:[C.jsx("div",{children:C.jsx("input",{type:"text",value:r.name,onChange:oe=>a({...r,name:oe.target.value}),disabled:!!g,className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none text-gray-400 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed",placeholder:"Ex : Sculpture principale"})}),S&&C.jsx("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200 text-sm text-red-700",children:S}),!g&&C.jsxs("div",{className:"flex justify-between flex-wrap gap-3",children:[C.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg shadow disabled:opacity-60",children:w?"Cration en cours...":"Confirmer"}),C.jsx("button",{type:"button",onClick:H,disabled:w||!b,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold rounded-lg shadow disabled:opacity-60",children:"Annuler"})]})]}),b&&g&&C.jsx("div",{className:"flex justify-center my-6",children:C.jsx(N_,{url:g,options:c})}),g&&C.jsxs("button",{type:"button",onClick:G,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow flex items-center justify-center gap-2",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v2.25a2.25 2.25 0 0 1-2.25 2.25h-10.5A2.25 2.25 0 0 1 4.5 16.5v-2.25m3.75-3 3 3m0 0 3-3m-3 3V3.75"})}),"Tlcharger"]})]})]})})}function I_(){const[s,r]=Z.useState(null),a=[{id:"explorateur",name:"Explorateur",badge:"ACTUEL",badgeColor:"bg-gray-500",price:"Gratuit",icon:C.jsx(n0,{className:"w-8 h-8 text-gray-500"}),features:[{text:"3 messages par uvre",included:!0},{text:"Scan illimit",included:!0},{text:"Pas de voix",included:!1},{text:"Pas de qutes",included:!1}],buttonText:"Plan actuel",buttonStyle:"bg-white text-gray-700 border-2 border-gray-300",borderColor:"border-gray-200"},{id:"createur",name:"Crateur",badge:"POPULAIRE",badgeColor:"bg-orange-500",price:"9.99",priceSubtext:"par mois",icon:C.jsx(bE,{className:"w-8 h-8 text-orange-500"}),features:[{text:"Messages texte illimits",included:!0},{text:"Accs prioritaire nouvelles uvres",included:!0},{text:"Historique complet",included:!0},{text:"Badge Premium",included:!0},{text:"Support prioritaire",included:!0}],buttonText:"S'abonner maintenant",buttonStyle:"bg-orange-500 text-white hover:bg-orange-600",borderColor:"border-orange-500",highlighted:!0},{id:"pack-voix",name:"Pack Voix",subtitle:"pour 1 heure de conversation vocale",price:"6",icon:C.jsx(Yo,{className:"w-8 h-8 text-blue-600"}),features:[{text:"Parle avec les uvres",included:!0},{text:"Voix unique par uvre",included:!0},{text:"Pas d'expiration",included:!0}],buttonText:"Acheter des crdits",buttonStyle:"bg-white text-blue-600 border-2 border-blue-600 hover:bg-blue-50",borderColor:"border-blue-600"},{id:"pass-ville",name:"Pass Ville",subtitle:"Dbride une ville entire",price:"Variable",icon:C.jsx(Uu,{className:"w-8 h-8 text-red-500"}),features:[{text:"Messages illimits dans une ville",included:!0},{text:"Toutes les qutes de la ville",included:!0},{text:"Valable 30 jours",included:!0}],buttonText:"Explorer les Pass",buttonStyle:"bg-white text-red-500 border-2 border-red-500 hover:bg-red-50",borderColor:"border-red-500"}];return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[C.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:C.jsx(sE,{className:"w-6 h-6"})}),C.jsx("h1",{className:"text-lg font-semibold",children:"Choisis ton Exprience"}),C.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:C.jsx(r0,{className:"w-6 h-6"})})]})}),C.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[C.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[C.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 md:w-24 md:h-24 bg-orange-500 rounded-2xl mb-4 p-3",children:C.jsx("img",{src:lp,alt:"MAO Logo",className:"w-full h-full object-contain"})}),C.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"Parle sans limites avec l'art"}),C.jsx("p",{className:"text-gray-600 text-sm md:text-base",children:"Dbride ton exprience MAO"})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8",children:a.map(c=>C.jsxs("div",{className:`bg-white rounded-2xl p-6 border-2 ${c.borderColor} ${c.highlighted?"shadow-lg relative":"shadow-sm"} transition-all hover:shadow-md`,children:[c.badge&&C.jsx("div",{className:"absolute -top-3 right-4",children:C.jsx("span",{className:`${c.badgeColor} text-white text-xs font-bold px-3 py-1 rounded-full`,children:c.badge})}),C.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[C.jsx("div",{children:c.icon}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-bold text-lg text-gray-900",children:c.name}),c.subtitle&&C.jsx("p",{className:"text-xs text-gray-600",children:c.subtitle})]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("div",{className:`text-3xl md:text-4xl font-bold ${c.id==="createur"?"text-orange-500":c.id==="pack-voix"?"text-blue-600":c.id==="pass-ville"?"text-red-500":"text-gray-900"}`,children:c.price}),c.priceSubtext&&C.jsx("div",{className:"text-sm text-gray-600",children:c.priceSubtext})]}),C.jsx("div",{className:"space-y-3 mb-6",children:c.features.map((d,g)=>C.jsxs("div",{className:"flex items-start gap-2",children:[C.jsx(up,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${d.included?"text-green-500":"text-gray-300"}`}),C.jsx("span",{className:`text-sm ${d.included?"text-gray-700":"text-gray-400"}`,children:d.text})]},g))}),C.jsx("button",{className:`w-full py-3 px-4 rounded-xl font-semibold transition-all ${c.buttonStyle}`,onClick:()=>r(c.id),children:c.buttonText})]},c.id))}),C.jsx("div",{className:"text-center mb-8",children:C.jsx("button",{className:"text-orange-500 font-semibold text-sm hover:text-orange-600 transition-colors inline-flex items-center gap-2",children:"Voir la comparaison dtaille "})}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto",children:[C.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[C.jsx(yE,{className:"w-8 h-8 text-gray-400 mb-2"}),C.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Paiement scuris"}),C.jsx("p",{className:"text-xs text-gray-500",children:"Stripe"})]}),C.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[C.jsx(kE,{className:"w-8 h-8 text-gray-400 mb-2"}),C.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Annule quand tu veux"})]}),C.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[C.jsx(ME,{className:"w-8 h-8 text-gray-400 mb-2"}),C.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Remboursement"}),C.jsx("p",{className:"text-xs text-gray-500",children:"7 jours"})]})]}),C.jsx("p",{className:"text-center text-xs text-gray-500 mt-8 max-w-2xl mx-auto",children:"En souscrivant, tu acceptes nos conditions gnrales"})]})]})}const wp="/assets/default_image-DTDMkgIe.jpeg",D_=({onBack:s,artwork:r})=>{const c={backgroundImage:`url(${r?.image||wp})`,backgroundSize:"cover",backgroundPosition:"center"},d=()=>r?.latitude&&r?.longitude?"Belleville, Paris 20e":r?.description||"Son emplacement demeure un secret bien gard";return C.jsxs("div",{className:"relative w-11/12 mx-auto mt-4 h-64 overflow-hidden rounded-3xl",children:[C.jsx("div",{className:"absolute inset-0",style:c}),C.jsx("div",{className:"absolute inset-0 bg-black/20"}),C.jsxs("div",{className:"relative z-10 h-full flex flex-col p-4",children:[C.jsxs("div",{className:"flex justify-between items-start mb-auto",children:[C.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-lg hover:bg-gray-100 transition-colors","aria-label":"Retour",children:C.jsx("svg",{className:"w-6 h-6 text-gray-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),C.jsxs("button",{className:"px-4 py-2 text-orange-600 bg-gray-100 rounded-lg flex items-center space-x-2 shadow-lg hover:bg-gray-50 transition-colors","aria-label":"Activer",children:[C.jsx("span",{className:"font-medium text-sm",children:"Activer"}),C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-1.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})]})]}),C.jsxs("div",{className:"mt-auto mb-4",children:[C.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:r?.name||"nergie Urbaine"}),C.jsxs("div",{className:"flex items-center space-x-1 text-white",children:[C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),C.jsx("span",{className:"text-sm font-medium",children:d()})]})]})]})]})},M_=({message:s,artwork:r,introAudioControls:a})=>{const c=s.sender==="bot",d=r?.image||wp,g=x=>{const b=x.getHours(),_=x.getMinutes();return`${b}:${_.toString().padStart(2,"0")}`};return C.jsxs("div",{className:`flex ${c?"justify-start items-start":"justify-end"} space-x-2`,children:[c&&C.jsx("div",{className:"w-10 h-10 rounded-full shrink-0 mt-1 relative overflow-hidden border-2 border-white shadow-md",children:C.jsx("img",{src:d,alt:"Avatar du bot",className:"w-full h-full object-cover rounded-full"})}),C.jsxs("div",{className:`max-w-[75%] ${c?"":"flex flex-col items-end"}`,children:[C.jsxs("div",{className:`rounded-2xl p-3 ${c?"bg-gray-100":"bg-orange-500 text-white"}`,children:[s.type==="text"&&C.jsx("div",{children:C.jsx("p",{className:`text-sm ${c?"text-gray-800":"text-white"}`,children:s.text})}),s.type==="audio"&&C.jsx("div",{className:"space-y-2",children:C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("button",{onClick:a?.onToggle,className:"w-9 h-9 rounded-full bg-orange-500 hover:bg-orange-600 text-white flex items-center justify-center transition-colors","aria-label":a?.isPlaying?"Pause":"Lecture",children:a?.isPlaying?C.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:C.jsx("path",{d:"M4 3h2v10H4zm6 0h2v10h-2z"})}):C.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:C.jsx("path",{d:"M4 3l9 5-9 5V3z"})})}),C.jsx("div",{className:"flex items-end gap-1 h-10 flex-1",children:(a?.bars||[]).map((x,b)=>C.jsx("span",{className:"w-1 bg-orange-400 rounded-full transition-all duration-150",style:{height:`${x}%`,minHeight:"10px",maxHeight:"40px"}},b))}),C.jsx("button",{onClick:a?.onReplay,className:"text-xs font-semibold text-orange-600 hover:text-orange-700",children:"Rcouter"})]})})]}),!c&&s.timestamp&&C.jsx("span",{className:"text-xs text-gray-500 mt-1",children:g(s.timestamp)})]})]})},B_=()=>{const s=la(),r=()=>{s("/login")},a=()=>{console.log("Tlcharger l'app")};return C.jsx("div",{className:"flex justify-center my-4",children:C.jsxs("div",{className:"border-2 border-orange-500 rounded-2xl px-6 py-5 bg-[#FFF8F0] max-w-md w-full",children:[C.jsxs("div",{className:"flex items-center mb-3",children:[C.jsx("svg",{className:"w-6 h-6 text-orange-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),C.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Pour continuer la conversation..."})]}),C.jsx("p",{className:"text-sm text-gray-800 mb-4",children:"Dcouvre des milliers d'uvres et discute sans limite avec les artistes IA."}),C.jsxs("div",{className:"space-y-3",children:[C.jsx("button",{onClick:r,className:"w-full py-3 px-4 bg-orange-500 text-white font-bold rounded-xl hover:bg-orange-600 transition-colors shadow-md",children:"Crer un compte"}),C.jsxs("button",{onClick:a,className:"w-full py-3 px-4 bg-transparent border-2 border-orange-500 text-orange-500 font-bold rounded-xl hover:bg-orange-50 transition-colors flex items-center justify-center space-x-2",children:[C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),C.jsx("span",{children:"Tlcharger l'App"})]})]})]})})},j_=({artwork:s,messages:r,setMessages:a,isAuthenticated:c,introAudioControls:d,isGenerating:g})=>{const x=Z.useRef(null);Z.useEffect(()=>{s?.first_message&&r.length>0&&r[0]?.sender==="bot"&&a(T=>{const S=[...T];return S[0]?.sender==="bot"&&(S[0]={...S[0],text:s.first_message}),S})},[s?.first_message]),Z.useEffect(()=>{x.current?.scrollIntoView({behavior:"smooth"})},[r]);const _=r.filter(T=>T.sender==="user").length,w=!c&&_>=2;return C.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:C.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[r.map((T,S)=>{const M=r.slice(0,S+1).filter(U=>U.sender==="user").length,B=T.sender==="user"&&M===2;return C.jsxs(sa.Fragment,{children:[C.jsx(M_,{message:T,artwork:s,introAudioControls:T.id==="intro-audio"?d:void 0}),B&&w&&C.jsx(B_,{})]},T.id)}),C.jsx("div",{ref:x}),g&&C.jsxs("div",{className:"flex justify-start items-center gap-2 text-sm text-gray-500",children:[C.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 animate-pulse"}),C.jsx("span",{children:"Rponse en cours..."})]})]})})},k_=({onSendMessage:s,disabled:r=!1})=>{const[a,c]=Z.useState(""),d=()=>{a.trim()&&s&&!r&&(s(a),c(""))},g=x=>{x.key==="Enter"&&!x.shiftKey&&!r&&(x.preventDefault(),d())};return C.jsx("div",{className:"border-t border-gray-200 p-4 bg-white",children:C.jsxs("div",{className:"flex items-center space-x-2 max-w-4xl mx-auto",children:[C.jsx("input",{type:"text",value:a,onChange:x=>!r&&c(x.target.value),onKeyPress:g,placeholder:r?"Connectez-vous pour continuer...":"cris ton message...",disabled:r,className:`flex-1 px-4 py-3 bg-white rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm ${r?"bg-gray-100 cursor-not-allowed opacity-60":""}`}),C.jsx("button",{onClick:d,disabled:!a.trim()||r,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${r||!a.trim()?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-orange-500 text-white hover:bg-orange-600 shadow-lg"}`,"aria-label":"Envoyer",children:C.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})},bp="http://localhost:3000/api",vp=async()=>{try{const{data:{session:s}}=await Gr.auth.getSession();return s?.access_token||null}catch(s){return console.error("Erreur lors de la rcupration du token:",s),null}},Ep=async s=>{try{const r=await vp(),a={"Content-Type":"application/json"};r&&(a.Authorization=`Bearer ${r}`);const c=await fetch(`${bp}/artworks/${s}`,{method:"GET",headers:a});if(!c.ok)throw c.status===404?new Error(`Artwork avec l'ID "${s}" introuvable`):c.status===403?new Error("Accs interdit. Veuillez vous connecter pour accder  cette ressource."):new Error(`Erreur lors de la rcupration de l'artwork: ${c.statusText}`);return await c.json()}catch(r){throw console.error("Erreur lors de la rcupration de l'artwork:",r),r}},L_=async(s,r)=>{try{const a=await vp();if(!a)throw new Error("Authentification requise pour modifier une uvre.");const c=await fetch(`${bp}/artworks/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(r)});if(!c.ok){const d=await c.text();throw new Error(d||"chec de la mise  jour de luvre.")}return await c.json()}catch(a){throw console.error("Erreur lors de la mise  jour de l'artwork:",a),a}},P_="http://localhost:3000/api",U_=async()=>{try{const{data:{session:s}}=await Gr.auth.getSession();return s?.access_token||null}catch(s){return console.error("Erreur lors de la rcupration du token:",s),null}},F_=async(s,r,a=!1)=>{try{const c=await U_(),d={"Content-Type":"application/json"};c&&(d.Authorization=`Bearer ${c}`);const g=await fetch(`${P_}/chat/message`,{method:"POST",headers:d,body:JSON.stringify({artworkId:s,messages:r,voiceEnabled:a})});if(!g.ok){if(g.status===402)throw new Error("Crdits puiss. Veuillez recharger votre compte.");if(g.status===403)throw new Error("Accs interdit. Veuillez vous connecter.");if(g.status===400){const b=await g.json().catch(()=>({}));throw new Error(b.message||"Requte invalide")}throw new Error(`Erreur lors de l'envoi du message: ${g.statusText}`)}const x=await g.json();return{content:x?.content??x?.text??"",raw:x}}catch(c){throw console.error("Erreur lors de l'envoi du message:",c),c}},L2="/assets/hello-CusUUebc.mp3",z_=()=>{const s=la(),{id:r}=sx(),{user:a}=Di(),[c,d]=Z.useState(null),[g,x]=Z.useState(!0),[b,_]=Z.useState(null),[w,T]=Z.useState([]),[S,M]=Z.useState(!1),[B,U]=Z.useState([30,55,40,65,35,50]),[z,H]=Z.useState(!1),[$,te]=Z.useState(null),G=Z.useRef(null),oe=Z.useRef(!1),xe=Z.useRef(null);Z.useEffect(()=>{(async()=>{if(!r){_("ID de l'artwork manquant"),x(!1);return}try{x(!0);const Oe=await Ep(r);d(Oe);const K=Oe?.first_message||"Salut ! Je suis Libert Urbaine et je reprsente la jeunesse qui refuse le silence. Tu vois mes couleurs rouges et bleues ? Elles symbolisent la passion et la paix qui coexistent dans nos rues.",ne=Oe?.audio_url||Oe?.audioUrl||Oe?.audio||L2;T([{id:"intro-audio",text:K,sender:"bot",timestamp:new Date,type:"audio",audioSrc:ne}]),_(null)}catch(Oe){console.error("Erreur lors du chargement de l'artwork:",Oe),_(Oe.message||"Erreur lors du chargement de l'artwork")}finally{x(!1)}})()},[r]),Z.useEffect(()=>{if(g){G.current?.pause(),M(!1),xe.current&&(clearTimeout(xe.current),xe.current=null);return}if(b||!c||w.length===0)return;const Ee=w[0]?.audioSrc||c.audio_url||c.audioUrl||c.audio||L2;return G.current?G.current.src!==new URL(Ee,window.location.href).href&&(G.current.pause(),G.current.src=Ee,G.current.loop=!1):(G.current=new Audio(Ee),G.current.loop=!1,G.current.volume=.8,G.current.onended=()=>M(!1)),!oe.current&&!xe.current&&(xe.current=setTimeout(()=>{G.current.play().then(()=>{M(!0),oe.current=!0}).catch(()=>M(!1)),xe.current=null},500)),()=>{G.current?.pause(),xe.current&&(clearTimeout(xe.current),xe.current=null)}},[c,w,g,b]),Z.useEffect(()=>{let Ee;return S?Ee=setInterval(()=>{U(Oe=>Oe.map(()=>Math.floor(25+Math.random()*55)))},180):U(Oe=>Oe.map(K=>Math.max(12,K-20))),()=>{Ee&&clearInterval(Ee)}},[S]);const se=()=>{s(-1)},R=()=>{G.current&&(S?(G.current.pause(),M(!1)):(G.current.play().then(()=>M(!0)).catch(()=>M(!1)),oe.current=!0))},W=()=>{G.current&&(G.current.currentTime=0,G.current.play().then(()=>M(!0)).catch(()=>M(!1)),oe.current=!0)},he=w.filter(Ee=>Ee.sender==="user").length,re=!a&&he>=2,ue=Ee=>{if(!Ee.trim()||re||z)return;const Oe={id:`user-${Date.now()}`,text:Ee.trim(),sender:"user",timestamp:new Date,type:"text"},K=[...w,Oe];T(K),H(!0),te(null);const ne=K.filter(fe=>fe.type==="text").map(fe=>({sender:fe.sender,text:fe.text})),Q=he+1;if(!a&&Q>=3){H(!1);return}F_(r,ne,!1).then(fe=>{const Ne={id:`bot-${Date.now()}`,text:fe?.content||"Je rflchis...",sender:"bot",timestamp:new Date,type:"text"};T(Fe=>[...Fe,Ne])}).catch(fe=>{const Ne={id:`error-${Date.now()}`,text:fe.message||"Impossible de gnrer une rponse pour le moment.",sender:"bot",timestamp:new Date,type:"text"};te(fe.message||null),T(Fe=>[...Fe,Ne])}).finally(()=>{H(!1)})};return g?C.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-white",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),C.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement de l'oeuvre..."})]})}):b||!c?C.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-white",children:C.jsxs("div",{className:"text-center",children:[C.jsx("p",{className:"text-red-600 mb-4",children:b||"Artwork introuvable"}),C.jsx("button",{onClick:se,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Retour"})]})}):C.jsxs("div",{className:"h-screen w-full flex flex-col bg-white overflow-hidden",children:[C.jsx(D_,{onBack:se,artwork:c}),C.jsx(j_,{artwork:c,messages:w,setMessages:T,isAuthenticated:!!a,introAudioControls:{isPlaying:S,onToggle:R,onReplay:W,bars:B},isGenerating:z}),$&&C.jsx("div",{className:"text-center text-sm text-red-600 mb-1",children:$}),C.jsx(k_,{onSendMessage:ue,disabled:re||z})]})},H_=()=>{const s=la(),r={artworks:24,views:1847,conversations:523,scans:89},a=[{id:1,text:'Nouveau scan sur "Libert Urbaine"',time:"Il y a 5 min"},{id:2,text:"3 nouvelles conversations",time:"Il y a 12 min"},{id:3,text:'uvre "Rve Color" publie',time:"Il y a 1h"}];return C.jsx("div",{className:"min-h-screen bg-white p-6",children:C.jsxs("div",{className:"max-w-6xl mx-auto",children:[C.jsx("div",{className:"mb-6",children:C.jsx(dp,{})}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Bonjour MAO"}),C.jsx("p",{className:"text-gray-600",children:"Voici un aperu de tes uvres"})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[C.jsxs("div",{className:"bg-white border border-gray-300 rounded-xl p-6",children:[C.jsx("div",{className:"flex items-center justify-between mb-4",children:C.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center",children:C.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),C.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:r.artworks}),C.jsx("div",{className:"text-gray-600",children:"uvres"})]}),C.jsxs("div",{className:"bg-white border border-gray-300 rounded-xl p-6",children:[C.jsx("div",{className:"flex items-center justify-between mb-4",children:C.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:C.jsxs("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})}),C.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:r.views.toLocaleString()}),C.jsx("div",{className:"text-gray-600",children:"Vues"})]}),C.jsxs("div",{className:"bg-white border border-gray-300 rounded-xl p-6",children:[C.jsx("div",{className:"flex items-center justify-between mb-4",children:C.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center",children:C.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})}),C.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:r.conversations}),C.jsx("div",{className:"text-gray-600",children:"Conversations"})]}),C.jsxs("div",{className:"bg-white border border-gray-300 rounded-xl p-6",children:[C.jsx("div",{className:"flex items-center justify-between mb-4",children:C.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center",children:C.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})})}),C.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:r.scans}),C.jsx("div",{className:"text-gray-600",children:"Scans"})]})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[C.jsx("button",{onClick:()=>s("/scanner"),className:"py-4 px-6 bg-white border-2 border-orange-500 text-orange-500 font-bold rounded-xl hover:bg-orange-50 transition-colors flex items-center justify-center space-x-2",children:C.jsx("span",{children:"Scanner un QR code"})}),C.jsx("button",{onClick:()=>s("/generator"),className:"py-4 px-6 bg-orange-500 text-white font-bold rounded-xl hover:bg-orange-600 transition-colors flex items-center justify-center space-x-2 shadow-md",children:C.jsx("span",{children:"Gnrer un QR code"})})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Activit Rcente"}),C.jsx("div",{className:"space-y-3",children:a.map(c=>C.jsxs("div",{className:"bg-white border border-gray-300 rounded-xl p-4 flex justify-between items-center",children:[C.jsx("span",{className:"text-gray-800",children:c.text}),C.jsx("span",{className:"text-gray-500 text-sm",children:c.time})]},c.id))})]})]})})};function V_(){return C.jsx("div",{children:"Page Not found"})}const P2={place_type:["rue","alle","passage","impasse","cour","parc","faade","mur","pont","gare","transport","bar","caf","restaurant","cole","universit","hpital","muse","march","galerie","entrept","immeuble"],perceived_age:["enfant","prado","ado","jeune_adulte","adulte","senior"],perceived_gender:["fminin","masculin","non_binaire","neutre","mixte"],language_register:["trs_familier","familier","standard","formel","trs_formel"],base_mood:["joyeux","nergique","mlancolique","pensive","chill","mystrieux","sombre","lger","ludique","solennel"],voice_timbre:["trs_grave","grave","mdium_grave","mdium","mdium_aigu","aigu","trs_aigu"],voice_texture:["claire","douce","rauque","mtallique","creuse","profonde","cristalline","veloute"],voice_accent:["FR_parisien","FR_rgional","FR_standard","franais_ouest","franais_sud","beninois","ivoirien","camerounais","congolais","sngalais","neutre","anglophone"],voice_speed:["trs_lent","lent","modr","normal","rapide","trs_rapide"],sentence_style:["direct","conversationnel","potique","lyrique","punchline","humoristique","pdagogique","narratif","mystagogique","nigmatique","argumentatif"],general_tone:["chaleureux","amical","taquin","ironique","rassurant","protecteur","srieux","grave","contemplatif","introspectif","provocateur","subversif","ludique","cynique"]},U2={name:"",description:"",image:"",longitude:"",latitude:"",time:"",date:"",first_message:"",nearby_artworks:"",place_type:"",perceived_age:"",perceived_gender:"",language_register:"",base_mood:"",voice_timbre:"",voice_texture:"",voice_accent:"",voice_speed:"",sentence_style:"",general_tone:""},Ni={name:"Nom",description:"Description",image:"Image (URL)",longitude:"Longitude",latitude:"Latitude",time:"Heure (HH:MM)",date:"Date (YYYY-MM-DD)",first_message:"Premier message",nearby_artworks:"uvres  proximit (IDs spars par des virgules)",place_type:"Type de lieu",perceived_age:"ge peru",perceived_gender:"Genre peru",language_register:"Niveau de langage",base_mood:"Humeur de base",voice_timbre:"Timbre de voix",voice_texture:"Texture de voix",voice_accent:"Accent de voix",voice_speed:"Vitesse de voix",sentence_style:"Style de phrase",general_tone:"Ton gnral"},G_=({name:s,value:r,onChange:a,options:c})=>C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700",children:Ni[s]}),C.jsxs("select",{name:s,value:r,onChange:a,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none bg-white",children:[C.jsx("option",{value:"",children:"Non renseign"}),c.map(d=>C.jsx("option",{value:d,children:d},d))]})]});function q_(){const{id:s}=sx(),r=la(),{isAdmin:a}=Di(),[c,d]=Z.useState(U2),[g,x]=Z.useState(!0),[b,_]=Z.useState(!1),[w,T]=Z.useState(""),[S,M]=Z.useState(""),B=Z.useMemo(()=>c.nearby_artworks?Array.isArray(c.nearby_artworks)?c.nearby_artworks.join(", "):c.nearby_artworks:"",[c.nearby_artworks]);Z.useEffect(()=>{(async()=>{try{T(""),x(!0);const $=await Ep(s);d({...U2,...$,longitude:$.longitude??"",latitude:$.latitude??"",time:$.time??"",date:$.date??"",nearby_artworks:$.nearby_artworks??""})}catch($){T($.message||"Impossible de charger l'uvre.")}finally{x(!1)}})()},[s]);const U=H=>{const{name:$,value:te}=H.target;d(G=>({...G,[$]:te})),M("")},z=async H=>{H.preventDefault(),T(""),M(""),_(!0);try{const $={},te={...c,nearby_artworks:B},G=new Set(["id","created_at","updated_at","qr_code"]);Object.entries(te).forEach(([oe,xe])=>{if(!G.has(oe)){if(oe==="longitude"||oe==="latitude"){if(xe==="")return;const se=Number(xe);Number.isNaN(se)||($[oe]=se);return}if(oe==="nearby_artworks"){const se=(xe||"").split(",").map(R=>R.trim()).filter(Boolean);se.length?$.nearby_artworks=se:$.nearby_artworks=[];return}if(xe!==void 0){if(typeof xe=="string"&&xe===""&&P2[oe])return;$[oe]=xe}}}),await L_(s,$),M("Enregistr")}catch($){T($.message||"chec de la mise  jour.")}finally{_(!1)}};return a?C.jsx("div",{className:"min-h-screen py-8 px-4",children:C.jsxs("div",{className:"max-w-5xl mx-auto",children:[C.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[C.jsx(Ri,{to:"/admin",className:"flex items-center gap-3 text-orange-600 hover:text-orange-700 font-medium",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),C.jsx(Ri,{to:`/chat/${s}`,rel:"noreferrer",className:"flex items-center gap-1 text-gray-600 hover:text-gray-700 text-2xl",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6",children:C.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z"})})})]}),C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6",children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Fiche uvre"}),C.jsx("p",{className:"text-sm text-gray-600",children:"Modifier les informations associes au QR code."})]}),w&&C.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 border border-red-200 rounded-lg",children:w}),S&&C.jsx("div",{className:"mb-4 p-3 bg-green-50 text-green-700 border border-green-200 rounded-lg",children:S}),g?C.jsx("div",{className:"py-12 text-center text-gray-600",children:"Chargement..."}):C.jsxs("form",{className:"space-y-6",onSubmit:z,children:[C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{className:"space-y-1 md:col-span-2",children:[C.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[Ni.name," ",C.jsx("span",{className:"text-red-500",children:"*"})]}),C.jsx("input",{name:"name",value:c.name,onChange:U,required:!0,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none"})]}),C.jsxs("div",{className:"space-y-1 md:col-span-2",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700",children:Ni.description}),C.jsx("textarea",{name:"description",value:c.description||"",onChange:U,rows:3,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none"})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700",children:Ni.image}),C.jsx("input",{name:"image",value:c.image||"",onChange:U,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none",placeholder:"https://..."})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700",children:Ni.first_message}),C.jsx("textarea",{name:"first_message",value:c.first_message||"",onChange:U,rows:2,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none"})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700",children:Ni.longitude}),C.jsx("input",{name:"longitude",value:c.longitude,onChange:U,type:"number",step:"0.000001",className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none"})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700",children:Ni.latitude}),C.jsx("input",{name:"latitude",value:c.latitude,onChange:U,type:"number",step:"0.000001",className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none"})]})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700",children:Ni.date}),C.jsx("input",{name:"date",value:c.date||"",onChange:U,type:"date",className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none"})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700",children:Ni.time}),C.jsx("input",{name:"time",value:c.time||"",onChange:U,type:"time",className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none"})]})]}),C.jsxs("div",{className:"space-y-1 md:col-span-2",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700",children:Ni.nearby_artworks}),C.jsx("input",{name:"nearby_artworks",value:B,onChange:U,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none",placeholder:"id1, id2, id3"})]})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(P2).map(([H,$])=>C.jsx(G_,{name:H,value:c[H]||"",onChange:U,options:$},H))}),C.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[C.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg shadow disabled:opacity-60",children:b?"Enregistrement...":"Enregistrer"}),C.jsx(Ri,{to:"/admin",className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold rounded-lg shadow",children:"Annuler"})]})]})]})]})}):(r("/"),null)}const X_=iv([{element:C.jsx(GE,{}),children:[{path:"/",element:C.jsx(J4,{})},{path:"/subscription",element:C.jsx(I_,{})},{path:"/profile",element:C.jsx(VE,{children:C.jsx(zE,{})})}]},{path:"/admin",element:C.jsx(v2,{children:C.jsx(H_,{})})},{path:"/artworks/:id/edit",element:C.jsx(v2,{children:C.jsx(q_,{})})},{path:"/login",element:C.jsx($4,{})},{path:"/scanner",element:C.jsx(y_,{})},{path:"/generator",element:C.jsx(R_,{})},{path:"/chat/:id",element:C.jsx(z_,{})},{path:"*",element:C.jsx(V_,{})}]);Zy.createRoot(document.getElementById("root")).render(C.jsx(Z.StrictMode,{children:C.jsx(Q4,{children:C.jsx(pv,{router:X_})})}));
